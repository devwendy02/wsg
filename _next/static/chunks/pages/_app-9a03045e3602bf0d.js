(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{242:function(e,t,n){var r={"./cn/common":[3275,275],"./cn/common.json":[3275,275],"./en/common":[6668,464],"./en/common.json":[6668,464]};function i(e){if(!n.o(r,e))return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=r[e],i=t[0];return n.e(t[1]).then(function(){return n.t(i,19)})}i.keys=function(){return Object.keys(r)},i.id=242,e.exports=i},1746:function(e,t,n){"use strict";var r,i,o=n(1463),a=n(9182),s=n(1499),u=n(402),c=n(46),l=((i={})["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",i["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",i["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",i["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",i["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",i["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",i["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",i["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",i["recaptcha-error"]="ReCAPTCHA error.",i),h=new u.ErrorFactory("appCheck","AppCheck",l),f=new Map,d={activated:!1,tokenObservers:[]},p={enabled:!1};function g(e){return f.get(e)||d}function v(e,t){f.set(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var y="https://content-firebaseappcheck.googleapis.com/v1beta",m=function(){function e(e,t,n,r,i){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw Error("Proactive refresh lower bound greater than upper bound!")}return e.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(function(){})},e.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},e.prototype.isRunning=function(){return!!this.pending},e.prototype.process=function(e){return s.__awaiter(this,void 0,void 0,function(){var t;return s.__generator(this,function(n){switch(n.label){case 0:this.stop(),n.label=1;case 1:var r;return n.trys.push([1,6,,7]),this.pending=new u.Deferred,[4,(r=this.getNextRun(e),new Promise(function(e){setTimeout(e,r)}))];case 2:case 4:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return n.sent(),this.pending=new u.Deferred,[4,this.operation()];case 5:return n.sent(),this.process(!0).catch(function(){}),[3,7];case 6:return t=n.sent(),this.retryPolicy(t)?this.process(!1).catch(function(){}):this.stop(),[3,7];case 7:return[2]}})})},e.prototype.getNextRun=function(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b(){return self.grecaptcha}function _(e){if(!g(e).activated)throw h.create("use-before-activation",{appName:e.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w(e,t){var n=e.url,r=e.body;return s.__awaiter(this,void 0,void 0,function(){var e,i,o,a,u,c,l,f,d,p;return s.__generator(this,function(s){switch(s.label){case 0:e={"Content-Type":"application/json"},(i=t.getImmediate({optional:!0}))&&(e["X-Firebase-Client"]=i.getPlatformInfoString()),o={method:"POST",body:JSON.stringify(r),headers:e},s.label=1;case 1:return s.trys.push([1,3,,4]),[4,fetch(n,o)];case 2:return a=s.sent(),[3,4];case 3:throw u=s.sent(),h.create("fetch-network-error",{originalErrorMessage:u.message});case 4:if(200!==a.status)throw h.create("fetch-status-error",{httpStatus:a.status});s.label=5;case 5:return s.trys.push([5,7,,8]),[4,a.json()];case 6:return c=s.sent(),[3,8];case 7:throw l=s.sent(),h.create("fetch-parse-error",{originalErrorMessage:l.message});case 8:if(!(f=c.ttl.match(/^([\d.]+)(s)$/))||!f[2]||isNaN(Number(f[1])))throw h.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+c.ttl});return d=1e3*Number(f[1]),p=Date.now(),[2,{token:c.attestationToken,expireTimeMillis:p+d,issuedAtTimeMillis:p}]}})})}function E(e,t){var n=e.options;return{url:y+"/projects/"+n.projectId+"/apps/"+n.appId+":exchangeDebugToken?key="+n.apiKey,body:{debug_token:t}}}var I="firebase-app-check-store",C="debug-token",T=null;function S(){return T||(T=new Promise(function(e,t){try{var n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=function(t){e(t.target.result)},n.onerror=function(e){var n;t(h.create("storage-open",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(e){var t=e.target.result;0===e.oldVersion&&t.createObjectStore(I,{keyPath:"compositeKey"})}}catch(e){t(h.create("storage-open",{originalErrorMessage:e.message}))}}))}function k(e,t){return s.__awaiter(this,void 0,void 0,function(){var n,r;return s.__generator(this,function(i){switch(i.label){case 0:return[4,S()];case 1:return r=(n=i.sent().transaction(I,"readwrite")).objectStore(I).put({compositeKey:e,value:t}),[2,new Promise(function(e,t){r.onsuccess=function(t){e()},n.onerror=function(e){var n;t(h.create("storage-set",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}})]}})})}function D(e){return s.__awaiter(this,void 0,void 0,function(){var t,n;return s.__generator(this,function(r){switch(r.label){case 0:return[4,S()];case 1:return n=(t=r.sent().transaction(I,"readonly")).objectStore(I).get(e),[2,new Promise(function(e,r){n.onsuccess=function(t){var n=t.target.result;n?e(n.value):e(void 0)},t.onerror=function(e){var t;r(h.create("storage-get",{originalErrorMessage:null===(t=e.target.error)||void 0===t?void 0:t.message}))}})]}})})}function A(e){return e.options.appId+"-"+e.name}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var P=new c.Logger("@firebase/app-check");function N(e,t){return u.isIndexedDBAvailable()?k(A(e),t).catch(function(e){P.warn("Failed to write token to indexeddb. Error: "+e)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var x={error:"UNKNOWN_ERROR"};function O(e,t,n){return void 0===n&&(n=!1),s.__awaiter(this,void 0,void 0,function(){var r,i,o,a,c,l,h,f,d,y;return s.__generator(this,function(m){switch(m.label){case 0:if(_(e),i=(r=g(e)).token,o=void 0,i)return[3,2];return[4,r.cachedTokenPromise];case 1:(a=m.sent())&&F(a)&&(i=a,v(e,s.__assign(s.__assign({},r),{token:i})),L(e,{token:i.token})),m.label=2;case 2:if(!n&&i&&F(i))return[2,{token:i.token}];if(!p.enabled)return[3,6];return l=w,h=E,f=[e],[4,function(){return s.__awaiter(this,void 0,void 0,function(){var e;return s.__generator(this,function(t){if((e=p).enabled&&e.token)return[2,e.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")})})}()];case 3:return[4,l.apply(void 0,[h.apply(void 0,f.concat([m.sent()])),t])];case 4:return[4,N(e,c=m.sent())];case 5:return m.sent(),v(e,s.__assign(s.__assign({},r),{token:c})),[2,{token:c.token}];case 6:return m.trys.push([6,8,,9]),[4,r.provider.getToken()];case 7:return i=m.sent(),[3,9];case 8:return d=m.sent(),P.error(d),o=d,[3,9];case 9:var b;if(i)return[3,10];return b=o,y={token:u.base64.encodeString(JSON.stringify(x),!1),error:b},[3,12];case 10:return y={token:i.token},v(e,s.__assign(s.__assign({},r),{token:i})),[4,N(e,i)];case 11:m.sent(),m.label=12;case 12:return L(e,y),[2,y]}})})}function R(e,t,n,r,i){var o=g(e),a=s.__assign(s.__assign({},o),{tokenObservers:s.__spreadArray(s.__spreadArray([],o.tokenObservers),[{next:r,error:i,type:n}])});if(!a.tokenRefresher){var u=function(e,t){var n=this;return new m(function(){return s.__awaiter(n,void 0,void 0,function(){var n;return s.__generator(this,function(r){switch(r.label){case 0:if(g(e).token)return[3,2];return[4,O(e,t)];case 1:return n=r.sent(),[3,4];case 2:return[4,O(e,t,!0)];case 3:n=r.sent(),r.label=4;case 4:if(n.error)throw n.error;return[2]}})})},function(){return!0},function(){var t=g(e);if(!t.token)return 0;var n=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5;return Math.max(0,(n=Math.min(n,t.token.expireTimeMillis-3e5))-Date.now())},3e4,96e4)}(e,t);a.tokenRefresher=u}if(!a.tokenRefresher.isRunning()&&o.isTokenAutoRefreshEnabled&&a.tokenRefresher.start(),o.token&&F(o.token)){var c=o.token;Promise.resolve().then(function(){return r({token:c.token})}).catch(function(){})}else null==o.token&&o.cachedTokenPromise.then(function(e){e&&F(e)&&r({token:e.token})}).catch(function(){});v(e,a)}function M(e,t){var n=g(e),r=n.tokenObservers.filter(function(e){return e.next!==t});0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),v(e,s.__assign(s.__assign({},n),{tokenObservers:r}))}function L(e,t){for(var n=g(e).tokenObservers,r=0;r<n.length;r++){var i=n[r];try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch(e){}}}function F(e){return e.expireTimeMillis-Date.now()>0}function j(e,t,n,r){var i=n.render(r,{sitekey:t,size:"invisible"}),o=g(e);v(e,s.__assign(s.__assign({},o),{reCAPTCHAState:s.__assign(s.__assign({},o.reCAPTCHAState),{widgetId:i})}))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var U=function(){function e(e){this._siteKey=e}return e.prototype.getToken=function(){return s.__awaiter(this,void 0,void 0,function(){var e;return s.__generator(this,function(t){switch(t.label){case 0:if(!this._app||!this._platformLoggerProvider)throw h.create("use-before-activation",{appName:""});t.label=1;case 1:return t.trys.push([1,3,,4]),[4,function(e){return s.__awaiter(this,void 0,void 0,function(){var t;return s.__generator(this,function(n){switch(n.label){case 0:return _(e),[4,g(e).reCAPTCHAState.initialized.promise];case 1:return t=n.sent(),[2,new Promise(function(n,r){var i=g(e).reCAPTCHAState;t.ready(function(){n(t.execute(i.widgetId,{action:"fire_app_check"}))})})]}})})}(this._app)];case 2:return e=t.sent(),[3,4];case 3:throw t.sent(),h.create("recaptcha-error");case 4:var n,r,i;return[2,w((n=this._app,r=e,{url:y+"/projects/"+(i=n.options).projectId+"/apps/"+i.appId+":exchangeRecaptchaToken?key="+i.apiKey,body:{recaptcha_token:r}}),this._platformLoggerProvider)]}})})},e.prototype.initialize=function(e,t){var n,r,i,o,a,c,l;this._app=e,this._platformLoggerProvider=t,(n=this._siteKey,r=g(e),i=new u.Deferred,v(e,s.__assign(s.__assign({},r),{reCAPTCHAState:{initialized:i}})),o="fire_app_check_"+e.name,(a=document.createElement("div")).id=o,a.style.display="none",document.body.appendChild(a),(c=b())?c.ready(function(){j(e,n,c,o),i.resolve(c)}):((l=document.createElement("script")).src="https://www.google.com/recaptcha/api.js",l.onload=function(){var t=b();if(!t)throw Error("no recaptcha");t.ready(function(){j(e,n,t,o),i.resolve(t)})},document.head.appendChild(l)),i.promise).catch(function(){})},e}(),q=function(){function e(e){this._customProviderOptions=e}return e.prototype.getToken=function(){return s.__awaiter(this,void 0,void 0,function(){var e,t,n;return s.__generator(this,function(r){switch(r.label){case 0:if(!this._app)throw h.create("use-before-activation",{appName:""});return[4,this._customProviderOptions.getToken()];case 1:return e=r.sent(),n=null!==(t=u.issuedAtTime(e.token))&&t<Date.now()&&t>0?1e3*t:Date.now(),[2,s.__assign(s.__assign({},e),{issuedAtTimeMillis:n})]}})})},e.prototype.initialize=function(e){this._app=e},e}(),B="app-check-internal";(r=(o&&"object"==typeof o&&"default"in o?o:{default:o}).default).INTERNAL.registerComponent(new a.Component("appCheck",function(e){var t=e.getProvider("app").getImmediate(),n=e.getProvider("platform-logger");return{app:t,activate:function(e,r){return(/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t,n,r){var i=g(e);if(i.activated)throw h.create("already-activated",{appName:e.name});var o=s.__assign(s.__assign({},i),{activated:!0});o.cachedTokenPromise=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(e){return s.__awaiter(this,void 0,void 0,function(){var t,n;return s.__generator(this,function(r){switch(r.label){case 0:if(!u.isIndexedDBAvailable())return[3,5];t=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,D(A(e))];case 2:return t=r.sent(),[3,4];case 3:return n=r.sent(),P.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,t];case 5:return[2,void 0]}})})})(e).then(function(t){return t&&F(t)&&v(e,s.__assign(s.__assign({},g(e)),{token:t})),t}),"string"==typeof t?o.provider=new U(t):t instanceof U||t instanceof q?o.provider=t:o.provider=new q({getToken:t.getToken}),o.isTokenAutoRefreshEnabled=void 0===r?e.automaticDataCollectionEnabled:r,v(e,o),o.provider.initialize(e,n)}(t,e,n,r))},setTokenAutoRefreshEnabled:function(e){var n;(n=g(t)).tokenRefresher&&(!0===e?n.tokenRefresher.start():n.tokenRefresher.stop()),v(t,s.__assign(s.__assign({},n),{isTokenAutoRefreshEnabled:e}))},getToken:function(e){return function(e,t,n){return s.__awaiter(this,void 0,void 0,function(){var r;return s.__generator(this,function(i){switch(i.label){case 0:return[4,O(e,t,n)];case 1:if((r=i.sent()).error)throw r.error;return[2,{token:r.token}]}})})}(t,n,e)},onTokenChanged:function(e,r,i){var o,a;return o=function(){},a=function(){},o=null!=e.next?e.next.bind(e):e,null!=e.error?a=e.error.bind(e):r&&(a=r),R(t,n,"EXTERNAL",o,a),function(){return M(t,o)}},INTERNAL:{delete:function(){for(var e=g(t).tokenObservers,n=0;n<e.length;n++)M(t,e[n].next);return Promise.resolve()}}}},"PUBLIC").setServiceProps({ReCaptchaV3Provider:U,CustomProvider:q}).setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(e,t,n){e.getProvider(B).initialize()})),r.INTERNAL.registerComponent(new a.Component(B,function(e){var t=e.getProvider("app").getImmediate(),n=e.getProvider("platform-logger");return{getToken:function(e){return O(t,n,e)},addTokenListener:function(e){return R(t,n,"INTERNAL",e)},removeTokenListener:function(e){return M(t,e)}}},"PUBLIC").setInstantiationMode("EXPLICIT")),r.registerVersion("@firebase/app-check","0.3.2"),function(){var e=u.getGlobal();if("string"==typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===e.FIREBASE_APPCHECK_DEBUG_TOKEN){p.enabled=!0;var t=new u.Deferred;p.token=t,"string"==typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN?t.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):t.resolve(function(){return s.__awaiter(this,void 0,void 0,function(){var e,t;return s.__generator(this,function(n){switch(n.label){case 0:e=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,D(C)];case 2:return e=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:if(e)return[2,e];return k(C,t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})).catch(function(e){return P.warn("Failed to persist debug token to indexeddb. Error: "+e)}),console.log("AppCheck debug token: "+t+". You will need to whitelist it in the Firebase console for it to work"),[2,t]}})})}())}}()},1463:function(e,t,n){"use strict";n.r(t),n.d(t,{firebase:function(){return _}});var r,i,o=n(1499),a=n(402),s=n(9182),u=n(46),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new a.ErrorFactory("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Logger("@firebase/app"),g=function(){function e(e,t,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=(0,a.deepCopy)(e),this.container=new s.ComponentContainer(t.name),this._addComponent(new s.Component("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(e){return r._addComponent(e)})}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(e){return e.delete()}))}).then(function(){e.isDeleted_=!0})},e.prototype._getService=function(e,t){void 0===t&&(t=f),this.checkDestroyed_();var n,r=this.container.getProvider(e);return r.isInitialized()||(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)!=="EXPLICIT"||r.initialize(),r.getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=f),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){p.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},e}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var v=/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e(){var t=/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){var t={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),("object"!=typeof i||null===i)&&(i={name:i});var o=i;void 0===o.name&&(o.name=f);var s=o.name;if("string"!=typeof s||!s)throw l.create("bad-app-name",{appName:String(s)});if((0,a.contains)(t,s))throw l.create("duplicate-app",{appName:s});var u=new e(n,o,r);return t[s]=u,u},app:i,registerVersion:function(e,t,n){var r,i=null!==(r=d[e])&&void 0!==r?r:e;n&&(i+="-"+n);var a=i.match(/\s|\//),u=t.match(/\s|\//);if(a||u){var c=['Unable to register library "'+i+'" with version "'+t+'":'];a&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&u&&c.push("and"),u&&c.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),p.warn(c.join(" "));return}o(new s.Component(i+"-version",function(){return{library:i,version:t}},"VERSION"))},setLogLevel:u.setLogLevel,onLog:function(e,t){if(null!==e&&"function"!=typeof e)throw l.create("invalid-log-argument");(0,u.setUserLogHandler)(e,t)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:o,removeApp:function(e){delete t[e]},components:n,useAsService:function(e,t){return"serverAuth"===t?null:t}}};function i(e){if(e=e||f,!(0,a.contains)(t,e))throw l.create("no-app",{appName:e});return t[e]}function o(o){var s=o.name;if(n.has(s))return p.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var u=function(e){if(void 0===e&&(e=i()),"function"!=typeof e[s])throw l.create("invalid-app-argument",{appName:s});return e[s]()};void 0!==o.serviceProps&&(0,a.deepExtend)(u,o.serviceProps),r[s]=u,e.prototype[s]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._getService.bind(this,s).apply(this,o.multipleInstances?e:[])}}for(var c=0,h=Object.keys(t);c<h.length;c++)t[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(t).map(function(e){return t[e]})}}),i.App=e,r}(g);return t.INTERNAL=(0,o.__assign)((0,o.__assign)({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){(0,a.deepExtend)(t,e)},createSubscribe:a.createSubscribe,ErrorFactory:a.ErrorFactory,deepExtend:a.deepExtend}),t}(),y=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(e){if((null==(t=e.getComponent())?void 0:t.type)!=="VERSION")return null;var t,n=e.getImmediate();return n.library+"/"+n.version}).filter(function(e){return e}).join(" ")},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if((0,a.isBrowser)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var m=self.firebase.SDK_VERSION;m&&m.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=v.initializeApp;v.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,a.isNode)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,e)};var _=v;_.INTERNAL.registerComponent(new s.Component("platform-logger",function(e){return new y(e)},"PRIVATE")),_.registerVersion(h,"0.6.30",void 0),_.registerVersion("fire-js",""),t.default=_},859:function(e,t,n){"use strict";var r=n(1463);(function(){var e,t,i,o="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},a=function(e){e=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g,e];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}return globalThis}(this);function s(e){var t,n="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return n?n.call(e):{next:(t=0,function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}})}}!function(e,t){if(t){var n=a;e=e.split(".");for(var r=0;r<e.length-1;r++){var i=e[r];i in n||(n[i]={}),n=n[i]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&o(n,e,{configurable:!0,writable:!0,value:t})}}("Promise",function(e){function t(e){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.a=null}function r(e){return e instanceof t?e:new t(function(t){t(e)})}if(e)return e;n.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c(function(){t.g()})}this.a.push(e)};var i=a.setTimeout;n.prototype.c=function(e){i(e,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.f(e)}}}this.a=null},n.prototype.f=function(e){this.c(function(){throw e})},t.prototype.f=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.m),reject:e(this.g)}},t.prototype.m=function(e){if(e===this)this.g(TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.s(e);else{switch(typeof e){case"object":var n=null!=e;break;case"function":n=!0;break;default:n=!1}n?this.v(e):this.h(e)}},t.prototype.v=function(e){var t=void 0;try{t=e.then}catch(e){this.g(e);return}"function"==typeof t?this.u(t,e):this.h(e)},t.prototype.g=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.c=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)o.b(this.a[e]);this.a=null}};var o=new n;return t.prototype.s=function(e){var t=this.f();e.Ra(t.resolve,t.reject)},t.prototype.u=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(e){o(e)}}:t}var i,o,a=new t(function(e,t){i=e,o=t});return this.Ra(r(e,i),r(n,o)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Ra=function(e,t){function n(){switch(r.b){case 1:e(r.c);break;case 2:t(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?o.b(n):this.a.push(n)},t.resolve=r,t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var i=s(e),o=i.next();!o.done;o=i.next())r(o.value).Ra(t,n)})},t.all=function(e){var n=s(e),i=n.next();return i.done?r([]):new t(function(e,t){var o=[],a=0;do o.push(void 0),a++,r(i.value).Ra(function(t){return function(n){o[t]=n,0==--a&&e(o)}}(o.length-1),t),i=n.next();while(!i.done)})},t});var u=u||{},c=this||self,l=/^[\w+/_-]+[=]{0,2}$/,h=null;function f(e){return(e=e.querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&l.test(e)?e:""}function d(){}function p(e){var t=typeof e;return"object"!=t?t:e?Array.isArray(e)?"array":t:"null"}function g(e){var t=p(e);return"array"==t||"object"==t&&"number"==typeof e.length}function v(e){return"function"==p(e)}function y(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function m(e){return Object.prototype.hasOwnProperty.call(e,b)&&e[b]||(e[b]=++_)}var b="closure_uid_"+(1e9*Math.random()>>>0),_=0;function w(e,t,n){return e.call.apply(e.bind,arguments)}function E(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function I(e,t,n){return(I=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?w:E).apply(null,arguments)}function C(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var T=Date.now;function S(e,t){function n(){}n.prototype=t.prototype,e.bb=t.prototype,e.prototype=new n,e.prototype.constructor=e}function k(e){return e}function D(e,t,n){this.code=P+e,this.message=t||N[e]||"",this.a=n||null}function A(e){var t=e&&e.code;return t?new D(t.substring(P.length),e.message,e.serverResponse):null}S(D,Error),D.prototype.w=function(){var e={code:this.code,message:this.message};return this.a&&(e.serverResponse=this.a),e},D.prototype.toJSON=function(){return this.w()};var P="auth/",N={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},x={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function O(e){for(var t in x)if(x[t].id===e)return{firebaseEndpoint:(e=x[t]).Ua,secureTokenEndpoint:e.$a,identityPlatformEndpoint:e.Xa};return null}function R(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(e){return!1}}function M(e){if(Error.captureStackTrace)Error.captureStackTrace(this,M);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function L(e,t){e=e.split("%s");for(var n="",r=e.length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");M.call(this,n+e[r])}function F(e,t){throw new L("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function j(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function U(e,t){e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}function q(){this.b=this.a=null}oG=O("__EID__")?"__EID__":void 0,S(M,Error),M.prototype.name="CustomError",S(L,M),L.prototype.name="AssertionError",j.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var B=new j(function(){return new V},function(e){e.reset()});function V(){this.next=this.b=this.a=null}q.prototype.add=function(e,t){var n=B.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},V.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},V.prototype.reset=function(){this.next=this.b=this.a=null};var W=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return -1},K=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)},G=Array.prototype.filter?function(e,t){return Array.prototype.filter.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=[],i=0,o="string"==typeof e?e.split(""):e,a=0;a<n;a++)if(a in o){var s=o[a];t.call(void 0,s,a,e)&&(r[i++]=s)}return r},z=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),i="string"==typeof e?e.split(""):e,o=0;o<n;o++)o in i&&(r[o]=t.call(void 0,i[o],o,e));return r},H=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e))return!0;return!1};function $(e,t){return 0<=W(e,t)}function Q(e,t){var n;return(n=0<=(t=W(e,t)))&&Array.prototype.splice.call(e,t,1),n}function Y(e,t){var n=0;!function(e,t){for(var n="string"==typeof e?e.split(""):e,r=e.length-1;0<=r;--r)r in n&&t.call(void 0,n[r],r,e)}(e,function(r,i){t.call(void 0,r,i,e)&&1==Array.prototype.splice.call(e,i,1).length&&n++})}function X(e){return Array.prototype.concat.apply([],arguments)}function J(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}var Z=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},ee=/&/g,et=/</g,en=/>/g,er=/"/g,ei=/'/g,eo=/\x00/g,ea=/[\x00&<>"']/;function es(e,t){return -1!=e.indexOf(t)}function eu(e,t){return e<t?-1:e>t?1:0}e:{var ec=c.navigator;if(ec){var el=ec.userAgent;if(el){oz=el;break e}}oz=""}function eh(e){return es(oz,e)}function ef(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function ed(e){for(var t in e)return!1;return!0}function ep(e){var t,n={};for(t in e)n[t]=e[t];return n}var eg="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ev(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<eg.length;o++)n=eg[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ey(e,t){e:{try{var n=e&&e.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||c).Element&&r.Location){var i=r;break e}}catch(e){}i=null}if(i&&void 0!==i[t]&&(!e||!(e instanceof i[t])&&(e instanceof i.Location||e instanceof i.Element))){if(y(e))try{var o=e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(e){o="<object could not be stringified>"}else o=void 0===e?"undefined":null===e?"null":typeof e;F("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,o)}}function em(e,t){this.a=e===ew&&t||"",this.b=e_}function eb(e){return e instanceof em&&e.constructor===em&&e.b===e_?e.a:(F("expected object of type Const, got '"+e+"'"),"type_error:Const")}em.prototype.ta=!0,em.prototype.sa=function(){return this.a},em.prototype.toString=function(){return"Const{"+this.a+"}"};var e_={},ew={};function eE(){if(void 0===oH){var e=null,t=c.trustedTypes;if(t&&t.createPolicy){try{e=t.createPolicy("goog#html",{createHTML:k,createScript:k,createScriptURL:k})}catch(e){c.console&&c.console.error(e.message)}oH=e}else oH=e}return oH}function eI(e,t){this.a=t===eD?e:""}function eC(e){return e instanceof eI&&e.constructor===eI?e.a:(F("expected object of type TrustedResourceUrl, got '"+e+"' of type "+p(e)),"type_error:TrustedResourceUrl")}function eT(e,t){var n,r,i=eb(e);if(!ek.test(i))throw Error("Invalid TrustedResourceUrl format: "+i);return n=e=i.replace(eS,function(e,n){if(!Object.prototype.hasOwnProperty.call(t,n))throw Error('Found marker, "'+n+'", in format string, "'+i+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[n])instanceof em?eb(e):encodeURIComponent(String(e))}),new eI(n=(r=eE())?r.createScriptURL(n):n,eD)}eI.prototype.ta=!0,eI.prototype.sa=function(){return this.a.toString()},eI.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var eS=/%{(\w+)}/g,ek=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,eD={};function eA(e,t){this.a=t===eL?e:""}function eP(e){return e instanceof eA&&e.constructor===eA?e.a:(F("expected object of type SafeUrl, got '"+e+"' of type "+p(e)),"type_error:SafeUrl")}eA.prototype.ta=!0,eA.prototype.sa=function(){return this.a.toString()},eA.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var eN=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,ex=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,eO=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function eR(e){if(e instanceof eA)return e;if(e="object"==typeof e&&e.ta?e.sa():String(e),eO.test(e))e=new eA(e,eL);else{var t=(e=(e=String(e)).replace(/(%0A|%0D)/g,"")).match(ex);e=t&&eN.test(t[1])?new eA(e,eL):null}return e}function eM(e){return e instanceof eA?e:(e="object"==typeof e&&e.ta?e.sa():String(e),eO.test(e)||(e="about:invalid#zClosurez"),new eA(e,eL))}var eL={},eF=new eA("about:invalid#zClosurez",eL);function ej(e,t,n){this.a=n===eU?e:""}ej.prototype.ta=!0,ej.prototype.sa=function(){return this.a.toString()},ej.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var eU={};function eq(e,t,n,r){return e=e instanceof eA?e:eM(e),t=t||c,n=n instanceof em?eb(n):n||"",t.open(eP(e),n,r,void 0)}function eB(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function eV(e){return ea.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(ee,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(et,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(en,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(er,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(ei,"&#39;")),-1!=e.indexOf("\x00")&&(e=e.replace(eo,"&#0;"))),e}function eW(e){return eW[" "](e),e}eW[" "]=d;var eK=eh("Opera"),eG=eh("Trident")||eh("MSIE"),ez=eh("Edge"),eH=ez||eG,e$=eh("Gecko")&&!(es(oz.toLowerCase(),"webkit")&&!eh("Edge"))&&!(eh("Trident")||eh("MSIE"))&&!eh("Edge"),eQ=es(oz.toLowerCase(),"webkit")&&!eh("Edge");function eY(){var e=c.document;return e?e.documentMode:void 0}e:{var eX,eJ="",eZ=(eX=oz,e$?/rv:([^\);]+)(\)|;)/.exec(eX):ez?/Edge\/([\d\.]+)/.exec(eX):eG?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(eX):eQ?/WebKit\/(\S+)/.exec(eX):eK?/(?:Version)[ \/]?(\S+)/.exec(eX):void 0);if(eZ&&(eJ=eZ?eZ[1]:""),eG){var e0=eY();if(null!=e0&&e0>parseFloat(eJ)){o$=String(e0);break e}}o$=eJ}var e1={};function e2(e){return Object.prototype.hasOwnProperty.call(e1,e)?e1[e]:e1[e]=function(){for(var t=0,n=Z(String(o$)).split("."),r=Z(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=eu(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||eu(0==a[2].length,0==s[2].length)||eu(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}(e)}var e3=c.document&&eG&&(eY()||parseInt(o$,10))||void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(e){}var e6=!eG||9<=Number(e3);function e5(e){var t=document;return"string"==typeof e?t.getElementById(e):e}function e4(e,t){ef(t,function(t,n){t&&"object"==typeof t&&t.ta&&(t=t.sa()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:e8.hasOwnProperty(n)?e.setAttribute(e8[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t})}var e8={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function e9(e,t){return t=String(t),"application/xhtml+xml"===e.contentType&&(t=t.toLowerCase()),e.createElement(t)}function e7(e){c.setTimeout(function(){throw e},0)}function te(e,t){oX||function(){if(c.Promise&&c.Promise.resolve){var e=c.Promise.resolve(void 0);oX=function(){e.then(tr)}}else oX=function(){!v(c.setImmediate)||c.Window&&c.Window.prototype&&!eh("Edge")&&c.Window.prototype.setImmediate==c.setImmediate?(oY||(oY=function(){var e=c.MessageChannel;if(void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!eh("Presto")&&(e=function(){var e=e9(document,"IFRAME");e.style.display="none",document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=I(function(e){("*"==r||e.origin==r)&&e.data==n&&this.port1.onmessage()},this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),void 0!==e&&!eh("Trident")&&!eh("MSIE")){var t=new e,n={},r=n;return t.port1.onmessage=function(){if(void 0!==n.next){var e=(n=n.next).Hb;n.Hb=null,e()}},function(e){r.next={Hb:e},r=r.next,t.port2.postMessage(0)}}return function(e){c.setTimeout(e,0)}}()),oY(tr)):c.setImmediate(tr)}}(),tt||(oX(),tt=!0),tn.add(e,t)}var tt=!1,tn=new q;function tr(){for(var e,t;e=null,tn.a&&(e=tn.a,tn.a=tn.a.next,tn.a||(tn.b=null),e.next=null),t=e;){try{t.a.call(t.b)}catch(e){e7(e)}U(B,t)}tt=!1}function ti(e,t){if(this.a=to,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=d)try{var n=this;e.call(t,function(e){ty(n,ta,e)},function(e){if(!(e instanceof tC))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(e){}ty(n,ts,e)})}catch(e){ty(this,ts,e)}}var to=0,ta=2,ts=3;function tu(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}tu.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var tc=new j(function(){return new tu},function(e){e.reset()});function tl(e,t,n){var r=tc.get();return r.g=e,r.b=t,r.f=n,r}function th(e){if(e instanceof ti)return e;var t=new ti(d);return ty(t,ta,e),t}function tf(e){return new ti(function(t,n){n(e)})}function td(e,t,n){tm(e,t,n,null)||te(C(t,e))}function tp(e){return new ti(function(t){var n=e.length,r=[];if(n)for(var i=function(e,i,o){n--,r[e]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&t(r)},o=0;o<e.length;o++)td(e[o],C(i,o,!0),C(i,o,!1));else t(r)})}function tg(e,t){e.b||e.a!=ta&&e.a!=ts||tb(e),e.f?e.f.next=t:e.b=t,e.f=t}function tv(e,t,n,r){var i=tl(null,null,null);return i.a=new ti(function(e,o){i.g=t?function(n){try{var i=t.call(r,n);e(i)}catch(e){o(e)}}:e,i.b=n?function(t){try{var i=n.call(r,t);void 0===i&&t instanceof tC?o(t):e(i)}catch(e){o(e)}}:o}),i.a.c=e,tg(e,i),i.a}function ty(e,t,n){var r;e.a==to&&(e===n&&(t=ts,n=TypeError("Promise cannot resolve to itself")),e.a=1,tm(n,e.$c,e.ad,e)||(e.i=n,e.a=t,e.c=null,tb(e),t!=ts||n instanceof tC||(r=n,e.g=!0,te(function(){e.g&&tI.call(null,r)}))))}function tm(e,t,n,r){if(e instanceof ti)return tg(e,tl(t||d,n||null,r)),!0;if(R(e))return e.then(t,n,r),!0;if(y(e))try{var i=e.then;if(v(i))return function(e,t,n,r,i){function o(e){a||(a=!0,r.call(i,e))}var a=!1;try{t.call(e,function(e){a||(a=!0,n.call(i,e))},o)}catch(e){o(e)}}(e,i,t,n,r),!0}catch(e){return n.call(r,e),!0}return!1}function tb(e){e.h||(e.h=!0,te(e.gc,e))}function t_(e){var t=null;return e.b&&(t=e.b,e.b=t.next,t.next=null),e.b||(e.f=null),t}function tw(e,t,n,r){if(n==ts&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,tE(t,n,r);else try{t.c?t.g.call(t.f):tE(t,n,r)}catch(e){tI.call(null,e)}U(tc,t)}function tE(e,t,n){t==ta?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}ti.prototype.then=function(e,t,n){return tv(this,v(e)?e:null,v(t)?t:null,n)},ti.prototype.$goog_Thenable=!0,(i=ti.prototype).oa=function(e,t){return(e=tl(e,e,t)).c=!0,tg(this,e),this},i.o=function(e,t){return tv(this,null,e,t)},i.cancel=function(e){if(this.a==to){var t=new tC(e);te(function(){(function e(t,n){if(t.a==to){if(t.c){var r=t.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,s.a==t&&(o=s),!(o&&1<i)));s=s.next)o||(a=s);o&&(r.a==to&&1==i?e(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):t_(r),tw(r,o,ts,n)))}t.c=null}else ty(t,ts,n)}})(this,t)},this)}},i.$c=function(e){this.a=to,ty(this,ta,e)},i.ad=function(e){this.a=to,ty(this,ts,e)},i.gc=function(){for(var e;e=t_(this);)tw(this,e,this.a,this.i);this.h=!1};var tI=e7;function tC(e){M.call(this,e)}function tT(){0!=tS&&(tk[m(this)]=this),this.ya=this.ya,this.pa=this.pa}S(tC,M),tC.prototype.name="cancel";var tS=0,tk={};function tD(e){if(!e.ya&&(e.ya=!0,e.Da(),0!=tS)){var t=m(e);if(0!=tS&&e.pa&&0<e.pa.length)throw Error(e+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete tk[t]}}tT.prototype.ya=!1,tT.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var tA=Object.freeze||function(e){return e},tP=!eG||9<=Number(e3),tN=eG&&!e2("9"),tx=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{c.addEventListener("test",d,t),c.removeEventListener("test",d,t)}catch(e){}return e}();function tO(e,t){this.type=e,this.b=this.target=t,this.defaultPrevented=!1}function tR(e,t){if(tO.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if(e$){e:{try{eW(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:tM[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}tO.prototype.preventDefault=function(){this.defaultPrevented=!0},S(tR,tO);var tM=tA({2:"touch",3:"pen",4:"mouse"});tR.prototype.preventDefault=function(){tR.bb.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,tN)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(e){}},tR.prototype.g=function(){return this.a};var tL="closure_listenable_"+(1e6*Math.random()|0),tF=0;function tj(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.Wa=i,this.key=++tF,this.wa=this.Qa=!1}function tU(e){e.wa=!0,e.listener=null,e.proxy=null,e.src=null,e.Wa=null}function tq(e){this.src=e,this.a={},this.b=0}function tB(e,t){var n=t.type;n in e.a&&Q(e.a[n],t)&&(tU(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function tV(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.wa&&o.listener==t&&!!n==o.capture&&o.Wa==r)return i}return -1}tq.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=tV(e,t,r,i);return -1<a?(t=e[a],n||(t.Qa=!1)):((t=new tj(t,this.src,o,!!r,i)).Qa=n,e.push(t)),t};var tW="closure_lm_"+(1e6*Math.random()|0),tK={},tG=0;function tz(e,t,n,r,i){if(r&&r.once)t$(e,t,n,r,i);else if(Array.isArray(t))for(var o=0;o<t.length;o++)tz(e,t[o],n,r,i);else n=t3(n),e&&e[tL]?t5(e,t,n,y(r)?!!r.capture:!!r,i):tH(e,t,n,!1,r,i)}function tH(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a,s=y(i)?!!i.capture:!!i,u=t1(e);if(u||(e[tW]=u=new tq(e)),!(n=u.add(t,n,r,s,o)).proxy){if(r=a=tP?function(e){return t0.call(a.src,a.listener,e)}:function(e){if(!(e=t0.call(a.src,a.listener,e)))return e},n.proxy=r,r.src=e,r.listener=n,e.addEventListener)tx||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(tX(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");tG++}}function t$(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)t$(e,t[o],n,r,i);else n=t3(n),e&&e[tL]?t4(e,t,n,y(r)?!!r.capture:!!r,i):tH(e,t,n,!0,r,i)}function tQ(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)tQ(e,t[o],n,r,i);else(r=y(r)?!!r.capture:!!r,n=t3(n),e&&e[tL])?(e=e.v,(t=String(t).toString())in e.a&&-1<(n=tV(o=e.a[t],n,r,i))&&(tU(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--))):e&&(e=t1(e))&&(t=e.a[t.toString()],e=-1,t&&(e=tV(t,n,r,i)),(n=-1<e?t[e]:null)&&tY(n))}function tY(e){if("number"!=typeof e&&e&&!e.wa){var t=e.src;if(t&&t[tL])tB(t.v,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(tX(n),r):t.addListener&&t.removeListener&&t.removeListener(r),tG--,(n=t1(t))?(tB(n,e),0==n.b&&(n.src=null,t[tW]=null)):tU(e)}}}function tX(e){return e in tK?tK[e]:tK[e]="on"+e}function tJ(e,t,n,r){var i=!0;if((e=t1(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.wa&&(o=tZ(o,r),i=i&&!1!==o)}return i}function tZ(e,t){var n=e.listener,r=e.Wa||e.src;return e.Qa&&tY(e),n.call(r,t)}function t0(e,t){if(e.wa)return!0;if(!tP){if(!t)e:{t=["window","event"];for(var n=c,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}if(t=new tR(r=t,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(e){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=t.b;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;0<=i;i--){t.b=r[i];var o=tJ(r[i],e,!0,t);n=n&&o}for(i=0;i<r.length;i++)t.b=r[i],o=tJ(r[i],e,!1,t),n=n&&o}return n}return tZ(e,new tR(t,this))}function t1(e){return(e=e[tW])instanceof tq?e:null}var t2="__closure_events_fn_"+(1e9*Math.random()>>>0);function t3(e){return v(e)?e:(e[t2]||(e[t2]=function(t){return e.handleEvent(t)}),e[t2])}function t6(){tT.call(this),this.v=new tq(this),this.bc=this,this.hb=null}function t5(e,t,n,r,i){e.v.add(String(t),n,!1,r,i)}function t4(e,t,n,r,i){e.v.add(String(t),n,!0,r,i)}function t8(e,t,n,r){if(!(t=e.v.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.wa&&a.capture==n){var s=a.listener,u=a.Wa||a.src;a.Qa&&tB(e.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function t9(e,t,n){if(v(e))n&&(e=I(e,n));else if(e&&"function"==typeof e.handleEvent)e=I(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:c.setTimeout(e,t||0)}function t7(e){var t=null;return new ti(function(n,r){-1==(t=t9(function(){n(void 0)},e))&&r(Error("Failed to schedule timer."))}).o(function(e){throw c.clearTimeout(t),e})}function ne(e){if(e.X&&"function"==typeof e.X)return e.X();if("string"==typeof e)return e.split("");if(g(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function nt(e){if(e.Y&&"function"==typeof e.Y)return e.Y();if(!e.X||"function"!=typeof e.X){if(g(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}function nn(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e){if(e instanceof nn)for(n=e.Y(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}}function nr(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];ni(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)ni(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function ni(e,t){return Object.prototype.hasOwnProperty.call(e,t)}S(t6,tT),t6.prototype[tL]=!0,t6.prototype.addEventListener=function(e,t,n,r){tz(this,e,t,n,r)},t6.prototype.removeEventListener=function(e,t,n,r){tQ(this,e,t,n,r)},t6.prototype.dispatchEvent=function(e){var t,n=this.hb;if(n)for(t=[];n;n=n.hb)t.push(n);n=this.bc;var r=e.type||e;if("string"==typeof e)e=new tO(e,n);else if(e instanceof tO)e.target=e.target||n;else{var i=e;ev(e=new tO(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.b=t[o];i=t8(a,r,!0,e)&&i}if(i=t8(a=e.b=n,r,!0,e)&&i,i=t8(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=t8(a=e.b=t[o],r,!1,e)&&i;return i},t6.prototype.Da=function(){if(t6.bb.Da.call(this),this.v){var e,t=this.v;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)tU(n[r]);delete t.a[e],t.b--}}this.hb=null},(i=nn.prototype).X=function(){nr(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},i.Y=function(){return nr(this),this.a.concat()},i.clear=function(){this.b={},this.c=this.a.length=0},i.get=function(e,t){return ni(this.b,e)?this.b[e]:t},i.set=function(e,t){ni(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},i.forEach=function(e,t){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var no=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function na(e,t){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,e instanceof na?(this.i=void 0!==t?t:e.i,ns(this,e.c),this.l=e.l,this.a=e.a,nu(this,e.g),this.f=e.f,nc(this,nD(e.b)),this.h=e.h):e&&(n=String(e).match(no))?(this.i=!!t,ns(this,n[1]||"",!0),this.l=np(n[2]||""),this.a=np(n[3]||"",!0),nu(this,n[4]),this.f=np(n[5]||"",!0),nc(this,n[6]||"",!0),this.h=np(n[7]||"")):(this.i=!!t,this.b=new nE(null,this.i))}function ns(e,t,n){e.c=n?np(t,!0):t,e.c&&(e.c=e.c.replace(/:$/,""))}function nu(e,t){if(t){if(isNaN(t=Number(t))||0>t)throw Error("Bad port number "+t);e.g=t}else e.g=null}function nc(e,t,n){var r,i;t instanceof nE?(e.b=t,r=e.b,(i=e.i)&&!r.f&&(nI(r),r.c=null,r.a.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(nT(this,t),nk(this,n,e))},r)),r.f=i):(n||(t=ng(t,n_)),e.b=new nE(t,e.i))}function nl(e,t,n){e.b.set(t,n)}function nh(e,t){return e.b.get(t)}function nf(e){return e instanceof na?new na(e):new na(e,void 0)}function nd(e,t,n,r){var i=new na(null,void 0);return e&&ns(i,e),t&&(i.a=t),n&&nu(i,n),r&&(i.f=r),i}function np(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ng(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,nv),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function nv(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}na.prototype.toString=function(){var e=[],t=this.c;t&&e.push(ng(t,ny,!0),":");var n=this.a;return(n||"file"==t)&&(e.push("//"),(t=this.l)&&e.push(ng(t,ny,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&e.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&e.push("/"),e.push(ng(n,"/"==n.charAt(0)?nb:nm,!0))),(n=this.b.toString())&&e.push("?",n),(n=this.h)&&e.push("#",ng(n,nw)),e.join("")},na.prototype.resolve=function(e){var t=new na(this),n=!!e.c;n?ns(t,e.c):n=!!e.l,n?t.l=e.l:n=!!e.a,n?t.a=e.a:n=null!=e.g;var r=e.f;if(n)nu(t,e.g);else if(n=!!e.f){if("/"!=r.charAt(0)){if(this.a&&!this.f)r="/"+r;else{var i=t.f.lastIndexOf("/");-1!=i&&(r=t.f.substr(0,i+1)+r)}}if(".."==(i=r)||"."==i)r="";else if(es(i,"./")||es(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.f=r:n=""!==e.b.toString(),n?nc(t,nD(e.b)):n=!!e.h,n&&(t.h=e.h),t};var ny=/[#\/\?@]/g,nm=/[#\?:]/g,nb=/[#\?]/g,n_=/[#\?@]/g,nw=/#/g;function nE(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function nI(e){e.a||(e.a=new nn,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function nC(e){var t=nt(e);if(void 0===t)throw Error("Keys are undefined");var n=new nE(null,void 0);e=ne(e);for(var r=0;r<t.length;r++){var i=t[r],o=e[r];Array.isArray(o)?nk(n,i,o):n.add(i,o)}return n}function nT(e,t){nI(e),t=nA(e,t),ni(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,ni((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&nr(e)))}function nS(e,t){return nI(e),t=nA(e,t),ni(e.a.b,t)}function nk(e,t,n){nT(e,t),0<n.length&&(e.c=null,e.a.set(nA(e,t),J(n)),e.b+=n.length)}function nD(e){var t=new nE;return t.c=e.c,e.a&&(t.a=new nn(e.a),t.b=e.b),t}function nA(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function nP(e){var t=[];return function e(t,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),e(t,i[a],r),o=",";r.push("]");return}if(n instanceof String||n instanceof Number||n instanceof Boolean)n=n.valueOf();else{for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(a=n[i])&&(r.push(o),nR(i,r),r.push(":"),e(t,a,r),o=",");r.push("}");return}}switch(typeof n){case"string":nR(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new nN,e,t),t.join("")}function nN(){}(i=nE.prototype).add=function(e,t){nI(this),this.c=null,e=nA(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},i.clear=function(){this.a=this.c=null,this.b=0},i.forEach=function(e,t){nI(this),this.a.forEach(function(n,r){K(n,function(n){e.call(t,n,r,this)},this)},this)},i.Y=function(){nI(this);for(var e=this.a.X(),t=this.a.Y(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},i.X=function(e){nI(this);var t=[];if("string"==typeof e)nS(this,e)&&(t=X(t,this.a.get(nA(this,e))));else{e=this.a.X();for(var n=0;n<e.length;n++)t=X(t,e[n])}return t},i.set=function(e,t){return nI(this),this.c=null,nS(this,e=nA(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},i.get=function(e,t){return e&&0<(e=this.X(e)).length?String(e[0]):t},i.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.Y(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")};var nx={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\u000b"},nO=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function nR(e,t){t.push('"',e.replace(nO,function(e){var t=nx[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),nx[e]=t),t}),'"')}function nM(){var e=n0();return eG&&!!e3&&11==e3||/Edge\/\d+/.test(e)}function nL(){return c.window&&c.window.location.href||self&&self.location&&self.location.href||""}function nF(e,t){t=t||c.window;var n="about:blank";e&&(n=eP(eR(e)||eF)),t.location.href=n}function nj(e){return!!((e=(e||n0()).toLowerCase()).match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function nU(e){e=e||c.window;try{e.close()}catch(e){}}function nq(e,t,n){var r,i=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var o=(window.screen.availHeight-n)/2,a=(window.screen.availWidth-t)/2;for(s in t={width:t,height:n,top:0<o?o:0,left:0<a?a:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=n0().toLowerCase(),i&&(t.target=i,es(n,"crios/")&&(t.target="_blank")),nX(n0())==nQ&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),i=window,t=n instanceof eA?n:eR(void 0!==n.href?n.href:String(n))||eF,n=e.target||n.target,o=[],e)switch(s){case"width":case"height":case"top":case"left":o.push(s+"="+e[s]);break;case"target":case"noopener":case"noreferrer":break;default:o.push(s+"="+(e[s]?1:0))}var s=o.join(",");if((eh("iPhone")&&!eh("iPod")&&!eh("iPad")||eh("iPad")||eh("iPod"))&&i.navigator&&i.navigator.standalone&&n&&"_self"!=n?(ey(s=e9(document,"A"),"HTMLAnchorElement"),t=t instanceof eA?t:eM(t),s.href=eP(t),s.setAttribute("target",n),e.noreferrer&&s.setAttribute("rel","noreferrer"),(e=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,i,1),s.dispatchEvent(e),s={}):e.noreferrer?(s=eq("",i,n,s),e=eP(t),s&&(eH&&es(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),s.opener=null,e='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+eV(e)+'">',e=new ej(e=(i=eE())?i.createHTML(e):e,null,eU),i=s.document)&&(i.write((r=e)instanceof ej&&r.constructor===ej?r.a:(F("expected object of type SafeHtml, got '"+r+"' of type "+p(r)),"type_error:SafeHtml")),i.close())):(s=eq(t,i,n,s))&&e.noopener&&(s.opener=null),s)try{s.focus()}catch(e){}return s}var nB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nV=/^[^@]+@[^@]+$/;function nW(){var e=null;return new ti(function(t){"complete"==c.document.readyState?t():(e=function(){t()},t$(window,"load",e))}).o(function(t){throw tQ(window,"load",e),t})}function nK(e){return e=e||n0(),!("file:"!==n5()&&"ionic:"!==n5()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function nG(){var e=c.window;try{return!(!e||e==e.top)}catch(e){return!1}}function nz(){return void 0!==c.WorkerGlobalScope&&"function"==typeof c.importScripts}function nH(){return r.default.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r.default.INTERNAL.hasOwnProperty("node")?"Node":nz()?"Worker":"Browser"}function n$(){var e=nH();return"ReactNative"===e||"Node"===e}var nQ="Firefox",nY="Chrome";function nX(e){var t=e.toLowerCase();return es(t,"opera/")||es(t,"opr/")||es(t,"opios/")?"Opera":es(t,"iemobile")?"IEMobile":es(t,"msie")||es(t,"trident/")?"IE":es(t,"edge/")?"Edge":es(t,"firefox/")?nQ:es(t,"silk/")?"Silk":es(t,"blackberry")?"Blackberry":es(t,"webos")?"Webos":!es(t,"safari/")||es(t,"chrome/")||es(t,"crios/")||es(t,"android")?!es(t,"chrome/")&&!es(t,"crios/")||es(t,"edge/")?es(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":nY:"Safari"}var nJ={md:"FirebaseCore-web",od:"FirebaseUI-web"};function nZ(e,t){t=t||[];var n,r=[],i={};for(n in nJ)i[nJ[n]]=!0;for(n=0;n<t.length;n++)void 0!==i[t[n]]&&(delete i[t[n]],r.push(t[n]));return r.sort(),(t=r).length||(t=["FirebaseCore-web"]),"Browser"===(r=nH())?r=nX(i=n0()):"Worker"===r&&(r=nX(i=n0())+"-"+r),r+"/JsCore/"+e+"/"+t.join(",")}function n0(){return c.navigator&&c.navigator.userAgent||""}function n1(e,t){e=e.split("."),t=t||c;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function n2(){try{var e=c.localStorage,t=re();if(e)return e.setItem(t,"1"),e.removeItem(t),!nM()||!!c.indexedDB}catch(e){return nz()&&!!c.indexedDB}return!1}function n3(){return(n6()||"chrome-extension:"===n5()||nK())&&!n$()&&n2()&&!nz()}function n6(){return"http:"===n5()||"https:"===n5()}function n5(){return c.location&&c.location.protocol||null}function n4(e){return!nj(e=e||n0())&&nX(e)!=nQ}function n8(e){return void 0===e?null:nP(e)}function n9(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t]);return n}function n7(e){if(null!==e)return JSON.parse(e)}function re(e){return e||Math.floor(1e9*Math.random()).toString()}function rt(e){return!("Safari"==nX(e=e||n0())||e.toLowerCase().match(/iphone|ipad|ipod/))}function rn(){var e=c.___jsl;if(e&&e.H){for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}}function rr(e,t){if(e>t)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=n0(),t=nH(),this.b=nj(e)||"ReactNative"===t}function ri(){var e=c.document;return!e||void 0===e.visibilityState||"visible"==e.visibilityState}function ro(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(e){}return null}function ra(){return!(!n1("fireauth.oauthhelper",c)&&!n1("fireauth.iframe",c))}rr.prototype.get=function(){var e=c.navigator;return(e&&"boolean"==typeof e.onLine&&(n6()||"chrome-extension:"===n5()||void 0!==e.connection)?e.onLine:1)?this.b?this.c:this.a:Math.min(5e3,this.a)};var rs={};function ru(e){rs[e]||(rs[e]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e))}try{var rc={};Object.defineProperty(rc,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(rc,"abcd",{configurable:!0,enumerable:!0,value:2}),oJ=2==rc.abcd}catch(e){oJ=!1}function rl(e,t,n){oJ?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function rh(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&rl(e,n,t[n])}function rf(e){var t={};return rh(t,e),t}function rd(e){var t=e;if("object"==typeof e&&null!=e)for(var n in t="length"in e?[]:{},e)rl(t,n,rd(e[n]));return t}function rp(e){var t=e&&(e[rb]?"phone":null);if(t&&e&&e[rm]){rl(this,"uid",e[rm]),rl(this,"displayName",e[rv]||null);var n=null;e[ry]&&(n=new Date(e[ry]).toUTCString()),rl(this,"enrollmentTime",n),rl(this,"factorId",t)}else throw new D("internal-error","Internal assert: invalid MultiFactorInfo object")}function rg(e){try{var t=new r_(e)}catch(e){t=null}return t}rp.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var rv="displayName",ry="enrolledAt",rm="mfaEnrollmentId",rb="phoneInfo";function r_(e){rp.call(this,e),rl(this,"phoneNumber",e[rb])}function rw(e){var t={},n=e[rT],r=e[rk],i=e[rD];if(e=rg(e[rS]),!i||i!=rI&&i!=rC&&!n||i==rC&&!r||i==rE&&!e)throw Error("Invalid checkActionCode response!");i==rC?(t[rP]=n||null,t[rx]=n||null,t[rA]=r):(t[rP]=r||null,t[rx]=r||null,t[rA]=n||null),t[rN]=e||null,rl(this,rR,i),rl(this,rO,rd(t))}S(r_,rp),r_.prototype.w=function(){var e=r_.bb.w.call(this);return e.phoneNumber=this.phoneNumber,e};var rE="REVERT_SECOND_FACTOR_ADDITION",rI="EMAIL_SIGNIN",rC="VERIFY_AND_CHANGE_EMAIL",rT="email",rS="mfaInfo",rk="newEmail",rD="requestType",rA="email",rP="fromEmail",rN="multiFactorInfo",rx="previousEmail",rO="data",rR="operation";function rM(e){var t=nh(e=nf(e),rL)||null,n=nh(e,rF)||null,r=nh(e,rq)||null;if(r=r&&rV[r]||null,!t||!n||!r)throw new D("argument-error",rL+", "+rF+"and "+rq+" are required in a valid action code URL.");rh(this,{apiKey:t,operation:r,code:n,continueUrl:nh(e,rj)||null,languageCode:nh(e,rU)||null,tenantId:nh(e,rB)||null})}var rL="apiKey",rF="oobCode",rj="continueUrl",rU="languageCode",rq="mode",rB="tenantId",rV={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:rE,signIn:rI,verifyAndChangeEmail:rC,verifyEmail:"VERIFY_EMAIL"};function rW(e){try{return new rM(e)}catch(e){return null}}function rK(e){var t=e[rQ];if(void 0===t)throw new D("missing-continue-uri");if("string"!=typeof t||"string"==typeof t&&!t.length)throw new D("invalid-continue-uri");this.h=t,this.b=this.a=null,this.g=!1;var n=e[rG];if(n&&"object"==typeof n){t=n[rJ];var r=n[rY];if(n=n[rX],"string"==typeof t&&t.length){if(this.a=t,void 0!==r&&"boolean"!=typeof r)throw new D("argument-error",rY+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new D("argument-error",rX+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==t)throw new D("argument-error",rJ+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new D("missing-android-pkg-name")}}else if(void 0!==n)throw new D("argument-error",rG+" property must be a non null object when specified.");if(this.f=null,(t=e[r$])&&"object"==typeof t){if("string"==typeof(t=t[rZ])&&t.length)this.f=t;else if(void 0!==t)throw new D("argument-error",rZ+" property must be a non empty string when specified.")}else if(void 0!==t)throw new D("argument-error",r$+" property must be a non null object when specified.");if(void 0!==(t=e[rH])&&"boolean"!=typeof t)throw new D("argument-error",rH+" property must be a boolean when specified.");if(this.c=!!t,void 0!==(e=e[rz])&&("string"!=typeof e||"string"==typeof e&&!e.length))throw new D("argument-error",rz+" property must be a non empty string when specified.");this.i=e||null}var rG="android",rz="dynamicLinkDomain",rH="handleCodeInApp",r$="iOS",rQ="url",rY="installApp",rX="minimumVersion",rJ="packageName",rZ="bundleId";function r0(e){var t={};for(var n in t.continueUrl=e.h,t.canHandleCodeInApp=e.c,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g),t.iOSBundleId=e.f,t.dynamicLinkDomain=e.i,t)null===t[n]&&delete t[n];return t}var r1=null;function r2(e){var t=r6(e);if(!(t&&t.sub&&t.iss&&t.aud&&t.exp))throw Error("Invalid JWT");this.h=e,this.a=t.exp,this.i=t.sub,e=Date.now()/1e3,this.g=t.iat||(e>this.a?this.a:e),this.b=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.f=t.firebase&&t.firebase.tenant||null,this.c=!!t.is_anonymous||"anonymous"==this.b}function r3(e){try{return new r2(e)}catch(e){return null}}function r6(e){if(!e||3!=(e=e.split(".")).length)return null;e=e[1];for(var t=(4-e.length%4)%4,n=0;n<t;n++)e+=".";try{var r,i,o=(r=e,i=[],function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=r1[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}(function(){if(!r1){r1={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=e.concat(t[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===r1[o]&&(r1[o]=i)}}})();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;t(i<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}(r,function(e){i.push(e)}),i);for(e=[],n=t=0;t<o.length;){var a=o[t++];if(128>a)e[n++]=String.fromCharCode(a);else if(191<a&&224>a){var s=o[t++];e[n++]=String.fromCharCode((31&a)<<6|63&s)}else if(239<a&&365>a){s=o[t++];var u=o[t++],c=o[t++],l=((7&a)<<18|(63&s)<<12|(63&u)<<6|63&c)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(1023&l))}else s=o[t++],u=o[t++],e[n++]=String.fromCharCode((15&a)<<12|(63&s)<<6|63&u)}return JSON.parse(e.join(""))}catch(e){}return null}r2.prototype.T=function(){return this.f},r2.prototype.l=function(){return this.c},r2.prototype.toString=function(){return this.h};var r5="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),r4=["client_id","response_type","scope","redirect_uri","state"],r8={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:r4},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:r4},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:r4},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:r5},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function r9(e){for(var t in r8)if(r8[t].fa==e)return r8[t];return null}function r7(e){var t={};t["facebook.com"]=io,t["google.com"]=is,t["github.com"]=ia,t["twitter.com"]=iu;var n=e&&e[it];try{if(n)return t[n]?new t[n](e):new ii(e);if(void 0!==e[ie])return new ir(e)}catch(e){}return null}var ie="idToken",it="providerId";function ir(e){var t=e[it];if(!t&&e[ie]){var n=r3(e[ie]);n&&n.b&&(t=n.b)}if(!t)throw Error("Invalid additional user info!");("anonymous"==t||"custom"==t)&&(t=null),n=!1,void 0!==e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),rl(this,"providerId",t),rl(this,"isNewUser",n)}function ii(e){ir.call(this,e),rl(this,"profile",rd((e=n7(e.rawUserInfo||"{}"))||{}))}function io(e){if(ii.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function ia(e){if(ii.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");rl(this,"username",this.profile&&this.profile.login||null)}function is(e){if(ii.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function iu(e){if(ii.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");rl(this,"username",e.screenName||null)}function ic(e){var t=nf(e),n=nh(t,"link"),r=nh(nf(n),"link");return t=nh(t,"deep_link_id"),nh(nf(t),"link")||t||r||n||e}function il(e,t){if(!e&&!t)throw new D("internal-error","Internal assert: no raw session string available");if(e&&t)throw new D("internal-error","Internal assert: unable to determine the session type");this.a=e||null,this.b=t||null,this.type=this.a?ih:id}S(ii,ir),S(io,ii),S(ia,ii),S(is,ii),S(iu,ii);var ih="enroll",id="signin";function ip(){}function ig(e,t){return e.then(function(e){if(e[o1]){var n=r3(e[o1]);if(!n||t!=n.i)throw new D("user-mismatch");return e}throw new D("user-mismatch")}).o(function(e){throw e&&e.code&&e.code==P+"user-not-found"?new D("user-mismatch"):e})}function iv(e,t){if(t)this.a=t;else throw new D("internal-error","failed to construct a credential");rl(this,"providerId",e),rl(this,"signInMethod",e)}function iy(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function im(e){if(e&&e.providerId&&e.signInMethod&&0==e.providerId.indexOf("saml.")&&e.pendingToken)try{return new iv(e.providerId,e.pendingToken)}catch(e){}return null}function ib(e,t,n){if(this.a=null,t.idToken||t.accessToken)t.idToken&&rl(this,"idToken",t.idToken),t.accessToken&&rl(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&rl(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else if(t.oauthToken&&t.oauthTokenSecret)rl(this,"accessToken",t.oauthToken),rl(this,"secret",t.oauthTokenSecret);else throw new D("internal-error","failed to construct a credential");rl(this,"providerId",e),rl(this,"signInMethod",n)}function i_(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,e.nonce&&!e.a&&(t.nonce=e.nonce),t={postBody:nC(t).toString(),requestUri:"http://localhost"},e.a&&(delete t.postBody,t.pendingToken=e.a),t}function iw(e){if(e&&e.providerId&&e.signInMethod){var t={idToken:e.oauthIdToken,accessToken:e.oauthTokenSecret?null:e.oauthAccessToken,oauthTokenSecret:e.oauthTokenSecret,oauthToken:e.oauthTokenSecret&&e.oauthAccessToken,nonce:e.nonce,pendingToken:e.pendingToken};try{return new ib(e.providerId,t,e.signInMethod)}catch(e){}}return null}function iE(e,t){this.Qc=t||[],rh(this,{providerId:e,isOAuthProvider:!0}),this.Jb={},this.qb=(r9(e)||{}).Ja||null,this.pb=null}function iI(e){if("string"!=typeof e||0!=e.indexOf("saml."))throw new D("argument-error",'SAML provider IDs must be prefixed with "saml."');iE.call(this,e,[])}function iC(e){iE.call(this,e,r4),this.a=[]}function iT(){iC.call(this,"facebook.com")}function iS(e){if(!e)throw new D("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return y(e)&&(t=e.accessToken),(new iT).credential({accessToken:t})}function ik(){iC.call(this,"github.com")}function iD(e){if(!e)throw new D("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return y(e)&&(t=e.accessToken),(new ik).credential({accessToken:t})}function iA(){iC.call(this,"google.com"),this.Ca("profile")}function iP(e,t){var n=e;return y(e)&&(n=e.idToken,t=e.accessToken),(new iA).credential({idToken:n,accessToken:t})}function iN(){iE.call(this,"twitter.com",r5)}function ix(e,t){var n=e;if(y(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new D("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new ib("twitter.com",n,"twitter.com")}function iO(e,t,n){this.a=e,this.f=t,rl(this,"providerId","password"),rl(this,"signInMethod",n===iM.EMAIL_LINK_SIGN_IN_METHOD?iM.EMAIL_LINK_SIGN_IN_METHOD:iM.EMAIL_PASSWORD_SIGN_IN_METHOD)}function iR(e){return e&&e.email&&e.password?new iO(e.email,e.password,e.signInMethod):null}function iM(){rh(this,{providerId:"password",isOAuthProvider:!1})}function iL(e,t){if(!(t=iF(t)))throw new D("argument-error","Invalid email link!");return new iO(e,t.code,iM.EMAIL_LINK_SIGN_IN_METHOD)}function iF(e){return(e=rW(e=ic(e)))&&e.operation===rI?e:null}function ij(e){if(!(e.fb&&e.eb||e.La&&e.ea))throw new D("internal-error");this.a=e,rl(this,"providerId","phone"),this.fa="phone",rl(this,"signInMethod","phone")}function iU(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var t={};return K(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(n){e[n]&&(t[n]=e[n])}),new ij(t)}return null}function iq(e){return e.a.La&&e.a.ea?{temporaryProof:e.a.La,phoneNumber:e.a.ea}:{sessionInfo:e.a.fb,code:e.a.eb}}function iB(e){try{this.a=e||r.default.auth()}catch(e){throw new D("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}rh(this,{providerId:"phone",isOAuthProvider:!1})}function iV(e,t){if(!e)throw new D("missing-verification-id");if(!t)throw new D("missing-verification-code");return new ij({fb:e,eb:t})}function iW(e){if(e.temporaryProof&&e.phoneNumber)return new ij({La:e.temporaryProof,ea:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret,i=e&&e.nonce,o=e&&e.oauthIdToken,a=e&&e.pendingToken;try{switch(t){case"google.com":return iP(o,n);case"facebook.com":return iS(n);case"github.com":return iD(n);case"twitter.com":return ix(n,r);default:return n||r||o||a?a?0==t.indexOf("saml.")?new iv(t,a):new ib(t,{pendingToken:a,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new iC(t).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(e){return null}}function iK(e){if(!e.isOAuthProvider)throw new D("invalid-oauth-provider")}function iG(e,t,n,r,i,o,a){if(this.c=e,this.b=t||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,this.g||this.a){if(this.g&&this.a||this.g&&!this.f)throw new D("invalid-auth-event")}else throw new D("invalid-auth-event")}function iz(e){return(e=e||{}).type?new iG(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&A(e.error),e.postBody,e.tenantId):null}function iH(){this.b=null,this.a=[]}il.prototype.Ha=function(){return this.a?th(this.a):th(this.b)},il.prototype.w=function(){return this.type==ih?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},ip.prototype.ka=function(){},ip.prototype.b=function(){},ip.prototype.c=function(){},ip.prototype.w=function(){},iv.prototype.ka=function(e){return ad(e,iy(this))},iv.prototype.b=function(e,t){var n=iy(this);return n.idToken=t,ap(e,n)},iv.prototype.c=function(e,t){return ig(ag(e,iy(this)),t)},iv.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},ib.prototype.ka=function(e){return ad(e,i_(this))},ib.prototype.b=function(e,t){var n=i_(this);return n.idToken=t,ap(e,n)},ib.prototype.c=function(e,t){return ig(ag(e,i_(this)),t)},ib.prototype.w=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},iE.prototype.Ka=function(e){return this.Jb=ep(e),this},S(iI,iE),S(iC,iE),iC.prototype.Ca=function(e){return $(this.a,e)||this.a.push(e),this},iC.prototype.Rb=function(){return J(this.a)},iC.prototype.credential=function(e,t){var n;if(!(n=y(e)?{idToken:e.idToken||null,accessToken:e.accessToken||null,nonce:e.rawNonce||null}:{idToken:e||null,accessToken:t||null}).idToken&&!n.accessToken)throw new D("argument-error","credential failed: must provide the ID token and/or the access token.");return new ib(this.providerId,n,this.providerId)},S(iT,iC),rl(iT,"PROVIDER_ID","facebook.com"),rl(iT,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),S(ik,iC),rl(ik,"PROVIDER_ID","github.com"),rl(ik,"GITHUB_SIGN_IN_METHOD","github.com"),S(iA,iC),rl(iA,"PROVIDER_ID","google.com"),rl(iA,"GOOGLE_SIGN_IN_METHOD","google.com"),S(iN,iE),rl(iN,"PROVIDER_ID","twitter.com"),rl(iN,"TWITTER_SIGN_IN_METHOD","twitter.com"),iO.prototype.ka=function(e){return this.signInMethod==iM.EMAIL_LINK_SIGN_IN_METHOD?aY(e,aI,{email:this.a,oobCode:this.f}):aY(e,aG,{email:this.a,password:this.f})},iO.prototype.b=function(e,t){return this.signInMethod==iM.EMAIL_LINK_SIGN_IN_METHOD?aY(e,aC,{idToken:t,email:this.a,oobCode:this.f}):aY(e,aF,{idToken:t,email:this.a,password:this.f})},iO.prototype.c=function(e,t){return ig(this.ka(e),t)},iO.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},rh(iM,{PROVIDER_ID:"password"}),rh(iM,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),rh(iM,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),ij.prototype.ka=function(e){return e.gb(iq(this))},ij.prototype.b=function(e,t){var n=iq(this);return n.idToken=t,aY(e,aH,n)},ij.prototype.c=function(e,t){var n=iq(this);return n.operation="REAUTH",ig(e=aY(e,a$,n),t)},ij.prototype.w=function(){var e={providerId:"phone"};return this.a.fb&&(e.verificationId=this.a.fb),this.a.eb&&(e.verificationCode=this.a.eb),this.a.La&&(e.temporaryProof=this.a.La),this.a.ea&&(e.phoneNumber=this.a.ea),e},iB.prototype.gb=function(e,t){var n=this.a.a;return th(t.verify()).then(function(r){if("string"!=typeof r)throw new D("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"===t.type){var i=y(e)?e.session:null,o=y(e)?e.phoneNumber:e;return(i&&i.type==ih?i.Ha().then(function(e){return aY(n,aU,{idToken:e,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}}).then(function(e){return e.phoneSessionInfo.sessionInfo})}):i&&i.type==id?i.Ha().then(function(t){return aY(n,aq,{mfaPendingCredential:t,mfaEnrollmentId:e.multiFactorHint&&e.multiFactorHint.uid||e.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}}).then(function(e){return e.phoneResponseInfo.sessionInfo})}):aY(n,aM,{phoneNumber:o,recaptchaToken:r})).then(function(e){return"function"==typeof t.reset&&t.reset(),e},function(e){throw"function"==typeof t.reset&&t.reset(),e})}throw new D("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')})},rh(iB,{PROVIDER_ID:"phone"}),rh(iB,{PHONE_SIGN_IN_METHOD:"phone"}),iG.prototype.getUid=function(){var e=[];return e.push(this.c),this.b&&e.push(this.b),this.f&&e.push(this.f),this.h&&e.push(this.h),e.join("-")},iG.prototype.T=function(){return this.h},iG.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var i$=null;function iQ(e){var t="unauthorized-domain",n=void 0,r=nf(e);e=r.a,"chrome-extension"==(r=r.c)?n=eB("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=eB("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",D.call(this,t,n)}function iY(e,t,n){D.call(this,e,n),(e=t||{}).Kb&&rl(this,"email",e.Kb),e.ea&&rl(this,"phoneNumber",e.ea),e.credential&&rl(this,"credential",e.credential),e.$b&&rl(this,"tenantId",e.$b)}function iX(e){if(e.code){var t=e.code||"";0==t.indexOf(P)&&(t=t.substring(P.length));var n={credential:iW(e),$b:e.tenantId};if(e.email)n.Kb=e.email;else if(e.phoneNumber)n.ea=e.phoneNumber;else if(!n.credential)return new D(t,e.message||void 0);return new iY(t,n,e.message)}return null}function iJ(){}function iZ(e){return e.c||(e.c=e.b())}function i0(){}function i1(e){if(!e.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.f=r}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.f}function i2(){}function i3(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=I(this.qc,this),this.a.onerror=I(this.Tb,this),this.a.onprogress=I(this.rc,this),this.a.ontimeout=I(this.vc,this)}function i6(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function i5(e,t,n){this.reset(e,t,n,void 0,void 0)}S(iQ,D),S(iY,D),iY.prototype.w=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber),this.tenantId&&(e.tenantId=this.tenantId);var t=this.credential&&this.credential.w();return t&&ev(e,t),e},iY.prototype.toJSON=function(){return this.w()},iJ.prototype.c=null,S(i0,iJ),i0.prototype.a=function(){var e=i1(this);return e?new ActiveXObject(e):new XMLHttpRequest},i0.prototype.b=function(){var e={};return i1(this)&&(e[0]=!0,e[1]=!0),e},oZ=new i0,S(i2,iJ),i2.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new i3;throw Error("Unsupported browser")},i2.prototype.b=function(){return{}},(i=i3.prototype).open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},i.send=function(e){if(e){if("string"==typeof e)this.a.send(e);else throw Error("Only string data is supported")}else this.a.send()},i.abort=function(){this.a.abort()},i.setRequestHeader=function(){},i.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},i.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,i6(this,4)},i.Tb=function(){this.status=500,this.response=this.responseText="",i6(this,4)},i.vc=function(){this.Tb()},i.rc=function(){this.status=200,i6(this,1)},i.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},i5.prototype.a=null;var i4=0;function i8(e){this.f=e,this.b=this.c=this.a=null}function i9(e,t){this.name=e,this.value=t}i5.prototype.reset=function(e,t,n,r,i){"number"==typeof i||i4++,r||T(),delete this.a},i9.prototype.toString=function(){return this.name};var i7=new i9("SEVERE",1e3),oe=new i9("WARNING",900),ot=new i9("CONFIG",700),on=new i9("FINE",500);i8.prototype.log=function(e,t,n){if(e.value>=function e(t){return t.c?t.c:t.a?e(t.a):(F("Root logger has no level set."),null)}(this).value)for(v(t)&&(t=t()),e=new i5(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var or={},oi=null;function oo(e){if(oi||(oi=new i8(""),or[""]=oi,oi.c=ot),!(t=or[e])){t=new i8(e);var t,n=e.lastIndexOf("."),r=e.substr(n+1);(n=oo(e.substr(0,n))).b||(n.b={}),n.b[r]=t,t.a=n,or[e]=t}return t}function oa(e,t){e&&e.log(on,t,void 0)}function os(e){this.f=e}function ou(e){t6.call(this),this.u=e,this.h=void 0,this.readyState=oc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=oo("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}S(os,iJ),os.prototype.a=function(){return new ou(this.f)},os.prototype.b=(oK={},function(){return oK}),S(ou,t6);var oc=0;function ol(e){e.c.read().then(e.pc.bind(e)).catch(e.Va.bind(e))}function oh(e){e.readyState=4,e.g=null,e.c=null,e.m=null,of(e)}function of(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function od(e){t6.call(this),this.headers=new nn,this.D=e||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=op,this.u=this.S=!1}(i=ou.prototype).open=function(e,t){if(this.readyState!=oc)throw this.abort(),Error("Error reopening a connection");this.s=e,this.f=t,this.readyState=1,of(this)},i.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.l,method:this.s,credentials:this.h,cache:void 0};e&&(t.body=e),this.u.fetch(new Request(this.f,t)).then(this.uc.bind(this),this.Va.bind(this))},i.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,oh(this)),this.readyState=oc},i.uc=function(e){this.a&&(this.g=e,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=e.headers,this.readyState=2,of(this)),this.a&&(this.readyState=3,of(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):void 0!==c.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.m=new TextDecoder,ol(this)):e.text().then(this.tc.bind(this),this.Va.bind(this)))))},i.pc=function(e){if(this.a){var t=this.m.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});t&&(this.response=this.responseText+=t),e.done?oh(this):of(this),3==this.readyState&&ol(this)}},i.tc=function(e){this.a&&(this.response=this.responseText=e,oh(this))},i.sc=function(e){this.a&&(this.response=e,oh(this))},i.Va=function(e){var t=this.i;t&&t.log(oe,"Failed to fetch url "+this.f,e instanceof Error?e:Error(e)),this.a&&oh(this)},i.setRequestHeader=function(e,t){this.l.append(e,t)},i.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.i)&&e.log(oe,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},i.getAllResponseHeaders=function(){if(!this.b){var e=this.i;return e&&e.log(oe,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(ou.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(e){this.h=e?"include":"same-origin"}}),S(od,t6);var op="";od.prototype.b=oo("goog.net.XhrIo");var og=/^https?$/i,ov=["POST","PUT"];function oy(e){return"content-type"==e.toLowerCase()}function om(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,ob(e),ow(e)}function ob(e){e.J||(e.J=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function o_(e){if(e.c&&void 0!==u){if(e.C[1]&&4==oI(e)&&2==oC(e))oa(e.b,oT(e,"Local request error detected and ignored"));else if(e.i&&4==oI(e))t9(e.Wb,0,e);else if(e.dispatchEvent("readystatechange"),4==oI(e)){oa(e.b,oT(e,"Request complete")),e.c=!1;try{var t,n,r=oC(e);switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var i=!0;break;default:i=!1}if(!(t=i)){if(n=0===r){var o=String(e.l).match(no)[1]||null;if(!o&&c.self&&c.self.location){var a=c.self.location.protocol;o=a.substr(0,a.length-1)}n=!og.test(o?o.toLowerCase():"")}t=n}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var s=2<oI(e)?e.a.statusText:""}catch(t){oa(e.b,"Can not get status: "+t.message),s=""}e.h=s+" ["+oC(e)+"]",ob(e)}}finally{ow(e)}}}}function ow(e,t){if(e.a){oE(e);var n=e.a,r=e.C[0]?d:null;e.a=null,e.C=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){(e=e.b)&&e.log(i7,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function oE(e){e.a&&e.u&&(e.a.ontimeout=null),e.s&&(c.clearTimeout(e.s),e.s=null)}function oI(e){return e.a?e.a.readyState:0}function oC(e){try{return 2<oI(e)?e.a.status:-1}catch(e){return -1}}function oT(e,t){return t+" ["+e.P+" "+e.l+" "+oC(e)+"]"}function oS(e){this.g=[],this.u=oF,this.s=e||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function ok(e,t,n){e.a=!0,e.c=n,e.f=!t,oN(e)}function oD(e){if(e.a){if(!e.v)throw new ox(e);e.v=!1}}function oA(e,t,n,r){e.g.push([t,n,r]),e.a&&oN(e)}function oP(e){return H(e.g,function(e){return v(e[1])})}function oN(e){if(e.h&&e.a&&oP(e)){var t=e.h,n=oM[t];n&&(c.clearTimeout(n.a),delete oM[t]),e.h=0}e.b&&(e.b.l--,delete e.b),t=e.c;for(var r=n=!1;e.g.length&&!e.i;){var i=e.g.shift(),o=i[0],a=i[1];if(i=i[2],o=e.f?a:o)try{var s=o.call(i||e.s,t);void 0!==s&&(e.f=e.f&&(s==t||s instanceof Error),e.c=t=s),(R(t)||"function"==typeof c.Promise&&t instanceof c.Promise)&&(r=!0,e.i=!0)}catch(r){t=r,e.f=!0,oP(e)||(n=!0)}}e.c=t,r&&(s=I(e.m,e,!0),r=I(e.m,e,!1),t instanceof oS?(oA(t,s,r),t.C=!0):t.then(s,r)),n&&(oM[(t=new oR(t)).a]=t,e.h=t.a)}function ox(){M.call(this)}function oO(){M.call(this)}function oR(e){this.a=c.setTimeout(I(this.c,this),0),this.b=e}(i=od.prototype).Ma=function(){void 0!==u&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",oa(this.b,oT(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},i.abort=function(){this.a&&this.c&&(oa(this.b,oT(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ow(this))},i.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ow(this,!0)),od.bb.Da.call(this)},i.Wb=function(){this.ya||(this.N||this.i||this.f?o_(this):this.Jc())},i.Jc=function(){o_(this)},i.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case op:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log(i7,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return oa(this.b,"Can not get response: "+e.message),null}},oS.prototype.cancel=function(e){if(this.a)this.c instanceof oS&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):(t.l--,0>=t.l&&t.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(e=new oO(this),oD(this),ok(this,!1,e))}},oS.prototype.m=function(e,t){this.i=!1,ok(this,e,t)},oS.prototype.then=function(e,t,n){var r,i,o=new ti(function(e,t){r=e,i=t});return oA(this,r,function(e){e instanceof oO?o.cancel():i(e)}),o.then(e,t,n)},oS.prototype.$goog_Thenable=!0,S(ox,M),ox.prototype.message="Deferred has already fired",ox.prototype.name="AlreadyCalledError",S(oO,M),oO.prototype.message="Deferred was canceled",oO.prototype.name="CanceledError",oR.prototype.c=function(){throw delete oM[this.a],this.b};var oM={};function oL(e){var t,n,r={},i=r.document||document,o=eC(e).toString(),a=e9(document,"SCRIPT"),s={Xb:a,Ma:void 0},u=new oS(s),l=null,d=null!=r.timeout?r.timeout:5e3;return 0<d&&(l=window.setTimeout(function(){oj(a,!0);var e=new oB(oq,"Timeout reached for loading script "+o);oD(u),ok(u,!1,e)},d),s.Ma=l),a.onload=a.onreadystatechange=function(){a.readyState&&"loaded"!=a.readyState&&"complete"!=a.readyState||(oj(a,r.xd||!1,l),oD(u),ok(u,!0,null))},a.onerror=function(){oj(a,!0,l);var e=new oB(oU,"Error while loading script "+o);oD(u),ok(u,!1,e)},ev(s=r.attributes||{},{type:"text/javascript",charset:"UTF-8"}),e4(a,s),n=e,ey(a,"HTMLScriptElement"),a.src=eC(n),(n=a.ownerDocument&&a.ownerDocument.defaultView)&&n!=c?n=f(n.document):(null===h&&(h=f(c.document)),n=h),n&&a.setAttribute("nonce",n),((t=(i||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:i.documentElement).appendChild(a),u}function oF(){if(this&&this.Xb){var e=this.Xb;e&&"SCRIPT"==e.tagName&&oj(e,!0,this.Ma)}}function oj(e,t,n){null!=n&&c.clearTimeout(n),e.onload=d,e.onerror=d,e.onreadystatechange=d,t&&window.setTimeout(function(){e&&e.parentNode&&e.parentNode.removeChild(e)},0)}var oU=0,oq=1;function oB(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),M.call(this,n),this.code=e}function oV(e){this.f=e}function oW(e,t,n){if(this.c=e,e=t||{},this.l=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=e.secureTokenTimeout||o2,this.g=ep(e.secureTokenHeaders||o3),this.h=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=e.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=e.firebaseTimeout||o6,this.a=ep(e.firebaseHeaders||o5),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==nH(),!(n=c.XMLHttpRequest||n&&r.default.INTERNAL.node&&r.default.INTERNAL.node.XMLHttpRequest)&&!nz())throw new D("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,nz()?this.f=new os(self):n$()?this.f=new oV(n):this.f=new i2,this.b=null}S(oB,M),S(oV,iJ),oV.prototype.a=function(){return new this.f},oV.prototype.b=function(){return{}};var oK,oG,oz,oH,o$,oQ,oY,oX,oJ,oZ,o0,o1="idToken",o2=new rr(3e4,6e4),o3={"Content-Type":"application/x-www-form-urlencoded"},o6=new rr(3e4,6e4),o5={"Content-Type":"application/json"};function o4(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function o8(e,t){t&&(e.l=o9("https://securetoken.googleapis.com/v1/token",t),e.h=o9("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",t),e.i=o9("https://identitytoolkit.googleapis.com/v2/",t))}function o9(e,t){return e=nf(e),t=nf(t.url),e.f=e.a+e.f,ns(e,t.c),e.a=t.a,nu(e,t.g),e.toString()}function o7(e,t){t?(e.a["X-Client-Version"]=t,e.g["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.g["X-Client-Version"])}function ae(e,t,n,r,i,o,a){var s;!((!(s=nX(s=n0())!=nY?null:(s=s.match(/\sChrome\/(\d+)/i))&&2==s.length?parseInt(s[1],10):null)||!(30>s))&&(!eG||!e3||9<e3)||nz())?(o0||(o0=new ti(function(e,t){var n,r;n=e,r=t,((window.gapi||{}).client||{}).request?n():(c[an]=function(){((window.gapi||{}).client||{}).request?n():r(Error("CORS_UNSUPPORTED"))},oA(oL(eT(at,{onload:an})),null,function(){r(Error("CORS_UNSUPPORTED"))},void 0))})),e=I(e.s,e)):e=I(e.u,e),e(t,n,r,i,o,a)}oW.prototype.T=function(){return this.b},oW.prototype.u=function(e,t,n,r,i,o){if(nz()&&(void 0===c.fetch||void 0===c.Headers||void 0===c.Request))throw new D("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new od(this.f);if(o){a.g=Math.max(0,o);var s=setTimeout(function(){a.dispatchEvent("timeout")},o)}t5(a,"complete",function(){s&&clearTimeout(s);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return oa(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}t&&t(e)}),t4(a,"ready",function(){s&&clearTimeout(s),tD(this)}),t4(a,"timeout",function(){s&&clearTimeout(s),tD(this),t&&t(null)}),function(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.P=n,e.J=!1,e.c=!0,e.a=e.D?e.D.a():oZ.a(),e.C=e.D?iZ(e.D):iZ(oZ),e.a.onreadystatechange=I(e.Wb,e);try{oa(e.b,oT(e,"Opening Xhr")),e.N=!0,e.a.open(n,String(t),!0),e.N=!1}catch(t){oa(e.b,oT(e,"Error opening Xhr: "+t.message)),om(e,t);return}t=r||"";var o,a=new nn(e.headers);i&&function(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(g(e)||"string"==typeof e)K(e,t,void 0);else for(var n=nt(e),r=ne(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(i,function(e,t){a.set(t,e)}),i=function(e){e:{for(var t=oy,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(a.Y()),r=c.FormData&&t instanceof c.FormData,!$(ov,n)||i||r||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach(function(e,t){this.a.setRequestHeader(t,e)},e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.S&&(e.a.withCredentials=e.S);try{oE(e),0<e.g&&(e.u=(o=e.a,eG&&e2(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),oa(e.b,oT(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.u)),e.u?(e.a.timeout=e.g,e.a.ontimeout=I(e.Ma,e)):e.s=t9(e.Ma,e.g,e)),oa(e.b,oT(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){oa(e.b,oT(e,"Send error: "+t.message)),om(e,t)}}(a,e,n,r,i)};var at=new em(ew,"https://apis.google.com/js/client.js?onload=%{onload}"),an="__fcb"+Math.floor(1e6*Math.random()).toString();function ar(e,t,n,r,i,o,a){var s=nf(t+n);nl(s,"key",e.c),a&&nl(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&nl(s,c,i[c]);return new ti(function(t,n){ae(e,s.toString(),function(e){e?e.error?n(aJ(e,o||{})):t(e):n(new D("network-request-failed"))},r,u?void 0:nP(n9(i)),e.a,e.v.get())})}function ai(e){if("string"!=typeof(e=e.email)||!nV.test(e))throw new D("invalid-email")}function ao(e){"email"in e&&ai(e)}function aa(e){if(!e[o1]){if(e.mfaPendingCredential)throw new D("multi-factor-auth-required",null,ep(e));throw new D("internal-error")}}function as(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new D("internal-error")}else{if(!e.sessionInfo)throw new D("missing-verification-id");if(!e.code)throw new D("missing-verification-code")}}oW.prototype.s=function(e,t,n,r,i){var o=this;o0.then(function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:r,headers:i,authType:"none",callback:function(e){window.gapi.auth.setToken(a),t&&t(e)}})}).o(function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})})},oW.prototype.Ab=function(){return aY(this,aj,{})},oW.prototype.Cb=function(e,t){return aY(this,aL,{idToken:e,email:t})},oW.prototype.Db=function(e,t){return aY(this,aF,{idToken:e,password:t})};var au={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ac(e){if(!e.phoneVerificationInfo)throw new D("internal-error");if(!e.phoneVerificationInfo.sessionInfo)throw new D("missing-verification-id");if(!e.phoneVerificationInfo.code)throw new D("missing-verification-code")}function al(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new D("internal-error")}function ah(e,t){return t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&nS(e=new nE(e.postBody),"nonce")&&(t.nonce=e.get("nonce"))),t}function af(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=iX(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=iX(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=iX(e)):e.errorMessage&&(t=aX(e.errorMessage)),t)throw t;aa(e)}function ad(e,t){return t.returnIdpCredential=!0,aY(e,aB,t)}function ap(e,t){return t.returnIdpCredential=!0,aY(e,aW,t)}function ag(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,aY(e,aV,t)}function av(e){if(!e.oobCode)throw new D("invalid-action-code")}(i=oW.prototype).Eb=function(e,t){var n={idToken:e},r=[];return ef(au,function(e,i){var o=t[i];null===o?r.push(e):i in t&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),aY(this,aL,n)},i.wb=function(e,t){return ev(e={requestType:"PASSWORD_RESET",email:e},t),aY(this,aN,e)},i.xb=function(e,t){return ev(e={requestType:"EMAIL_SIGNIN",email:e},t),aY(this,aD,e)},i.vb=function(e,t){return ev(e={requestType:"VERIFY_EMAIL",idToken:e},t),aY(this,aA,e)},i.Fb=function(e,t,n){return ev(e={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:e,newEmail:t},n),aY(this,aP,e)},i.gb=function(e){return aY(this,az,e)},i.ob=function(e,t){return aY(this,aR,{oobCode:e,newPassword:t})},i.Sa=function(e){return aY(this,am,{oobCode:e})},i.kb=function(e){return aY(this,ay,{oobCode:e})};var ay={endpoint:"setAccountInfo",A:av,Z:"email",B:!0},am={endpoint:"resetPassword",A:av,G:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t&&"VERIFY_AND_CHANGE_EMAIL"!=t)throw new D("internal-error")},B:!0},ab={endpoint:"signupNewUser",A:function(e){if(ai(e),!e.password)throw new D("weak-password")},G:aa,V:!0,B:!0},a_={endpoint:"createAuthUri",B:!0},aw={endpoint:"deleteAccount",O:["idToken"]},aE={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(e){if(!Array.isArray(e.deleteProvider))throw new D("internal-error")}},aI={endpoint:"emailLinkSignin",O:["email","oobCode"],A:ai,G:aa,V:!0,B:!0},aC={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:ai,G:aa,V:!0},aT={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:ac,G:aa,B:!0,Na:!0},aS={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:ac,G:aa,B:!0,Na:!0},ak={endpoint:"getAccountInfo"},aD={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new D("internal-error");ai(e)},Z:"email",B:!0},aA={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new D("internal-error")},Z:"email",B:!0},aP={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(e){if("VERIFY_AND_CHANGE_EMAIL"!=e.requestType)throw new D("internal-error")},Z:"email",B:!0},aN={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(e){if("PASSWORD_RESET"!=e.requestType)throw new D("internal-error");ai(e)},Z:"email",B:!0},ax={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},aO={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(e){if(!e.recaptchaSiteKey)throw new D("internal-error")}},aR={endpoint:"resetPassword",A:av,Z:"email",B:!0},aM={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},aL={endpoint:"setAccountInfo",O:["idToken"],A:ao,V:!0},aF={endpoint:"setAccountInfo",O:["idToken"],A:function(e){if(ao(e),!e.password)throw new D("weak-password")},G:aa,V:!0},aj={endpoint:"signupNewUser",G:aa,V:!0,B:!0},aU={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(e){if(!e.phoneEnrollmentInfo)throw new D("internal-error");if(!e.phoneEnrollmentInfo.phoneNumber)throw new D("missing-phone-number");if(!e.phoneEnrollmentInfo.recaptchaToken)throw new D("missing-app-credential")},G:function(e){if(!e.phoneSessionInfo||!e.phoneSessionInfo.sessionInfo)throw new D("internal-error")},B:!0,Na:!0},aq={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(e){if(!e.phoneSignInInfo||!e.phoneSignInInfo.recaptchaToken)throw new D("missing-app-credential")},G:function(e){if(!e.phoneResponseInfo||!e.phoneResponseInfo.sessionInfo)throw new D("internal-error")},B:!0,Na:!0},aB={endpoint:"verifyAssertion",A:al,Za:ah,G:af,V:!0,B:!0},aV={endpoint:"verifyAssertion",A:al,Za:ah,G:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new D("user-not-found");if(e.errorMessage)throw aX(e.errorMessage);aa(e)},V:!0,B:!0},aW={endpoint:"verifyAssertion",A:function(e){if(al(e),!e.idToken)throw new D("internal-error")},Za:ah,G:af,V:!0},aK={endpoint:"verifyCustomToken",A:function(e){if(!e.token)throw new D("invalid-custom-token")},G:aa,V:!0,B:!0},aG={endpoint:"verifyPassword",A:function(e){if(ai(e),!e.password)throw new D("wrong-password")},G:aa,V:!0,B:!0},az={endpoint:"verifyPhoneNumber",A:as,G:aa,B:!0},aH={endpoint:"verifyPhoneNumber",A:function(e){if(!e.idToken)throw new D("internal-error");as(e)},G:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",iX(e);aa(e)}},a$={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:as,G:aa,B:!0},aQ={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(e){if(!!e[o1]^!!e.refreshToken)throw new D("internal-error")},B:!0,Na:!0};function aY(e,t,n){if(!function(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var r=e[t[n]];if(null==r||""===r)return!1}return!0}(n,t.O))return tf(new D("internal-error"));var r,i=!!t.Na,o=t.Vb||"POST";return th(n).then(t.A).then(function(){return t.V&&(n.returnSecureToken=!0),t.B&&e.b&&void 0===n.tenantId&&(n.tenantId=e.b),i?ar(e,e.i,t.endpoint,o,n,t.Ib,t.mb||!1):ar(e,e.h,t.endpoint,o,n,t.Ib,t.mb||!1)}).then(function(e){return r=e,t.Za?t.Za(n,r):r}).then(t.G).then(function(){if(!t.Z)return r;if(!(t.Z in r))throw new D("internal-error");return r[t.Z]})}function aX(e){return aJ({error:{errors:[{message:e}],code:400,message:e}})}function aJ(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new D(r[n]):null)return n;for(var i in n=e.error&&e.error.message||"",ev(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},t||{}),t=(t=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<t.length?t[1]:void 0,r)if(0===n.indexOf(i))return new D(r[i],t);return!t&&e&&(t=n8(e)),new D("internal-error",t)}function aZ(e){var t;this.b=e,this.a=null,this.sb=(t=this,(a3||(a3=new ti(function(e,t){function n(){rn(),n1("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){rn(),t(Error("Network Error"))},timeout:a1.get()})}if(n1("gapi.iframes.Iframe"))e();else if(n1("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();c[r]=function(){n1("gapi.load")?n():t(Error("Network Error"))},th(oL(r=eT(a0,{onload:r}))).o(function(){t(Error("Network Error"))})}}).o(function(e){throw a3=null,e}))).then(function(){return new ti(function(e,n){n1("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:n1("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},a2.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})}))}var a0=new em(ew,"https://apis.google.com/js/api.js?onload=%{onload}"),a1=new rr(3e4,6e4),a2=new rr(5e3,15e3),a3=null;function a6(e,t,n,r){this.l=e,this.h=t,this.i=n,this.g=r,this.f=null,e=this.g?nd((e=nf(this.g.url)).c,e.a,e.g,"/emulator/auth/iframe"):nd("https",this.l,null,"/__/auth/iframe"),this.a=e,nl(this.a,"apiKey",this.h),nl(this.a,"appName",this.i),this.b=null,this.c=[]}function a5(e,t,n,r,i,o){this.u=e,this.s=t,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function a4(e){try{return r.default.app(e).auth().Ga()}catch(e){return[]}}function a8(e,t,n,r,i,o){this.s=e,this.g=t,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function a9(e){var t=nL();return aY(e,ax,{}).then(function(e){return e.authorizedDomains||[]}).then(function(e){e:{var n=nf(t),r=n.c;n=n.a;for(var i=0;i<e.length;i++){var o=e[i],a=n;if(a=0==o.indexOf("chrome-extension://")?nf(o).a==a&&"chrome-extension"==r:("http"==r||"https"==r)&&(nB.test(o)?a==o:RegExp("^(.+\\."+(o=o.split(".").join("\\."))+"|"+o+")$","i").test(a))){e=!0;break e}}e=!1}if(!e)throw new iQ(nL())})}function a7(e){return e.m||(e.m=nW().then(function(){if(!e.u){var t=e.c,n=e.i,r=a4(e.b),i=new a6(e.s,e.g,e.b,e.f);i.f=t,i.b=n,i.c=J(r||[]),e.u=i.toString()}e.v=new aZ(e.u),function(e){if(!e.v)throw Error("IfcHandler must be initialized!");!function(e,t){e.sb.then(function(){e.a.register("authEvent",t,n1("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(e.v,function(t){var n={};if(t&&t.authEvent){var r=!1;for(n=0,t=iz(t.authEvent);n<e.h.length;n++)r=e.h[n](t)||r;return(n={}).status=r?"ACK":"ERROR",th(n)}return n.status="ERROR",th(n)})}(e)})),e.m}function se(e){return e.l||(e.C=e.c?nZ(e.c,a4(e.b)):null,e.l=new oW(e.g,O(e.i),e.C),e.f&&o8(e.l,e.f)),e.l}function st(e,t,n,r,i,o,a,s,u,c,l,h){return(e=new a5(e,t,n,r,i,h)).l=o,e.g=a,e.i=s,e.b=ep(u||null),e.f=c,e.zb(l).toString()}function sn(e){if(this.a=e||r.default.INTERNAL.reactNative&&r.default.INTERNAL.reactNative.AsyncStorage,!this.a)throw new D("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function sr(e){this.b=e,this.a={},this.f=I(this.c,this)}a6.prototype.toString=function(){return this.f?nl(this.a,"v",this.f):nT(this.a.b,"v"),this.b?nl(this.a,"eid",this.b):nT(this.a.b,"eid"),this.c.length?nl(this.a,"fw",this.c.join(",")):nT(this.a.b,"fw"),this.a.toString()},a5.prototype.zb=function(e){return this.h=e,this},a5.prototype.toString=function(){if(this.v){var e=nf(this.v.url);e=nd(e.c,e.a,e.g,"/emulator/auth/handler")}else e=nd("https",this.u,null,"/__/auth/handler");if(nl(e,"apiKey",this.s),nl(e,"appName",this.c),nl(e,"authType",this.m),this.a.isOAuthProvider){var t=this.a;try{var n=r.default.app(this.c).auth().la()}catch(e){n=null}for(var i in t.pb=n,nl(e,"providerId",this.a.providerId),t=n9((n=this.a).Jb))t[i]=t[i].toString();i=n.Qc,t=ep(t);for(var o=0;o<i.length;o++){var a=i[o];a in t&&delete t[a]}n.qb&&n.pb&&!t[n.qb]&&(t[n.qb]=n.pb),ed(t)||nl(e,"customParameters",n8(t))}if("function"==typeof this.a.Rb&&(n=this.a.Rb()).length&&nl(e,"scopes",n.join(",")),this.l?nl(e,"redirectUrl",this.l):nT(e.b,"redirectUrl"),this.g?nl(e,"eventId",this.g):nT(e.b,"eventId"),this.i?nl(e,"v",this.i):nT(e.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!nh(e,s)&&nl(e,s,this.b[s]);return this.h?nl(e,"tid",this.h):nT(e.b,"tid"),this.f?nl(e,"eid",this.f):nT(e.b,"eid"),(s=a4(this.c)).length&&nl(e,"fw",s.join(",")),e.toString()},(i=a8.prototype).Pb=function(e,t,n){var r=new D("popup-closed-by-user"),i=new D("web-storage-unsupported"),o=this,a=!1;return this.ma().then(function(){var n;(n={type:"webStorageSupport"},a7(o).then(function(){var e;return(e=o.v).sb.then(function(){return new ti(function(t){e.a.send(n.type,n,t,n1("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}).then(function(e){if(e&&e.length&&void 0!==e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()})).then(function(n){n||(e&&nU(e),t(i),a=!0)})}).o(function(){}).then(function(){if(!a)return new ti(function(t){return function n(){t7(2e3).then(function(){if(e&&!e.closed)return n();t()})}()})}).then(function(){if(!a)return t7(n).then(function(){t(r)})})},i.Yb=function(){var e=n0();return!n4(e)&&!rt(e)},i.Ub=function(){return!1},i.Nb=function(e,t,n,r,i,o,a,s){if(!e)return tf(new D("popup-blocked"));if(a&&!n4())return this.ma().o(function(t){nU(e),i(t)}),r(),th();this.a||(this.a=a9(se(this)));var u=this;return this.a.then(function(){var t=u.ma().o(function(t){throw nU(e),i(t),t});return r(),t}).then(function(){iK(n),a||nF(st(u.s,u.g,u.b,t,n,null,o,u.c,void 0,u.i,s,u.f),e)}).o(function(e){throw"auth/network-request-failed"==e.code&&(u.a=null),e})},i.Ob=function(e,t,n,r){this.a||(this.a=a9(se(this)));var i=this;return this.a.then(function(){iK(t),nF(st(i.s,i.g,i.b,e,t,nL(),n,i.c,void 0,i.i,r,i.f))}).o(function(e){throw"auth/network-request-failed"==e.code&&(i.a=null),e})},i.ma=function(){var e=this;return a7(this).then(function(){return e.v.sb}).o(function(){throw e.a=null,new D("network-request-failed")})},i.ac=function(){return!0},i.Ea=function(e){this.h.push(e)},i.Ta=function(e){Y(this.h,function(t){return t==e})},(i=sn.prototype).get=function(e){return th(this.a.getItem(e)).then(function(e){return e&&n7(e)})},i.set=function(e,t){return th(this.a.setItem(e,n8(t)))},i.U=function(e){return th(this.a.removeItem(e))},i.ca=function(){},i.ia=function(){};var si=[];function so(e,t,n){ed(e.a)&&e.b.addEventListener("message",e.f),void 0===e.a[t]&&(e.a[t]=[]),e.a[t].push(n)}function sa(e){this.a=e}function ss(e){this.c=e,this.b=!1,this.a=[]}function su(e,t,n,r){var i,o,a,s,u=n||{},c=null;if(e.b)return tf(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new ti(function(n,r){h?(i=Math.floor(1e20*Math.random()).toString(),h.port1.start(),a=setTimeout(function(){r(Error("unsupported_event"))},l),c={messageChannel:h,onMessage:o=function(e){e.data.eventId===i&&("ack"===e.data.status?(clearTimeout(a),s=setTimeout(function(){r(Error("timeout"))},3e3)):"done"===e.data.status?(clearTimeout(s),void 0!==e.data.response?n(e.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},e.a.push(c),h.port1.addEventListener("message",o),e.c.postMessage({eventType:t,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))}).then(function(t){return sc(e,c),t}).o(function(t){throw sc(e,c),t})}function sc(e,t){if(t){var n=t.messageChannel,r=t.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),Y(e.a,function(e){return e==t})}}function sl(){if(!sd())throw new D("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=c.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var e,t=this;nz()&&self?(this.v=function(){var e=nz()?self:null;if(K(si,function(n){n.b==e&&(t=n)}),!t){var t=new sr(e);si.push(t)}return t}(),so(this.v,"keyChanged",function(e,n){return sm(t).then(function(e){return 0<e.length&&K(t.a,function(t){t(e)}),{keyProcessed:$(e,n.key)}})}),so(this.v,"ping",function(){return th(["keyChanged"])})):((e=c.navigator)&&e.serviceWorker?th().then(function(){return e.serviceWorker.ready}).then(function(e){return e.active||null}).o(function(){return null}):th(null)).then(function(e){(t.h=e)&&(t.g=new ss(new sa(e)),su(t.g,"ping",null,!0).then(function(e){e[0].fulfilled&&$(e[0].value,"keyChanged")&&(t.s=!0)}).o(function(){}))})}function sh(e){return e.i||(e.i=function e(t){return new ti(function(n,r){var i=t.m.open("firebaseLocalStorageDb",1);i.onerror=function(e){try{e.preventDefault()}catch(e){}r(Error(e.target.error))},i.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){r(e)}},i.onsuccess=function(i){(i=i.target.result).objectStoreNames.contains("firebaseLocalStorage")?n(i):new ti(function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(e){n(Error(e.target.error))}}).then(function(){return e(t)}).then(function(e){n(e)}).o(function(e){r(e)})}})}(e)),e.i}function sf(e,t){var n=0;return new ti(function r(i,o){sh(e).then(t).then(i).o(function(t){if(!(3<++n))return sh(e).then(function(t){return t.close(),e.i=void 0,r(i,o)}).o(function(e){o(e)});o(t)})})}function sd(){try{return!!c.indexedDB}catch(e){return!1}}function sp(e){return e.objectStore("firebaseLocalStorage")}function sg(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function sv(e){return new ti(function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(e.target.error)}})}function sy(e,t){var n;return e.g&&e.h&&((n=c.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===e.h?su(e.g,"keyChanged",{key:t},e.s).then(function(){}).o(function(){}):th()}function sm(e){return sh(e).then(function(e){var t=sp(sg(e,!1));return t.getAll?sv(t.getAll()):new ti(function(e,n){var r=[],i=t.openCursor();i.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},i.onerror=function(e){n(e.target.error)}})}).then(function(t){var n={},r=[];if(0==e.b){for(r=0;r<t.length;r++)n[t[r].fbase_key]=t[r].value;r=function e(t,n){var r,i=[];for(r in t)r in n?typeof t[r]!=typeof n[r]?i.push(r):"object"==typeof t[r]&&null!=t[r]&&null!=n[r]?0<e(t[r],n[r]).length&&i.push(r):t[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in t||i.push(r);return i}(e.c,n),e.c=n}return r})}function sb(e){e.l&&e.l.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function s_(e){var t=this,n=null;this.a=[],this.type="indexedDB",this.c=e,this.b=th().then(function(){if(sd()){var e=re(),r="__sak"+e;return sD||(sD=new sl),(n=sD).set(r,e).then(function(){return n.get(r)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return n.U(r)}).then(function(){return n}).o(function(){return t.c})}return t.c}).then(function(e){return t.type=e.type,e.ca(function(e){K(t.a,function(t){t(e)})}),e})}function sw(){this.a={},this.type="inMemory"}function sE(){if(!function(){var e="Node"==nH();if(!(e=sI()||e&&r.default.INTERNAL.node&&r.default.INTERNAL.node.localStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==nH())throw new D("internal-error","The LocalStorage compatibility library was not found.");throw new D("web-storage-unsupported")}this.a=sI()||r.default.INTERNAL.node.localStorage,this.type="localStorage"}function sI(){try{var e=c.localStorage,t=re();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}function sC(){this.type="nullStorage"}function sT(){if(!function(){var e="Node"==nH();if(!(e=sS()||e&&r.default.INTERNAL.node&&r.default.INTERNAL.node.sessionStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==nH())throw new D("internal-error","The SessionStorage compatibility library was not found.");throw new D("web-storage-unsupported")}this.a=sS()||r.default.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function sS(){try{var e=c.sessionStorage,t=re();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}function sk(){var e={};e.Browser=sP,e.Node=sN,e.ReactNative=sx,e.Worker=sO,this.a=e[nH()]}sr.prototype.c=function(e){var t=e.data.eventType,n=e.data.eventId,r=this.a[t];if(r&&0<r.length){e.ports[0].postMessage({status:"ack",eventId:n,eventType:t,response:null});var i=[];K(r,function(t){i.push(th().then(function(){return t(e.origin,e.data.data)}))}),tp(i).then(function(r){var i=[];K(r,function(e){i.push({fulfilled:e.Qb,value:e.value,reason:e.reason?e.reason.message:void 0})}),K(i,function(e){for(var t in e)void 0===e[t]&&delete e[t]}),e.ports[0].postMessage({status:"done",eventId:n,eventType:t,response:i})})}},sa.prototype.postMessage=function(e,t){this.a.postMessage(e,t)},ss.prototype.close=function(){for(;0<this.a.length;)sc(this,this.a[0]);this.b=!0},(i=sl.prototype).set=function(e,t){var n=this,r=!1;return sf(this,function(t){return sv((t=sp(sg(t,!0))).get(e))}).then(function(i){return sf(n,function(o){if(o=sp(sg(o,!0)),i)return i.value=t,sv(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=e,a.value=t,sv(o.add(a))})}).then(function(){return n.c[e]=t,sy(n,e)}).oa(function(){r&&n.b--})},i.get=function(e){return sf(this,function(t){return sv(sp(sg(t,!1)).get(e))}).then(function(e){return e&&e.value})},i.U=function(e){var t=this,n=!1;return sf(this,function(r){return n=!0,t.b++,sv(sp(sg(r,!0)).delete(e))}).then(function(){return delete t.c[e],sy(t,e)}).oa(function(){n&&t.b--})},i.ca=function(e){var t;0==this.a.length&&(t=this,sb(t),function e(){t.f=setTimeout(function(){t.l=sm(t).then(function(e){0<e.length&&K(t.a,function(t){t(e)})}).then(function(){e()}).o(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()),this.a.push(e)},i.ia=function(e){Y(this.a,function(t){return t==e}),0==this.a.length&&sb(this)},(i=s_.prototype).get=function(e){return this.b.then(function(t){return t.get(e)})},i.set=function(e,t){return this.b.then(function(n){return n.set(e,t)})},i.U=function(e){return this.b.then(function(t){return t.U(e)})},i.ca=function(e){this.a.push(e)},i.ia=function(e){Y(this.a,function(t){return t==e})},(i=sw.prototype).get=function(e){return th(this.a[e])},i.set=function(e,t){return this.a[e]=t,th()},i.U=function(e){return delete this.a[e],th()},i.ca=function(){},i.ia=function(){},(i=sE.prototype).get=function(e){var t=this;return th().then(function(){return n7(t.a.getItem(e))})},i.set=function(e,t){var n=this;return th().then(function(){var r=n8(t);null===r?n.U(e):n.a.setItem(e,r)})},i.U=function(e){var t=this;return th().then(function(){t.a.removeItem(e)})},i.ca=function(e){c.window&&tz(c.window,"storage",e)},i.ia=function(e){c.window&&tQ(c.window,"storage",e)},(i=sC.prototype).get=function(){return th(null)},i.set=function(){return th()},i.U=function(){return th()},i.ca=function(){},i.ia=function(){},(i=sT.prototype).get=function(e){var t=this;return th().then(function(){return n7(t.a.getItem(e))})},i.set=function(e,t){var n=this;return th().then(function(){var r=n8(t);null===r?n.U(e):n.a.setItem(e,r)})},i.U=function(e){var t=this;return th().then(function(){t.a.removeItem(e)})},i.ca=function(){},i.ia=function(){};var sD,sA,sP={F:sE,cb:sT},sN={F:sE,cb:sT},sx={F:sn,cb:sC},sO={F:sE,cb:sC},sR={rd:"local",NONE:"none",td:"session"};function sM(){var e=!!(!rt(n0())&&nG()),t=n4(),n=n2();this.m=e,this.h=t,this.l=n,this.a={},sA||(sA=new sk),e=sA;try{this.g=!nM()&&ra()||!c.indexedDB?new e.a.F:new s_(nz()?new sw:new e.a.F)}catch(e){this.g=new sw,this.h=!0}try{this.i=new e.a.cb}catch(e){this.i=new sw}this.v=new sw,this.f=I(this.Zb,this),this.b={}}function sL(){return e||(e=new sM),e}function sF(e,t){switch(t){case"session":return e.i;case"none":return e.v;default:return e.g}}function sj(e,t){return"firebase:"+e.name+(t?":"+t:"")}function sU(e,t,n){return n=sj(t,n),"local"==t.F&&(e.b[n]=null),sF(e,t.F).U(n)}function sq(e){e.c&&(clearInterval(e.c),e.c=null)}function sB(e){this.a=e,this.b=sL()}(i=sM.prototype).get=function(e,t){return sF(this,e.F).get(sj(e,t))},i.set=function(e,t,n){var r=sj(e,n),i=this,o=sF(this,e.F);return o.set(r,t).then(function(){return o.get(r)}).then(function(t){"local"==e.F&&(i.b[r]=t)})},i.addListener=function(e,t,n){var r;e=sj(e,t),this.l&&(this.b[e]=c.localStorage.getItem(e)),ed(this.a)&&(sF(this,"local").ca(this.f),this.h||(nM()||!ra())&&c.indexedDB||!this.l||(r=this,sq(r),r.c=setInterval(function(){for(var e in r.a){var t=c.localStorage.getItem(e),n=r.b[e];t!=n&&(r.b[e]=t,t=new tR({type:"storage",key:e,target:window,oldValue:n,newValue:t,a:!0}),r.Zb(t))}},1e3))),this.a[e]||(this.a[e]=[]),this.a[e].push(n)},i.removeListener=function(e,t,n){e=sj(e,t),this.a[e]&&(Y(this.a[e],function(e){return e==n}),0==this.a[e].length&&delete this.a[e]),ed(this.a)&&(sF(this,"local").ia(this.f),sq(this))},i.Zb=function(e){if(e&&e.g){var t=e.a.key;if(null==t)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=c.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){if(void 0!==e.a.a?sF(this,"local").ia(this.f):sq(this),this.m){if(n=c.localStorage.getItem(t),(r=e.a.newValue)!==n)null!==r?c.localStorage.setItem(t,r):c.localStorage.removeItem(t);else if(this.b[t]===r&&void 0===e.a.a)return}var o=this;n=function(){(void 0!==e.a.a||o.b[t]!==c.localStorage.getItem(t))&&(o.b[t]=c.localStorage.getItem(t),o.nb(t))},eG&&e3&&10==e3&&c.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else K(e,I(this.nb,this))},i.nb=function(e){this.a[e]&&K(this.a[e],function(e){e()})};var sV={name:"authEvent",F:"local"};function sW(){this.a=sL()}function sK(e,n){this.b=sG,this.f=c.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=n,this.l=c.Int32Array?new Int32Array(64):Array(64),void 0===t&&(t=c.Int32Array?new Int32Array(sJ):sJ),this.reset()}S(sK,function(){this.b=-1});for(var sG=64,sz=sG-1,sH=[],s$=0;s$<sz;s$++)sH[s$]=0;var sQ=X(128,sH);function sY(e){for(var n=e.f,r=e.l,i=0,o=0;o<n.length;)r[i++]=n[o]<<24|n[o+1]<<16|n[o+2]<<8|n[o+3],o=4*i;for(n=16;64>n;n++){o=0|r[n-15],i=0|r[n-2];var a=(0|r[n-16])+((o>>>7|o<<25)^(o>>>18|o<<14)^o>>>3)|0,s=(0|r[n-7])+((i>>>17|i<<15)^(i>>>19|i<<13)^i>>>10)|0;r[n]=a+s|0}i=0|e.a[0],o=0|e.a[1];var u=0|e.a[2],c=0|e.a[3],l=0|e.a[4],h=0|e.a[5],f=0|e.a[6];for(n=0,a=0|e.a[7];64>n;n++){var d=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&o^i&u^o&u)|0;s=l&h^~l&f,s=(a=a+((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))|0)+((s=s+(0|t[n])|0)+(0|r[n])|0)|0,a=f,f=h,h=l,l=c+s|0,c=u,u=o,o=i,i=s+d|0}e.a[0]=e.a[0]+i|0,e.a[1]=e.a[1]+o|0,e.a[2]=e.a[2]+u|0,e.a[3]=e.a[3]+c|0,e.a[4]=e.a[4]+l|0,e.a[5]=e.a[5]+h|0,e.a[6]=e.a[6]+f|0,e.a[7]=e.a[7]+a|0}function sX(e,t,n){void 0===n&&(n=t.length);var r=0,i=e.c;if("string"==typeof t)for(;r<n;)e.f[i++]=t.charCodeAt(r++),i==e.b&&(sY(e),i=0);else if(g(t))for(;r<n;){var o=t[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");e.f[i++]=o,i==e.b&&(sY(e),i=0)}else throw Error("message must be string or array");e.c=i,e.g+=n}sK.prototype.reset=function(){this.g=this.c=0,this.a=c.Int32Array?new Int32Array(this.h):J(this.h)};var sJ=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function sZ(){sK.call(this,8,s0)}S(sZ,sK);var s0=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function s1(e,t,n,r,i,o){this.v=e,this.i=t,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=t+":"+n,this.C=new sW,this.g=new sB(this.h),this.f=null,this.b=[],this.a=this.c=null}function s2(e){return new D("invalid-cordova-configuration",e)}function s3(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(e){}}function s6(e){return e.f||(e.f=e.ma().then(function(){return new ti(function(t){e.Ea(function n(r){return t(r),e.Ta(n),!1}),function(e){function t(t){o=!0,a&&a.cancel(),s5(e).then(function(n){var r=i;if(n&&t&&t.url){var o=null;-1!=(r=ic(t.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=n7(nh(o=nf(r),"firebaseError")||null))?A(o):null)?new iG(n.c,n.b,null,null,o,null,n.T()):new iG(n.c,n.b,r,n.f,null,null,n.T())),r=o||i}s3(e,r)})}var n,r,i=new iG("unknown",null,null,null,new D("no-auth-event")),o=!1,a=t7(500).then(function(){return s5(e).then(function(){o||s3(e,i)})}),s=c.handleOpenURL;c.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(n1("BuildInfo.packageName",c).toLowerCase()+"://")&&t({url:e}),"function"==typeof s)try{s(e)}catch(e){console.error(e)}},i$||(i$=new iH),n=t,(r=i$).a.push(n),r.b||(r.b=function(e){for(var t=0;t<r.a.length;t++)r.a[t](e)},"function"==typeof(n=n1("universalLinks.subscribe",c))&&n(null,r.b))}(e)})})),e.f}function s5(e){var t,n=null;return(t=e.g).b.get(sV,t.a).then(function(e){return iz(e)}).then(function(t){return n=t,sU((t=e.g).b,sV,t.a)}).then(function(){return n})}function s4(e){this.a=e,this.b=sL()}(i=s1.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(nK(void 0)?nW().then(function(){return new ti(function(e,t){var n=c.document,r=setTimeout(function(){t(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),e()},!1)})}):tf(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof n1("universalLinks.subscribe",c))throw s2("cordova-universal-links-plugin-fix is not installed");if(void 0===n1("BuildInfo.packageName",c))throw s2("cordova-plugin-buildinfo is not installed");if("function"!=typeof n1("cordova.plugins.browsertab.openUrl",c))throw s2("cordova-plugin-browsertab is not installed");if("function"!=typeof n1("cordova.InAppBrowser.open",c))throw s2("cordova-plugin-inappbrowser is not installed")},function(){throw new D("cordova-not-ready")})},i.Pb=function(e,t){return t(new D("operation-not-supported-in-this-environment")),th()},i.Nb=function(){return tf(new D("operation-not-supported-in-this-environment"))},i.ac=function(){return!1},i.Yb=function(){return!0},i.Ub=function(){return!0},i.Ob=function(e,t,n,r){if(this.c)return tf(new D("redirect-operation-pending"));var i=this,o=c.document,a=null,s=null,u=null,l=null;return this.c=th().then(function(){return iK(t),s6(i)}).then(function(){return function(e,t,n,r,i){var o=function(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}(),a=new iG(t,r,null,o,new D("no-auth-event"),null,i),s=n1("BuildInfo.packageName",c);if("string"!=typeof s)throw new D("invalid-cordova-configuration");var u=n1("BuildInfo.displayName",c),l={};if(n0().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=s;else{if(!n0().toLowerCase().match(/android/))return tf(new D("operation-not-supported-in-this-environment"));l.apn=s}u&&(l.appDisplayName=u),o=function(e){var t=new sZ;sX(t,e),e=[];var n=8*t.g;56>t.c?sX(t,sQ,56-t.c):sX(t,sQ,t.b-(t.c-56));for(var r=63;56<=r;r--)t.f[r]=255&n,n/=256;for(sY(t),r=n=0;r<t.i;r++)for(var i=24;0<=i;i-=8)e[n++]=t.a[r]>>i&255;return z(e,function(e){return 1<(e=e.toString(16)).length?e:"0"+e}).join("")}(o),l.sessionId=o;var h=st(e.v,e.i,e.l,t,n,null,r,e.m,l,e.u,i,e.s);return e.ma().then(function(){var t=e.h;return e.C.a.set(sV,a.w(),t)}).then(function(){var t=n1("cordova.plugins.browsertab.isAvailable",c);if("function"!=typeof t)throw new D("invalid-cordova-configuration");var n=null;t(function(t){if(t){if("function"!=typeof(n=n1("cordova.plugins.browsertab.openUrl",c)))throw new D("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=n1("cordova.InAppBrowser.open",c)))throw new D("invalid-cordova-configuration");t=n0(),e.a=n(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,e,t,n,r)}).then(function(){return new ti(function(e,t){s=function(){var t=n1("cordova.plugins.browsertab.close",c);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(s),u=function(){a||(a=t7(2e3).then(function(){t(new D("redirect-cancelled-by-user"))}))},l=function(){ri()&&u()},o.addEventListener("resume",u,!1),n0().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)}).o(function(e){return s5(i).then(function(){throw e})})}).oa(function(){u&&o.removeEventListener("resume",u,!1),l&&o.removeEventListener("visibilitychange",l,!1),a&&a.cancel(),s&&i.Ta(s),i.c=null})},i.Ea=function(e){this.b.push(e),s6(this).o(function(t){"auth/invalid-cordova-configuration"===t.code&&e(t=new iG("unknown",null,null,null,new D("no-auth-event")))})},i.Ta=function(e){Y(this.b,function(t){return t==e})};var s8={name:"pendingRedirect",F:"session"};function s9(e){return sU(e.b,s8,e.a)}function s7(e,t,n,r){this.i={},this.u=0,this.D=e,this.v=t,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=I(this.s,this),this.b=new up,this.C=new ub,this.g=new s4(uf(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=ue(this.D,this.v,this.m,oG,this.J)}function ue(e,t,n,i,o){var a=r.default.SDK_VERSION||null;return nK()?new s1(e,t,n,a,i,o):new a8(e,t,n,a,i,o)}function ut(e){e.f||(e.f=!0,e.a.Ea(e.l));var t=e.a;return e.a.ma().o(function(n){throw e.a==t&&e.reset(),n})}function un(e){e.a.Yb()&&ut(e).o(function(t){var n=new iG("unknown",null,null,null,new D("operation-not-supported-in-this-environment"));uu(t)&&e.s(n)}),e.a.Ub()||ug(e.b)}function ur(e,t){var n;$(e.h,t)||e.h.push(t),e.f||(n=e.g).b.get(s8,n.a).then(function(e){return"pending"==e}).then(function(t){t?s9(e.g).then(function(){ut(e).o(function(t){var n=new iG("unknown",null,null,null,new D("operation-not-supported-in-this-environment"));uu(t)&&e.s(n)})}):un(e)}).o(function(){un(e)})}function ui(e,t){Y(e.h,function(e){return e==t})}s7.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=ue(this.D,this.v,this.m,null,this.J),this.i={}},s7.prototype.s=function(e){if(!e)throw new D("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),e&&e.getUid()&&this.i.hasOwnProperty(e.getUid()))return!1;for(var t=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(e.c,e.b)){(t=this.c[e.c])&&(t.h(e,r),e&&(e.f||e.b)&&(this.i[e.getUid()]=!0,this.u=Date.now())),t=!0;break}}return ug(this.b),t};var uo=new rr(2e3,1e4),ua=new rr(3e4,6e4);function us(e,t,n,r,i,o,a){return e.a.Nb(t,n,r,function(){e.f||(e.f=!0,e.a.Ea(e.l))},function(){e.reset()},i,o,a)}function uu(e){return!!e&&"auth/cordova-not-ready"==e.code}function uc(e,t,n,r,i){var o,a;return(a=e.g).b.set(s8,"pending",a.a).then(function(){return e.a.Ob(t,n,r,i).o(function(t){if(uu(t))throw new D("operation-not-supported-in-this-environment");return o=t,s9(e.g).then(function(){throw o})}).then(function(){return e.a.ac()?new ti(function(){}):s9(e.g).then(function(){return e.ra()}).then(function(){}).o(function(){})})})}function ul(e,t,n,r,i){return e.a.Pb(r,function(e){t.na(n,null,e,i)},uo.get())}s7.prototype.ra=function(){return this.b.ra()};var uh={};function uf(e,t,n){return e=e+":"+t,n&&(e=e+":"+n.url),e}function ud(e,t,n,r){var i=uf(t,n,r);return uh[i]||(uh[i]=new s7(e,t,n,r)),uh[i]}function up(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function ug(e){e.g||(e.g=!0,um(e,!1,null,null))}function uv(e){e.g&&!e.i&&um(e,!1,null,null)}function uy(e,t){if(e.b=function(){return th(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function um(e,t,n,r){t?r?function(e,t){if(e.b=function(){return tf(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}(e,r):uy(e,n):uy(e,{user:null}),e.f=[],e.c=[]}function ub(){}function u_(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(e){this.jb=e},enumerable:!1})}function uw(e,t){this.a=t,rl(this,"verificationId",e)}function uE(e,t,n,r){return new iB(e).gb(t,n).then(function(e){return new uw(e,r)})}function uI(e){var t=r6(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new D("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");rh(this,{token:e,expirationTime:ro(1e3*t.exp),authTime:ro(1e3*t.auth_time),issuedAtTime:ro(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,signInSecondFactor:t.firebase&&t.firebase.sign_in_second_factor?t.firebase.sign_in_second_factor:null,claims:t})}function uC(e,t,n){var r=t&&t[uS];if(!r)throw new D("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=e,this.f=ep(t),this.g=n,this.c=new il(null,r),this.b=[];var i=this;K(t[uT]||[],function(e){(e=rg(e))&&i.b.push(e)}),rl(this,"auth",this.a),rl(this,"session",this.c),rl(this,"hints",this.b)}up.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},up.prototype.h=function(e,t){if(e){this.reset(),this.g=!0;var n=e.c,r=e.b,i=e.a&&"auth/web-storage-unsupported"==e.a.code,o=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?e.a?(um(this,!0,null,e.a),th()):t.Fa(n,r)?function(e,t,n){n=n.Fa(t.c,t.b);var r=t.g,i=t.f,o=t.i,a=t.T(),s=!!t.c.match(/Redirect$/);n(r,i,a,o).then(function(t){um(e,s,t,null)}).o(function(t){um(e,s,null,t)})}(this,e,t):tf(new D("invalid-auth-event")):(um(this,!1,null,null),th())}else tf(new D("invalid-auth-event"))},up.prototype.ra=function(){var e=this;return new ti(function(t,n){var r;e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),r=new D("timeout"),e.a&&e.a.cancel(),e.a=t7(ua.get()).then(function(){e.b||(e.g=!0,um(e,!0,null,r))}))})},ub.prototype.h=function(e,t){if(e){var n=e.c,r=e.b;e.a?(t.na(e.c,null,e.a,e.b),th()):t.Fa(n,r)?function(e,t){var n=e.b,r=e.c;t.Fa(r,n)(e.g,e.f,e.T(),e.i).then(function(e){t.na(r,e,null,n)}).o(function(e){t.na(r,null,e,n)})}(e,t):tf(new D("invalid-auth-event"))}else tf(new D("invalid-auth-event"))},uw.prototype.confirm=function(e){return e=iV(this.verificationId,e),this.a(e)};var uT="mfaInfo",uS="mfaPendingCredential";function uk(e,t,n,r){D.call(this,"multi-factor-auth-required",r,t),this.b=new uC(e,t,n),rl(this,"resolver",this.b)}function uD(e,t,n){if(e&&y(e.serverResponse)&&"auth/multi-factor-auth-required"===e.code)try{return new uk(t,e.serverResponse,n,e.message)}catch(e){}return null}function uA(){}function uP(e){rl(this,"factorId",e.fa),this.a=e}function uN(e){if(uP.call(this,e),this.a.fa!=iB.PROVIDER_ID)throw new D("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function ux(e,t){for(var n in tO.call(this,e),t)this[n]=t[n]}function uO(e,t){this.a=e,this.b=[],this.c=I(this.yc,this),tz(this.a,"userReloaded",this.c);var n=[];t&&t.multiFactor&&t.multiFactor.enrolledFactors&&K(t.multiFactor.enrolledFactors,function(e){var t=null,r={};if(e){e.uid&&(r[rm]=e.uid),e.displayName&&(r[rv]=e.displayName),e.enrollmentTime&&(r[ry]=new Date(e.enrollmentTime).toISOString()),e.phoneNumber&&(r[rb]=e.phoneNumber);try{t=new r_(r)}catch(e){}e=t}else e=null;e&&n.push(e)}),uR(this,n)}function uR(e,t){e.b=t,rl(e,"enrolledFactors",t)}function uM(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function uL(e){this.f=e,this.b=this.a=null,this.c=Date.now()}function uF(e,t){void 0===t&&(t=e.b?(t=e.b).a-t.g:0),e.c=Date.now()+1e3*t}function uj(e,t){e.b=r3(t[o1]||""),e.a=t.refreshToken,uF(e,void 0!==(t=t.expiresIn)?Number(t):void 0)}function uU(e,t){this.a=e||null,this.b=t||null,rh(this,{lastSignInTime:ro(t||null),creationTime:ro(e||null)})}function uq(e,t,n,r,i,o){rh(this,{uid:e,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:t})}function uB(e,t,n){this.N=[],this.l=e.apiKey,this.m=e.appName,this.s=e.authDomain||null;var i,o=r.default.SDK_VERSION?nZ(r.default.SDK_VERSION):null;this.a=new oW(this.l,O(oG),o),(this.u=e.emulatorConfig||null)&&o8(this.a,this.u),this.h=new uL(this.a),uY(this,t[o1]),uj(this.h,t),rl(this,"refreshToken",this.h.a),uZ(this,n||{}),t6.call(this),this.P=!1,this.s&&n3()&&(this.b=ud(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=(i=this,new uM(function(){return i.I(!0)},function(e){return!!e&&"auth/network-request-failed"==e.code},function(){var e=i.h.c-Date.now()-3e5;return 0<e?e:0})),this.ba=I(this.ib,this);var a=this;this.za=null,this.Pa=function(e){a.xa(e.h)},this.qa=null,this.Ba=function(e){uV(a,e.c)},this.$=null,this.aa=[],this.Oa=function(e){uG(a,e.f)},this.ja=null,this.S=new uO(this,n),rl(this,"multiFactor",this.S)}function uV(e,t){e.u=t,o8(e.a,t),e.b&&(t=e.b,e.b=ud(e.s,e.l,e.m,e.u),e.P&&(ui(t,e),ur(e.b,e)))}function uW(e,t){e.qa&&tQ(e.qa,"languageCodeChanged",e.Pa),(e.qa=t)&&tz(t,"languageCodeChanged",e.Pa)}function uK(e,t){e.$&&tQ(e.$,"emulatorConfigChanged",e.Ba),(e.$=t)&&tz(t,"emulatorConfigChanged",e.Ba)}function uG(e,t){e.aa=t,o7(e.a,r.default.SDK_VERSION?nZ(r.default.SDK_VERSION,e.aa):null)}function uz(e,t){e.ja&&tQ(e.ja,"frameworkChanged",e.Oa),(e.ja=t)&&tz(t,"frameworkChanged",e.Oa)}function uH(e){try{return r.default.app(e.m).auth()}catch(t){throw new D("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function u$(e){e.J||e.D.b||(e.D.start(),tQ(e,"tokenChanged",e.ba),tz(e,"tokenChanged",e.ba))}function uQ(e){tQ(e,"tokenChanged",e.ba),e.D.stop()}function uY(e,t){e.Aa=t,rl(e,"_lat",t)}function uX(e){for(var t=[],n=0;n<e.W.length;n++)t.push(e.W[n](e));return tp(t).then(function(){return e})}function uJ(e){e.b&&!e.P&&(e.P=!0,ur(e.b,e))}function uZ(e,t){rh(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,tenantId:t.tenantId||null,metadata:new uU(t.createdAt,t.lastLoginAt),providerData:[]}),e.a.b=e.tenantId}function u0(){}function u1(e){return th().then(function(){if(e.J)throw new D("app-deleted")})}function u2(e){return z(e.providerData,function(e){return e.providerId})}function u3(e,t){t&&(u6(e,t.providerId),e.providerData.push(t))}function u6(e,t){Y(e.providerData,function(e){return e.providerId==t})}function u5(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&rl(e,t,n)}function u4(e,t){var n,r,i;e!=t&&(rh(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?rl(e,"metadata",new uU((n=t.metadata).a,n.b)):rl(e,"metadata",new uU),K(t.providerData,function(t){u3(e,t)}),r=e.h,i=t.h,r.b=i.b,r.a=i.a,r.c=i.c,rl(e,"refreshToken",e.h.a),uR(e.S,t.S.b))}function u8(e){return e.I().then(function(t){var n=e.isAnonymous;return aY(e.a,ak,{idToken:t}).then(I(e.Kc,e)).then(function(){return n||u5(e,"isAnonymous",!1),t})})}function u9(e,t){t[o1]&&e.Aa!=t[o1]&&(uj(e.h,t),e.dispatchEvent(new ux("tokenChanged")),uY(e,t[o1]),u5(e,"refreshToken",e.h.a))}function u7(e,t){return u8(e).then(function(){if($(u2(e),t))return uX(e).then(function(){throw new D("provider-already-linked")})})}function ce(e,t,n){return rf({user:e,credential:iW(t),additionalUserInfo:t=r7(t),operationType:n})}function ct(e,t){return u9(e,t),e.reload().then(function(){return e})}function cn(e,t,n,i,o){if(!n3())return tf(new D("operation-not-supported-in-this-environment"));if(e.i&&!o)return tf(e.i);var a=r9(n.providerId),s=re(e.uid+":::"),u=null;(!n4()||nG())&&e.s&&n.isOAuthProvider&&(u=st(e.s,e.l,e.m,t,n,null,s,r.default.SDK_VERSION||null,null,null,e.tenantId,e.u));var c=nq(u,a&&a.va,a&&a.ua);return i=i().then(function(){if(ci(e),!o)return e.I().then(function(){})}).then(function(){return us(e.b,c,t,n,s,!!u,e.tenantId)}).then(function(){return new ti(function(n,r){e.na(t,null,new D("cancelled-popup-request"),e.g||null),e.f=n,e.C=r,e.g=s,e.c=ul(e.b,e,t,c,s)})}).then(function(e){return c&&nU(c),e?rf(e):null}).o(function(e){throw c&&nU(c),e}),co(e,i,o)}function cr(e,t,n,r,i){if(!n3())return tf(new D("operation-not-supported-in-this-environment"));if(e.i&&!i)return tf(e.i);var o=null,a=re(e.uid+":::");return r=r().then(function(){if(ci(e),!i)return e.I().then(function(){})}).then(function(){return e.ga=a,uX(e)}).then(function(t){return e.ha&&(t=(t=e.ha).b.set(cu,e.w(),t.a)),t}).then(function(){return uc(e.b,t,n,a,e.tenantId)}).o(function(t){if(o=t,e.ha)return cc(e.ha);throw o}).then(function(){if(o)throw o}),co(e,r,i)}function ci(e){if(!e.b||!e.P){if(e.b&&!e.P)throw new D("internal-error");throw new D("auth-domain-config-required")}}function co(e,t,n){var r=e.i&&!n?(t.cancel(),tf(e.i)):t.o(function(t){throw t&&("auth/user-disabled"==t.code||"auth/user-token-expired"==t.code)&&(e.i||e.dispatchEvent(new ux("userInvalidated")),e.i=t),t});return e.N.push(r),r.oa(function(){Q(e.N,r)}),r.o(function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=uD(t.w(),uH(e),I(e.jc,e))),n||t})}function ca(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName,emulatorConfig:e.emulatorConfig},n={};if(!e.stsTokenManager||!e.stsTokenManager.accessToken)return null;n[o1]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null;var r=e.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new uB(t,n,e);return e.providerData&&K(e.providerData,function(e){e&&u3(i,rf(e))}),e.redirectEventId&&(i.ga=e.redirectEventId),i}function cs(e){this.a=e,this.b=sL()}uC.prototype.Rc=function(e){var t=this;return e.tb(this.a.a,this.c).then(function(e){var n=ep(t.f);return delete n[uT],delete n[uS],ev(n,e),t.g(n)})},S(uk,D),uA.prototype.tb=function(e,t,n){var r,i;return t.type==ih?(r=this,t.Ha().then(function(t){return t={idToken:t},void 0!==n&&(t.displayName=n),ev(t,{phoneVerificationInfo:iq(r.a)}),aY(e,aT,t)})):(i=this,t.Ha().then(function(t){return ev(t={mfaPendingCredential:t},{phoneVerificationInfo:iq(i.a)}),aY(e,aS,t)}))},S(uP,uA),S(uN,uP),S(ux,tO),(i=uO.prototype).yc=function(e){var t,n;uR(this,(t=e.hd,n=[],K(t.mfaInfo||[],function(e){(e=rg(e))&&n.push(e)}),n))},i.Sb=function(){return this.a.I().then(function(e){return new il(e,null)})},i.fc=function(e,t){var n=this,r=this.a.a;return this.Sb().then(function(n){return e.tb(r,n,t)}).then(function(e){return u9(n.a,e),n.a.reload()})},i.bd=function(e){var t=this,n="string"==typeof e?e:e.uid,r=this.a.a;return this.a.I().then(function(e){return aY(r,aQ,{idToken:e,mfaEnrollmentId:n})}).then(function(e){var r=G(t.b,function(e){return e.uid!=n});return uR(t,r),u9(t.a,e),t.a.reload().o(function(e){if("auth/user-token-expired"!=e.code)throw e})})},i.w=function(){return{multiFactor:{enrolledFactors:z(this.b,function(e){return e.w()})}}},uM.prototype.start=function(){this.a=this.c,function e(t,n){var r;t.stop(),t.b=t7((r=n)?(t.a=t.c,t.g()):(r=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),r)).then(function(){var e,t;return e=c.document,t=null,ri()||!e?th():new ti(function(n){t=function(){ri()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)}).o(function(n){throw e.removeEventListener("visibilitychange",t,!1),n})}).then(function(){return t.h()}).then(function(){e(t,!0)}).o(function(n){t.i(n)&&e(t,!1)})}(this,!0)},uM.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},uL.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},uL.prototype.getToken=function(e){var t,n,r;return e=!!e,this.b&&!this.a?tf(new D("user-token-expired")):e||!this.b||Date.now()>this.c-3e4?this.a?(t=this,n={grant_type:"refresh_token",refresh_token:this.a},(r=t.f,new ti(function(e,t){"refresh_token"==n.grant_type&&n.refresh_token||"authorization_code"==n.grant_type&&n.code?ae(r,r.l+"?key="+encodeURIComponent(r.c),function(n){n?n.error?t(aJ(n)):n.access_token&&n.refresh_token?e(n):t(new D("internal-error")):t(new D("network-request-failed"))},"POST",nC(n).toString(),r.g,r.m.get()):t(new D("internal-error"))})).then(function(e){return t.b=r3(e.access_token),t.a=e.refresh_token,uF(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}}).o(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})):th(null):th({accessToken:this.b.toString(),refreshToken:this.a})},uU.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},S(uB,t6),uB.prototype.xa=function(e){this.za=e,o4(this.a,e)},uB.prototype.la=function(){return this.za},uB.prototype.Ga=function(){return J(this.aa)},uB.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},rl(uB.prototype,"providerId","firebase"),(i=uB.prototype).reload=function(){var e=this;return co(this,u1(this).then(function(){return u8(e).then(function(){return uX(e)}).then(u0)}))},i.oc=function(e){return this.I(e).then(function(e){return new uI(e)})},i.I=function(e){var t=this;return co(this,u1(this).then(function(){return t.h.getToken(e)}).then(function(e){if(!e)throw new D("internal-error");return e.accessToken!=t.Aa&&(uY(t,e.accessToken),t.dispatchEvent(new ux("tokenChanged"))),u5(t,"refreshToken",e.refreshToken),e.accessToken}))},i.Kc=function(e){if(!(e=e.users)||!e.length)throw new D("internal-error");uZ(this,{uid:(e=e[0]).localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt,tenantId:e.tenantId});for(var t,n=(t=(t=e).providerUserInfo)&&t.length?z(t,function(e){return new uq(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)}):[],r=0;r<n.length;r++)u3(this,n[r]);u5(this,"isAnonymous",!(this.email&&e.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new ux("userReloaded",{hd:e}))},i.Lc=function(e){return ru("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(e)},i.ub=function(e){var t=this,n=null;return co(this,e.c(this.a,this.uid).then(function(e){return u9(t,e),n=ce(t,e,"reauthenticate"),t.i=null,t.reload()}).then(function(){return n}),!0)},i.Cc=function(e){return ru("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(e)},i.rb=function(e){var t=this,n=null;return co(this,u7(this,e.providerId).then(function(){return t.I()}).then(function(n){return e.b(t.a,n)}).then(function(e){return n=ce(t,e,"link"),ct(t,e)}).then(function(){return n}))},i.Dc=function(e,t){var n=this;return co(this,u7(this,"phone").then(function(){return uE(uH(n),e,t,I(n.rb,n))}))},i.Mc=function(e,t){var n=this;return co(this,th().then(function(){return uE(uH(n),e,t,I(n.ub,n))}),!0)},i.Cb=function(e){var t=this;return co(this,this.I().then(function(n){return t.a.Cb(n,e)}).then(function(e){return u9(t,e),t.reload()}))},i.ed=function(e){var t=this;return co(this,this.I().then(function(n){return e.b(t.a,n)}).then(function(e){return u9(t,e),t.reload()}))},i.Db=function(e){var t=this;return co(this,this.I().then(function(n){return t.a.Db(n,e)}).then(function(e){return u9(t,e),t.reload()}))},i.Eb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return u1(this);var t=this;return co(this,this.I().then(function(n){return t.a.Eb(n,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(e){return u9(t,e),u5(t,"displayName",e.displayName||null),u5(t,"photoURL",e.photoUrl||null),K(t.providerData,function(e){"password"===e.providerId&&(rl(e,"displayName",t.displayName),rl(e,"photoURL",t.photoURL))}),uX(t)}).then(u0))},i.cd=function(e){var t=this;return co(this,u8(this).then(function(n){return $(u2(t),e)?aY(t.a,aE,{idToken:n,deleteProvider:[e]}).then(function(e){var n={};return K(e.providerUserInfo||[],function(e){n[e.providerId]=!0}),K(u2(t),function(e){n[e]||u6(t,e)}),n[iB.PROVIDER_ID]||rl(t,"phoneNumber",null),uX(t)}):uX(t).then(function(){throw new D("no-such-provider")})}))},i.delete=function(){var e=this;return co(this,this.I().then(function(t){return aY(e.a,aw,{idToken:t})}).then(function(){e.dispatchEvent(new ux("userDeleted"))})).then(function(){for(var t=0;t<e.N.length;t++)e.N[t].cancel("app-deleted");uW(e,null),uK(e,null),uz(e,null),e.N=[],e.J=!0,uQ(e),rl(e,"refreshToken",null),e.b&&ui(e.b,e)})},i.Gb=function(e,t){return"linkViaPopup"==e&&(this.g||null)==t&&!!this.f||"reauthViaPopup"==e&&(this.g||null)==t&&!!this.f||"linkViaRedirect"==e&&(this.ga||null)==t||"reauthViaRedirect"==e&&(this.ga||null)==t},i.na=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.g||null)||(n&&this.C?this.C(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},i.Fa=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?I(this.Lb,this):"reauthViaPopup"==e&&t==(this.g||null)?I(this.Mb,this):"linkViaRedirect"==e&&(this.ga||null)==t?I(this.Lb,this):"reauthViaRedirect"==e&&(this.ga||null)==t?I(this.Mb,this):null},i.Ec=function(e){var t=this;return cn(this,"linkViaPopup",e,function(){return u7(t,e.providerId).then(function(){return uX(t)})},!1)},i.Nc=function(e){return cn(this,"reauthViaPopup",e,function(){return th()},!0)},i.Fc=function(e){var t=this;return cr(this,"linkViaRedirect",e,function(){return u7(t,e.providerId)},!1)},i.Oc=function(e){return cr(this,"reauthViaRedirect",e,function(){return th()},!0)},i.Lb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return co(this,this.I().then(function(n){return ap(i.a,{requestUri:e,postBody:r,sessionId:t,idToken:n})}).then(function(e){return o=ce(i,e,"link"),ct(i,e)}).then(function(){return o}))},i.Mb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return co(this,th().then(function(){return ig(ag(i.a,{requestUri:e,sessionId:t,postBody:r,tenantId:n}),i.uid)}).then(function(e){return o=ce(i,e,"reauthenticate"),u9(i,e),i.i=null,i.reload()}).then(function(){return o}),!0)},i.vb=function(e){var t=this,n=null;return co(this,this.I().then(function(t){return n=t,void 0===e||ed(e)?{}:r0(new rK(e))}).then(function(e){return t.a.vb(n,e)}).then(function(e){if(t.email!=e)return t.reload()}).then(function(){}))},i.Fb=function(e,t){var n=this,r=null;return co(this,this.I().then(function(e){return r=e,void 0===t||ed(t)?{}:r0(new rK(t))}).then(function(t){return n.a.Fb(r,e,t)}).then(function(e){if(n.email!=e)return n.reload()}).then(function(){}))},i.jc=function(e){var t=null,n=this;return co(this,e=ig(th(e),n.uid).then(function(e){return t=ce(n,e,"reauthenticate"),u9(n,e),n.i=null,n.reload()}).then(function(){return t}),!0)},i.toJSON=function(){return this.w()},i.w=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&ev(e,this.metadata.w()),K(this.providerData,function(t){e.providerData.push(function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}(t))}),ev(e,this.S.w()),e};var cu={name:"redirectUser",F:"session"};function cc(e){return sU(e.b,cu,e.a)}function cl(e){var t,n,r,i,o,a,s,u;this.a=e,this.b=sL(),this.c=null,this.f=(t=this,a=cd("local"),s=cd("session"),u=cd("none"),(n=t.b,i=sj(a,r=t.a),o=sF(n,a.F),n.get(a,r).then(function(e){var t=null;try{t=n7(c.localStorage.getItem(i))}catch(e){}if(t&&!e)return c.localStorage.removeItem(i),n.set(a,t,r);t&&e&&"localStorage"!=o.type&&c.localStorage.removeItem(i)})).then(function(){return t.b.get(s,t.a)}).then(function(e){return e?s:t.b.get(u,t.a).then(function(e){return e?u:t.b.get(a,t.a).then(function(e){return e?a:t.b.get(cf,t.a).then(function(e){return e?cd(e):a})})})}).then(function(e){return t.c=e,ch(t,e.F)}).o(function(){t.c||(t.c=a)})),this.b.addListener(cd("local"),this.a,I(this.g,this))}function ch(e,t){var n,r=[];for(n in sR)sR[n]!==t&&r.push(sU(e.b,cd(sR[n]),e.a));return r.push(sU(e.b,cf,e.a)),new ti(function(e,t){var n=r.length,i=[];if(n)for(var o=function(t,r){n--,i[t]=r,0==n&&e(i)},a=function(e){t(e)},s=0;s<r.length;s++)td(r[s],C(o,s),a);else e(i)})}cl.prototype.g=function(){var e=this,t=cd("local");cy(this,function(){return th().then(function(){return e.c&&"local"!=e.c.F?e.b.get(t,e.a):null}).then(function(n){if(n)return ch(e,"local").then(function(){e.c=t})})})};var cf={name:"persistence",F:"session"};function cd(e){return{name:"authUser",F:e}}function cp(e,t){return cy(e,function(){return e.b.set(e.c,t.w(),e.a)})}function cg(e){return cy(e,function(){return sU(e.b,e.c,e.a)})}function cv(e,t,n){return cy(e,function(){return e.b.get(e.c,e.a).then(function(e){return e&&t&&(e.authDomain=t),e&&n&&(e.emulatorConfig=n),ca(e||{})})})}function cy(e,t){return e.f=e.f.then(t,t),e.f}function cm(e){var t,n,i,o,a,s,u,c,l,h;if(this.l=!1,rl(this,"settings",new u_),rl(this,"app",e),cS(this).options&&cS(this).options.apiKey)e=r.default.SDK_VERSION?nZ(r.default.SDK_VERSION):null,this.a=new oW(cS(this).options&&cS(this).options.apiKey,O(oG),e);else throw new D("invalid-api-key");this.P=[],this.s=[],this.N=[],this.Pa=r.default.INTERNAL.createSubscribe(I(this.zc,this)),this.W=void 0,this.ib=r.default.INTERNAL.createSubscribe(I(this.Ac,this)),cC(this,null),this.i=new cl(cS(this).options.apiKey+":"+cS(this).name),this.D=new cs(cS(this).options.apiKey+":"+cS(this).name),this.$=cP(this,(a=this,l=cS(a).options.authDomain,h=(c=(s=a.D,u=cS(a).options.authDomain,s.b.get(cu,s.a).then(function(e){return e&&u&&(e.authDomain=u),ca(e||{})})).then(function(e){return(a.m=e)&&(e.ha=a.D),cc(a.D)}),cP(a,c)).then(function(){return cv(a.i,l,a.R)}).then(function(e){return e?(e.ha=a.D,a.m&&(a.m.ga||null)==(e.ga||null)?e:e.reload().then(function(){return cp(a.i,e).then(function(){return e})}).o(function(t){return"auth/network-request-failed"==t.code?e:cg(a.i)})):null}).then(function(e){cC(a,e||null)}),cP(a,h))),this.h=cP(this,(t=this,t.$.then(function(){return cI(t)}).o(function(){}).then(function(){if(!t.l)return t.ja()}).o(function(){}).then(function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(cd("local"),e.a,t.ja)}}))),this.ba=!1,this.ja=I(this.Zc,this),this.Ba=I(this.da,this),this.qa=I(this.mc,this),this.za=I(this.wc,this),this.Aa=I(this.xc,this),this.b=null,n=this,i=cS(n).options.authDomain,o=cS(n).options.apiKey,i&&n3()&&(n.Oa=n.$.then(function(){if(!n.l){if(n.b=ud(i,o,cS(n).name,n.R),ur(n.b,n),ck(n)&&uJ(ck(n)),n.m){uJ(n.m);var e=n.m;e.xa(n.la()),uW(e,n),uG(e=n.m,n.J),uz(e,n),uV(e=n.m,n.R),uK(e,n),n.m=null}return n.b}})),this.INTERNAL={},this.INTERNAL.delete=I(this.delete,this),this.INTERNAL.logFramework=I(this.Gc,this),this.u=0,t6.call(this),Object.defineProperty(this,"lc",{get:function(){return this.la()},set:function(e){this.xa(e)},enumerable:!1}),this.aa=null,Object.defineProperty(this,"ti",{get:function(){return this.T()},set:function(e){this.zb(e)},enumerable:!1}),this.S=null,Object.defineProperty(this,"emulatorConfig",{get:function(){if(this.R){var e=nf(this.R.url);e=rf({protocol:e.c,host:e.a,port:e.g,options:rf({disableWarnings:this.R.ec})})}else e=null;return e},enumerable:!1}),this.J=[],this.R=null}function cb(e){tO.call(this,"languageCodeChanged"),this.h=e}function c_(e){tO.call(this,"emulatorConfigChanged"),this.c=e}function cw(e){tO.call(this,"frameworkChanged"),this.f=e}function cE(e){return e.Oa||tf(new D("auth-domain-config-required"))}function cI(e){if(!n3())return tf(new D("operation-not-supported-in-this-environment"));var t=cE(e).then(function(){return e.b.ra()}).then(function(e){return e?rf(e):null});return cP(e,t)}function cC(e,t){var n,r;ck(e)&&(n=ck(e),r=e.Ba,Y(n.W,function(e){return e==r}),tQ(ck(e),"tokenChanged",e.qa),tQ(ck(e),"userDeleted",e.za),tQ(ck(e),"userInvalidated",e.Aa),uQ(ck(e))),t&&(t.W.push(e.Ba),tz(t,"tokenChanged",e.qa),tz(t,"userDeleted",e.za),tz(t,"userInvalidated",e.Aa),0<e.u&&u$(t)),rl(e,"currentUser",t),t&&(t.xa(e.la()),uW(t,e),uG(t,e.J),uz(t,e),uV(t,e.R),uK(t,e))}function cT(e,t){var n=null,r=null;return cP(e,t.then(function(t){var i;return n=iW(t),r=r7(t),(i={}).apiKey=cS(e).options.apiKey,i.authDomain=cS(e).options.authDomain,i.appName=cS(e).name,e.R&&(i.emulatorConfig=e.R),e.$.then(function(){var n,r,o;return n=e.D,r=e.Ga(),o=new uB(i,t),n&&(o.ha=n),r&&uG(o,r),o.reload().then(function(){return o})}).then(function(t){return ck(e)&&t.uid==ck(e).uid?u4(ck(e),t):(cC(e,t),uJ(t)),e.da(t)}).then(function(){cA(e)})},function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=uD(t.w(),e,I(e.kc,e))),n||t}).then(function(){return rf({user:ck(e),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function cS(e){return e.app}function ck(e){return e.currentUser}function cD(e){return ck(e)&&ck(e)._lat||null}function cA(e){if(e.ba){for(var t=0;t<e.s.length;t++)e.s[t]&&e.s[t](cD(e));if(e.W!==e.getUid()&&e.N.length)for(e.W=e.getUid(),t=0;t<e.N.length;t++)e.N[t]&&e.N[t](cD(e))}}function cP(e,t){return e.P.push(t),t.oa(function(){Q(e.P,t)}),t}function cN(){}function cx(){this.a={},this.b=1e12}cl.prototype.yb=function(e){var t=null,n=this;return function(e){var t=new D("invalid-persistence-type"),n=new D("unsupported-persistence-type");e:{for(r in sR)if(sR[r]==e){var r=!0;break e}r=!1}if(!r||"string"!=typeof e)throw t;switch(nH()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;case"Worker":if("session"===e||!sd()&&"none"!==e)throw n;break;default:if(!n2()&&"none"!==e)throw n}}(e),cy(this,function(){return e!=n.c.F?n.b.get(n.c,n.a).then(function(r){return t=r,ch(n,e)}).then(function(){if(n.c=cd(e),t)return n.b.set(n.c,t,n.a)}):th()})},S(cm,t6),S(cb,tO),S(c_,tO),S(cw,tO),(i=cm.prototype).yb=function(e){return cP(this,e=this.i.yb(e))},i.xa=function(e){this.aa===e||this.l||(this.aa=e,o4(this.a,this.aa),this.dispatchEvent(new cb(this.la())))},i.la=function(){return this.aa},i.fd=function(){var e=c.navigator;this.xa(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},i.gd=function(e,t){if(!this.R){var n;if(!/^https?:\/\//.test(e))throw new D("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");n=t=!!t&&!!t.disableWarnings,"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),c.document&&!n&&nW().then(function(){var e=c.document.createElement("div");e.innerText="Running in emulator mode. Do not use with production credentials.",e.style.position="fixed",e.style.width="100%",e.style.backgroundColor="#ffffff",e.style.border=".1em solid #000000",e.style.color="#b50000",e.style.bottom="0px",e.style.left="0px",e.style.margin="0px",e.style.zIndex=1e4,e.style.textAlign="center",e.classList.add("firebase-emulator-warning"),c.document.body.appendChild(e)}),this.R={url:e,ec:t},this.settings.jb=!0,o8(this.a,this.R),this.dispatchEvent(new c_(this.R))}},i.Gc=function(e){this.J.push(e),o7(this.a,r.default.SDK_VERSION?nZ(r.default.SDK_VERSION,this.J):null),this.dispatchEvent(new cw(this.J))},i.Ga=function(){return J(this.J)},i.zb=function(e){this.S===e||this.l||(this.S=e,this.a.b=this.S)},i.T=function(){return this.S},i.toJSON=function(){return{apiKey:cS(this).options.apiKey,authDomain:cS(this).options.authDomain,appName:cS(this).name,currentUser:ck(this)&&ck(this).w()}},i.Gb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},i.na=function(e,t,n,r){"signInViaPopup"==e&&this.g==r&&(n&&this.C?this.C(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},i.Fa=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?I(this.ic,this):null},i.ic=function(e,t,n,r){var i=this,o={requestUri:e,postBody:r,sessionId:t,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then(function(){return cT(i,ad(i.a,o))})},i.Xc=function(e){if(!n3())return tf(new D("operation-not-supported-in-this-environment"));var t=this,n=r9(e.providerId),i=re(),o=null;(!n4()||nG())&&cS(this).options.authDomain&&e.isOAuthProvider&&(o=st(cS(this).options.authDomain,cS(this).options.apiKey,cS(this).name,"signInViaPopup",e,null,i,r.default.SDK_VERSION||null,null,null,this.T(),this.R));var a=nq(o,n&&n.va,n&&n.ua);return cP(this,n=cE(this).then(function(n){return us(n,a,"signInViaPopup",e,i,!!o,t.T())}).then(function(){return new ti(function(e,n){t.na("signInViaPopup",null,new D("cancelled-popup-request"),t.g),t.f=e,t.C=n,t.g=i,t.c=ul(t.b,t,"signInViaPopup",a,i)})}).then(function(e){return a&&nU(a),e?rf(e):null}).o(function(e){throw a&&nU(a),e}))},i.Yc=function(e){if(!n3())return tf(new D("operation-not-supported-in-this-environment"));var t=this;return cP(this,cE(this).then(function(){var e;return cy(e=t.i,function(){return e.b.set(cf,e.c.F,e.a)})}).then(function(){return uc(t.b,"signInViaRedirect",e,void 0,t.T())}))},i.ra=function(){var e=this;return cI(this).then(function(t){return e.b&&uv(e.b.b),t}).o(function(t){throw e.b&&uv(e.b.b),t})},i.dd=function(e){if(!e)return tf(new D("null-user"));if(this.S!=e.tenantId)return tf(new D("tenant-id-mismatch"));var t,n,r,i,o,a=this,s={};s.apiKey=cS(this).options.apiKey,s.authDomain=cS(this).options.authDomain,s.appName=cS(this).name;var u=(t=s,n=a.D,r=a.Ga(),i=e.h,(o={})[o1]=i.b&&i.b.toString(),o.refreshToken=i.a,t=new uB(t||{apiKey:e.l,authDomain:e.s,appName:e.m},o),n&&(t.ha=n),r&&uG(t,r),u4(t,e),t);return cP(this,this.h.then(function(){if(cS(a).options.apiKey!=e.l)return u.reload()}).then(function(){return ck(a)&&e.uid==ck(a).uid?(u4(ck(a),e),a.da(e)):(cC(a,u),uJ(u),a.da(u))}).then(function(){cA(a)}))},i.Bb=function(){var e=this;return cP(this,this.h.then(function(){return(e.b&&uv(e.b.b),ck(e))?(cC(e,null),cg(e.i).then(function(){cA(e)})):th()}))},i.Zc=function(){var e=this;return cv(this.i,cS(this).options.authDomain).then(function(t){if(!e.l){var n;if(n=ck(e)&&t){n=ck(e).uid;var r=t.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return u4(ck(e),t),ck(e).I();(ck(e)||t)&&(cC(e,t),t&&(uJ(t),t.ha=e.D),e.b&&ur(e.b,e),cA(e))}})},i.da=function(e){return cp(this.i,e)},i.mc=function(){cA(this),this.da(ck(this))},i.wc=function(){this.Bb()},i.xc=function(){this.Bb()},i.kc=function(e){var t=this;return this.h.then(function(){return cT(t,th(e))})},i.zc=function(e){var t=this;this.addAuthTokenListener(function(){e.next(ck(t))})},i.Ac=function(e){var t,n,r=this;t=this,n=function(){e.next(ck(r))},t.N.push(n),cP(t,t.h.then(function(){!t.l&&$(t.N,n)&&t.W!==t.getUid()&&(t.W=t.getUid(),n(cD(t)))}))},i.Ic=function(e,t,n){var r=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof e?e(ck(r)):"function"==typeof e.next&&e.next(ck(r))}),this.Pa(e,t,n)},i.Hc=function(e,t,n){var r=this;return this.ba&&Promise.resolve().then(function(){r.W=r.getUid(),"function"==typeof e?e(ck(r)):"function"==typeof e.next&&e.next(ck(r))}),this.ib(e,t,n)},i.nc=function(e){var t=this;return cP(this,this.h.then(function(){return ck(t)?ck(t).I(e).then(function(e){return{accessToken:e}}):null}))},i.Tc=function(e){var t=this;return this.h.then(function(){return cT(t,aY(t.a,aK,{token:e}))}).then(function(e){var n=e.user;return u5(n,"isAnonymous",!1),t.da(n),e})},i.Uc=function(e,t){var n=this;return this.h.then(function(){return cT(n,aY(n.a,aG,{email:e,password:t}))})},i.dc=function(e,t){var n=this;return this.h.then(function(){return cT(n,aY(n.a,ab,{email:e,password:t}))})},i.ab=function(e){var t=this;return this.h.then(function(){return cT(t,e.ka(t.a))})},i.Sc=function(e){return ru("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(e)},i.Ab=function(){var e=this;return this.h.then(function(){var t=ck(e);if(t&&t.isAnonymous){var n=rf({providerId:null,isNewUser:!1});return rf({user:t,credential:null,additionalUserInfo:n,operationType:"signIn"})}return cT(e,e.a.Ab()).then(function(t){var n=t.user;return u5(n,"isAnonymous",!0),e.da(n),t})})},i.getUid=function(){return ck(this)&&ck(this).uid||null},i.cc=function(e){this.addAuthTokenListener(e),this.u++,0<this.u&&ck(this)&&u$(ck(this))},i.Pc=function(e){var t=this;K(this.s,function(n){n==e&&t.u--}),0>this.u&&(this.u=0),0==this.u&&ck(this)&&uQ(ck(this)),this.removeAuthTokenListener(e)},i.addAuthTokenListener=function(e){var t=this;this.s.push(e),cP(this,this.h.then(function(){t.l||$(t.s,e)&&e(cD(t))}))},i.removeAuthTokenListener=function(e){Y(this.s,function(t){return t==e})},i.delete=function(){this.l=!0;for(var e=0;e<this.P.length;e++)this.P[e].cancel("app-deleted");return this.P=[],this.i&&(e=this.i).b.removeListener(cd("local"),e.a,this.ja),this.b&&(ui(this.b,this),uv(this.b.b)),Promise.resolve()},i.hc=function(e){return cP(this,aY(this.a,a_,{identifier:e,continueUri:n6()?nL():"http://localhost"}).then(function(e){return e.signinMethods||[]}))},i.Bc=function(e){return!!iF(e)},i.xb=function(e,t){var n=this;return cP(this,th().then(function(){var e=new rK(t);if(!e.c)throw new D("argument-error",rH+" must be true when sending sign in link to email");return r0(e)}).then(function(t){return n.a.xb(e,t)}).then(function(){}))},i.jd=function(e){return this.Sa(e).then(function(e){return e.data.email})},i.ob=function(e,t){return cP(this,this.a.ob(e,t).then(function(){}))},i.Sa=function(e){return cP(this,this.a.Sa(e).then(function(e){return new rw(e)}))},i.kb=function(e){return cP(this,this.a.kb(e).then(function(){}))},i.wb=function(e,t){var n=this;return cP(this,th().then(function(){return void 0===t||ed(t)?{}:r0(new rK(t))}).then(function(t){return n.a.wb(e,t)}).then(function(){}))},i.Wc=function(e,t){return cP(this,uE(this,e,t,I(this.ab,this)))},i.Vc=function(e,t){var n=this;return cP(this,th().then(function(){var r=t||nL(),i=iL(e,r);if(!(r=iF(r)))throw new D("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new D("tenant-id-mismatch");return n.ab(i)}))},cN.prototype.render=function(){},cN.prototype.reset=function(){},cN.prototype.getResponse=function(){},cN.prototype.execute=function(){};var cO=null;function cR(e,t){return(t=cM(t))&&e.a[t]||null}function cM(e){return(e=void 0===e?1e12:e)?e.toString():null}function cL(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=e5(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():tz(this.f,"click",this.i)}function cF(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function cj(){}function cU(){}cx.prototype.render=function(e,t){return this.a[this.b.toString()]=new cL(e,t),this.b++},cx.prototype.reset=function(e){var t=cR(this,e);e=cM(e),t&&e&&(t.delete(),delete this.a[e])},cx.prototype.getResponse=function(e){return(e=cR(this,e))?e.getResponse():null},cx.prototype.execute=function(e){(e=cR(this,e))&&e.execute()},cL.prototype.getResponse=function(){return cF(this),this.b},cL.prototype.execute=function(){cF(this);var e=this;this.a||(this.a=setTimeout(function(){e.b=function(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}();var t=e.c.callback,n=e.c["expired-callback"];if(t)try{t(e.b)}catch(e){}e.a=setTimeout(function(){if(e.a=null,e.b=null,n)try{n()}catch(e){}e.h&&e.execute()},6e4)},500))},cL.prototype.delete=function(){cF(this),this.g=!0,clearTimeout(this.a),this.a=null,tQ(this.f,"click",this.i)},rl(cj,"FACTOR_ID","phone"),cU.prototype.g=function(){return cO||(cO=new cx),th(cO)},cU.prototype.c=function(){};var cq=null;function cB(){this.b=c.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var cV=new em(ew,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),cW=new rr(3e4,6e4);cB.prototype.g=function(e){var t=this;return new ti(function(n,r){var i=setTimeout(function(){r(new D("network-request-failed"))},cW.get());c.grecaptcha&&(e===t.f||t.b)?(clearTimeout(i),n(c.grecaptcha)):(c[t.a]=function(){if(c.grecaptcha){t.f=e;var o=c.grecaptcha.render;c.grecaptcha.render=function(e,n){return e=o(e,n),t.b++,e},clearTimeout(i),n(c.grecaptcha)}else clearTimeout(i),r(new D("internal-error"));delete c[t.a]},th(oL(eT(cV,{onload:t.a,hl:e||""}))).o(function(){clearTimeout(i),r(new D("internal-error","Unable to load external reCAPTCHA dependencies!"))}))})},cB.prototype.c=function(){this.b--};var cK=null;function cG(e,t,n,r,i,o,a){if(rl(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=t,this.g=null,a?(cq||(cq=new cU),a=cq):(cK||(cK=new cB),a=cK),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[c$])throw new D("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[cQ],!c.document)throw new D("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!e5(t)||!this.i&&e5(t).hasChildNodes())throw new D("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new oW(e,o||null,i||null),this.u=r||function(){return null};var s=this;this.l=[];var u=this.a[cz];this.a[cz]=function(e){if(cY(s,e),"function"==typeof u)u(e);else if("string"==typeof u){var t=n1(u,c);"function"==typeof t&&t(e)}};var l=this.a[cH];this.a[cH]=function(){if(cY(s,null),"function"==typeof l)l();else if("string"==typeof l){var e=n1(l,c);"function"==typeof e&&e()}}}var cz="callback",cH="expired-callback",c$="sitekey",cQ="size";function cY(e,t){for(var n=0;n<e.l.length;n++)try{e.l[n](t)}catch(e){}}function cX(e,t){return e.h.push(t),t.oa(function(){Q(e.h,t)}),t}function cJ(e){if(e.J)throw new D("internal-error","RecaptchaVerifier instance has been destroyed.")}function cZ(e,t,n){var i=!1;try{this.b=n||r.default.app()}catch(e){throw new D("argument-error","No firebase.app.App instance is currently initialized.")}if(this.b.options&&this.b.options.apiKey)n=this.b.options.apiKey;else throw new D("invalid-api-key");var o=this,a=null;try{a=this.b.auth().Ga()}catch(e){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(e){}a=r.default.SDK_VERSION?nZ(r.default.SDK_VERSION,a):null,cG.call(this,n,e,t,function(){try{var e=o.b.auth().la()}catch(t){e=null}return e},a,O(oG),i)}function c0(e,t,n,r){e:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<t.length;a++)if(t[a].optional)o=!0;else{if(o)throw new D("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=t.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=t[i].optional&&void 0===n[i],!t[i].M(n[i])&&!o){if(t=t[i],0>i||i>=c1.length)throw new D("internal-error","Argument validator received an unsupported number of arguments.");n=c1[i],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.K+".";break e}r=null}}if(r)throw new D("argument-error",e+" failed: "+r)}(i=cG.prototype).Ia=function(){var e=this;return this.f?this.f:this.f=cX(this,th().then(function(){if(n6()&&!nz())return nW();throw new D("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.m.g(e.u())}).then(function(t){return e.g=t,aY(e.s,aO,{})}).then(function(t){e.a[c$]=t.recaptchaSiteKey}).o(function(t){throw e.f=null,t}))},i.render=function(){cJ(this);var e=this;return cX(this,this.Ia().then(function(){if(null===e.c){var t=e.v;if(!e.i){var n=e5(t);t=function(e,t,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!e6&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',eV(a.name),'"'),a.type){o.push(' type="',eV(a.type),'"');var s={};ev(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=e9(i,o),a&&("string"==typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):e4(o,a)),2<r.length&&function(e,t,n){function r(n){n&&t.appendChild("string"==typeof n?e.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!g(o)||y(o)&&0<o.nodeType)r(o);else{e:{if(o&&"number"==typeof o.length){if(y(o)){var a="function"==typeof o.item||"string"==typeof o.item;break e}if(v(o)){a="function"==typeof o.item;break e}}a=!1}K(a?J(o):o,r)}}}(i,o,r),o}("DIV"),n.appendChild(t)}e.c=e.g.render(t,e.a)}return e.c}))},i.verify=function(){cJ(this);var e=this;return cX(this,this.render().then(function(t){return new ti(function(n){var r=e.g.getResponse(t);if(r)n(r);else{var i=function(t){t&&(Y(e.l,function(e){return e==i}),n(t))};e.l.push(i),e.i&&e.g.execute(e.c)}})}))},i.reset=function(){cJ(this),null!==this.c&&this.g.reset(this.c)},i.clear=function(){cJ(this),this.J=!0,this.m.c();for(var e,t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i)for(t=e5(this.v);e=t.firstChild;)t.removeChild(e)},S(cZ,cG);var c1="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function c2(e,t){return{name:e||"",K:"a valid string",optional:!!t,M:function(e){return"string"==typeof e}}}function c3(e,t){return{name:e||"",K:"a boolean",optional:!!t,M:function(e){return"boolean"==typeof e}}}function c6(e,t){return{name:e||"",K:"a valid object",optional:!!t,M:y}}function c5(e,t){return{name:e||"",K:"a function",optional:!!t,M:function(e){return"function"==typeof e}}}function c4(e,t){return{name:e||"",K:"null",optional:!!t,M:function(e){return null===e}}}function c8(e){return{name:e?e+"Credential":"credential",K:e?"a valid "+e+" credential":"a valid credential",optional:!1,M:function(t){if(!t)return!1;var n=!e||t.providerId===e;return!(!t.ka||!n)}}}function c9(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(e){return!!e&&!!e.tb}}}function c7(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}}function le(e,t){return y(e)&&"string"==typeof e.type&&e.type===t&&"function"==typeof e.Ha}function lt(e){return y(e)&&"string"==typeof e.uid}function ln(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!=typeof e.type||"function"!=typeof e.verify)}}}function lr(e,t,n,r){return{name:n||"",K:e.K+" or "+t.K,optional:!!r,M:function(n){return e.M(n)||t.M(n)}}}function li(e,t){for(var n in t){var r=t[n].name;e[r]=ls(r,e[n],t[n].j)}}function lo(e,t){for(var n in t){var r=t[n].name;r!==n&&Object.defineProperty(e,r,{get:C(function(e){return this[e]},n),set:C(function(e,t,n,r){c0(e,[n],[r],!0),this[t]=r},r,n,t[n].lb),enumerable:!0})}}function la(e,t,n,r){e[t]=ls(t,n,r)}function ls(e,t,n){function r(){var e=Array.prototype.slice.call(arguments);return c0(a,n,e),t.apply(this,e)}if(!n)return t;var i,o,a=(i=(i=e).split("."))[i.length-1];for(o in t)r[o]=t[o];for(o in t.prototype)r.prototype[o]=t.prototype[o];return r}li(cm.prototype,{kb:{name:"applyActionCode",j:[c2("code")]},Sa:{name:"checkActionCode",j:[c2("code")]},ob:{name:"confirmPasswordReset",j:[c2("code"),c2("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[c2("email"),c2("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[c2("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[c2("emailLink")]},Hc:{name:"onAuthStateChanged",j:[lr(c6(),c5(),"nextOrObserver"),c5("opt_error",!0),c5("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[lr(c6(),c5(),"nextOrObserver"),c5("opt_error",!0),c5("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[c2("email"),lr(c6("opt_actionCodeSettings",!0),c4(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[c2("email"),c6("actionCodeSettings")]},yb:{name:"setPersistence",j:[c2("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[c8()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[c8()]},Tc:{name:"signInWithCustomToken",j:[c2("token")]},Uc:{name:"signInWithEmailAndPassword",j:[c2("email"),c2("password")]},Vc:{name:"signInWithEmailLink",j:[c2("email"),c2("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[c2("phoneNumber"),ln()]},Xc:{name:"signInWithPopup",j:[c7()]},Yc:{name:"signInWithRedirect",j:[c7()]},dd:{name:"updateCurrentUser",j:[lr({name:"user",K:"an instance of Firebase User",optional:!1,M:function(e){return!!(e&&e instanceof uB)}},c4(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[c2(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[c2("url"),c6("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[c2("code")]}}),lo(cm.prototype,{lc:{name:"languageCode",lb:lr(c2(),c4(),"languageCode")},ti:{name:"tenantId",lb:lr(c2(),c4(),"tenantId")}}),cm.Persistence=sR,cm.Persistence.LOCAL="local",cm.Persistence.SESSION="session",cm.Persistence.NONE="none",li(uB.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[c3("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[c3("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[c8()]},rb:{name:"linkWithCredential",j:[c8()]},Dc:{name:"linkWithPhoneNumber",j:[c2("phoneNumber"),ln()]},Ec:{name:"linkWithPopup",j:[c7()]},Fc:{name:"linkWithRedirect",j:[c7()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[c8()]},ub:{name:"reauthenticateWithCredential",j:[c8()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[c2("phoneNumber"),ln()]},Nc:{name:"reauthenticateWithPopup",j:[c7()]},Oc:{name:"reauthenticateWithRedirect",j:[c7()]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[lr(c6("opt_actionCodeSettings",!0),c4(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[c2(null,!0)]},cd:{name:"unlink",j:[c2("provider")]},Cb:{name:"updateEmail",j:[c2("email")]},Db:{name:"updatePassword",j:[c2("password")]},ed:{name:"updatePhoneNumber",j:[c8("phone")]},Eb:{name:"updateProfile",j:[c6("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[c2("email"),lr(c6("opt_actionCodeSettings",!0),c4(null,!0),"opt_actionCodeSettings",!0)]}}),li(cx.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),li(cN.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),li(ti.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),lo(u_.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:c3("appVerificationDisabledForTesting")}}),li(uw.prototype,{confirm:{name:"confirm",j:[c2("verificationCode")]}}),la(ip,"fromJSON",function(e){e="string"==typeof e?JSON.parse(e):e;for(var t,n=[iw,iR,iU,im],r=0;r<n.length;r++)if(t=n[r](e))return t;return null},[lr(c2(),c6(),"json")]),la(iM,"credential",function(e,t){return new iO(e,t)},[c2("email"),c2("password")]),li(iO.prototype,{w:{name:"toJSON",j:[c2(null,!0)]}}),li(iT.prototype,{Ca:{name:"addScope",j:[c2("scope")]},Ka:{name:"setCustomParameters",j:[c6("customOAuthParameters")]}}),la(iT,"credential",iS,[lr(c2(),c6(),"token")]),la(iM,"credentialWithLink",iL,[c2("email"),c2("emailLink")]),li(ik.prototype,{Ca:{name:"addScope",j:[c2("scope")]},Ka:{name:"setCustomParameters",j:[c6("customOAuthParameters")]}}),la(ik,"credential",iD,[lr(c2(),c6(),"token")]),li(iA.prototype,{Ca:{name:"addScope",j:[c2("scope")]},Ka:{name:"setCustomParameters",j:[c6("customOAuthParameters")]}}),la(iA,"credential",iP,[lr(c2(),lr(c6(),c4()),"idToken"),lr(c2(),c4(),"accessToken",!0)]),li(iN.prototype,{Ka:{name:"setCustomParameters",j:[c6("customOAuthParameters")]}}),la(iN,"credential",ix,[lr(c2(),c6(),"token"),c2("secret",!0)]),li(iC.prototype,{Ca:{name:"addScope",j:[c2("scope")]},credential:{name:"credential",j:[lr(c2(),lr(c6(),c4()),"optionsOrIdToken"),lr(c2(),c4(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[c6("customOAuthParameters")]}}),li(ib.prototype,{w:{name:"toJSON",j:[c2(null,!0)]}}),li(iv.prototype,{w:{name:"toJSON",j:[c2(null,!0)]}}),la(iB,"credential",iV,[c2("verificationId"),c2("verificationCode")]),li(iB.prototype,{gb:{name:"verifyPhoneNumber",j:[lr(c2(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(e){return!!e&&(e.session&&e.phoneNumber?le(e.session,ih)&&"string"==typeof e.phoneNumber:e.session&&e.multiFactorHint?le(e.session,id)&&lt(e.multiFactorHint):e.session&&e.multiFactorUid?le(e.session,id)&&"string"==typeof e.multiFactorUid:!!e.phoneNumber&&"string"==typeof e.phoneNumber)}},"phoneInfoOptions"),ln()]}}),li(ij.prototype,{w:{name:"toJSON",j:[c2(null,!0)]}}),li(D.prototype,{toJSON:{name:"toJSON",j:[c2(null,!0)]}}),li(iY.prototype,{toJSON:{name:"toJSON",j:[c2(null,!0)]}}),li(iQ.prototype,{toJSON:{name:"toJSON",j:[c2(null,!0)]}}),li(uk.prototype,{toJSON:{name:"toJSON",j:[c2(null,!0)]}}),li(uC.prototype,{Rc:{name:"resolveSignIn",j:[c9()]}}),li(uO.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[c9(),c2("displayName",!0)]},bd:{name:"unenroll",j:[lr({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:lt},c2(),"multiFactorInfoIdentifier")]}}),li(cZ.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),la(rM,"parseLink",rW,[c2("link")]),la(cj,"assertion",function(e){return new uN(e)},[c8("phone")]),function(){if(void 0!==r.default&&r.default.INTERNAL&&r.default.INTERNAL.registerComponent){var e={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:rI,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:rE,VERIFY_AND_CHANGE_EMAIL:rC,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:cm,AuthCredential:ip,Error:D};la(e,"EmailAuthProvider",iM,[]),la(e,"FacebookAuthProvider",iT,[]),la(e,"GithubAuthProvider",ik,[]),la(e,"GoogleAuthProvider",iA,[]),la(e,"TwitterAuthProvider",iN,[]),la(e,"OAuthProvider",iC,[c2("providerId")]),la(e,"SAMLAuthProvider",iI,[c2("providerId")]),la(e,"PhoneAuthProvider",iB,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(e){return!!(e&&e instanceof cm)}}]),la(e,"RecaptchaVerifier",cZ,[lr(c2(),{name:"",K:"an HTML element",optional:!1,M:function(e){return!!(e&&e instanceof Element)}},"recaptchaContainer"),c6("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(e){return!!(e&&e instanceof r.default.app.App)}}]),la(e,"ActionCodeURL",rM,[]),la(e,"PhoneMultiFactorGenerator",cj,[]),r.default.INTERNAL.registerComponent({name:"auth",instanceFactory:function(e){return new cm(e=e.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:e,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(e){e.getProvider("auth-internal").initialize()}}),r.default.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(e){return e=e.getProvider("auth").getImmediate(),{getUid:I(e.getUid,e),getToken:I(e.nc,e),addAuthTokenListener:I(e.cc,e),removeAuthTokenListener:I(e.Pc,e)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),r.default.registerVersion("@firebase/auth","0.16.8"),r.default.INTERNAL.extendNamespace({User:uB})}else throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.")}()}).apply(void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},9182:function(e,t,n){"use strict";n.r(t),n.d(t,{Component:function(){return o},ComponentContainer:function(){return u},Provider:function(){return s}});var r=n(1499),i=n(402),o=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),a="[DEFAULT]",s=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new i.Deferred;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}else{if(r)return null;throw Error("Service "+this.name+" is not available")}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:a})}catch(e){}try{for(var i=(0,r.__values)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=(0,r.__read)(o.value,2),u=s[0],c=s[1],l=this.normalizeInstanceIdentifier(u);try{var h=this.getOrInitializeService({instanceIdentifier:l});c.resolve(h)}catch(e){}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e=a),this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return(0,r.__awaiter)(this,void 0,void 0,function(){var e;return(0,r.__generator)(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all((0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(e.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()}))),(0,r.__read)(e.filter(function(e){return"_delete"in e}).map(function(e){return e._delete()}))))];case 1:return t.sent(),[2]}})})},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=a),this.instances.has(e)},e.prototype.getOptions=function(e){return void 0===e&&(e=a),this.instancesOptions.get(e)||{}},e.prototype.initialize=function(e){void 0===e&&(e={});var t,n,i=e.options,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:o,options:void 0===i?{}:i});try{for(var s=(0,r.__values)(this.instancesDeferred.entries()),u=s.next();!u.done;u=s.next()){var c=(0,r.__read)(u.value,2),l=c[0],h=c[1],f=this.normalizeInstanceIdentifier(l);o===f&&h.resolve(a)}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return a},e.prototype.onInit=function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&e(o,r),function(){i.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,i,o=this.onInitCallbacks.get(t);if(o)try{for(var a=(0,r.__values)(o),s=a.next();!s.done;s=a.next()){var u=s.value;try{u(e,t)}catch(e){}}}catch(e){n={error:e}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t=e.instanceIdentifier,n=e.options,r=void 0===n?{}:n,i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:t===a?void 0:t,options:r}),this.instances.set(t,i),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(e){}return i||null},e.prototype.normalizeInstanceIdentifier=function(e){return(void 0===e&&(e=a),this.component)?this.component.multipleInstances?e:a:e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}(),u=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new s(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}()},1152:function(e,t,n){"use strict";var r,i,o,a,s,u,c,l,h,f,d,p,g,v,y,m,b,_=n(1463),w=n(9182),E=n(402),I=n(1499),C=n(46);e=n.hmd(e);var T=n(5409),S="",k=function(){function e(e){this.domStorage_=e,this.prefix_="firebase:"}return e.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,E.stringify)(t))},e.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,E.jsonEval)(t)},e.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},e.prototype.prefixedName_=function(e){return this.prefix_+e},e.prototype.toString=function(){return this.domStorage_.toString()},e}(),D=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},e.prototype.get=function(e){return(0,E.contains)(this.cache_,e)?this.cache_[e]:null},e.prototype.remove=function(e){delete this.cache_[e]},e}(),A=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new k(t)}}catch(e){}return new D},P=A("localStorage"),N=A("sessionStorage"),x=new C.Logger("@firebase/database"),O=(o=1,function(){return o++}),R=function(e){var t=(0,E.stringToByteArray)(e),n=new E.Sha1;n.update(t);var r=n.digest();return E.base64.encodeByteArray(r)},M=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",r=0;r<e.length;r++){var i=e[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=M.apply(null,i):"object"==typeof i?n+=(0,E.stringify)(i):n+=i,n+=" "}return n},L=null,F=!0,j=function(e,t){(0,E.assert)(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(x.logLevel=C.LogLevel.VERBOSE,L=x.log.bind(x),t&&N.set("logging_enabled",!0)):"function"==typeof e?L=e:(L=null,N.remove("logging_enabled"))},U=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!0===F&&(F=!1,null===L&&!0===N.get("logging_enabled")&&j(!0)),L){var n=M.apply(null,e);L(n)}},q=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];U.apply(void 0,(0,I.__spreadArray)([e],(0,I.__read)(t)))}},B=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+M.apply(void 0,(0,I.__spreadArray)([],(0,I.__read)(e)));x.error(n)},V=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+M.apply(void 0,(0,I.__spreadArray)([],(0,I.__read)(e)));throw x.error(n),Error(n)},W=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+M.apply(void 0,(0,I.__spreadArray)([],(0,I.__read)(e)));x.warn(n)},K=function(){"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&W("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},G=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},z=function(e){if((0,E.isNodeSdk)()||"complete"===document.readyState)e();else{var t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}},H="[MIN_NAME]",$="[MAX_NAME]",Q=function(e,t){if(e===t)return 0;if(e===H||t===$)return -1;if(t===H||e===$)return 1;var n=er(e),r=er(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},Y=function(e,t){return e===t?0:e<t?-1:1},X=function(e,t){if(t&&e in t)return t[e];throw Error("Missing required key ("+e+") in object: "+(0,E.stringify)(t))},J=function(e){if("object"!=typeof e||null===e)return(0,E.stringify)(e);var t=[];for(var n in e)t.push(n);t.sort();for(var r="{",i=0;i<t.length;i++)0!==i&&(r+=","),r+=(0,E.stringify)(t[i])+":"+J(e[t[i]]);return r+"}"},Z=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function ee(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var et=function(e){(0,E.assert)(!G(e),"Invalid JSON number"),0===e?(n=0,r=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=22250738585072014e-324?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),1023))+1023,r=Math.round(e*Math.pow(2,52-i)-4503599627370496)):(n=0,r=Math.round(e/5e-324)));var t,n,r,i,o,a=[];for(o=52;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(t?1:0),a.reverse();var s=a.join(""),u="";for(o=0;o<64;o+=8){var c=parseInt(s.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()},en=RegExp("^-?(0*)\\d{1,10}$"),er=function(e){if(en.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},ei=function(e){try{e()}catch(e){setTimeout(function(){throw W("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},eo=function(e,t){var n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n},ea=function(){function e(e,t){var n=this;this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(function(e){return n.appCheck=e})}return e.prototype.getToken=function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise(function(n,r){setTimeout(function(){t.appCheck?t.getToken(e).then(n,r):n(null)},0)})},e.prototype.addTokenChangeListener=function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(function(t){return t.addTokenListener(e)})},e.prototype.notifyForInvalidToken=function(){W('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},e}(),es=function(){function e(e,t,n){var r=this;this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(function(e){return r.auth_=e})}return e.prototype.getToken=function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch(function(e){return e&&"auth/token-not-initialized"===e.code?(U("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)}):new Promise(function(n,r){setTimeout(function(){t.auth_?t.getToken(e).then(n,r):n(null)},0)})},e.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(function(t){return t.addAuthTokenListener(e)})},e.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then(function(t){return t.removeAuthTokenListener(e)})},e.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',W(e)},e}(),eu=function(){function e(e){this.accessToken=e}return e.prototype.getToken=function(e){return Promise.resolve({accessToken:this.accessToken})},e.prototype.addTokenChangeListener=function(e){e(this.accessToken)},e.prototype.removeTokenChangeListener=function(e){},e.prototype.notifyForInvalidToken=function(){},e.OWNER="owner",e}(),ec=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,el="websocket",eh="long_polling",ef=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=P.get("host:"+e)||this._host}return e.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},e.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&P.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),e.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},e.prototype.toURLString=function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+e+this.host+"/"+t},e}();function ed(e,t,n){if((0,E.assert)("string"==typeof t,"typeof type must == string"),(0,E.assert)("object"==typeof n,"typeof params must == object"),t===el)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===eh)r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw Error("Unknown connection type: "+t);(e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams)&&(n.ns=e.namespace);var r,i=[];return ee(n,function(e,t){i.push(e+"="+t)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ep=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(e,t){void 0===t&&(t=1),(0,E.contains)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},e.prototype.get=function(){return(0,E.deepCopy)(this.counters_)},e}(),eg={},ev={};function ey(e){var t=e.toString();return eg[t]||(eg[t]=new ep),eg[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var em=function(){function e(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=this;this.pendingResponses[this.currentResponseNum]&&"break"!==function(){var e=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var t=function(t){e[t]&&ei(function(){n.onMessage_(e[t])})},i=0;i<e.length;++i)t(i);if(r.currentResponseNum===r.closeAfterResponse)return r.onClose&&(r.onClose(),r.onClose=null),"break";r.currentResponseNum++}(););},e}(),eb="start",e_=function(){function e(e,t,n,r,i,o,a){var s=this;this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=q(e),this.stats_=ey(t),this.urlFn=function(e){return s.appCheckToken&&(e.ac=s.appCheckToken),ed(t,eh,e)}}return e.prototype.open=function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new em(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),z(function(){if(!n.isClosed_){n.scriptTagHolder=new ew(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=(0,I.__read)(e,5),i=r[0],o=r[1],a=r[2];if(r[3],r[4],n.incrementIncomingBytes_(e),n.scriptTagHolder){if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===eb)n.id=o,n.password=a;else if("close"===i)o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,function(){n.onClosed_()})):n.onClosed_();else throw Error("Unrecognized command received: "+i)}},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=(0,I.__read)(e,2),i=r[0],o=r[1];n.incrementIncomingBytes_(e),n.myPacketOrderer.handleResponse(i,o)},function(){n.onClosed_()},n.urlFn);var e={};e[eb]="t",e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&ec.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,function(){})}})},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return!(0,E.isNodeSdk)()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!=typeof document&&null!=document.createElement&&!("object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"==typeof Windows&&"object"==typeof Windows.UI))},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){!this.isClosed_&&(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(e){var t=(0,E.stringify)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=Z((0,E.base64Encode)(t),1840),r=0;r<n.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,n.length,n[r]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(e,t){if(!(0,E.isNodeSdk)()){this.myDisconnFrame=document.createElement("iframe");var n={};n.dframe="t",n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},e.prototype.incrementIncomingBytes_=function(e){var t=(0,E.stringify)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},e}(),ew=function(){function e(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,E.isNodeSdk)())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=O(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";</script>');var a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(e){U("frame writing exception"),e.stack&&U(e.stack),U(e)}}}return e.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||U("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},e.prototype.close=function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)},Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())},e.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},e.prototype.newRequest_=function(){if(!this.alive||!this.sendNewPolls||!(this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)))return!1;this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;)if(this.pendingSegs[0].d.length+30+n.length<=1870){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}else break;return t+=n,this.addLongPollTag_(t,this.currentSerial),!0},e.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,function(){clearTimeout(i),r()})},e.prototype.addTag=function(e,t){var n=this;(0,E.isNodeSdk)()?this.doNodeLongPoll(e,t):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){U("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(e){}},Math.floor(1))},e}(),eE=null;"undefined"!=typeof MozWebSocket?eE=MozWebSocket:"undefined"!=typeof WebSocket&&(eE=WebSocket);var eI=function(){function e(t,n,r,i,o,a,s){this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=q(this.connId),this.stats_=ey(n),this.connURL=e.connectionURL_(n,a,s,i),this.nodeAdmin=n.nodeAdmin}return e.connectionURL_=function(e,t,n,r){var i={};return i.v="5",!(0,E.isNodeSdk)()&&"undefined"!=typeof location&&location.hostname&&ec.test(location.hostname)&&(i.r="f"),t&&(i.s=t),n&&(i.ls=n),r&&(i.ac=r),ed(e,el,i)},e.prototype.open=function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,P.set("previous_websocket_failure",!0);try{if((0,E.isNodeSdk)()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/5/"+S+"/"+T.platform+"/"+r,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(i.headers.Authorization="Bearer "+this.authToken),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);var o=T.env,a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a}),this.mySock=new eE(this.connURL,[],i)}else{var i={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new eE(this.connURL,[],i)}}catch(e){this.log_("Error instantiating WebSocket.");var s=e.message||e.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&4.4>parseFloat(n[1])&&(t=!0)}return!t&&null!==eE&&!e.forceDisallow_},e.previouslyFailed=function(){return P.isInMemoryStorage||!0===P.get("previous_websocket_failure")},e.prototype.markConnectionHealthy=function(){P.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=(0,E.jsonEval)(t);this.onMessage(n)}},e.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},e.prototype.extractFrameCount_=function(e){if((0,E.assert)(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},e.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}},e.prototype.send=function(e){this.resetKeepAlive();var t=(0,E.stringify)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=Z(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){!this.isClosed_&&(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()},Math.floor(45e3))},e.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}(),eC=function(){function e(e){this.initTransports_(e)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[e_,eI]},enumerable:!1,configurable:!0}),e.prototype.initTransports_=function(t){var n,r,i=eI&&eI.isAvailable(),o=i&&!eI.previouslyFailed();if(t.webSocketOnly&&(i||W("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[eI];else{var a=this.transports_=[];try{for(var s=(0,I.__values)(e.ALL_TRANSPORTS),u=s.next();!u.done;u=s.next()){var c=u.value;c&&c.isAvailable()&&a.push(c)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw Error("No transports available")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}(),eT=function(){function e(e,t,n,r,i,o,a,s,u,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=s,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=q("c:"+this.id+":"),this.transportManager_=new eC(t),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){e.conn_&&e.conn_.open(n,r)},Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=eo(function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))},Math.floor(i)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}},e.prototype.connReceiver_=function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}},e.prototype.sendRequest=function(e){this.sendData_({t:"d",d:e})},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(e){var t=X("t",e),n=X("d",e);if("c"===t)this.onSecondaryControl_(n);else if("d"===t)this.pendingDataMessages.push(n);else throw Error("Unknown protocol layer: "+t)},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(e){var t=X("t",e),n=X("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)},e.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},e.prototype.onPrimaryResponse_=function(){!this.isHealthy_&&(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},e.prototype.onControl_=function(e){var t=X("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?B("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):B("Unknown control packet command: "+t)}},e.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&W("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},e.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),eo(function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())},Math.floor(6e4))},e.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):eo(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()},e.prototype.onConnectionLost_=function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(P.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},e.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)},e.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}(),eS=function(){function e(){}return e.prototype.put=function(e,t,n,r){},e.prototype.merge=function(e,t,n,r){},e.prototype.refreshAuthToken=function(e){},e.prototype.refreshAppCheckToken=function(e){},e.prototype.onDisconnectPut=function(e,t,n){},e.prototype.onDisconnectMerge=function(e,t,n){},e.prototype.onDisconnectCancel=function(e,t){},e.prototype.reportStats=function(e){},e}(),ek=function(){function e(e){this.allowedEvents_=e,this.listeners_={},(0,E.assert)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Array.isArray(this.listeners_[e]))for(var r=(0,I.__spreadArray)([],(0,I.__read)(this.listeners_[e])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)},e.prototype.on=function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)},e.prototype.off=function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context)){r.splice(i,1);return}},e.prototype.validateEventType_=function(e){(0,E.assert)(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},e}(),eD=function(e){function t(){var t=e.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,E.isMobileCordova)()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}return(0,I.__extends)(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return(0,E.assert)("online"===e,"Unknown event type: "+e),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(ek),eA=function(){function e(e,t){if(void 0===t){this.pieces_=e.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}return e.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},e}();function eP(){return new eA("")}function eN(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function ex(e){return e.pieces_.length-e.pieceNum_}function eO(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new eA(e.pieces_,t)}function eR(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function eM(e,t){return void 0===t&&(t=0),e.pieces_.slice(e.pieceNum_+t)}function eL(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new eA(t,0)}function eF(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof eA)for(var r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else for(var i=t.split("/"),r=0;r<i.length;r++)i[r].length>0&&n.push(i[r]);return new eA(n,0)}function ej(e){return e.pieceNum_>=e.pieces_.length}function eU(e,t){var n=eN(e),r=eN(t);if(null===n)return t;if(n===r)return eU(eO(e),eO(t));throw Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function eq(e,t){for(var n=eM(e,0),r=eM(t,0),i=0;i<n.length&&i<r.length;i++){var o=Q(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function eB(e,t){if(ex(e)!==ex(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function eV(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(ex(e)>ex(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var eW=function(e,t){this.errorPrefix_=t,this.parts_=eM(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=(0,E.stringLength)(this.parts_[n]);eK(this)};function eK(e){if(e.byteLength_>768)throw Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+eG(e))}function eG(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ez=function(e){function t(){var t,n,r=e.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",t="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",t="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var e=!document[t];e!==r.visible_&&(r.visible_=e,r.trigger("visible",e))},!1),r}return(0,I.__extends)(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return(0,E.assert)("visible"===e,"Unknown event type: "+e),[this.visible_]},t}(ek),eH=function(e){function t(n,r,i,o,a,s,u,c){var l=e.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=o,l.onServerInfoUpdate_=a,l.authTokenProvider_=s,l.appCheckTokenProvider_=u,l.authOverride_=c,l.id=t.nextPersistentConnectionId_++,l.log_=q("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=1e3,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!(0,E.isNodeSdk)())throw Error("Auth override specified in options, but not supported on non Node.js platforms");return ez.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&eD.getInstance().on("online",l.onOnline_,l),l}return(0,I.__extends)(t,e),t.prototype.sendRequest=function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_((0,E.stringify)(i)),(0,E.assert)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},t.prototype.get=function(e){var t=this;this.initConnection_();var n=new E.Deferred,r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:function(e){var i=e.d;"ok"===e.s?(t.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var e=t.outstandingGets_[o];void 0!==e&&i===e&&(delete t.outstandingGets_[o],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+o+" timed out on connection"),n.reject(Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(o),n.promise},t.prototype.listen=function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),(0,E.assert)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,E.assert)(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)},t.prototype.sendGet_=function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},t.prototype.sendListen_=function(e){var n=this,r=e.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var a={p:i};e.tag&&(a.q=r._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest("q",a,function(a){var s=a.d,u=a.s;t.warnOnListenWarnings_(s,r),(n.listens.get(i)&&n.listens.get(i).get(o))===e&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),e.onComplete&&e.onComplete(u,s))})},t.warnOnListenWarnings_=function(e,t){if(e&&"object"==typeof e&&(0,E.contains)(e,"w")){var n=(0,E.safeGet)(e,"w");Array.isArray(n)&&~n.indexOf("no_index")&&W('Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ".indexOn": "'+t._queryParams.getIndex().toString()+'" at '+t._path.toString()+" to your security rules for better performance.")}},t.prototype.refreshAuthToken=function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(e)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(e){(e&&40===e.length||(0,E.isAdmin)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},t.prototype.refreshAppCheckToken=function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},t.prototype.tryAuth=function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=(0,E.isValidFormat)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))})}},t.prototype.tryAppCheck=function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)})},t.prototype.unlisten=function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),(0,E.assert)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)},t.prototype.sendUnlisten_=function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},t.prototype.onDisconnectPut=function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})},t.prototype.onDisconnectMerge=function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})},t.prototype.onDisconnectCancel=function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})},t.prototype.sendOnDisconnect_=function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,function(e){r&&setTimeout(function(){r(e.s,e.d)},Math.floor(0))})},t.prototype.put=function(e,t,n,r){this.putInternal("p",e,t,n,r)},t.prototype.merge=function(e,t,n,r){this.putInternal("m",e,t,n,r)},t.prototype.putInternal=function(e,t,n,r,i){this.initConnection_();var o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)},t.prototype.sendPut_=function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)})},t.prototype.reportStats=function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}})}},t.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+(0,E.stringify)(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else if("error"in e)throw"A server-side error has occurred: "+e.error;else"a"in e&&this.onDataPush_(e.a,e.b)},t.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):B("Unrecognized action received from server: "+(0,E.stringify)(e)+"\nAre you using the latest client?")},t.prototype.onReady_=function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(e){var t=this;(0,E.assert)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){t.establishConnectionTimer_=null,t.establishConnection_()},Math.floor(e))},t.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},t.prototype.onVisible_=function(e){!e||this.visible_||this.reconnectDelay_!==this.maxReconnectDelay_||(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},t.prototype.onOnline_=function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());var e=new Date().getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){return(0,I.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o,a,s,u,c,l,h,f,d,p,g=this;return(0,I.__generator)(this,function(v){switch(v.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null,e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,s=null,u=function(){s?s.close():(a=!0,r())},c=function(e){(0,E.assert)(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)},this.realtime_={close:u,sendRequest:c},l=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,v.label=1;case 1:return v.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(l),this.appCheckTokenProvider_.getToken(l)])];case 2:return f=(h=I.__read.apply(void 0,[v.sent(),2]))[0],d=h[1],a?U("getToken() completed but was canceled"):(U("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=d&&d.token,s=new eT(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,function(e){W(e+" ("+g.repoInfo_.toString()+")"),g.interrupt("server_kill")},o)),[3,4];case 3:return p=v.sent(),this.log_("Failed to get token: "+p),a||(this.repoInfo_.nodeAdmin&&W(p),u()),[3,4];case 4:return[2]}})})},t.prototype.interrupt=function(e){U("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(e){U("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,E.isEmpty)(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(e){var t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},t.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(e,t){n=t?t.map(function(e){return J(e)}).join("$"):"default";var n,r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")},t.prototype.removeListen_=function(e,t){var n,r=new eA(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n},t.prototype.onAuthRevoked_=function(e,t){U("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},t.prototype.onAppCheckRevoked_=function(e,t){U("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},t.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))},t.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=(0,I.__values)(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var s=(n=void 0,(0,I.__values)(a.values())),u=s.next();!u.done;u=s.next()){var c=u.value;this.sendListen_(c)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(var l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},t.prototype.sendConnectStats_=function(){var e={},t="js";(0,E.isNodeSdk)()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+S.replace(/\./g,"-")]=1,(0,E.isMobileCordova)()?e["framework.cordova"]=1:(0,E.isReactNative)()&&(e["framework.reactnative"]=1),this.reportStats(e)},t.prototype.shouldReconnect_=function(){var e=eD.getInstance().currentlyOnline();return(0,E.isEmpty)(this.interruptReasons_)&&e},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(eS),e$=function(){function e(e,t){this.name=e,this.node=t}return e.Wrap=function(t,n){return new e(t,n)},e}(),eQ=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(e,t){var n=new e$(H,e),r=new e$(H,t);return 0!==this.compare(n,r)},e.prototype.minPost=function(){return e$.MIN},e}(),eY=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,I.__extends)(t,e),Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return c},set:function(e){c=e},enumerable:!1,configurable:!0}),t.prototype.compare=function(e,t){return Q(e.name,t.name)},t.prototype.isDefinedOn=function(e){throw(0,E.assertionError)("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(e,t){return!1},t.prototype.minPost=function(){return e$.MIN},t.prototype.maxPost=function(){return new e$($,c)},t.prototype.makePost=function(e,t){return(0,E.assert)("string"==typeof e,"KeyIndex indexValue must always be a string."),new e$(e,c)},t.prototype.toString=function(){return".key"},t}(eQ),eX=new eY,eJ=function(){function e(e,t,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!e.isEmpty();)if(o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else if(0===o){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}return e.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},e}(),eZ=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e1.EMPTY_NODE,this.right=null!=o?o:e1.EMPTY_NODE}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return e1.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()},e.prototype.remove=function(e,t){var n,r;if(n=this,0>t(e,n.key))n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return e1.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},e.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e},e.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth_=function(){return Math.pow(2,this.check_())<=this.count()+1},e.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e===this.right.check_())return e+(this.isRed_()?0:1);throw Error("Black depths differ")},e.RED=!0,e.BLACK=!1,e}(),e0=function(){function e(){}return e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new eZ(e,t,null)},e.prototype.remove=function(e,t){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}(),e1=function(){function e(t,n){void 0===n&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,eZ.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,eZ.BLACK,null,null))},e.prototype.get=function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null},e.prototype.getPredecessorKey=function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty()){if(r)return r.key;return null}for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},e.prototype.getIterator=function(e){return new eJ(this.root_,null,this.comparator_,!1,e)},e.prototype.getIteratorFrom=function(e,t){return new eJ(this.root_,e,this.comparator_,!1,t)},e.prototype.getReverseIteratorFrom=function(e,t){return new eJ(this.root_,e,this.comparator_,!0,t)},e.prototype.getReverseIterator=function(e){return new eJ(this.root_,null,this.comparator_,!0,e)},e.EMPTY_NODE=new e0,e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(e,t){return Q(e.name,t.name)}function e3(e,t){return Q(e,t)}var e6=function(e){return"number"==typeof e?"number:"+et(e):"string:"+e},e5=function(e){if(e.isLeafNode()){var t=e.val();(0,E.assert)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,E.contains)(t,".sv"),"Priority must be a string or number.")}else(0,E.assert)(e===l||e.isEmpty(),"priority of unexpected type.");(0,E.assert)(e===l||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},e4=function(){function e(t,n){void 0===n&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,(0,E.assert)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),e5(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return h},set:function(e){h=e},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return ej(t)?this:".priority"===eN(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(e,t){return null},e.prototype.updateImmediateChild=function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var r=eN(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:((0,E.assert)(".priority"!==r||1===ex(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(eO(t),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(e,t){return!1},e.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+e6(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":","number"===t?e+=et(this.value_):e+=this.value_,this.lazyHash_=R(e)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:((0,E.assert)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),o=e.VALUE_TYPE_ORDER.indexOf(r);return((0,E.assert)(i>=0,"Unknown leaf type: "+n),(0,E.assert)(o>=0,"Unknown leaf type: "+r),i!==o)?o-i:"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(e){return e===this||!!e.isLeafNode()&&this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}(),e8=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,I.__extends)(t,e),t.prototype.compare=function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Q(e.name,t.name):i},t.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},t.prototype.minPost=function(){return e$.MIN},t.prototype.maxPost=function(){return new e$($,new e4("[PRIORITY-POST]",d))},t.prototype.makePost=function(e,t){return new e$(t,new e4("[PRIORITY-POST]",f(e)))},t.prototype.toString=function(){return".priority"},t}(eQ)),e9=Math.log(2),e7=function(){function e(e){this.count=parseInt(Math.log(e+1)/e9,10),this.current_=this.count-1;var t=parseInt(Array(this.count+1).join("1"),2);this.bits_=e+1&t}return e.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},e}(),te=function(e,t,n,r){e.sort(t);var i=function(t,r){var o,a=r-t;if(0===a)return null;if(1===a)return o=e[t],new eZ(n?n(o):o,o.node,eZ.BLACK,null,null);var s=parseInt(a/2,10)+t,u=i(t,s),c=i(s+1,r);return o=e[s],new eZ(n?n(o):o,o.node,eZ.BLACK,u,c)};return new e1(r||t,function(t){for(var r=null,o=null,a=e.length,s=function(t,r){var o=a-t,s=a;a-=t;var c=i(o+1,s),l=e[o];u(new eZ(n?n(l):l,l.node,r,null,c))},u=function(e){r?r.left=e:o=e,r=e},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?s(h,eZ.BLACK):(s(h,eZ.BLACK),s(h,eZ.RED))}return o}(new e7(e.length)))},tt={},tn=function(){function e(e,t){this.indexes_=e,this.indexSet_=t}return Object.defineProperty(e,"Default",{get:function(){return(0,E.assert)(tt&&e8,"ChildrenNode.ts has not been loaded"),p=p||new e({".priority":tt},{".priority":e8})},enumerable:!1,configurable:!0}),e.prototype.get=function(e){var t=(0,E.safeGet)(this.indexes_,e);if(!t)throw Error("No index defined for "+e);return t instanceof e1?t:null},e.prototype.hasIndex=function(e){return(0,E.contains)(this.indexSet_,e.toString())},e.prototype.addIndex=function(t,n){(0,E.assert)(t!==eX,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,a=n.getIterator(e$.Wrap),s=a.getNext();s;)o=o||t.isDefinedOn(s.node),i.push(s),s=a.getNext();r=o?te(i,t.getCompare()):tt;var u=t.toString(),c=(0,I.__assign)({},this.indexSet_);c[u]=t;var l=(0,I.__assign)({},this.indexes_);return l[u]=r,new e(l,c)},e.prototype.addToIndexes=function(t,n){var r=this;return new e((0,E.map)(this.indexes_,function(e,i){var o=(0,E.safeGet)(r.indexSet_,i);if((0,E.assert)(o,"Missing index implementation for "+i),e===tt){if(!o.isDefinedOn(t.node))return tt;for(var a=[],s=n.getIterator(e$.Wrap),u=s.getNext();u;)u.name!==t.name&&a.push(u),u=s.getNext();return a.push(t),te(a,o.getCompare())}var c=n.get(t.name),l=e;return c&&(l=l.remove(new e$(t.name,c))),l.insert(t,t.node)}),this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){return new e((0,E.map)(this.indexes_,function(e){if(e===tt)return e;var r=n.get(t.name);return r?e.remove(new e$(t.name,r)):e}),this.indexSet_)},e}(),tr=function(){function e(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&e5(this.priorityNode_),this.children_.isEmpty()&&(0,E.assert)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return g||(g=new e(new e1(e3),null,tn.Default))},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||g},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?g:t},e.prototype.getChild=function(e){var t=eN(e);return null===t?this:this.getImmediateChild(t).getChild(eO(e))},e.prototype.hasChild=function(e){return null!==this.children_.get(e)},e.prototype.updateImmediateChild=function(t,n){if((0,E.assert)(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r=new e$(t,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,n),o=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?g:this.priorityNode_;return new e(i,a,o)},e.prototype.updateChild=function(e,t){var n=eN(e);if(null===n)return t;(0,E.assert)(".priority"!==eN(e)||1===ex(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(eO(e),t);return this.updateImmediateChild(n,r)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(e8,function(a,s){n[a]=s.val(t),r++,o&&e.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1}),t||!o||!(i<2*r))return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n;var a=[];for(var s in n)a[s]=n[s];return a},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+e6(this.getPriority().val())+":"),this.forEachChild(e8,function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)}),this.lazyHash_=""===e?"":R(e)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(e,t,n){var r=this.resolveIndex_(n);if(!r)return this.children_.getPredecessorKey(e);var i=r.getPredecessorKey(new e$(e,t));return i?i.name:null},e.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(!t)return this.children_.minKey();var n=t.minKey();return n&&n.name},e.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new e$(t,this.children_.get(t)):null},e.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(!t)return this.children_.maxKey();var n=t.maxKey();return n&&n.name},e.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new e$(t,this.children_.get(t)):null},e.prototype.forEachChild=function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal(function(e){return t(e.name,e.node)}):this.children_.inorderTraversal(t)},e.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},e.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,function(e){return e});for(var r=this.children_.getIteratorFrom(e.name,e$.Wrap),i=r.peek();null!=i&&0>t.compare(i,e);)r.getNext(),i=r.peek();return r},e.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},e.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,function(e){return e});for(var r=this.children_.getReverseIteratorFrom(e.name,e$.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r},e.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ti?-1:0},e.prototype.withIndex=function(t){if(t===eX||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(e){return e===eX||this.indexMap_.hasIndex(e)},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode()||!this.getPriority().equals(e.getPriority())||this.children_.count()!==e.children_.count())return!1;for(var t=this.getIterator(e8),n=e.getIterator(e8),r=t.getNext(),i=n.getNext();r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=t.getNext(),i=n.getNext()}return null===r&&null===i},e.prototype.resolveIndex_=function(e){return e===eX?null:this.indexMap_.get(e.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}(),ti=new(function(e){function t(){return e.call(this,new e1(e3),tr.EMPTY_NODE,tn.Default)||this}return(0,I.__extends)(t,e),t.prototype.compareTo=function(e){return e===this?0:1},t.prototype.equals=function(e){return e===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(e){return tr.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(tr));function to(e,t){if(void 0===t&&(t=null),null===e)return tr.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),(0,E.assert)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new e4(e,to(t));if(e instanceof Array){var n=tr.EMPTY_NODE;return ee(e,function(t,r){if((0,E.contains)(e,t)&&"."!==t.substring(0,1)){var i=to(r);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(t,i))}}),n.updatePriority(to(t))}var r=[],i=!1;if(ee(e,function(e,t){if("."!==e.substring(0,1)){var n=to(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new e$(e,n)))}}),0===r.length)return tr.EMPTY_NODE;var o=te(r,e2,function(e){return e.name},e3);if(!i)return new tr(o,to(t),tn.Default);var a=te(r,e8.getCompare());return new tr(o,to(t),new tn({".priority":a},{".priority":e8}))}Object.defineProperties(e$,{MIN:{value:new e$(H,tr.EMPTY_NODE)},MAX:{value:new e$($,ti)}}),eY.__EMPTY_NODE=tr.EMPTY_NODE,e4.__childrenNodeConstructor=tr,l=ti,d=ti,f=to;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ta=function(e){function t(t){var n=e.call(this)||this;return n.indexPath_=t,(0,E.assert)(!ej(t)&&".priority"!==eN(t),"Can't create PathIndex with empty path or .priority key"),n}return(0,I.__extends)(t,e),t.prototype.extractChild=function(e){return e.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Q(e.name,t.name):i},t.prototype.makePost=function(e,t){var n=to(e);return new e$(t,tr.EMPTY_NODE.updateChild(this.indexPath_,n))},t.prototype.maxPost=function(){return new e$($,tr.EMPTY_NODE.updateChild(this.indexPath_,ti))},t.prototype.toString=function(){return eM(this.indexPath_,0).join("/")},t}(eQ),ts=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,I.__extends)(t,e),t.prototype.compare=function(e,t){var n=e.node.compareTo(t.node);return 0===n?Q(e.name,t.name):n},t.prototype.isDefinedOn=function(e){return!0},t.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},t.prototype.minPost=function(){return e$.MIN},t.prototype.maxPost=function(){return e$.MAX},t.prototype.makePost=function(e,t){return new e$(t,to(e))},t.prototype.toString=function(){return".value"},t}(eQ)),tu="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",tc=(a=0,s=[],function(e){var t,n=e===a;a=e;var r=Array(8);for(t=7;t>=0;t--)r[t]=tu.charAt(e%64),e=Math.floor(e/64);(0,E.assert)(0===e,"Cannot push at time == 0");var i=r.join("");if(n){for(t=11;t>=0&&63===s[t];t--)s[t]=0;s[t]++}else for(t=0;t<12;t++)s[t]=Math.floor(64*Math.random());for(t=0;t<12;t++)i+=tu.charAt(s[t]);return(0,E.assert)(20===i.length,"nextPushId: Length should be 20."),i}),tl=function(e){if("2147483647"===e)return"-";var t=er(e);if(null!=t)return""+(t+1);for(var n=Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return $;var o=n[i],a=tu.charAt(tu.indexOf(o)+1);return n[i]=a,n.slice(0,i+1).join("")},th=function(e){if("-2147483648"===e)return H;var t=er(e);if(null!=t)return""+(t-1);for(var n=Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=tu.charAt(tu.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(e){return{type:"value",snapshotNode:e}}function td(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function tp(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function tg(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tv=function(){function e(e){this.index_=e}return e.prototype.updateChild=function(e,t,n,r,i,o){(0,E.assert)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=e.getImmediateChild(t);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(tp(t,a)):(0,E.assert)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(td(t,n)):o.trackChildChange(tg(t,n,a))),e.isLeafNode()&&n.isEmpty())?e:e.updateImmediateChild(t,n).withIndex(this.index_)},e.prototype.updateFullNode=function(e,t,n){return null==n||(e.isLeafNode()||e.forEachChild(e8,function(e,r){t.hasChild(e)||n.trackChildChange(tp(e,r))}),t.isLeafNode()||t.forEachChild(e8,function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(tg(t,r,i))}else n.trackChildChange(td(t,r))})),t.withIndex(this.index_)},e.prototype.updatePriority=function(e,t){return e.isEmpty()?tr.EMPTY_NODE:e.updatePriority(t)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}(),ty=function(){function e(t){this.indexedFilter_=new tv(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(e){return 0>=this.index_.compare(this.getStartPost(),e)&&0>=this.index_.compare(e,this.getEndPost())},e.prototype.updateChild=function(e,t,n,r,i,o){return this.matches(new e$(t,n))||(n=tr.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)},e.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=tr.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(tr.EMPTY_NODE);var i=this;return t.forEachChild(e8,function(e,t){i.matches(new e$(e,t))||(r=r.updateImmediateChild(e,tr.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(e){if(!e.hasStart())return e.getIndex().minPost();var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)},e.getEndPost_=function(e){if(!e.hasEnd())return e.getIndex().maxPost();var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)},e}(),tm=function(){function e(e){this.rangedFilter_=new ty(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}return e.prototype.updateChild=function(e,t,n,r,i,o){return(this.rangedFilter_.matches(new e$(t,n))||(n=tr.EMPTY_NODE),e.getImmediateChild(t).equals(n))?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)},e.prototype.updateFullNode=function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=tr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){r=tr.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext(),s=void 0;if(s=this.reverse_?0>=this.index_.compare(this.rangedFilter_.getStartPost(),a):0>=this.index_.compare(a,this.rangedFilter_.getEndPost()))r=r.updateImmediateChild(a.name,a.node),o++;else break}}else{r=(r=t.withIndex(this.index_)).updatePriority(tr.EMPTY_NODE);var u=void 0,c=void 0,l=void 0,i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();l=function(e,t){return h(t,e)}}else i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),l=this.index_.getCompare();for(var o=0,f=!1;i.hasNext();){var a=i.getNext();!f&&0>=l(u,a)&&(f=!0);var s=f&&o<this.limit_&&0>=l(a,c);s?o++:r=r.updateImmediateChild(a.name,tr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(e,t,n,r,i){if(this.reverse_){var o,a=this.index_.getCompare();o=function(e,t){return a(t,e)}}else o=this.index_.getCompare();(0,E.assert)(e.numChildren()===this.limit_,"");var s=new e$(t,n),u=this.reverse_?e.getFirstChild(this.index_):e.getLastChild(this.index_),c=this.rangedFilter_.matches(s);if(e.hasChild(t)){for(var l=e.getImmediateChild(t),h=r.getChildAfterChild(this.index_,u,this.reverse_);null!=h&&(h.name===t||e.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);var f=null==h?1:o(h,s);if(c&&!n.isEmpty()&&f>=0)return null!=i&&i.trackChildChange(tg(t,n,l)),e.updateImmediateChild(t,n);null!=i&&i.trackChildChange(tp(t,l));var d=e.updateImmediateChild(t,tr.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(null!=i&&i.trackChildChange(td(h.name,h.node)),d.updateImmediateChild(h.name,h.node)):d}return n.isEmpty()?e:c&&o(u,s)>=0?(null!=i&&(i.trackChildChange(tp(u.name,u.node)),i.trackChildChange(td(t,n))),e.updateImmediateChild(t,n).updateImmediateChild(u.name,tr.EMPTY_NODE)):e},e}(),tb=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=e8}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.hasStartAfter=function(){return this.startAfterSet_},e.prototype.hasEndBefore=function(){return this.endBeforeSet_},e.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},e.prototype.getIndexStartValue=function(){return(0,E.assert)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return((0,E.assert)(this.startSet_,"Only valid if start has been set"),this.startNameSet_)?this.indexStartName_:H},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return(0,E.assert)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return((0,E.assert)(this.endSet_,"Only valid if end has been set"),this.endNameSet_)?this.indexEndName_:$},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},e.prototype.getLimit=function(){return(0,E.assert)(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===e8},e.prototype.copy=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e}();function t_(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function tw(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function tE(e,t){var n=e.copy();return n.index_=t,n}function tI(e){var t,n={};return e.isDefault()||(e.index_===e8?t="$priority":e.index_===ts?t="$value":e.index_===eX?t="$key":((0,E.assert)(e.index_ instanceof ta,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=(0,E.stringify)(t),e.startSet_&&(n.startAt=(0,E.stringify)(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+(0,E.stringify)(e.indexStartName_))),e.endSet_&&(n.endAt=(0,E.stringify)(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+(0,E.stringify)(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function tC(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==e8&&(t.i=e.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tT=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.repoInfo_=t,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=q("p:rest:"),o.listens_={},o}return(0,I.__extends)(t,e),t.prototype.reportStats=function(e){throw Error("Method not implemented.")},t.getListenId_=function(e,t){return void 0!==t?"tag$"+t:((0,E.assert)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())},t.prototype.listen=function(e,n,r,i){var o=this,a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);var s=t.getListenId_(e,r),u={};this.listens_[s]=u;var c=tI(e._queryParams);this.restRequest_(a+".json",c,function(e,t){var n=t;404===e&&(n=null,e=null),null===e&&o.onDataUpdate_(a,n,!1,r),(0,E.safeGet)(o.listens_,s)===u&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)})},t.prototype.unlisten=function(e,n){var r=t.getListenId_(e,n);delete this.listens_[r]},t.prototype.get=function(e){var t=this,n=tI(e._queryParams),r=e._path.toString(),i=new E.Deferred;return this.restRequest_(r+".json",n,function(e,n){var o=n;404===e&&(o=null,e=null),null===e?(t.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(Error(o))}),i.promise},t.prototype.refreshAuthToken=function(e){},t.prototype.restRequest_=function(e,t,n){var r=this;return void 0===t&&(t={}),t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(i){var o=(0,I.__read)(i,2),a=o[0],s=o[1];a&&a.accessToken&&(t.auth=a.accessToken),s&&s.token&&(t.ac=s.token);var u=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+e+"?ns="+r.repoInfo_.namespace+(0,E.querystring)(t);r.log_("Sending REST request for "+u);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(n&&4===c.readyState){r.log_("REST Response for "+u+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=(0,E.jsonEval)(c.responseText)}catch(e){W("Failed to parse JSON response for "+u+": "+c.responseText)}n(null,e)}else 401!==c.status&&404!==c.status&&W("Got unsuccessful REST response for "+u+" Status: "+c.status),n(c.status);n=null}},c.open("GET",u,!0),c.send()})},t}(eS),tS=function(){function e(){this.rootNode_=tr.EMPTY_NODE}return e.prototype.getNode=function(e){return this.rootNode_.getChild(e)},e.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(){return{value:null,children:new Map}}function tD(e,t,n){if(ej(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=eN(t);e.children.has(r)||e.children.set(r,tk()),tD(e.children.get(r),t=eO(t),n)}}function tA(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(function(e,n){t(n,e)})}(e,function(e,r){tA(r,new eA(t.toString()+"/"+e),n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tP=function(){function e(e){this.collection_=e,this.last_=null}return e.prototype.get=function(){var e=this.collection_.get(),t=(0,I.__assign)({},e);return this.last_&&ee(this.last_,function(e,n){t[e]=t[e]-n}),this.last_=e,t},e}(),tN=function(){function e(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new tP(e),eo(this.reportStats_.bind(this),Math.floor(1e4+2e4*Math.random()))}return e.prototype.reportStats_=function(){var e=this,t=this.statsListener_.get(),n={},r=!1;ee(t,function(t,i){i>0&&(0,E.contains)(e.statsToReport_,t)&&(n[t]=i,r=!0)}),r&&this.server_.reportStats(n),eo(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},e}();function tx(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function tO(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function tR(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}(u=v||(v={}))[u.OVERWRITE=0]="OVERWRITE",u[u.MERGE=1]="MERGE",u[u.ACK_USER_WRITE=2]="ACK_USER_WRITE",u[u.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tM=function(){function e(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=v.ACK_USER_WRITE,this.source=tx()}return e.prototype.operationForChild=function(t){if(!ej(this.path))return(0,E.assert)(eN(this.path)===t,"operationForChild called for unrelated child."),new e(eO(this.path),this.affectedTree,this.revert);if(null!=this.affectedTree.value)return(0,E.assert)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new eA(t));return new e(eP(),n,this.revert)},e}(),tL=function(){function e(e,t){this.source=e,this.path=t,this.type=v.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return ej(this.path)?new e(this.source,eP()):new e(this.source,eO(this.path))},e}(),tF=function(){function e(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=v.OVERWRITE}return e.prototype.operationForChild=function(t){return ej(this.path)?new e(this.source,eP(),this.snap.getImmediateChild(t)):new e(this.source,eO(this.path),this.snap)},e}(),tj=function(){function e(e,t,n){this.source=e,this.path=t,this.children=n,this.type=v.MERGE}return e.prototype.operationForChild=function(t){if(!ej(this.path))return(0,E.assert)(eN(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,eO(this.path),this.children);var n=this.children.subtree(new eA(t));return n.isEmpty()?null:n.value?new tF(this.source,eP(),n.value):new e(this.source,eP(),n)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}(),tU=function(){function e(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(e){if(ej(e))return this.isFullyInitialized()&&!this.filtered_;var t=eN(e);return this.isCompleteForChild(t)},e.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},e.prototype.getNode=function(){return this.node_},e}(),tq=function(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()};function tB(e,t,n,r,i,o){var a=r.filter(function(e){return e.type===n});a.sort(function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw(0,E.assertionError)("Should only compare child_ events.");var r=new e$(t.childName,t.snapshotNode),i=new e$(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)}),a.forEach(function(n){var r=("value"===n.type||"child_removed"===n.type||(n.prevName=o.getPredecessorChildName(n.childName,n.snapshotNode,e.index_)),n);i.forEach(function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))})})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tV(e,t){return{eventCache:e,serverCache:t}}function tW(e,t,n,r){return tV(new tU(t,n,r),e.serverCache)}function tK(e,t,n,r){return tV(e.eventCache,new tU(t,n,r))}function tG(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function tz(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var tH=function(){function e(e,t){void 0===t&&(y||(y=new e1(Y)),t=y),this.value=e,this.children=t}return e.fromObject=function(t){var n=new e(null);return ee(t,function(e,t){n=n.set(new eA(e),t)}),n},e.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:eP(),value:this.value};if(ej(e))return null;var n=eN(e),r=this.children.get(n);if(null===r)return null;var i=r.findRootMostMatchingPathAndValue(eO(e),t);return null!=i?{path:eF(new eA(n),i.path),value:i.value}:null},e.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,function(){return!0})},e.prototype.subtree=function(t){if(ej(t))return this;var n=eN(t),r=this.children.get(n);return null!==r?r.subtree(eO(t)):new e(null)},e.prototype.set=function(t,n){if(ej(t))return new e(n,this.children);var r=eN(t),i=(this.children.get(r)||new e(null)).set(eO(t),n),o=this.children.insert(r,i);return new e(this.value,o)},e.prototype.remove=function(t){if(ej(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=eN(t),r=this.children.get(n);if(!r)return this;var i=r.remove(eO(t)),o=void 0;return(o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty())?new e(null):new e(this.value,o)},e.prototype.get=function(e){if(ej(e))return this.value;var t=eN(e),n=this.children.get(t);return n?n.get(eO(e)):null},e.prototype.setTree=function(t,n){if(ej(t))return n;var r=eN(t),i=(this.children.get(r)||new e(null)).setTree(eO(t),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new e(this.value,o)},e.prototype.fold=function(e){return this.fold_(eP(),e)},e.prototype.fold_=function(e,t){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(eF(e,r),t)}),t(e,this.value,n)},e.prototype.findOnPath=function(e,t){return this.findOnPath_(e,eP(),t)},e.prototype.findOnPath_=function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(ej(e))return null;var i=eN(e),o=this.children.get(i);return o?o.findOnPath_(eO(e),eF(t,i),n):null},e.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,eP(),t)},e.prototype.foreachOnPath_=function(t,n,r){if(ej(t))return this;this.value&&r(n,this.value);var i=eN(t),o=this.children.get(i);return o?o.foreachOnPath_(eO(t),eF(n,i),r):new e(null)},e.prototype.foreach=function(e){this.foreach_(eP(),e)},e.prototype.foreach_=function(e,t){this.children.inorderTraversal(function(n,r){r.foreach_(eF(e,n),t)}),this.value&&t(e,this.value)},e.prototype.foreachChild=function(e){this.children.inorderTraversal(function(t,n){n.value&&e(t,n.value)})},e}(),t$=function(){function e(e){this.writeTree_=e}return e.empty=function(){return new e(new tH(null))},e}();function tQ(e,t,n){if(ej(t))return new t$(new tH(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,o=r.value,a=eU(i,t);return o=o.updateChild(a,n),new t$(e.writeTree_.set(i,o))}var s=new tH(n);return new t$(e.writeTree_.setTree(t,s))}function tY(e,t,n){var r=e;return ee(n,function(e,n){r=tQ(r,eF(t,e),n)}),r}function tX(e,t){return ej(t)?t$.empty():new t$(e.writeTree_.setTree(t,new tH(null)))}function tJ(e,t){return null!=tZ(e,t)}function tZ(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(eU(n.path,t)):null}function t0(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(e8,function(e,n){t.push(new e$(e,n))}):e.writeTree_.children.inorderTraversal(function(e,n){null!=n.value&&t.push(new e$(e,n.value))}),t}function t1(e,t){if(ej(t))return e;var n=tZ(e,t);return new t$(null!=n?new tH(n):e.writeTree_.subtree(t))}function t2(e){return e.writeTree_.isEmpty()}function t3(e,t){return function e(t,n,r){if(null!=n.value)return r.updateChild(t,n.value);var i=null;return n.children.inorderTraversal(function(n,o){".priority"===n?((0,E.assert)(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=e(eF(t,n),o,r)}),r.getChild(t).isEmpty()||null===i||(r=r.updateChild(eF(t,".priority"),i)),r}(eP(),e.writeTree_,t)}function t6(e){return e.visible}function t5(e,t,n){for(var r=t$.empty(),i=0;i<e.length;++i){var o=e[i];if(t(o)){var a=o.path,s=void 0;if(o.snap)eV(n,a)?r=tQ(r,s=eU(n,a),o.snap):eV(a,n)&&(s=eU(a,n),r=tQ(r,eP(),o.snap.getChild(s)));else if(o.children){if(eV(n,a))r=tY(r,s=eU(n,a),o.children);else if(eV(a,n)){if(ej(s=eU(a,n)))r=tY(r,eP(),o.children);else{var u=(0,E.safeGet)(o.children,eN(s));if(u){var c=u.getChild(eO(s));r=tQ(r,eP(),c)}}}}else throw(0,E.assertionError)("WriteRecord should have .snap or .children")}}return r}function t4(e,t,n,r,i){if(r||i){var o=t1(e.visibleWrites,t);if(!i&&t2(o))return n;if(!i&&null==n&&!tJ(o,eP()))return null;var a=t5(e.allWrites,function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(eV(e.path,t)||eV(t,e.path))},t),s=n||tr.EMPTY_NODE;return t3(a,s)}var u=tZ(e.visibleWrites,t);if(null!=u)return u;var c=t1(e.visibleWrites,t);if(t2(c))return n;if(null==n&&!tJ(c,eP()))return null;var s=n||tr.EMPTY_NODE;return t3(c,s)}function t8(e,t,n,r){return t4(e.writeTree,e.treePath,t,n,r)}function t9(e,t){return function(e,t,n){var r=tr.EMPTY_NODE,i=tZ(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(e8,function(e,t){r=r.updateImmediateChild(e,t)}),r;if(!n)return t0(t1(e.visibleWrites,t)).forEach(function(e){r=r.updateImmediateChild(e.name,e.node)}),r;var o=t1(e.visibleWrites,t);return n.forEachChild(e8,function(e,t){var n=t3(t1(o,new eA(e)),t);r=r.updateImmediateChild(e,n)}),t0(o).forEach(function(e){r=r.updateImmediateChild(e.name,e.node)}),r}(e.writeTree,e.treePath,t)}function t7(e,t,n,r){return function(e,t,n,r,i){(0,E.assert)(r||i,"Either existingEventSnap or existingServerSnap must exist");var o=eF(t,n);if(tJ(e.visibleWrites,o))return null;var a=t1(e.visibleWrites,o);return t2(a)?i.getChild(n):t3(a,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function ne(e,t){var n,r;return n=e.writeTree,r=eF(e.treePath,t),tZ(n.visibleWrites,r)}function nt(e,t,n){var r,i,o;return r=e.writeTree,i=eF(e.treePath,t),null!=(o=tZ(r.visibleWrites,i))?o:n.isCompleteForChild(t)?t3(t1(r.visibleWrites,i),n.getNode().getImmediateChild(t)):null}function nn(e,t){return nr(eF(e.treePath,t),e.writeTree)}function nr(e,t){return{treePath:e,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ni=function(){function e(){this.changeMap=new Map}return e.prototype.trackChildChange=function(e){var t=e.type,n=e.childName;(0,E.assert)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,E.assert)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,tg(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,tp(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,td(n,e.snapshotNode));else if("child_changed"===t&&"child_changed"===i)this.changeMap.set(n,tg(n,e.snapshotNode,r.oldSnap));else throw(0,E.assertionError)("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(n,e)},e.prototype.getChanges=function(){return Array.from(this.changeMap.values())},e}(),no=new(function(){function e(){}return e.prototype.getCompleteChild=function(e){return null},e.prototype.getChildAfterChild=function(e,t,n){return null},e}()),na=function(){function e(e,t,n){void 0===n&&(n=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}return e.prototype.getCompleteChild=function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new tU(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return nt(this.writes_,e,n)},e.prototype.getChildAfterChild=function(e,t,n){var r,i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:tz(this.viewCache_),o=function(e,t,n,r,i,o,a){var s,u=t1(e.visibleWrites,t),c=tZ(u,eP());if(null!=c)s=c;else{if(null==n)return[];s=t3(u,n)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=a.getCompare(),f=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),d=f.getNext();d&&l.length<1;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}((r=this.writes_).writeTree,r.treePath,i,t,0,n,e);return 0===o.length?null:o[0]},e}();function ns(e,t,n,r,i,o){var a=t.eventCache;if(null!=ne(r,n))return t;var s=void 0,u=void 0;if(ej(n)){if((0,E.assert)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=tz(t),l=t9(r,c instanceof tr?c:tr.EMPTY_NODE);s=e.filter.updateFullNode(t.eventCache.getNode(),l,o)}else{var h=t8(r,tz(t));s=e.filter.updateFullNode(t.eventCache.getNode(),h,o)}}else{var f=eN(n);if(".priority"===f){(0,E.assert)(1===ex(n),"Can't have a priority with additional path components");var d=a.getNode(),p=t7(r,n,d,u=t.serverCache.getNode());s=null!=p?e.filter.updatePriority(d,p):a.getNode()}else{var g=eO(n),v=void 0;if(a.isCompleteForChild(f)){u=t.serverCache.getNode();var y=t7(r,n,a.getNode(),u);v=null!=y?a.getNode().getImmediateChild(f).updateChild(g,y):a.getNode().getImmediateChild(f)}else v=nt(r,f,t.serverCache);s=null!=v?e.filter.updateChild(a.getNode(),f,v,g,i,o):a.getNode()}}return tW(t,s,a.isFullyInitialized()||ej(n),e.filter.filtersNodes())}function nu(e,t,n,r,i,o,a,s){var u,c=t.serverCache,l=a?e.filter:e.filter.getIndexedFilter();if(ej(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=eN(n);if(!c.isCompleteForPath(n)&&ex(n)>1)return t;var d=eO(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,no,null)}var g=tK(t,u,c.isFullyInitialized()||ej(n),l.filtersNodes()),v=new na(i,g,o);return ns(e,g,n,i,v,s)}function nc(e,t,n,r,i,o,a){var s,u,c=t.eventCache,l=new na(i,t,o);if(ej(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,a),s=tW(t,u,!0,e.filter.filtersNodes());else{var h=eN(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=tW(t,u,c.isFullyInitialized(),c.isFiltered());else{var f=eO(n),d=c.getNode().getImmediateChild(h),p=void 0;if(ej(f))p=r;else{var g=l.getCompleteChild(h);p=null!=g?".priority"===eR(f)&&g.getChild(eL(f)).isEmpty()?g:g.updateChild(f,r):tr.EMPTY_NODE}s=d.equals(p)?t:tW(t,e.filter.updateChild(c.getNode(),h,p,f,l,a),c.isFullyInitialized(),e.filter.filtersNodes())}}return s}function nl(e,t){return e.eventCache.isCompleteForChild(t)}function nh(e,t,n){return n.foreach(function(e,n){t=t.updateChild(e,n)}),t}function nf(e,t,n,r,i,o,a,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=ej(n)?r:new tH(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal(function(n,r){if(l.hasChild(n)){var u=nh(e,t.serverCache.getNode().getImmediateChild(n),r);c=nu(e,c,new eA(n),u,i,o,a,s)}}),u.children.inorderTraversal(function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=nh(e,t.serverCache.getNode().getImmediateChild(n),r);c=nu(e,c,new eA(n),h,i,o,a,s)}}),c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nd=function(){function e(e,t){this.query_=e,this.eventRegistrations_=[];var n=this.query_._queryParams,r=new tv(n.getIndex()),i=n.loadsAllData()?new tv(n.getIndex()):n.hasLimit()?new tm(n):new ty(n);this.processor_={filter:i};var o=t.serverCache,a=t.eventCache,s=r.updateFullNode(tr.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(tr.EMPTY_NODE,a.getNode(),null),c=new tU(s,o.isFullyInitialized(),r.filtersNodes()),l=new tU(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=tV(l,c),this.eventGenerator_=new tq(this.query_)}return Object.defineProperty(e.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),e}();function np(e){return 0===e.eventRegistrations_.length}function ng(e,t,n){var r=[];if(n){(0,E.assert)(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach(function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)})}if(t){for(var o=[],a=0;a<e.eventRegistrations_.length;++a){var s=e.eventRegistrations_[a];if(s.matches(t)){if(t.hasAnyCallback()){o=o.concat(e.eventRegistrations_.slice(a+1));break}}else o.push(s)}e.eventRegistrations_=o}else e.eventRegistrations_=[];return r}function nv(e,t,n,r){t.type===v.MERGE&&null!==t.source.queryId&&((0,E.assert)(tz(e.viewCache_),"We should always have a full cache before handling merges"),(0,E.assert)(tG(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,o,a=e.viewCache_,s=function(e,t,n,r,i){var o,a,s,u,c,l,h,f=new ni;if(n.type===v.OVERWRITE)n.source.fromUser?l=nc(e,t,n.path,n.snap,r,i,f):((0,E.assert)(n.source.fromServer,"Unknown source."),h=n.source.tagged||t.serverCache.isFiltered()&&!ej(n.path),l=nu(e,t,n.path,n.snap,r,i,h,f));else if(n.type===v.MERGE)n.source.fromUser?(o=n.path,a=n.children,s=t,a.foreach(function(n,a){var u=eF(o,n);nl(t,eN(u))&&(s=nc(e,s,u,a,r,i,f))}),a.foreach(function(n,a){var u=eF(o,n);nl(t,eN(u))||(s=nc(e,s,u,a,r,i,f))}),l=s):((0,E.assert)(n.source.fromServer,"Unknown source."),h=n.source.tagged||t.serverCache.isFiltered(),l=nf(e,t,n.path,n.children,r,i,h,f));else if(n.type===v.ACK_USER_WRITE)l=n.revert?function(e,t,n,r,i,o){if(null!=ne(r,n))return t;var a,s=new na(r,t,i),u=t.eventCache.getNode(),c=void 0;if(ej(n)||".priority"===eN(n)){var l=void 0;if(t.serverCache.isFullyInitialized())l=t8(r,tz(t));else{var h=t.serverCache.getNode();(0,E.assert)(h instanceof tr,"serverChildren would be complete if leaf node"),l=t9(r,h)}c=e.filter.updateFullNode(u,l,o)}else{var f=eN(n),d=nt(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=u.getImmediateChild(f)),(c=null!=d?e.filter.updateChild(u,f,d,eO(n),s,o):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(u,f,tr.EMPTY_NODE,eO(n),s,o):u).isEmpty()&&t.serverCache.isFullyInitialized()&&(a=t8(r,tz(t))).isLeafNode()&&(c=e.filter.updateFullNode(c,a,o))}return a=t.serverCache.isFullyInitialized()||null!=ne(r,eP()),tW(t,c,a,e.filter.filtersNodes())}(e,t,n.path,r,i,f):function(e,t,n,r,i,o,a){if(null!=ne(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(ej(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return nu(e,t,n,u.getNode().getChild(n),i,o,s,a);if(!ej(n))return t;var c=new tH(null);return u.getNode().forEachChild(eX,function(e,t){c=c.set(new eA(e),t)}),nf(e,t,n,c,i,o,s,a)}var l=new tH(null);return r.foreach(function(e,t){var r=eF(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))}),nf(e,t,n,l,i,o,s,a)}(e,t,n.path,n.affectedTree,r,i,f);else if(n.type===v.LISTEN_COMPLETE)u=n.path,c=t.serverCache,l=ns(e,tK(t,c.getNode(),c.isFullyInitialized()||ej(u),c.isFiltered()),u,r,no,f);else throw(0,E.assertionError)("Unknown operation type: "+n.type);var d=f.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=tG(e);!(n.length>0)&&e.eventCache.isFullyInitialized()&&(!i||r.getNode().equals(o))&&r.getNode().getPriority().equals(o.getPriority())||n.push(tf(tG(t)))}}(t,l,d),{viewCache:l,changes:d}}(e.processor_,a,t,n,r);return i=e.processor_,o=s.viewCache,(0,E.assert)(o.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),(0,E.assert)(o.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),(0,E.assert)(s.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,ny(e,s.changes,s.viewCache.eventCache.getNode(),null)}function ny(e,t,n,r){var i,o,a,s=r?[r]:e.eventRegistrations_;return i=e.eventGenerator_,o=[],a=[],t.forEach(function(e){if("child_changed"===e.type&&i.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)){var t;a.push((t=e.childName,{type:"child_moved",snapshotNode:e.snapshotNode,childName:t}))}}),tB(i,o,"child_removed",t,s,n),tB(i,o,"child_added",t,s,n),tB(i,o,"child_moved",a,s,n),tB(i,o,"child_changed",t,s,n),tB(i,o,"value",t,s,n),o}var nm=function(){this.views=new Map};function nb(e,t,n,r){var i,o,a=t.source.queryId;if(null!==a){var s=e.views.get(a);return(0,E.assert)(null!=s,"SyncTree gave us an op for an invalid query."),nv(s,t,n,r)}var u=[];try{for(var c=(0,I.__values)(e.views.values()),l=c.next();!l.done;l=c.next()){var s=l.value;u=u.concat(nv(s,t,n,r))}}catch(e){i={error:e}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return u}function n_(e,t,n,r,i){var o=t._queryIdentifier,a=e.views.get(o);if(!a){var s=t8(n,i?r:null),u=!1;return s?u=!0:(s=r instanceof tr?t9(n,r):tr.EMPTY_NODE,u=!1),new nd(t,tV(new tU(s,u,!1),new tU(r,i,!1)))}return a}function nw(e){var t,n,r=[];try{for(var i=(0,I.__values)(e.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}function nE(e,t){var n,r,i=null;try{for(var o=(0,I.__values)(e.views.values()),a=o.next();!a.done;a=o.next()){var s=a.value;i=i||function(e,t){var n=tz(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!ej(t)&&!n.getImmediateChild(eN(t)).isEmpty())?n.getChild(t):null}(s,t)}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function nI(e,t){if(t._queryParams.loadsAllData())return nT(e);var n=t._queryIdentifier;return e.views.get(n)}function nC(e){return null!=nT(e)}function nT(e){var t,n;try{for(var r=(0,I.__values)(e.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null}var nS=1,nk=function(e){this.listenProvider_=e,this.syncPointTree_=new tH(null),this.pendingWriteTree_={visibleWrites:t$.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function nD(e,t,n,r,i){var o,a;return(o=e.pendingWriteTree_,a=i,(0,E.assert)(r>o.lastWriteId,"Stacking an older write on top of newer ones"),void 0===a&&(a=!0),o.allWrites.push({path:t,snap:n,writeId:r,visible:a}),a&&(o.visibleWrites=tQ(o.visibleWrites,t,n)),o.lastWriteId=r,i)?nR(e,new tF(tx(),t,n)):[]}function nA(e,t,n){void 0===n&&(n=!1);var r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(!function(e,t){var n=e.allWrites.findIndex(function(e){return e.writeId===t});(0,E.assert)(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,o=!1,a=e.allWrites.length-1;i&&a>=0;){var s=e.allWrites[a];s.visible&&(a>=n&&function(e,t){if(e.snap)return eV(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&eV(eF(e.path,n),t))return!0;return!1}(s,r.path)?i=!1:eV(r.path,s.path)&&(o=!0)),a--}return!!i&&(o?(e.visibleWrites=t5(e.allWrites,t6,eP()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1):r.snap?e.visibleWrites=tX(e.visibleWrites,r.path):ee(r.children,function(t){e.visibleWrites=tX(e.visibleWrites,eF(r.path,t))}),!0)}(e.pendingWriteTree_,t))return[];var i=new tH(null);return null!=r.snap?i=i.set(eP(),!0):ee(r.children,function(e){i=i.set(new eA(e),!0)}),nR(e,new tM(r.path,i,n))}function nP(e,t,n){return nR(e,new tF(tO(),t,n))}function nN(e,t,n,r){var i=t._path,o=e.syncPointTree_.get(i),a=[];if(o&&("default"===t._queryIdentifier||null!=nI(o,t))){var s=function(e,t,n,r){var i,o,a=t._queryIdentifier,s=[],u=[],c=nC(e);if("default"===a)try{for(var l=(0,I.__values)(e.views.entries()),h=l.next();!h.done;h=l.next()){var f=(0,I.__read)(h.value,2),d=f[0],p=f[1];u=u.concat(ng(p,n,r)),np(p)&&(e.views.delete(d),p.query._queryParams.loadsAllData()||s.push(p.query))}}catch(e){i={error:e}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}else{var p=e.views.get(a);p&&(u=u.concat(ng(p,n,r)),np(p)&&(e.views.delete(a),p.query._queryParams.loadsAllData()||s.push(p.query)))}return c&&!nC(e)&&s.push(new((0,E.assert)(m,"Reference.ts has not been loaded"),m)(t._repo,t._path)),{removed:s,events:u}}(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(i));var u=s.removed;a=s.events;var c=-1!==u.findIndex(function(e){return e._queryParams.loadsAllData()}),l=e.syncPointTree_.findOnPath(i,function(e,t){return nC(t)});if(c&&!l){var h=e.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=h.fold(function(e,t,n){if(t&&nC(t))return[nT(t)];var r=[];return t&&(r=nw(t)),ee(n,function(e,t){r=r.concat(t)}),r}),d=0;d<f.length;++d){var p=f[d],g=p.query,v=nM(e,p);e.listenProvider_.startListening(nB(g),nL(e,g),v.hashFn,v.onComplete)}}l||!(u.length>0)||r||(c?e.listenProvider_.stopListening(nB(t),null):u.forEach(function(t){var n=e.queryToTagMap.get(nF(t));e.listenProvider_.stopListening(nB(t),n)})),function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=nF(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}(e,u)}return a}function nx(e,t,n){var r,i,o,a,s,u=t._path,c=null,l=!1;e.syncPointTree_.foreachOnPath(u,function(e,t){var n=eU(e,u);c=c||nE(t,n),l=l||nC(t)});var h=e.syncPointTree_.get(u);h?(l=l||nC(h),c=c||nE(h,eP())):(h=new nm,e.syncPointTree_=e.syncPointTree_.set(u,h)),null!=c?s=!0:(s=!1,c=tr.EMPTY_NODE,e.syncPointTree_.subtree(u).foreachChild(function(e,t){var n=nE(t,eP());n&&(c=c.updateImmediateChild(e,n))}));var f=null!=nI(h,t);if(!f&&!t._queryParams.loadsAllData()){var d=nF(t);(0,E.assert)(!e.queryToTagMap.has(d),"View does not exist, but we have a tag");var p=nS++;e.queryToTagMap.set(d,p),e.tagToQueryMap.set(p,d)}var g=nr(u,e.pendingWriteTree_),v=(i=n_(r=h,t,g,c,s),r.views.has(t._queryIdentifier)||r.views.set(t._queryIdentifier,i),!function(e,t){e.eventRegistrations_.push(t)}(i,n),o=i.viewCache_.eventCache,a=[],o.getNode().isLeafNode()||o.getNode().forEachChild(e8,function(e,t){a.push(td(e,t))}),o.isFullyInitialized()&&a.push(tf(o.getNode())),ny(i,a,o.getNode(),n));if(!f&&!l){var y=nI(h,t);v=v.concat(function(e,t,n){var r=t._path,i=nL(e,t),o=nM(e,n),a=e.listenProvider_.startListening(nB(t),i,o.hashFn,o.onComplete),s=e.syncPointTree_.subtree(r);if(i)(0,E.assert)(!nC(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold(function(e,t,n){if(!ej(e)&&t&&nC(t))return[nT(t).query];var r=[];return t&&(r=r.concat(nw(t).map(function(e){return e.query}))),ee(n,function(e,t){r=r.concat(t)}),r}),c=0;c<u.length;++c){var l=u[c];e.listenProvider_.stopListening(nB(l),nL(e,l))}return a}(e,t,y))}return v}function nO(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,function(e,n){var r=nE(n,eU(e,t));if(r)return r});return t4(r,t,i,n,!0)}function nR(e,t){var n;return function e(t,n,r,i){if(ej(t.path))return function e(t,n,r,i){var o=n.get(eP());null==r&&null!=o&&(r=nE(o,eP()));var a=[];return n.children.inorderTraversal(function(n,o){var s=r?r.getImmediateChild(n):null,u=nn(i,n),c=t.operationForChild(n);c&&(a=a.concat(e(c,o,s,u)))}),o&&(a=a.concat(nb(o,t,i,r))),a}(t,n,r,i);var o=n.get(eP());null==r&&null!=o&&(r=nE(o,eP()));var a=[],s=eN(t.path),u=t.operationForChild(s),c=n.children.get(s);if(c&&u){var l=r?r.getImmediateChild(s):null,h=nn(i,s);a=a.concat(e(u,c,l,h))}return o&&(a=a.concat(nb(o,t,i,r))),a}(t,e.syncPointTree_,null,(n=e.pendingWriteTree_,nr(eP(),n)))}function nM(e,t){var n=t.query,r=nL(e,n);return{hashFn:function(){return(t.viewCache_.serverCache.getNode()||tr.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=nj(e,n);if(!r)return[];var i=nU(r),o=i.path,a=i.queryId,s=eU(o,t);return nq(e,o,new tL(tR(a),s))}(e,n._path,r):(i=n._path,nR(e,new tL(tO(),i)));var i,o,a,s=(o="Unknown Error","too_big"===t?o="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?o="Client doesn't have permission to access the desired data.":"unavailable"===t&&(o="The service is unavailable"),(a=Error(t+" at "+n._path.toString()+": "+o)).code=t.toUpperCase(),a);return nN(e,n,null,s)}}}function nL(e,t){var n=nF(t);return e.queryToTagMap.get(n)}function nF(e){return e._path.toString()+"$"+e._queryIdentifier}function nj(e,t){return e.tagToQueryMap.get(t)}function nU(e){var t=e.indexOf("$");return(0,E.assert)(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new eA(e.substr(0,t))}}function nq(e,t,n){var r=e.syncPointTree_.get(t);return(0,E.assert)(r,"Missing sync point for query tag that we're tracking"),nb(r,n,nr(t,e.pendingWriteTree_),null)}function nB(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new((0,E.assert)(b,"Reference.ts has not been loaded"),b)(e._repo,e._path):e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nV=function(){function e(e){this.node_=e}return e.prototype.getImmediateChild=function(t){return new e(this.node_.getImmediateChild(t))},e.prototype.node=function(){return this.node_},e}(),nW=function(){function e(e,t){this.syncTree_=e,this.path_=t}return e.prototype.getImmediateChild=function(t){var n=eF(this.path_,t);return new e(this.syncTree_,n)},e.prototype.node=function(){return nO(this.syncTree_,this.path_)},e}(),nK=function(e,t,n){return e&&"object"==typeof e?((0,E.assert)(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"])?nG(e[".sv"],t,n):"object"==typeof e[".sv"]?nz(e[".sv"],t):void(0,E.assert)(!1,"Unexpected server value: "+JSON.stringify(e,null,2)):e},nG=function(e,t,n){if("timestamp"===e)return n.timestamp;(0,E.assert)(!1,"Unexpected server value: "+e)},nz=function(e,t,n){e.hasOwnProperty("increment")||(0,E.assert)(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!=typeof r&&(0,E.assert)(!1,"Unexpected increment value: "+r);var i=t.node();if((0,E.assert)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r},nH=function(e,t,n,r){return nQ(t,new nW(n,e),r)},n$=function(e,t,n){return nQ(e,new nV(t),n)};function nQ(e,t,n){var r,i=nK(e.getPriority().val(),t.getImmediateChild(".priority"),n);if(!e.isLeafNode())return r=e,i!==e.getPriority().val()&&(r=r.updatePriority(new e4(i))),e.forEachChild(e8,function(e,i){var o=nQ(i,t.getImmediateChild(e),n);o!==i&&(r=r.updateImmediateChild(e,o))}),r;var o=nK(e.getValue(),t,n);return o!==e.getValue()||i!==e.getPriority().val()?new e4(o,to(i)):e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nY=function(e,t,n){void 0===e&&(e=""),void 0===t&&(t=null),void 0===n&&(n={children:{},childCount:0}),this.name=e,this.parent=t,this.node=n};function nX(e,t){for(var n=t instanceof eA?t:new eA(t),r=e,i=eN(n);null!==i;){var o=(0,E.safeGet)(r.node.children,i)||{children:{},childCount:0};r=new nY(i,r,o),i=eN(n=eO(n))}return r}function nJ(e){return e.node.value}function nZ(e,t){e.node.value=t,function e(t){var n,r,i,o,a;null!==t.parent&&(n=t.parent,r=t.name,o=void 0===nJ(i=t)&&!n0(i),a=(0,E.contains)(n.node.children,r),o&&a?(delete n.node.children[r],n.node.childCount--,e(n)):o||a||(n.node.children[r]=i.node,n.node.childCount++,e(n)))}(e)}function n0(e){return e.node.childCount>0}function n1(e,t){ee(e.node.children,function(n,r){t(new nY(n,e,r))})}function n2(e){return new eA(null===e.parent?e.name:n2(e.parent)+"/"+e.name)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var n3=/[\[\].#$\/\u0000-\u001F\u007F]/,n6=/[\[\].#$\u0000-\u001F\u007F]/,n5=function(e){return"string"==typeof e&&0!==e.length&&!n3.test(e)},n4=function(e){return"string"==typeof e&&0!==e.length&&!n6.test(e)},n8=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!G(e)||e&&"object"==typeof e&&(0,E.contains)(e,".sv")},n9=function(e,t,n,r){r&&void 0===t||n7((0,E.errorPrefix)(e,"value"),t,n)},n7=function(e,t,n){var r=n instanceof eA?new eW(n,e):n;if(void 0===t)throw Error(e+"contains undefined "+eG(r));if("function"==typeof t)throw Error(e+"contains a function "+eG(r)+" with contents = "+t.toString());if(G(t))throw Error(e+"contains "+t.toString()+" "+eG(r));if("string"==typeof t&&t.length>3495253.3333333335&&(0,E.stringLength)(t)>10485760)throw Error(e+"contains a string greater than 10485760 utf8 bytes "+eG(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var i=!1,o=!1;if(ee(t,function(t,n){var a;if(".value"===t)i=!0;else if(".priority"!==t&&".sv"!==t&&(o=!0,!n5(t)))throw Error(e+" contains an invalid key ("+t+") "+eG(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.parts_.length>0&&(r.byteLength_+=1),r.parts_.push(t),r.byteLength_+=(0,E.stringLength)(t),eK(r),n7(e,n,r),a=r.parts_.pop(),r.byteLength_-=(0,E.stringLength)(a),r.parts_.length>0&&(r.byteLength_-=1)}),i&&o)throw Error(e+' contains ".value" child '+eG(r)+" in addition to actual children.")}},re=function(e,t){for(n=0;n<t.length;n++)for(var n,r,i=eM(r=t[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!n5(i[o]))throw Error(e+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(eq);var a=null;for(n=0;n<t.length;n++){if(r=t[n],null!==a&&eV(a,r))throw Error(e+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}},rt=function(e,t,n,r){if(!r||void 0!==t){var i=(0,E.errorPrefix)(e,"values");if(!(t&&"object"==typeof t)||Array.isArray(t))throw Error(i+" must be an object containing the children to replace.");var o=[];ee(t,function(e,t){var r=new eA(e);if(n7(i,t,eF(n,r)),".priority"===eR(r)&&!n8(t))throw Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(r)}),re(i,o)}},rn=function(e,t,n){if(!n||void 0!==t){if(G(t))throw Error((0,E.errorPrefix)(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!n8(t))throw Error((0,E.errorPrefix)(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},rr=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw Error((0,E.errorPrefix)(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},ri=function(e,t,n,r){if((!r||void 0!==n)&&!n5(n))throw Error((0,E.errorPrefix)(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ro=function(e,t,n,r){if((!r||void 0!==n)&&!n4(n))throw Error((0,E.errorPrefix)(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ra=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ro(e,t,n,r)},rs=function(e,t){if(".info"===eN(t))throw Error(e+" failed = Can't modify data under /.info/")},ru=function(e,t){var n,r=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!n5(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==r.length&&((n=r)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),!n4(n)))throw Error((0,E.errorPrefix)(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},rc=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw Error((0,E.errorPrefix)(e,t)+"must be a boolean.")},rl=function(){this.eventLists_=[],this.recursionDepth_=0};function rh(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],o=i.getPath();null===n||eB(o,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function rf(e,t,n){rh(e,n),rp(e,function(e){return eB(e,t)})}function rd(e,t,n){rh(e,n),rp(e,function(e){return eV(e,t)||eV(t,e)})}function rp(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];i&&(t(i.path)?(function(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();L&&U("event: "+n.toString()),ei(r)}}}(e.eventLists_[r]),e.eventLists_[r]=null):n=!1)}n&&(e.eventLists_=[]),e.recursionDepth_--}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rg="repo_interrupt",rv=function(){function e(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new rl,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=tk(),this.transactionQueueTree_=new nY,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e}();function ry(e){var t=e.infoData_.getNode(new eA(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function rm(e){var t;return(t=t={timestamp:ry(e)}).timestamp=t.timestamp||new Date().getTime(),t}function rb(e,t,n,r,i){e.dataUpdateCount++;var o=new eA(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var a=[];if(i){if(r){var s=(0,E.map)(n,function(e){return to(e)});a=function(e,t,n,r){var i=nj(e,r);if(!i)return[];var o=nU(i),a=o.path,s=o.queryId,u=eU(a,t),c=tH.fromObject(n);return nq(e,a,new tj(tR(s),u,c))}(e.serverSyncTree_,o,s,i)}else{var u=to(n);a=function(e,t,n,r){var i=nj(e,r);if(null==i)return[];var o=nU(i),a=o.path,s=o.queryId,u=eU(a,t);return nq(e,a,new tF(tR(s),u,n))}(e.serverSyncTree_,o,u,i)}}else if(r){var c,l,h=(0,E.map)(n,function(e){return to(e)});c=e.serverSyncTree_,l=tH.fromObject(h),a=nR(c,new tj(tO(),o,l))}else{var f=to(n);a=nP(e.serverSyncTree_,o,f)}var d=o;a.length>0&&(d=rN(e,o)),rd(e.eventQueue_,d,a)}function r_(e,t){var n,r,i;rw(e,"connected",t),!1===t&&(rk(e,"onDisconnectEvents"),n=rm(e),r=tk(),tA(e.onDisconnect_,eP(),function(t,i){var o=nH(t,i,e.serverSyncTree_,n);tD(r,t,o)}),i=[],tA(r,eP(),function(t,n){i=i.concat(nP(e.serverSyncTree_,t,n));var r=rM(e,t);rN(e,r)}),e.onDisconnect_=tk(),rd(e.eventQueue_,eP(),i))}function rw(e,t,n){var r=new eA("/.info/"+t),i=to(n);e.infoData_.updateSnapshot(r,i);var o=nP(e.infoSyncTree_,r,i);rd(e.eventQueue_,r,o)}function rE(e){return e.nextWriteId_++}function rI(e,t,n,r,i){rk(e,"set",{path:t.toString(),value:n,priority:r});var o=rm(e),a=to(n,r),s=n$(a,nO(e.serverSyncTree_,t),o),u=rE(e),c=nD(e.serverSyncTree_,t,s,u,!0);rh(e.eventQueue_,c),e.server_.put(t.toString(),a.val(!0),function(n,r){var o="ok"===n;o||W("set at "+t+" failed: "+n);var a=nA(e.serverSyncTree_,u,!o);rd(e.eventQueue_,t,a),rD(e,i,n,r)});var l=rM(e,t);rN(e,l),rd(e.eventQueue_,l,[])}function rC(e,t,n,r){var i=to(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),function(n,o){"ok"===n&&tD(e.onDisconnect_,t,i),rD(e,r,n,o)})}function rT(e,t,n){var r;r=".info"===eN(t._path)?nN(e.infoSyncTree_,t,n):nN(e.serverSyncTree_,t,n),rf(e.eventQueue_,t._path,r)}function rS(e){e.persistentConnection_&&e.persistentConnection_.interrupt(rg)}function rk(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r="";e.persistentConnection_&&(r=e.persistentConnection_.id+":"),U.apply(void 0,(0,I.__spreadArray)([r],(0,I.__read)(t)))}function rD(e,t,n,r){t&&ei(function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var o=Error(i);o.code=e,t(o)}})}function rA(e,t,n){return nO(e.serverSyncTree_,t,n)||tr.EMPTY_NODE}function rP(e,t){if(void 0===t&&(t=e.transactionQueueTree_),t||rR(e,t),nJ(t)){var n=rO(e,t);(0,E.assert)(n.length>0,"Sending zero length transaction queue"),n.every(function(e){return 0===e.status})&&function(e,t,n){for(var r=rA(e,t,n.map(function(e){return e.currentWriteId})),i=r,o=r.hash(),a=0;a<n.length;a++){var s=n[a];(0,E.assert)(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var u=eU(t,s.path);i=i.updateChild(u,s.currentOutputSnapshotRaw)}var c=i.val(!0);e.server_.put(t.toString(),c,function(r){rk(e,"transaction put response",{path:t.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=function(t){n[t].status=2,i=i.concat(nA(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&o.push(function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)}),n[t].unwatcher()},s=0;s<n.length;s++)a(s);rR(e,nX(e.transactionQueueTree_,t)),rP(e,e.transactionQueueTree_),rd(e.eventQueue_,t,i);for(var s=0;s<o.length;s++)ei(o[s])}else{if("datastale"===r)for(var s=0;s<n.length;s++)3===n[s].status?n[s].status=4:n[s].status=0;else{W("transaction at "+t.toString()+" failed: "+r);for(var s=0;s<n.length;s++)n[s].status=4,n[s].abortReason=r}rN(e,t)}},o)}(e,n2(t),n)}else n0(t)&&n1(t,function(t){rP(e,t)})}function rN(e,t){var n=rx(e,t),r=n2(n),i=rO(e,n);return function(e,t,n){if(0!==t.length){for(var r=[],i=[],o=t.filter(function(e){return 0===e.status}).map(function(e){return e.currentWriteId}),a=function(a){var s,u=t[a],c=eU(n,u.path),l=!1;if((0,E.assert)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)l=!0,s=u.abortReason,i=i.concat(nA(e.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status){if(u.retryCount>=25)l=!0,s="maxretry",i=i.concat(nA(e.serverSyncTree_,u.currentWriteId,!0));else{var h=rA(e,u.path,o);u.currentInputSnapshot=h;var f=t[a].update(h.val());if(void 0!==f){n7("transaction failed: Data returned ",f,u.path);var d=to(f);"object"==typeof f&&null!=f&&(0,E.contains)(f,".priority")||(d=d.updatePriority(h.getPriority()));var p=u.currentWriteId,g=n$(d,h,rm(e));u.currentOutputSnapshotRaw=d,u.currentOutputSnapshotResolved=g,u.currentWriteId=rE(e),o.splice(o.indexOf(p),1),i=(i=i.concat(nD(e.serverSyncTree_,u.path,g,u.currentWriteId,u.applyLocally))).concat(nA(e.serverSyncTree_,p,!0))}else l=!0,s="nodata",i=i.concat(nA(e.serverSyncTree_,u.currentWriteId,!0))}}rd(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,setTimeout(t[a].unwatcher,Math.floor(0)),t[a].onComplete&&("nodata"===s?r.push(function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)}):r.push(function(){return t[a].onComplete(Error(s),!1,null)})))},s=0;s<t.length;s++)a(s);rR(e,e.transactionQueueTree_);for(var s=0;s<r.length;s++)ei(r[s]);rP(e,e.transactionQueueTree_)}}(e,i,r),r}function rx(e,t){var n,r=e.transactionQueueTree_;for(n=eN(t);null!==n&&void 0===nJ(r);)r=nX(r,n),n=eN(t=eO(t));return r}function rO(e,t){var n=[];return function e(t,n,r){var i=nJ(n);if(i)for(var o=0;o<i.length;o++)r.push(i[o]);n1(n,function(n){e(t,n,r)})}(e,t,n),n.sort(function(e,t){return e.order-t.order}),n}function rR(e,t){var n=nJ(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,nZ(t,n.length>0?n:void 0)}n1(t,function(t){rR(e,t)})}function rM(e,t){var n=n2(rx(e,t)),r=nX(e.transactionQueueTree_,t);return!function(e,t,n){for(var r=e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,function(t){rL(e,t)}),rL(e,r),!function e(t,n,r,i){r&&!i&&n(t),n1(t,function(t){e(t,n,!0,i)}),r&&i&&n(t)}(r,function(t){rL(e,t)}),n}function rL(e,t){var n=nJ(t);if(n){for(var r=[],i=[],o=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?((0,E.assert)(o===a-1,"All SENT items should be at beginning of queue."),o=a,n[a].status=3,n[a].abortReason="set"):((0,E.assert)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(nA(e.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,Error("set"),!1,null))));-1===o?nZ(t,void 0):n.length=o+1,rd(e.eventQueue_,n2(t),i);for(var a=0;a<r.length;a++)ei(r[a])}}var rF=function(e,t){var n=rj(e),r=n.namespace;"firebase.com"===n.domain&&V(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||V("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||K();var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new ef(n.host,n.secure,r,t,i,"",r!==n.subdomain),path:new eA(n.pathString)}},rj=function(e){var t="",n="",r="",i="",o="",a=!0,s="https",u=443;if("string"==typeof e){var c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(e){}t+="/"+i}return t}(e.substring(l,h)));var f=function(e){var t,n,r={};"?"===e.charAt(0)&&(e=e.substring(1));try{for(var i=(0,I.__values)(e.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var s=a.split("=");2===s.length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):W("Invalid query segment '"+a+"' in query '"+e+"'")}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(a="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),o=r}"ns"in f&&(o=f.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:a,scheme:s,pathString:i,namespace:o}},rU=function(){function e(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}return e.prototype.getPath=function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,E.stringify)(this.snapshot.exportVal())},e}(),rq=function(){function e(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}(),rB=function(){function e(e,t){this.snapshotCallback=e,this.cancelCallback=t}return e.prototype.onValue=function(e,t){this.snapshotCallback.call(null,e,t)},e.prototype.onCancel=function(e){return(0,E.assert)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)},Object.defineProperty(e.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),e.prototype.matches=function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context},e}(),rV=function(){function e(e,t){this._repo=e,this._path=t}return e.prototype.cancel=function(){var e=new E.Deferred;return function(e,t,n){e.server_.onDisconnectCancel(t.toString(),function(r,i){"ok"===r&&function e(t,n){if(ej(n))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var r=t.value;return t.value=null,r.forEachChild(e8,function(e,n){tD(t,new eA(e),n)}),e(t,n)}if(!(t.children.size>0))return!0;var i=eN(n);return n=eO(n),t.children.has(i)&&e(t.children.get(i),n)&&t.children.delete(i),0===t.children.size}(e.onDisconnect_,t),rD(e,n,r,i)})}(this._repo,this._path,e.wrapCallback(function(){})),e.promise},e.prototype.remove=function(){rs("OnDisconnect.remove",this._path);var e=new E.Deferred;return rC(this._repo,this._path,null,e.wrapCallback(function(){})),e.promise},e.prototype.set=function(e){rs("OnDisconnect.set",this._path),n9("OnDisconnect.set",e,this._path,!1);var t=new E.Deferred;return rC(this._repo,this._path,e,t.wrapCallback(function(){})),t.promise},e.prototype.setWithPriority=function(e,t){rs("OnDisconnect.setWithPriority",this._path),n9("OnDisconnect.setWithPriority",e,this._path,!1),rn("OnDisconnect.setWithPriority",t,!1);var n=new E.Deferred;return function(e,t,n,r,i){var o=to(n,r);e.server_.onDisconnectPut(t.toString(),o.val(!0),function(n,r){"ok"===n&&tD(e.onDisconnect_,t,o),rD(e,i,n,r)})}(this._repo,this._path,e,t,n.wrapCallback(function(){})),n.promise},e.prototype.update=function(e){rs("OnDisconnect.update",this._path),rt("OnDisconnect.update",e,this._path,!1);var t=new E.Deferred;return function(e,t,n,r){if((0,E.isEmpty)(n)){U("onDisconnect().update() called with empty data.  Don't do anything."),rD(e,r,"ok",void 0);return}e.server_.onDisconnectMerge(t.toString(),n,function(i,o){"ok"===i&&ee(n,function(n,r){var i=to(r);tD(e.onDisconnect_,eF(t,n),i)}),rD(e,r,i,o)})}(this._repo,this._path,e,t.wrapCallback(function(){})),t.promise},e}(),rW=function(){function e(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(e.prototype,"key",{get:function(){return ej(this._path)?null:eR(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new rH(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_queryIdentifier",{get:function(){var e=J(tC(this._queryParams));return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_queryObject",{get:function(){return tC(this._queryParams)},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){if(!((t=(0,E.getModularInstance)(t))instanceof e))return!1;var n=this._repo===t._repo,r=eB(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i},e.prototype.toJSON=function(){return this.toString()},e.prototype.toString=function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)},e}();function rK(e,t){if(!0===e._orderByCalled)throw Error(t+": You can't combine multiple orderBy calls.")}function rG(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===eX){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==H)throw Error(r);if("string"!=typeof t)throw Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==$)throw Error(r);if("string"!=typeof n)throw Error(i)}}else if(e.getIndex()===e8){if(null!=t&&!n8(t)||null!=n&&!n8(n))throw Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,E.assert)(e.getIndex() instanceof ta||e.getIndex()===ts,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function rz(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var rH=function(e){function t(t,n){return e.call(this,t,n,new tb,!1)||this}return(0,I.__extends)(t,e),Object.defineProperty(t.prototype,"parent",{get:function(){var e=eL(this._path);return null===e?null:new t(this._repo,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e},enumerable:!1,configurable:!0}),t}(rW),r$=function(){function e(e,t,n){this._node=e,this.ref=t,this._index=n}return Object.defineProperty(e.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),e.prototype.child=function(t){var n=new eA(t),r=rX(this.ref,t);return new e(this._node.getChild(n),r,e8)},e.prototype.exists=function(){return!this._node.isEmpty()},e.prototype.exportVal=function(){return this._node.val(!0)},e.prototype.forEach=function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(r,i){return t(new e(i,rX(n.ref,r),e8))})},e.prototype.hasChild=function(e){var t=new eA(e);return!this._node.getChild(t).isEmpty()},e.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},e.prototype.toJSON=function(){return this.exportVal()},e.prototype.val=function(){return this._node.val()},e}();function rQ(e,t){return(e=(0,E.getModularInstance)(e))._checkNotDeleted("ref"),void 0!==t?rX(e._root,t):e._root}function rY(e,t){(e=(0,E.getModularInstance)(e))._checkNotDeleted("refFromURL");var n=rF(t,e._repo.repoInfo_.nodeAdmin);ru("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||V("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),rQ(e,n.path.toString())}function rX(e,t){return null===eN((e=(0,E.getModularInstance)(e))._path)?ra("child","path",t,!1):ro("child","path",t,!1),new rH(e._repo,eF(e._path,t))}function rJ(e,t){rs("set",(e=(0,E.getModularInstance)(e))._path),n9("set",t,e._path,!1);var n=new E.Deferred;return rI(e._repo,e._path,t,null,n.wrapCallback(function(){})),n.promise}var rZ=function(){function e(e){this.callbackContext=e}return e.prototype.respondsTo=function(e){return"value"===e},e.prototype.createEvent=function(e,t){var n=t._queryParams.getIndex();return new rU("value",this,new r$(e.snapshotNode,new rH(t._repo,t._path),n))},e.prototype.getEventRunner=function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}},e.prototype.createCancelEvent=function(e,t){return this.callbackContext.hasCancelCallback?new rq(this,e,t):null},e.prototype.matches=function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))},e.prototype.hasAnyCallback=function(){return null!==this.callbackContext},e}(),r0=function(){function e(e,t){this.eventType=e,this.callbackContext=t}return e.prototype.respondsTo=function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t},e.prototype.createCancelEvent=function(e,t){return this.callbackContext.hasCancelCallback?new rq(this,e,t):null},e.prototype.createEvent=function(e,t){(0,E.assert)(null!=e.childName,"Child events should have a childName.");var n=rX(new rH(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new rU(e.type,this,new r$(e.snapshotNode,n,r),e.prevName)},e.prototype.getEventRunner=function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}},e.prototype.matches=function(t){return t instanceof e&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))},e.prototype.hasAnyCallback=function(){return!!this.callbackContext},e}();function r1(e,t,n,r,i){if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){var o,a,s,u=n,c=function(t,n){rT(e._repo,e,h),u(t,n)};c.userCallback=n.userCallback,c.context=n.context,n=c}var l=new rB(n,s||void 0),h="value"===t?new rZ(l):new r0(t,l);return o=e._repo,a=".info"===eN(e._path)?nx(o.infoSyncTree_,e,h):nx(o.serverSyncTree_,e,h),rf(o.eventQueue_,e._path,a),function(){return rT(e._repo,e,h)}}function r2(e,t,n,r){return r1(e,"value",t,n,r)}function r3(e,t,n,r){return r1(e,"child_added",t,n,r)}function r6(e,t,n,r){return r1(e,"child_changed",t,n,r)}function r5(e,t,n,r){return r1(e,"child_moved",t,n,r)}function r4(e,t,n,r){return r1(e,"child_removed",t,n,r)}function r8(e,t,n){var r=null,i=n?new rB(n):null;"value"===t?r=new rZ(i):t&&(r=new r0(t,i)),rT(e._repo,e,r)}var r9=function(){},r7=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return(0,I.__extends)(t,e),t.prototype._apply=function(e){n9("endAt",this._value,e._path,!0);var t=tw(e._queryParams,this._value,this._key);if(rz(t),rG(t),e._queryParams.hasEnd())throw Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new rW(e._repo,e._path,t,e._orderByCalled)},t}(r9),ie=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return(0,I.__extends)(t,e),t.prototype._apply=function(e){n9("endBefore",this._value,e._path,!1);var t,n,r,i,o=(t=e._queryParams,n=this._value,r=this._key,t.index_===eX?("string"==typeof n&&(n=th(n)),i=tw(t,n,r)):i=tw(t,n,null==r?H:th(r)),i.endBeforeSet_=!0,i);if(rz(o),rG(o),e._queryParams.hasEnd())throw Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new rW(e._repo,e._path,o,e._orderByCalled)},t}(r9),it=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return(0,I.__extends)(t,e),t.prototype._apply=function(e){n9("startAt",this._value,e._path,!0);var t=t_(e._queryParams,this._value,this._key);if(rz(t),rG(t),e._queryParams.hasStart())throw Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new rW(e._repo,e._path,t,e._orderByCalled)},t}(r9),ir=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return(0,I.__extends)(t,e),t.prototype._apply=function(e){n9("startAfter",this._value,e._path,!1);var t,n,r,i,o=(t=e._queryParams,n=this._value,r=this._key,t.index_===eX?("string"==typeof n&&(n=tl(n)),i=t_(t,n,r)):i=t_(t,n,null==r?$:tl(r)),i.startAfterSet_=!0,i);if(rz(o),rG(o),e._queryParams.hasStart())throw Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new rW(e._repo,e._path,o,e._orderByCalled)},t}(r9),ii=function(e){function t(t){var n=e.call(this)||this;return n._limit=t,n}return(0,I.__extends)(t,e),t.prototype._apply=function(e){var t,n,r;if(e._queryParams.hasLimit())throw Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new rW(e._repo,e._path,(t=e._queryParams,n=this._limit,(r=t.copy()).limitSet_=!0,r.limit_=n,r.viewFrom_="l",r),e._orderByCalled)},t}(r9),io=function(e){function t(t){var n=e.call(this)||this;return n._limit=t,n}return(0,I.__extends)(t,e),t.prototype._apply=function(e){var t,n,r;if(e._queryParams.hasLimit())throw Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new rW(e._repo,e._path,(t=e._queryParams,n=this._limit,(r=t.copy()).limitSet_=!0,r.limit_=n,r.viewFrom_="r",r),e._orderByCalled)},t}(r9),ia=function(e){function t(t){var n=e.call(this)||this;return n._path=t,n}return(0,I.__extends)(t,e),t.prototype._apply=function(e){rK(e,"orderByChild");var t=new eA(this._path);if(ej(t))throw Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new ta(t),r=tE(e._queryParams,n);return rG(r),new rW(e._repo,e._path,r,!0)},t}(r9),is=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,I.__extends)(t,e),t.prototype._apply=function(e){rK(e,"orderByKey");var t=tE(e._queryParams,eX);return rG(t),new rW(e._repo,e._path,t,!0)},t}(r9),iu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,I.__extends)(t,e),t.prototype._apply=function(e){rK(e,"orderByPriority");var t=tE(e._queryParams,e8);return rG(t),new rW(e._repo,e._path,t,!0)},t}(r9),ic=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,I.__extends)(t,e),t.prototype._apply=function(e){rK(e,"orderByValue");var t=tE(e._queryParams,ts);return rG(t),new rW(e._repo,e._path,t,!0)},t}(r9),il=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return(0,I.__extends)(t,e),t.prototype._apply=function(e){if(n9("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new r7(this._value,this._key)._apply(new it(this._value,this._key)._apply(e))},t}(r9);function ih(e){for(var t,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=(0,E.getModularInstance)(e);try{for(var a=(0,I.__values)(r),s=a.next();!s.done;s=a.next())o=s.value._apply(o)}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o}(0,E.assert)(!m,"__referenceConstructor has already been defined"),m=rH,(0,E.assert)(!b,"__referenceConstructor has already been defined"),b=rH;var id={},ip=!1;function ig(e,t,n,r,i){var o,a,s,u,c,l=r||e.options.databaseURL;void 0===l&&(e.options.projectId||V("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),U("Using default host for project ",e.options.projectId),l=e.options.projectId+"-default-rtdb.firebaseio.com");var h=rF(l,i),f=h.repoInfo,d=void 0;void 0!==T&&(d=T.env.FIREBASE_DATABASE_EMULATOR_HOST),d?(c=!0,f=(h=rF(l="http://"+d+"?ns="+f.namespace,i)).repoInfo):c=!h.repoInfo.secure;var p=i&&c?new eu(eu.OWNER):new es(e.name,e.options,t);return ru("Invalid Firebase Database URL",h),ej(h.path)||V("Database URL must point to the root of a Firebase Database (not including a child path)."),new iv((o=f,a=new ea(e.name,n),(s=id[e.name])||(s={},id[e.name]=s),(u=s[o.toURLString()])&&V("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new rv(o,ip,p,a),s[o.toURLString()]=u,u),e)}var iv=function(){function e(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}return Object.defineProperty(e.prototype,"_repo",{get:function(){return this._instanceStarted||(function(e,t,n){var r;if(e.stats_=ey(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new tT(e.repoInfo_,function(t,n,r,i){rb(e,t,n,r,i)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(function(){return r_(e,!0)},0);else{if(null!=n){if("object"!=typeof n)throw Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,E.stringify)(n)}catch(e){throw Error("Invalid authOverride provided: "+e)}}e.persistentConnection_=new eH(e.repoInfo_,t,function(t,n,r,i){rb(e,t,n,r,i)},function(t){r_(e,t)},function(t){ee(t,function(t,n){rw(e,t,n)})},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(function(t){e.server_.refreshAuthToken(t)}),e.appCheckProvider_.addTokenChangeListener(function(t){e.server_.refreshAppCheckToken(t.token)}),e.statsReporter_=(ev[r=e.repoInfo_.toString()]||(ev[r]=new tN(e.stats_,e.server_)),ev[r]),e.infoData_=new tS,e.infoSyncTree_=new nk({startListening:function(t,n,r,i){var o=[],a=e.infoData_.getNode(t._path);return a.isEmpty()||(o=nP(e.infoSyncTree_,t._path,a),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),rw(e,"connected",!1),e.serverSyncTree_=new nk({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,function(n,r){var o=i(n,r);rd(e.eventQueue_,t._path,o)}),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new rH(this._repo,eP())),this._rootInternal},enumerable:!1,configurable:!0}),e.prototype._delete=function(){if(null!==this._rootInternal){var e,t,n;e=this._repo,(n=id[t=this.app.name])&&n[e.key]===e||V("Database "+t+"("+e.repoInfo_+") has already been deleted."),rS(e),delete n[e.key],this._repoInternal=null,this._rootInternal=null}return Promise.resolve()},e.prototype._checkNotDeleted=function(e){null===this._rootInternal&&V("Cannot call "+e+" on a deleted database.")},e}(),iy={".sv":"timestamp"},im=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}(),ib=function(){function e(e){this._delegate=e}return e.prototype.cancel=function(e){(0,E.validateArgCount)("OnDisconnect.cancel",0,1,arguments.length),(0,E.validateCallback)("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then(function(){return e(null)},function(t){return e(t)}),t},e.prototype.remove=function(e){(0,E.validateArgCount)("OnDisconnect.remove",0,1,arguments.length),(0,E.validateCallback)("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then(function(){return e(null)},function(t){return e(t)}),t},e.prototype.set=function(e,t){(0,E.validateArgCount)("OnDisconnect.set",1,2,arguments.length),(0,E.validateCallback)("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then(function(){return t(null)},function(e){return t(e)}),n},e.prototype.setWithPriority=function(e,t,n){(0,E.validateArgCount)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,E.validateCallback)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then(function(){return n(null)},function(e){return n(e)}),r},e.prototype.update=function(e,t){if((0,E.validateArgCount)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,W("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,E.validateCallback)("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then(function(){return t(null)},function(e){return t(e)}),i},e}(),i_=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return(0,E.validateArgCount)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}(),iw=function(){function e(e,t){this._database=e,this._delegate=t}return e.prototype.val=function(){return(0,E.validateArgCount)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},e.prototype.exportVal=function(){return(0,E.validateArgCount)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},e.prototype.toJSON=function(){return(0,E.validateArgCount)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},e.prototype.exists=function(){return(0,E.validateArgCount)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},e.prototype.child=function(t){return(0,E.validateArgCount)("DataSnapshot.child",0,1,arguments.length),ro("DataSnapshot.child","path",t=String(t),!1),new e(this._database,this._delegate.child(t))},e.prototype.hasChild=function(e){return(0,E.validateArgCount)("DataSnapshot.hasChild",1,1,arguments.length),ro("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)},e.prototype.getPriority=function(){return(0,E.validateArgCount)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},e.prototype.forEach=function(t){var n=this;return(0,E.validateArgCount)("DataSnapshot.forEach",1,1,arguments.length),(0,E.validateCallback)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(function(r){return t(new e(n._database,r))})},e.prototype.hasChildren=function(){return(0,E.validateArgCount)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(e.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),e.prototype.numChildren=function(){return(0,E.validateArgCount)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},e.prototype.getRef=function(){return(0,E.validateArgCount)("DataSnapshot.ref",0,0,arguments.length),new iI(this._database,this._delegate.ref)},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),e}(),iE=function(){function e(e,t){this.database=e,this._delegate=t}return e.prototype.on=function(t,n,r,i){var o,a=this;(0,E.validateArgCount)("Query.on",2,4,arguments.length),(0,E.validateCallback)("Query.on","callback",n,!1);var s=e.getCancelAndContextArgs_("Query.on",r,i),u=function(e,t){n.call(s.context,new iw(a.database,e),t)};u.userCallback=n,u.context=s.context;var c=null===(o=s.cancel)||void 0===o?void 0:o.bind(s.context);switch(t){case"value":return r2(this._delegate,u,c),n;case"child_added":return r3(this._delegate,u,c),n;case"child_removed":return r4(this._delegate,u,c),n;case"child_changed":return r6(this._delegate,u,c),n;case"child_moved":return r5(this._delegate,u,c),n;default:throw Error((0,E.errorPrefix)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},e.prototype.off=function(e,t,n){if((0,E.validateArgCount)("Query.off",0,3,arguments.length),rr("Query.off",e,!0),(0,E.validateCallback)("Query.off","callback",t,!0),(0,E.validateContextObject)("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,r8(this._delegate,e,r)}else r8(this._delegate,e)},e.prototype.get=function(){var e,t,n,r,i=this;return(e=this._delegate,(t=(e=(0,E.getModularInstance)(e))._repo,n=e,null!=(r=function(e,t){var n,r=t._path,i=null;e.syncPointTree_.foreachOnPath(r,function(e,t){var n=eU(e,r);i=i||nE(t,n)});var o=e.syncPointTree_.get(r);o?i=i||nE(o,eP()):(o=new nm,e.syncPointTree_=e.syncPointTree_.set(r,o));var a=null!=i,s=a?new tU(i,!0,!1):null,u=(n=e.pendingWriteTree_,nr(t._path,n));return tG(n_(o,t,u,a?s.getNode():tr.EMPTY_NODE,a).viewCache_)}(t.serverSyncTree_,n))?Promise.resolve(r):t.server_.get(n).then(function(e){var r=to(e).withIndex(n._queryParams.getIndex()),i=nP(t.serverSyncTree_,n._path,r);return rf(t.eventQueue_,n._path,i),Promise.resolve(r)},function(e){return rk(t,"get for query "+(0,E.stringify)(n)+" failed: "+e),Promise.reject(Error(e))})).then(function(t){return new r$(t,new rH(e._repo,e._path),e._queryParams.getIndex())})).then(function(e){return new iw(i.database,e)})},e.prototype.once=function(t,n,r,i){var o=this;(0,E.validateArgCount)("Query.once",1,4,arguments.length),(0,E.validateCallback)("Query.once","callback",n,!0);var a=e.getCancelAndContextArgs_("Query.once",r,i),s=new E.Deferred,u=function(e,t){var r=new iw(o.database,e);n&&n.call(a.context,r,t),s.resolve(r)};u.userCallback=n,u.context=a.context;var c=function(e){a.cancel&&a.cancel.call(a.context,e),s.reject(e)};switch(t){case"value":r2(this._delegate,u,c,{onlyOnce:!0});break;case"child_added":r3(this._delegate,u,c,{onlyOnce:!0});break;case"child_removed":r4(this._delegate,u,c,{onlyOnce:!0});break;case"child_changed":r6(this._delegate,u,c,{onlyOnce:!0});break;case"child_moved":r5(this._delegate,u,c,{onlyOnce:!0});break;default:throw Error((0,E.errorPrefix)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise},e.prototype.limitToFirst=function(t){return(0,E.validateArgCount)("Query.limitToFirst",1,1,arguments.length),new e(this.database,ih(this._delegate,function(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw Error("limitToFirst: First argument must be a positive integer.");return new ii(e)}(t)))},e.prototype.limitToLast=function(t){return(0,E.validateArgCount)("Query.limitToLast",1,1,arguments.length),new e(this.database,ih(this._delegate,function(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw Error("limitToLast: First argument must be a positive integer.");return new io(e)}(t)))},e.prototype.orderByChild=function(t){return(0,E.validateArgCount)("Query.orderByChild",1,1,arguments.length),new e(this.database,ih(this._delegate,function(e){if("$key"===e)throw Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ro("orderByChild","path",e,!1),new ia(e)}(t)))},e.prototype.orderByKey=function(){return(0,E.validateArgCount)("Query.orderByKey",0,0,arguments.length),new e(this.database,ih(this._delegate,new is))},e.prototype.orderByPriority=function(){return(0,E.validateArgCount)("Query.orderByPriority",0,0,arguments.length),new e(this.database,ih(this._delegate,new iu))},e.prototype.orderByValue=function(){return(0,E.validateArgCount)("Query.orderByValue",0,0,arguments.length),new e(this.database,ih(this._delegate,new ic))},e.prototype.startAt=function(t,n){var r;return void 0===t&&(t=null),(0,E.validateArgCount)("Query.startAt",0,2,arguments.length),new e(this.database,ih(this._delegate,(void 0===(r=t)&&(r=null),ri("startAt","key",n,!0),new it(r,n))))},e.prototype.startAfter=function(t,n){var r;return void 0===t&&(t=null),(0,E.validateArgCount)("Query.startAfter",0,2,arguments.length),new e(this.database,ih(this._delegate,(r=t,ri("startAfter","key",n,!0),new ir(r,n))))},e.prototype.endAt=function(t,n){var r;return void 0===t&&(t=null),(0,E.validateArgCount)("Query.endAt",0,2,arguments.length),new e(this.database,ih(this._delegate,(r=t,ri("endAt","key",n,!0),new r7(r,n))))},e.prototype.endBefore=function(t,n){var r;return void 0===t&&(t=null),(0,E.validateArgCount)("Query.endBefore",0,2,arguments.length),new e(this.database,ih(this._delegate,(r=t,ri("endBefore","key",n,!0),new ie(r,n))))},e.prototype.equalTo=function(t,n){return(0,E.validateArgCount)("Query.equalTo",1,2,arguments.length),new e(this.database,ih(this._delegate,(ri("equalTo","key",n,!0),new il(t,n))))},e.prototype.toString=function(){return(0,E.validateArgCount)("Query.toString",0,0,arguments.length),this._delegate.toString()},e.prototype.toJSON=function(){return(0,E.validateArgCount)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},e.prototype.isEqual=function(t){if((0,E.validateArgCount)("Query.isEqual",1,1,arguments.length),!(t instanceof e))throw Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)},e.getCancelAndContextArgs_=function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,(0,E.validateCallback)(e,"cancel",r.cancel,!0),r.context=n,(0,E.validateContextObject)(e,"context",r.context,!0);else if(t){if("object"==typeof t&&null!==t)r.context=t;else if("function"==typeof t)r.cancel=t;else throw Error((0,E.errorPrefix)(e,"cancelOrContext")+" must either be a cancel callback or a context object.")}return r},Object.defineProperty(e.prototype,"ref",{get:function(){return new iI(this.database,new rH(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),e}(),iI=function(e){function t(t,n){var r=e.call(this,t,new rW(n._repo,n._path,new tb,!1))||this;return r.database=t,r._delegate=n,r}return(0,I.__extends)(t,e),t.prototype.getKey=function(){return(0,E.validateArgCount)("Reference.key",0,0,arguments.length),this._delegate.key},t.prototype.child=function(e){return(0,E.validateArgCount)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new t(this.database,rX(this._delegate,e))},t.prototype.getParent=function(){(0,E.validateArgCount)("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new t(this.database,e):null},t.prototype.getRoot=function(){return(0,E.validateArgCount)("Reference.root",0,0,arguments.length),new t(this.database,this._delegate.root)},t.prototype.set=function(e,t){(0,E.validateArgCount)("Reference.set",1,2,arguments.length),(0,E.validateCallback)("Reference.set","onComplete",t,!0);var n=rJ(this._delegate,e);return t&&n.then(function(){return t(null)},function(e){return t(e)}),n},t.prototype.update=function(e,t){if((0,E.validateArgCount)("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n,r,i,o={},a=0;a<e.length;++a)o[""+a]=e[a];e=o,W("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}rs("Reference.update",this._delegate._path),(0,E.validateCallback)("Reference.update","onComplete",t,!0);var s=(n=this._delegate,rt("update",r=e,n._path,!1),i=new E.Deferred,function(e,t,n,r){rk(e,"update",{path:t.toString(),value:n});var i=!0,o=rm(e),a={};if(ee(n,function(n,r){i=!1,a[n]=nH(eF(t,n),to(r),e.serverSyncTree_,o)}),i)U("update() called with empty data.  Don't do anything."),rD(e,r,"ok",void 0);else{var s,u,c,l=rE(e),h=(u=(s=e.serverSyncTree_).pendingWriteTree_,(0,E.assert)(l>u.lastWriteId,"Stacking an older merge on top of newer ones"),u.allWrites.push({path:t,children:a,writeId:l,visible:!0}),u.visibleWrites=tY(u.visibleWrites,t,a),u.lastWriteId=l,c=tH.fromObject(a),nR(s,new tj(tx(),t,c)));rh(e.eventQueue_,h),e.server_.merge(t.toString(),n,function(n,i){var o="ok"===n;o||W("update at "+t+" failed: "+n);var a=nA(e.serverSyncTree_,l,!o),s=a.length>0?rN(e,t):t;rd(e.eventQueue_,s,a),rD(e,r,n,i)}),ee(n,function(n){var r=rM(e,eF(t,n));rN(e,r)}),rd(e.eventQueue_,t,[])}}(n._repo,n._path,r,i.wrapCallback(function(){})),i.promise);return t&&s.then(function(){return t(null)},function(e){return t(e)}),s},t.prototype.setWithPriority=function(e,t,n){(0,E.validateArgCount)("Reference.setWithPriority",2,3,arguments.length),(0,E.validateCallback)("Reference.setWithPriority","onComplete",n,!0);var r=function(e,t,n){if(rs("setWithPriority",e._path),n9("setWithPriority",t,e._path,!1),rn("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new E.Deferred;return rI(e._repo,e._path,t,n,r.wrapCallback(function(){})),r.promise}(this._delegate,e,t);return n&&r.then(function(){return n(null)},function(e){return n(e)}),r},t.prototype.remove=function(e){(0,E.validateArgCount)("Reference.remove",0,1,arguments.length),(0,E.validateCallback)("Reference.remove","onComplete",e,!0);var t,n=(rs("remove",(t=this._delegate)._path),rJ(t,null));return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},t.prototype.transaction=function(e,t,n){var r=this;(0,E.validateArgCount)("Reference.transaction",1,3,arguments.length),(0,E.validateCallback)("Reference.transaction","transactionUpdate",e,!1),(0,E.validateCallback)("Reference.transaction","onComplete",t,!0),rc("Reference.transaction","applyLocally",n,!0);var i=(function(e,t,n){if(rs("Reference.transaction",(e=(0,E.getModularInstance)(e))._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var r,i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,o=new E.Deferred,a=r2(e,function(){});return function(e,t,n,r,i,o){rk(e,"transaction on "+t);var a={path:t,update:n,onComplete:r,status:null,order:O(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=rA(e,t,void 0);a.currentInputSnapshot=s;var u=a.update(s.val());if(void 0===u)a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&a.onComplete(null,!1,a.currentInputSnapshot);else{n7("transaction failed: Data returned ",u,a.path),a.status=0;var c=nX(e.transactionQueueTree_,t),l=nJ(c)||[];l.push(a),nZ(c,l);var h=void 0;"object"==typeof u&&null!==u&&(0,E.contains)(u,".priority")?(h=(0,E.safeGet)(u,".priority"),(0,E.assert)(n8(h),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):h=(nO(e.serverSyncTree_,t)||tr.EMPTY_NODE).getPriority().val();var f=rm(e),d=to(u,h),p=n$(d,s,f);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=p,a.currentWriteId=rE(e);var g=nD(e.serverSyncTree_,t,p,a.currentWriteId,a.applyLocally);rd(e.eventQueue_,t,g),rP(e,e.transactionQueueTree_)}}(e._repo,e._path,t,function(t,n,r){var i=null;t?o.reject(t):(i=new r$(r,new rH(e._repo,e._path),e8),o.resolve(new im(n,i)))},a,i),o.promise})(this._delegate,e,{applyLocally:n}).then(function(e){return new i_(e.committed,new iw(r.database,e.snapshot))});return t&&i.then(function(e){return t(null,e.committed,e.snapshot)},function(e){return t(e,!1,null)}),i},t.prototype.setPriority=function(e,t){(0,E.validateArgCount)("Reference.setPriority",1,2,arguments.length),(0,E.validateCallback)("Reference.setPriority","onComplete",t,!0);var n,r,i=(n=this._delegate,rs("setPriority",(n=(0,E.getModularInstance)(n))._path),rn("setPriority",e,!1),r=new E.Deferred,rI(n._repo,eF(n._path,".priority"),e,null,r.wrapCallback(function(){})),r.promise);return t&&i.then(function(){return t(null)},function(e){return t(e)}),i},t.prototype.push=function(e,n){var r,i,o,a,s,u=this;(0,E.validateArgCount)("Reference.push",0,2,arguments.length),(0,E.validateCallback)("Reference.push","onComplete",n,!0);var c=(r=this._delegate,rs("push",(r=(0,E.getModularInstance)(r))._path),n9("push",e,r._path,!0),o=tc(ry(r._repo)),a=rX(r,o),s=rX(r,o),i=null!=e?rJ(s,e).then(function(){return s}):Promise.resolve(s),a.then=i.then.bind(i),a.catch=i.then.bind(i,void 0),a),l=c.then(function(e){return new t(u.database,e)});n&&l.then(function(){return n(null)},function(e){return n(e)});var h=new t(this.database,c);return h.then=l.then.bind(l),h.catch=l.catch.bind(l,void 0),h},t.prototype.onDisconnect=function(){return rs("Reference.onDisconnect",this._delegate._path),new ib(new rV(this._delegate._repo,this._delegate._path))},Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),t}(iE),iC=function(){function e(e,t){var n=this;this._delegate=e,this.app=t,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return e.prototype.useEmulator=function(e,t,n){var r,i,o,a,s;void 0===n&&(n={}),r=this._delegate,void 0===(i=n)&&(i={}),(r=(0,E.getModularInstance)(r))._checkNotDeleted("useEmulator"),r._instanceStarted&&V("Cannot call useEmulator() after instance has already been initialized."),o=r._repoInternal,a=void 0,o.repoInfo_.nodeAdmin?(i.mockUserToken&&V('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new eu(eu.OWNER)):i.mockUserToken&&(a=new eu("string"==typeof i.mockUserToken?i.mockUserToken:(0,E.createMockUserToken)(i.mockUserToken,r.app.options.projectId))),s=a,o.repoInfo_=new ef(e+":"+t,!1,o.repoInfo_.namespace,o.repoInfo_.webSocketOnly,o.repoInfo_.nodeAdmin,o.repoInfo_.persistenceKey,o.repoInfo_.includeNamespaceInQueryParams),s&&(o.authTokenProvider_=s)},e.prototype.ref=function(e){if((0,E.validateArgCount)("database.ref",0,1,arguments.length),e instanceof iI){var t=rY(this._delegate,e.toString());return new iI(this,t)}var t=rQ(this._delegate,e);return new iI(this,t)},e.prototype.refFromURL=function(e){return(0,E.validateArgCount)("database.refFromURL",1,1,arguments.length),new iI(this,rY(this._delegate,e))},e.prototype.goOffline=function(){var e;return(0,E.validateArgCount)("database.goOffline",0,0,arguments.length),e=this._delegate,void((e=(0,E.getModularInstance)(e))._checkNotDeleted("goOffline"),rS(e._repo))},e.prototype.goOnline=function(){var e,t;return(0,E.validateArgCount)("database.goOnline",0,0,arguments.length),e=this._delegate,void((e=(0,E.getModularInstance)(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(rg))},e.ServerValue={TIMESTAMP:iy,increment:function(e){return{".sv":{increment:e}}}},e}(),iT=Object.freeze({__proto__:null,forceLongPolling:function(){eI.forceDisallow(),e_.forceAllow()},forceWebSockets:function(){e_.forceDisallow()},isWebSocketsAvailable:function(){return eI.isAvailable()},setSecurityDebugCallback:function(e,t){e._delegate._repo.persistentConnection_.securityDebugCallback_=t},stats:function(e,t){!function(e,t){if(void 0===t&&(t=!1),"undefined"!=typeof console){t?(e.statsListener_||(e.statsListener_=new tP(e.stats_)),n=e.statsListener_.get()):n=e.stats_.get();var n,r=Object.keys(n).reduce(function(e,t){return Math.max(t.length,e)},0);ee(n,function(e,t){for(var n=e,i=e.length;i<r+2;i++)n+=" ";console.log(n+t)})}}(e._delegate._repo,t)},statsIncrementCounter:function(e,t){var n;(n=e._delegate._repo).stats_.incrementCounter(t),n.statsReporter_.statsToReport_[t]=!0},dataUpdateCount:function(e){return e._delegate._repo.dataUpdateCount},interceptServerData:function(e,t){e._delegate._repo.interceptServerDataCallback_=t},initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,o=e.namespace,a=e.nodeAdmin;S=r;var s=new w.Provider("auth-internal",new w.ComponentContainer("database-standalone"));return s.setComponent(new w.Component("auth-internal",function(){return i},"PRIVATE")),{instance:new iC(ig(t,s,void 0,n,void 0!==a&&a),t),namespace:o}}});eH.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},eH.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var iS=Object.freeze({__proto__:null,DataConnection:eH,RealTimeConnection:eT,hijackHash:function(e){var t=eH.prototype.put;return eH.prototype.put=function(n,r,i,o){void 0!==o&&(o=e()),t.call(this,n,r,i,o)},function(){eH.prototype.put=t}},ConnectionTarget:ef,queryIdentifier:function(e){return e._delegate._queryIdentifier},forceRestClient:function(e){ip=e}}),ik=iC.ServerValue;S=(r=_.default).SDK_VERSION,i=r.INTERNAL.registerComponent(new w.Component("database",function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate();return new iC(ig(r,e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n),r)},"PUBLIC").setServiceProps({Reference:iI,Query:iE,Database:iC,DataSnapshot:iw,enableLogging:j,INTERNAL:iT,ServerValue:ik,TEST_ACCESS:iS}).setMultipleInstances(!0)),r.registerVersion("@firebase/database","0.11.0"),(0,E.isNodeSdk)()&&(e.exports=i)},46:function(e,t,n){"use strict";/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}n.r(t),n.d(t,{LogLevel:function(){return a},Logger:function(){return f},setLogLevel:function(){return d},setUserLogHandler:function(){return p}});var i,o,a,s=[];(i=a||(a={}))[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT";var u={debug:a.DEBUG,verbose:a.VERBOSE,info:a.INFO,warn:a.WARN,error:a.ERROR,silent:a.SILENT},c=a.INFO,l=((o={})[a.DEBUG]="log",o[a.VERBOSE]="log",o[a.INFO]="info",o[a.WARN]="warn",o[a.ERROR]="error",o),h=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(t<e.logLevel)){var o=new Date().toISOString(),a=l[t];if(a)console[a].apply(console,r(["["+o+"]  "+e.name+":"],n));else throw Error("Attempted to log a message with an invalid logType (value: "+t+")")}},f=function(){function e(e){this.name=e,this._logLevel=c,this._logHandler=h,this._userLogHandler=null,s.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in a))throw TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?u[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.DEBUG],e)),this._logHandler.apply(this,r([this,a.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.VERBOSE],e)),this._logHandler.apply(this,r([this,a.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.INFO],e)),this._logHandler.apply(this,r([this,a.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.WARN],e)),this._logHandler.apply(this,r([this,a.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.ERROR],e)),this._logHandler.apply(this,r([this,a.ERROR],e))},e}();function d(e){s.forEach(function(t){t.setLogLevel(e)})}function p(e,t){for(var n=0;n<s.length;n++)!function(n){var r=null;t&&t.level&&(r=u[t.level]),null===e?n.userLogHandler=null:n.userLogHandler=function(t,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map(function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}}).filter(function(e){return e}).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:a[n].toLowerCase(),message:s,args:i,type:t.name})}}(s[n])}},402:function(e,t,n){"use strict";n.r(t),n.d(t,{CONSTANTS:function(){return i},Deferred:function(){return g},ErrorFactory:function(){return O},FirebaseError:function(){return x},MAX_VALUE_MILLIS:function(){return eu},RANDOM_FACTOR:function(){return ec},Sha1:function(){return Y},areCookiesEnabled:function(){return P},assert:function(){return o},assertionError:function(){return a},async:function(){return Z},base64:function(){return c},base64Decode:function(){return f},base64Encode:function(){return l},base64urlEncodeWithoutPadding:function(){return h},calculateBackoffMillis:function(){return el},contains:function(){return V},createMockUserToken:function(){return v},createSubscribe:function(){return X},decode:function(){return F},deepCopy:function(){return d},deepEqual:function(){return function e(t,n){if(t===n)return!0;for(var r=Object.keys(t),i=Object.keys(n),o=0;o<r.length;o++){var a=r[o];if(!i.includes(a))return!1;var s=t[a],u=n[a];if(z(s)&&z(u)){if(!e(s,u))return!1}else if(s!==u)return!1}for(var c=0;c<i.length;c++){var a=i[c];if(!r.includes(a))return!1}return!0}},deepExtend:function(){return p},errorPrefix:function(){return en},extractQuerystring:function(){return Q},getGlobal:function(){return N},getModularInstance:function(){return ef},getUA:function(){return y},isAdmin:function(){return B},isBrowser:function(){return _},isBrowserExtension:function(){return w},isElectron:function(){return I},isEmpty:function(){return K},isIE:function(){return C},isIndexedDBAvailable:function(){return D},isMobileCordova:function(){return m},isNode:function(){return b},isNodeSdk:function(){return S},isReactNative:function(){return E},isSafari:function(){return k},isUWP:function(){return T},isValidFormat:function(){return q},isValidTimestamp:function(){return j},issuedAtTime:function(){return U},jsonEval:function(){return M},map:function(){return G},ordinal:function(){return eh},querystring:function(){return H},querystringDecode:function(){return $},safeGet:function(){return W},stringLength:function(){return es},stringToByteArray:function(){return ea},stringify:function(){return L},validateArgCount:function(){return et},validateCallback:function(){return ei},validateContextObject:function(){return eo},validateIndexedDBOpenable:function(){return A},validateNamespace:function(){return er}});var r=n(1499),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(e,t){if(!e)throw a(t)},a=function(e){return Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},s=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:((64512&i)==55296&&r+1<e.length&&(64512&e.charCodeAt(r+1))==56320?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128):t[n++]=i>>12|224,t[n++]=i>>6&63|128),t[n++]=63&i|128)}return t},u=function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var o=e[n++],a=e[n++],s=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{var o=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")},c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,a||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):u(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},l=function(e){var t=s(e);return c.encodeByteArray(t,!0)},h=function(e){return l(e).replace(/\./g,"")},f=function(e){try{return c.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d(e){return p(void 0,e)}function p(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=p(e[n],t[n]));return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var g=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch(function(){}),1===e.length?e(n):e(n,r))}},e}();/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v(e,t){if(e.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=(0,r.__assign)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[h(JSON.stringify({alg:"none",type:"JWT"})),h(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function m(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(y())}function b(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function _(){return"object"==typeof self&&self.self===self}function w(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function E(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function I(){return y().indexOf("Electron/")>=0}function C(){var e=y();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function T(){return y().indexOf("MSAppHost/")>=0}function S(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN}function k(){return!b()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function D(){return"indexedDB"in self&&null!=indexedDB}function A(){return new Promise(function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})}function P(){return!!navigator&&!!navigator.cookieEnabled}function N(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw Error("Unable to locate global object.")}var x=function(e){function t(n,r,i){var o=e.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,O.prototype.create),o}return(0,r.__extends)(t,e),t}(Error),O=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?o.replace(R,function(e,t){var n=r[t];return null!=n?String(n):"<"+t+"?>"}):"Error",s=this.serviceName+": "+a+" ("+i+").";return new x(i,s,r)},e}(),R=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M(e){return JSON.parse(e)}function L(e){return JSON.stringify(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var F=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=M(f(o[0])||""),n=M(f(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:i}},j=function(e){var t=F(e).claims,n=Math.floor(new Date().getTime()/1e3),r=0,i=0;return"object"==typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),i=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},U=function(e){var t=F(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null},q=function(e){var t=F(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},B=function(e){var t=F(e).claims;return"object"==typeof t&&!0===t.admin};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function W(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function K(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function G(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function z(e){return null!==e&&"object"==typeof e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach(function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];n(o[0],o[1])}return t.length?"&"+t.join("&"):""}function $(e){var t={};return e.replace(/^\?/,"").split("&").forEach(function(e){if(e){var n=e.split("="),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}}),t}function Q(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Y=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n,r,i=this.W_;if("string"==typeof e)for(var o=0;o<16;o++)i[o]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var o=0;o<16;o++)i[o]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var o=16;o<80;o++){var a=i[o-3]^i[o-8]^i[o-14]^i[o-16];i[o]=(a<<1|a>>>31)&4294967295}for(var s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4],o=0;o<80;o++){o<40?o<20?(n=l^u&(c^l),r=1518500249):(n=u^c^l,r=1859775393):o<60?(n=u&c|l&(u|c),r=2400959708):(n=u^c^l,r=3395469782);var a=(s<<5|s>>>27)+n+h+r+i[o]&4294967295;h=l,l=c,c=(u<<30|u>>>2)&4294967295,u=s,s=a}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}();function X(e,t){var n=new J(e,t);return n.subscribe.bind(n)}var J=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(n)}).catch(function(e){n.error(e)})}return e.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},e.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},e.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw Error("Missing Observer.");void 0===(r=!function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0;n<t.length;n++){var r=t[n];if(r in e&&"function"==typeof e[r])return!0}return!1}(e,["next","error","complete"])?{next:e,error:t,complete:n}:e).next&&(r.next=ee),void 0===r.error&&(r.error=ee),void 0===r.complete&&(r.complete=ee);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},e}();function Z(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){e.apply(void 0,n)}).catch(function(e){t&&t(e)})}}function ee(){}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function en(e,t){return e+" failed: "+t+" argument "}function er(e,t,n){if((!n||t)&&"string"!=typeof t)throw Error(en(e,"namespace")+"must be a valid firebase namespace.")}function ei(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw Error(en(e,t)+"must be a valid function.")}function eo(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw Error(en(e,t)+"must be a valid context object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ea=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;o(++r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(i<65536?t[n++]=i>>12|224:(t[n++]=i>>18|240,t[n++]=i>>12&63|128),t[n++]=i>>6&63|128),t[n++]=63&i|128)}return t},es=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},eu=144e5,ec=.5;function el(e,t,n){void 0===t&&(t=1e3),void 0===n&&(n=2);var r=t*Math.pow(n,e);return Math.min(eu,r+Math.round(ec*r*(Math.random()-.5)*2))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eh(e){return Number.isFinite(e)?e+function(e){var t=(e=Math.abs(e))%100;if(t>=10&&t<=20)return"th";var n=e%10;return 1===n?"st":2===n?"nd":3===n?"rd":"th"}(e):""+e}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(e){return e&&e._delegate?e._delegate:e}},7337:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6198);function i(e,t,n){return void 0===t&&(t=new Uint8Array(2)),void 0===n&&(n=0),t[n+0]=e>>>8,t[n+1]=e>>>0,t}function o(e,t,n){return void 0===t&&(t=new Uint8Array(2)),void 0===n&&(n=0),t[n+0]=e>>>0,t[n+1]=e>>>8,t}function a(e,t){return void 0===t&&(t=0),e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function s(e,t){return void 0===t&&(t=0),(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}function u(e,t){return void 0===t&&(t=0),e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}function c(e,t){return void 0===t&&(t=0),(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}function l(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),t[n+0]=e>>>24,t[n+1]=e>>>16,t[n+2]=e>>>8,t[n+3]=e>>>0,t}function h(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),t[n+0]=e>>>0,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24,t}function f(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),l(e/4294967296>>>0,t,n),l(e>>>0,t,n+4),t}function d(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),h(e>>>0,t,n),h(e/4294967296>>>0,t,n+4),t}t.readInt16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])<<16>>16},t.readUint16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])>>>0},t.readInt16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])<<16>>16},t.readUint16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])>>>0},t.writeUint16BE=i,t.writeInt16BE=i,t.writeUint16LE=o,t.writeInt16LE=o,t.readInt32BE=a,t.readUint32BE=s,t.readInt32LE=u,t.readUint32LE=c,t.writeUint32BE=l,t.writeInt32BE=l,t.writeUint32LE=h,t.writeInt32LE=h,t.readInt64BE=function(e,t){void 0===t&&(t=0);var n=a(e,t),r=a(e,t+4);return 4294967296*n+r-(r>>31)*4294967296},t.readUint64BE=function(e,t){return void 0===t&&(t=0),4294967296*s(e,t)+s(e,t+4)},t.readInt64LE=function(e,t){void 0===t&&(t=0);var n=u(e,t);return 4294967296*u(e,t+4)+n-(n>>31)*4294967296},t.readUint64LE=function(e,t){void 0===t&&(t=0);var n=c(e,t);return 4294967296*c(e,t+4)+n},t.writeUint64BE=f,t.writeInt64BE=f,t.writeUint64LE=d,t.writeInt64LE=d,t.readUintBE=function(e,t,n){if(void 0===n&&(n=0),e%8!=0)throw Error("readUintBE supports only bitLengths divisible by 8");if(e/8>t.length-n)throw Error("readUintBE: array is too short for the given bitLength");for(var r=0,i=1,o=e/8+n-1;o>=n;o--)r+=t[o]*i,i*=256;return r},t.readUintLE=function(e,t,n){if(void 0===n&&(n=0),e%8!=0)throw Error("readUintLE supports only bitLengths divisible by 8");if(e/8>t.length-n)throw Error("readUintLE: array is too short for the given bitLength");for(var r=0,i=1,o=n;o<n+e/8;o++)r+=t[o]*i,i*=256;return r},t.writeUintBE=function(e,t,n,i){if(void 0===n&&(n=new Uint8Array(e/8)),void 0===i&&(i=0),e%8!=0)throw Error("writeUintBE supports only bitLengths divisible by 8");if(!r.isSafeInteger(t))throw Error("writeUintBE value must be an integer");for(var o=1,a=e/8+i-1;a>=i;a--)n[a]=t/o&255,o*=256;return n},t.writeUintLE=function(e,t,n,i){if(void 0===n&&(n=new Uint8Array(e/8)),void 0===i&&(i=0),e%8!=0)throw Error("writeUintLE supports only bitLengths divisible by 8");if(!r.isSafeInteger(t))throw Error("writeUintLE value must be an integer");for(var o=1,a=i;a<i+e/8;a++)n[a]=t/o&255,o*=256;return n},t.readFloat32BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t)},t.readFloat32LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t,!0)},t.readFloat64BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t)},t.readFloat64LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t,!0)},t.writeFloat32BE=function(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(n,e),t},t.writeFloat32LE=function(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(n,e,!0),t},t.writeFloat64BE=function(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(n,e),t},t.writeFloat64LE=function(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(n,e,!0),t}},7755:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7337),i=n(7683);function o(e,t,n,o,a){if(void 0===a&&(a=0),32!==e.length)throw Error("ChaCha: key size must be 32 bytes");if(o.length<n.length)throw Error("ChaCha: destination is shorter than source");if(0===a){if(8!==t.length&&12!==t.length)throw Error("ChaCha nonce must be 8 or 12 bytes");u=(s=new Uint8Array(16)).length-t.length,s.set(t,u)}else{if(16!==t.length)throw Error("ChaCha nonce with counter must be 16 bytes");s=t,u=a}for(var s,u,c=new Uint8Array(64),l=0;l<n.length;l+=64){!function(e,t,n){for(var i=n[3]<<24|n[2]<<16|n[1]<<8|n[0],o=n[7]<<24|n[6]<<16|n[5]<<8|n[4],a=n[11]<<24|n[10]<<16|n[9]<<8|n[8],s=n[15]<<24|n[14]<<16|n[13]<<8|n[12],u=n[19]<<24|n[18]<<16|n[17]<<8|n[16],c=n[23]<<24|n[22]<<16|n[21]<<8|n[20],l=n[27]<<24|n[26]<<16|n[25]<<8|n[24],h=n[31]<<24|n[30]<<16|n[29]<<8|n[28],f=t[3]<<24|t[2]<<16|t[1]<<8|t[0],d=t[7]<<24|t[6]<<16|t[5]<<8|t[4],p=t[11]<<24|t[10]<<16|t[9]<<8|t[8],g=t[15]<<24|t[14]<<16|t[13]<<8|t[12],v=1634760805,y=857760878,m=2036477234,b=1797285236,_=i,w=o,E=a,I=s,C=u,T=c,S=l,k=h,D=f,A=d,P=p,N=g,x=0;x<20;x+=2)D^=v=v+_|0,_^=C=C+(D=D>>>16|D<<16)|0,_=_>>>20|_<<12,A^=y=y+w|0,w^=T=T+(A=A>>>16|A<<16)|0,w=w>>>20|w<<12,P^=m=m+E|0,E^=S=S+(P=P>>>16|P<<16)|0,E=E>>>20|E<<12,N^=b=b+I|0,I^=k=k+(N=N>>>16|N<<16)|0,I=I>>>20|I<<12,P^=m=m+E|0,E^=S=S+(P=P>>>24|P<<8)|0,E=E>>>25|E<<7,N^=b=b+I|0,I^=k=k+(N=N>>>24|N<<8)|0,I=I>>>25|I<<7,A^=y=y+w|0,w^=T=T+(A=A>>>24|A<<8)|0,w=w>>>25|w<<7,D^=v=v+_|0,_^=C=C+(D=D>>>24|D<<8)|0,_=_>>>25|_<<7,N^=v=v+w|0,w^=S=S+(N=N>>>16|N<<16)|0,w=w>>>20|w<<12,D^=y=y+E|0,E^=k=k+(D=D>>>16|D<<16)|0,E=E>>>20|E<<12,A^=m=m+I|0,I^=C=C+(A=A>>>16|A<<16)|0,I=I>>>20|I<<12,P^=b=b+_|0,_^=T=T+(P=P>>>16|P<<16)|0,_=_>>>20|_<<12,A^=m=m+I|0,I^=C=C+(A=A>>>24|A<<8)|0,I=I>>>25|I<<7,P^=b=b+_|0,_^=T=T+(P=P>>>24|P<<8)|0,_=_>>>25|_<<7,D^=y=y+E|0,E^=k=k+(D=D>>>24|D<<8)|0,E=E>>>25|E<<7,N^=v=v+w|0,w^=S=S+(N=N>>>24|N<<8)|0,w=w>>>25|w<<7;r.writeUint32LE(v+1634760805|0,e,0),r.writeUint32LE(y+857760878|0,e,4),r.writeUint32LE(m+2036477234|0,e,8),r.writeUint32LE(b+1797285236|0,e,12),r.writeUint32LE(_+i|0,e,16),r.writeUint32LE(w+o|0,e,20),r.writeUint32LE(E+a|0,e,24),r.writeUint32LE(I+s|0,e,28),r.writeUint32LE(C+u|0,e,32),r.writeUint32LE(T+c|0,e,36),r.writeUint32LE(S+l|0,e,40),r.writeUint32LE(k+h|0,e,44),r.writeUint32LE(D+f|0,e,48),r.writeUint32LE(A+d|0,e,52),r.writeUint32LE(P+p|0,e,56),r.writeUint32LE(N+g|0,e,60)}(c,s,e);for(var h=l;h<l+64&&h<n.length;h++)o[h]=n[h]^c[h-l];!function(e,t,n){for(var r=1;n--;)r=r+(255&e[t])|0,e[t]=255&r,r>>>=8,t++;if(r>0)throw Error("ChaCha: counter overflow")}(s,0,u)}return i.wipe(c),0===a&&i.wipe(s),o}t.streamXOR=o,t.stream=function(e,t,n,r){return void 0===r&&(r=0),i.wipe(n),o(e,t,n,n,r)}},6340:function(e,t,n){"use strict";var r=n(7755),i=n(9531),o=n(7683),a=n(7337),s=n(5757);t.Cv=32,t.WH=12,t.pg=16;var u=new Uint8Array(16),c=function(){function e(e){if(this.nonceLength=t.WH,this.tagLength=t.pg,e.length!==t.Cv)throw Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(e)}return e.prototype.seal=function(e,t,n,i){if(e.length>16)throw Error("ChaCha20Poly1305: incorrect nonce length");var a,s=new Uint8Array(16);s.set(e,s.length-e.length);var u=new Uint8Array(32);r.stream(this._key,s,u,4);var c=t.length+this.tagLength;if(i){if(i.length!==c)throw Error("ChaCha20Poly1305: incorrect destination length");a=i}else a=new Uint8Array(c);return r.streamXOR(this._key,s,t,a,4),this._authenticate(a.subarray(a.length-this.tagLength,a.length),u,a.subarray(0,a.length-this.tagLength),n),o.wipe(s),a},e.prototype.open=function(e,t,n,i){if(e.length>16)throw Error("ChaCha20Poly1305: incorrect nonce length");if(t.length<this.tagLength)return null;var a,u=new Uint8Array(16);u.set(e,u.length-e.length);var c=new Uint8Array(32);r.stream(this._key,u,c,4);var l=new Uint8Array(this.tagLength);if(this._authenticate(l,c,t.subarray(0,t.length-this.tagLength),n),!s.equal(l,t.subarray(t.length-this.tagLength,t.length)))return null;var h=t.length-this.tagLength;if(i){if(i.length!==h)throw Error("ChaCha20Poly1305: incorrect destination length");a=i}else a=new Uint8Array(h);return r.streamXOR(this._key,u,t.subarray(0,t.length-this.tagLength),a,4),o.wipe(u),a},e.prototype.clean=function(){return o.wipe(this._key),this},e.prototype._authenticate=function(e,t,n,r){var s=new i.Poly1305(t);r&&(s.update(r),r.length%16>0&&s.update(u.subarray(r.length%16))),s.update(n),n.length%16>0&&s.update(u.subarray(n.length%16));var c=new Uint8Array(8);r&&a.writeUint64LE(r.length,c),s.update(c),a.writeUint64LE(n.length,c),s.update(c);for(var l=s.digest(),h=0;h<l.length;h++)e[h]=l[h];s.clean(),o.wipe(l),o.wipe(c)},e}();t.OK=c},5757:function(e,t){"use strict";function n(e,t){if(e.length!==t.length)return 0;for(var n=0,r=0;r<e.length;r++)n|=e[r]^t[r];return 1&n-1>>>8}Object.defineProperty(t,"__esModule",{value:!0}),t.select=function(e,t,n){return~(e-1)&t|e-1&n},t.lessOrEqual=function(e,t){return(0|e)-(0|t)-1>>>31&1},t.compare=n,t.equal=function(e,t){return 0!==e.length&&0!==t.length&&0!==n(e,t)}},6700:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSerializableHash=function(e){return void 0!==e.saveState&&void 0!==e.restoreState&&void 0!==e.cleanSavedState}},1384:function(e,t,n){"use strict";var r=n(8825),i=n(7683),o=function(){function e(e,t,n,i){void 0===n&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var o=r.hmac(this._hash,n,t);this._hmac=new r.HMAC(e,o),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return e.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(0===e)throw Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},e.prototype.expand=function(e){for(var t=new Uint8Array(e),n=0;n<t.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[n]=this._buffer[this._bufpos++];return t},e.prototype.clean=function(){this._hmac.clean(),i.wipe(this._buffer),i.wipe(this._counter),this._bufpos=0},e}();t.t=o},8825:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6700),i=n(5757),o=n(7683),a=function(){function e(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(n).clean():n.set(t);for(var i=0;i<n.length;i++)n[i]^=54;this._inner.update(n);for(var i=0;i<n.length;i++)n[i]^=106;this._outer.update(n),r.isSerializableHash(this._inner)&&r.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),o.wipe(n)}return e.prototype.reset=function(){if(!r.isSerializableHash(this._inner)||!r.isSerializableHash(this._outer))throw Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.clean=function(){r.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),r.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},e.prototype.update=function(e){return this._inner.update(e),this},e.prototype.finish=function(e){return this._finished?this._outer.finish(e):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0),this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(!r.isSerializableHash(this._inner))throw Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},e.prototype.restoreState=function(e){if(!r.isSerializableHash(this._inner)||!r.isSerializableHash(this._outer))throw Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.cleanSavedState=function(e){if(!r.isSerializableHash(this._inner))throw Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},e}();t.HMAC=a,t.hmac=function(e,t,n){var r=new a(e,t);r.update(n);var i=r.digest();return r.clean(),i},t.equal=i.equal},6198:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mul=Math.imul||function(e,t){var n=65535&e,r=65535&t;return n*r+((e>>>16&65535)*r+n*(t>>>16&65535)<<16>>>0)|0},t.add=function(e,t){return e+t|0},t.sub=function(e,t){return e-t|0},t.rotl=function(e,t){return e<<t|e>>>32-t},t.rotr=function(e,t){return e<<32-t|e>>>t},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(e){return t.isInteger(e)&&e>=-t.MAX_SAFE_INTEGER&&e<=t.MAX_SAFE_INTEGER}},9531:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5757),i=n(7683);t.DIGEST_LENGTH=16;var o=function(){function e(e){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var n=e[0]|e[1]<<8;this._r[0]=8191&n;var r=e[2]|e[3]<<8;this._r[1]=(n>>>13|r<<3)&8191;var i=e[4]|e[5]<<8;this._r[2]=(r>>>10|i<<6)&7939;var o=e[6]|e[7]<<8;this._r[3]=(i>>>7|o<<9)&8191;var a=e[8]|e[9]<<8;this._r[4]=(o>>>4|a<<12)&255,this._r[5]=a>>>1&8190;var s=e[10]|e[11]<<8;this._r[6]=(a>>>14|s<<2)&8191;var u=e[12]|e[13]<<8;this._r[7]=(s>>>11|u<<5)&8065;var c=e[14]|e[15]<<8;this._r[8]=(u>>>8|c<<8)&8191,this._r[9]=c>>>5&127,this._pad[0]=e[16]|e[17]<<8,this._pad[1]=e[18]|e[19]<<8,this._pad[2]=e[20]|e[21]<<8,this._pad[3]=e[22]|e[23]<<8,this._pad[4]=e[24]|e[25]<<8,this._pad[5]=e[26]|e[27]<<8,this._pad[6]=e[28]|e[29]<<8,this._pad[7]=e[30]|e[31]<<8}return e.prototype._blocks=function(e,t,n){for(var r=this._fin?0:2048,i=this._h[0],o=this._h[1],a=this._h[2],s=this._h[3],u=this._h[4],c=this._h[5],l=this._h[6],h=this._h[7],f=this._h[8],d=this._h[9],p=this._r[0],g=this._r[1],v=this._r[2],y=this._r[3],m=this._r[4],b=this._r[5],_=this._r[6],w=this._r[7],E=this._r[8],I=this._r[9];n>=16;){var C,T=e[t+0]|e[t+1]<<8;i+=8191&T;var S=e[t+2]|e[t+3]<<8;o+=(T>>>13|S<<3)&8191;var k=e[t+4]|e[t+5]<<8;a+=(S>>>10|k<<6)&8191;var D=e[t+6]|e[t+7]<<8;s+=(k>>>7|D<<9)&8191;var A=e[t+8]|e[t+9]<<8;u+=(D>>>4|A<<12)&8191,c+=A>>>1&8191;var P=e[t+10]|e[t+11]<<8;l+=(A>>>14|P<<2)&8191;var N=e[t+12]|e[t+13]<<8;h+=(P>>>11|N<<5)&8191;var x=e[t+14]|e[t+15]<<8;f+=(N>>>8|x<<8)&8191,d+=x>>>5|r;var O=0;O=(C=0+i*p+5*I*o+5*E*a+5*w*s+5*_*u)>>>13,C&=8191,C+=5*b*c+5*m*l+5*y*h+5*v*f+5*g*d,O+=C>>>13,C&=8191;var R=O;R+=i*g+o*p+5*I*a+5*E*s+5*w*u,O=R>>>13,R&=8191,R+=5*_*c+5*b*l+5*m*h+5*y*f+5*v*d,O+=R>>>13,R&=8191;var M=O;M+=i*v+o*g+a*p+5*I*s+5*E*u,O=M>>>13,M&=8191,M+=5*w*c+5*_*l+5*b*h+5*m*f+5*y*d,O+=M>>>13,M&=8191;var L=O;L+=i*y+o*v+a*g+s*p+5*I*u,O=L>>>13,L&=8191,L+=5*E*c+5*w*l+5*_*h+5*b*f+5*m*d,O+=L>>>13,L&=8191;var F=O;F+=i*m+o*y+a*v+s*g+u*p,O=F>>>13,F&=8191,F+=5*I*c+5*E*l+5*w*h+5*_*f+5*b*d,O+=F>>>13,F&=8191;var j=O;j+=i*b+o*m+a*y+s*v+u*g,O=j>>>13,j&=8191,j+=c*p+5*I*l+5*E*h+5*w*f+5*_*d,O+=j>>>13,j&=8191;var U=O;U+=i*_+o*b+a*m+s*y+u*v,O=U>>>13,U&=8191,U+=c*g+l*p+5*I*h+5*E*f+5*w*d,O+=U>>>13,U&=8191;var q=O;q+=i*w+o*_+a*b+s*m+u*y,O=q>>>13,q&=8191,q+=c*v+l*g+h*p+5*I*f+5*E*d,O+=q>>>13,q&=8191;var B=O;B+=i*E+o*w+a*_+s*b+u*m,O=B>>>13,B&=8191,B+=c*y+l*v+h*g+f*p+5*I*d,O+=B>>>13,B&=8191;var V=O;V+=i*I+o*E+a*w+s*_+u*b,O=V>>>13,V&=8191,V+=c*m+l*y+h*v+f*g+d*p,O+=V>>>13,V&=8191,C=8191&(O=(O=(O<<2)+O|0)+C|0),O>>>=13,R+=O,i=C,o=R,a=M,s=L,u=F,c=j,l=U,h=q,f=B,d=V,t+=16,n-=16}this._h[0]=i,this._h[1]=o,this._h[2]=a,this._h[3]=s,this._h[4]=u,this._h[5]=c,this._h[6]=l,this._h[7]=h,this._h[8]=f,this._h[9]=d},e.prototype.finish=function(e,t){void 0===t&&(t=0);var n,r,i,o,a=new Uint16Array(10);if(this._leftover){for(o=this._leftover,this._buffer[o++]=1;o<16;o++)this._buffer[o]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(n=this._h[1]>>>13,this._h[1]&=8191,o=2;o<10;o++)this._h[o]+=n,n=this._h[o]>>>13,this._h[o]&=8191;for(this._h[0]+=5*n,n=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=n,n=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=n,a[0]=this._h[0]+5,n=a[0]>>>13,a[0]&=8191,o=1;o<10;o++)a[o]=this._h[o]+n,n=a[o]>>>13,a[o]&=8191;for(a[9]-=8192,r=(1^n)-1,o=0;o<10;o++)a[o]&=r;for(o=0,r=~r;o<10;o++)this._h[o]=this._h[o]&r|a[o];for(o=1,this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,i=this._h[0]+this._pad[0],this._h[0]=65535&i;o<8;o++)i=(this._h[o]+this._pad[o]|0)+(i>>>16)|0,this._h[o]=65535&i;return e[t+0]=this._h[0]>>>0,e[t+1]=this._h[0]>>>8,e[t+2]=this._h[1]>>>0,e[t+3]=this._h[1]>>>8,e[t+4]=this._h[2]>>>0,e[t+5]=this._h[2]>>>8,e[t+6]=this._h[3]>>>0,e[t+7]=this._h[3]>>>8,e[t+8]=this._h[4]>>>0,e[t+9]=this._h[4]>>>8,e[t+10]=this._h[5]>>>0,e[t+11]=this._h[5]>>>8,e[t+12]=this._h[6]>>>0,e[t+13]=this._h[6]>>>8,e[t+14]=this._h[7]>>>0,e[t+15]=this._h[7]>>>8,this._finished=!0,this},e.prototype.update=function(e){var t,n=0,r=e.length;if(this._leftover){(t=16-this._leftover)>r&&(t=r);for(var i=0;i<t;i++)this._buffer[this._leftover+i]=e[n+i];if(r-=t,n+=t,this._leftover+=t,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(r>=16&&(t=r-r%16,this._blocks(e,n,t),n+=t,r-=t),r){for(var i=0;i<r;i++)this._buffer[this._leftover+i]=e[n+i];this._leftover+=r}return this},e.prototype.digest=function(){if(this._finished)throw Error("Poly1305 was finished");var e=new Uint8Array(16);return this.finish(e),e},e.prototype.clean=function(){return i.wipe(this._buffer),i.wipe(this._r),i.wipe(this._h),i.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},e}();t.Poly1305=o,t.oneTimeAuth=function(e,t){var n=new o(e);n.update(t);var r=n.digest();return n.clean(),r},t.equal=function(e,n){return e.length===t.DIGEST_LENGTH&&n.length===t.DIGEST_LENGTH&&r.equal(e,n)}},3566:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;let r=n(97),i=n(7337),o=n(7683);function a(e,n=t.defaultRandomSource){return n.randomBytes(e)}t.defaultRandomSource=new r.SystemRandomSource,t.randomBytes=a,t.randomUint32=function(e=t.defaultRandomSource){let n=a(4,e),r=(0,i.readUint32LE)(n);return(0,o.wipe)(n),r};let s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function u(e,n=s,r=t.defaultRandomSource){if(n.length<2)throw Error("randomString charset is too short");if(n.length>256)throw Error("randomString charset is too long");let i="",u=n.length,c=256-256%u;for(;e>0;){let t=a(Math.ceil(256*e/c),r);for(let r=0;r<t.length&&e>0;r++){let o=t[r];o<c&&(i+=n.charAt(o%u),e--)}(0,o.wipe)(t)}return i}t.randomString=u,t.randomStringForEntropy=function(e,n=s,r=t.defaultRandomSource){return u(Math.ceil(e/(Math.log(n.length)/Math.LN2)),n,r)}},2764:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserRandomSource=void 0;class n{constructor(){this.isAvailable=!1,this.isInstantiated=!1;let e="undefined"!=typeof self?self.crypto||self.msCrypto:null;e&&void 0!==e.getRandomValues&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw Error("Browser random byte generator is not available.");let t=new Uint8Array(e);for(let e=0;e<t.length;e+=65536)this._crypto.getRandomValues(t.subarray(e,e+Math.min(t.length-e,65536)));return t}}t.BrowserRandomSource=n},8204:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeRandomSource=void 0;let r=n(7683);class i{constructor(){this.isAvailable=!1,this.isInstantiated=!1;{let e=n(5883);e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw Error("NodeRandomSource: got fewer bytes than requested");let n=new Uint8Array(e);for(let e=0;e<n.length;e++)n[e]=t[e];return(0,r.wipe)(t),n}}t.NodeRandomSource=i},97:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SystemRandomSource=void 0;let r=n(2764),i=n(8204);class o{constructor(){if(this.isAvailable=!1,this.name="",this._source=new r.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new i.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw Error("System random byte generator is not available.");return this._source.randomBytes(e)}}t.SystemRandomSource=o},6497:function(e,t,n){"use strict";var r=n(7337),i=n(7683);t.k=32,t.cn=64;var o=function(){function e(){this.digestLength=t.k,this.blockSize=t.cn,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return e.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},e.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},e.prototype.clean=function(){i.wipe(this._buffer),i.wipe(this._temp),this.reset()},e.prototype.update=function(e,t){if(void 0===t&&(t=e.length),this._finished)throw Error("SHA256: can't update because hash was finished.");var n=0;if(this._bytesHashed+=t,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&t>0;)this._buffer[this._bufferLength++]=e[n++],t--;this._bufferLength===this.blockSize&&(s(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(t>=this.blockSize&&(n=s(this._temp,this._state,e,n,t),t%=this.blockSize);t>0;)this._buffer[this._bufferLength++]=e[n++],t--;return this},e.prototype.finish=function(e){if(!this._finished){var t=this._bytesHashed,n=this._bufferLength,i=t%64<56?64:128;this._buffer[n]=128;for(var o=n+1;o<i-8;o++)this._buffer[o]=0;r.writeUint32BE(t/536870912|0,this._buffer,i-8),r.writeUint32BE(t<<3,this._buffer,i-4),s(this._temp,this._state,this._buffer,0,i),this._finished=!0}for(var o=0;o<this.digestLength/4;o++)r.writeUint32BE(this._state[o],e,4*o);return this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(this._finished)throw Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},e.prototype.restoreState=function(e){return this._state.set(e.state),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},e.prototype.cleanSavedState=function(e){i.wipe(e.state),e.buffer&&i.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},e}();t.mE=o;var a=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(e,t,n,i,o){for(;o>=64;){for(var s=t[0],u=t[1],c=t[2],l=t[3],h=t[4],f=t[5],d=t[6],p=t[7],g=0;g<16;g++){var v=i+4*g;e[g]=r.readUint32BE(n,v)}for(var g=16;g<64;g++){var y=e[g-2],m=(y>>>17|y<<15)^(y>>>19|y<<13)^y>>>10,b=((y=e[g-15])>>>7|y<<25)^(y>>>18|y<<14)^y>>>3;e[g]=(m+e[g-7]|0)+(b+e[g-16]|0)}for(var g=0;g<64;g++){var m=(((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(h&f^~h&d)|0)+(p+(a[g]+e[g]|0)|0)|0,b=((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+(s&u^s&c^u&c)|0;p=d,d=f,f=h,h=l+m|0,l=c,c=u,u=s,s=m+b|0}t[0]+=s,t[1]+=u,t[2]+=c,t[3]+=l,t[4]+=h,t[5]+=f,t[6]+=d,t[7]+=p,i+=64,o-=64}return i}t.vp=function(e){var t=new o;t.update(e);var n=t.digest();return t.clean(),n}},7683:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wipe=function(e){for(var t=0;t<e.length;t++)e[t]=0;return e}},7161:function(e,t,n){"use strict";t.gi=t.Au=t.KS=t.kz=void 0;let r=n(3566),i=n(7683);function o(e){let t=new Float64Array(16);if(e)for(let n=0;n<e.length;n++)t[n]=e[n];return t}t.kz=32,t.KS=32;let a=new Uint8Array(32);a[0]=9;let s=o([56129,1]);function u(e){let t=1;for(let n=0;n<16;n++){let r=e[n]+t+65535;t=Math.floor(r/65536),e[n]=r-65536*t}e[0]+=t-1+37*(t-1)}function c(e,t,n){let r=~(n-1);for(let n=0;n<16;n++){let i=r&(e[n]^t[n]);e[n]^=i,t[n]^=i}}function l(e,t,n){for(let r=0;r<16;r++)e[r]=t[r]+n[r]}function h(e,t,n){for(let r=0;r<16;r++)e[r]=t[r]-n[r]}function f(e,t,n){let r,i,o=0,a=0,s=0,u=0,c=0,l=0,h=0,f=0,d=0,p=0,g=0,v=0,y=0,m=0,b=0,_=0,w=0,E=0,I=0,C=0,T=0,S=0,k=0,D=0,A=0,P=0,N=0,x=0,O=0,R=0,M=0,L=n[0],F=n[1],j=n[2],U=n[3],q=n[4],B=n[5],V=n[6],W=n[7],K=n[8],G=n[9],z=n[10],H=n[11],$=n[12],Q=n[13],Y=n[14],X=n[15];o+=(r=t[0])*L,a+=r*F,s+=r*j,u+=r*U,c+=r*q,l+=r*B,h+=r*V,f+=r*W,d+=r*K,p+=r*G,g+=r*z,v+=r*H,y+=r*$,m+=r*Q,b+=r*Y,_+=r*X,a+=(r=t[1])*L,s+=r*F,u+=r*j,c+=r*U,l+=r*q,h+=r*B,f+=r*V,d+=r*W,p+=r*K,g+=r*G,v+=r*z,y+=r*H,m+=r*$,b+=r*Q,_+=r*Y,w+=r*X,s+=(r=t[2])*L,u+=r*F,c+=r*j,l+=r*U,h+=r*q,f+=r*B,d+=r*V,p+=r*W,g+=r*K,v+=r*G,y+=r*z,m+=r*H,b+=r*$,_+=r*Q,w+=r*Y,E+=r*X,u+=(r=t[3])*L,c+=r*F,l+=r*j,h+=r*U,f+=r*q,d+=r*B,p+=r*V,g+=r*W,v+=r*K,y+=r*G,m+=r*z,b+=r*H,_+=r*$,w+=r*Q,E+=r*Y,I+=r*X,c+=(r=t[4])*L,l+=r*F,h+=r*j,f+=r*U,d+=r*q,p+=r*B,g+=r*V,v+=r*W,y+=r*K,m+=r*G,b+=r*z,_+=r*H,w+=r*$,E+=r*Q,I+=r*Y,C+=r*X,l+=(r=t[5])*L,h+=r*F,f+=r*j,d+=r*U,p+=r*q,g+=r*B,v+=r*V,y+=r*W,m+=r*K,b+=r*G,_+=r*z,w+=r*H,E+=r*$,I+=r*Q,C+=r*Y,T+=r*X,h+=(r=t[6])*L,f+=r*F,d+=r*j,p+=r*U,g+=r*q,v+=r*B,y+=r*V,m+=r*W,b+=r*K,_+=r*G,w+=r*z,E+=r*H,I+=r*$,C+=r*Q,T+=r*Y,S+=r*X,f+=(r=t[7])*L,d+=r*F,p+=r*j,g+=r*U,v+=r*q,y+=r*B,m+=r*V,b+=r*W,_+=r*K,w+=r*G,E+=r*z,I+=r*H,C+=r*$,T+=r*Q,S+=r*Y,k+=r*X,d+=(r=t[8])*L,p+=r*F,g+=r*j,v+=r*U,y+=r*q,m+=r*B,b+=r*V,_+=r*W,w+=r*K,E+=r*G,I+=r*z,C+=r*H,T+=r*$,S+=r*Q,k+=r*Y,D+=r*X,p+=(r=t[9])*L,g+=r*F,v+=r*j,y+=r*U,m+=r*q,b+=r*B,_+=r*V,w+=r*W,E+=r*K,I+=r*G,C+=r*z,T+=r*H,S+=r*$,k+=r*Q,D+=r*Y,A+=r*X,g+=(r=t[10])*L,v+=r*F,y+=r*j,m+=r*U,b+=r*q,_+=r*B,w+=r*V,E+=r*W,I+=r*K,C+=r*G,T+=r*z,S+=r*H,k+=r*$,D+=r*Q,A+=r*Y,P+=r*X,v+=(r=t[11])*L,y+=r*F,m+=r*j,b+=r*U,_+=r*q,w+=r*B,E+=r*V,I+=r*W,C+=r*K,T+=r*G,S+=r*z,k+=r*H,D+=r*$,A+=r*Q,P+=r*Y,N+=r*X,y+=(r=t[12])*L,m+=r*F,b+=r*j,_+=r*U,w+=r*q,E+=r*B,I+=r*V,C+=r*W,T+=r*K,S+=r*G,k+=r*z,D+=r*H,A+=r*$,P+=r*Q,N+=r*Y,x+=r*X,m+=(r=t[13])*L,b+=r*F,_+=r*j,w+=r*U,E+=r*q,I+=r*B,C+=r*V,T+=r*W,S+=r*K,k+=r*G,D+=r*z,A+=r*H,P+=r*$,N+=r*Q,x+=r*Y,O+=r*X,b+=(r=t[14])*L,_+=r*F,w+=r*j,E+=r*U,I+=r*q,C+=r*B,T+=r*V,S+=r*W,k+=r*K,D+=r*G,A+=r*z,P+=r*H,N+=r*$,x+=r*Q,O+=r*Y,R+=r*X,_+=(r=t[15])*L,w+=r*F,E+=r*j,I+=r*U,C+=r*q,T+=r*B,S+=r*V,k+=r*W,D+=r*K,A+=r*G,P+=r*z,N+=r*H,x+=r*$,O+=r*Q,R+=r*Y,M+=r*X,o+=38*w,a+=38*E,s+=38*I,u+=38*C,c+=38*T,l+=38*S,h+=38*k,f+=38*D,d+=38*A,p+=38*P,g+=38*N,v+=38*x,y+=38*O,m+=38*R,b+=38*M,i=Math.floor((r=o+(i=1)+65535)/65536),o=r-65536*i,i=Math.floor((r=a+i+65535)/65536),a=r-65536*i,i=Math.floor((r=s+i+65535)/65536),s=r-65536*i,i=Math.floor((r=u+i+65535)/65536),u=r-65536*i,i=Math.floor((r=c+i+65535)/65536),c=r-65536*i,i=Math.floor((r=l+i+65535)/65536),l=r-65536*i,i=Math.floor((r=h+i+65535)/65536),h=r-65536*i,i=Math.floor((r=f+i+65535)/65536),f=r-65536*i,i=Math.floor((r=d+i+65535)/65536),d=r-65536*i,i=Math.floor((r=p+i+65535)/65536),p=r-65536*i,i=Math.floor((r=g+i+65535)/65536),g=r-65536*i,i=Math.floor((r=v+i+65535)/65536),v=r-65536*i,i=Math.floor((r=y+i+65535)/65536),y=r-65536*i,i=Math.floor((r=m+i+65535)/65536),m=r-65536*i,i=Math.floor((r=b+i+65535)/65536),b=r-65536*i,i=Math.floor((r=_+i+65535)/65536),_=r-65536*i,o+=i-1+37*(i-1),i=Math.floor((r=o+(i=1)+65535)/65536),o=r-65536*i,i=Math.floor((r=a+i+65535)/65536),a=r-65536*i,i=Math.floor((r=s+i+65535)/65536),s=r-65536*i,i=Math.floor((r=u+i+65535)/65536),u=r-65536*i,i=Math.floor((r=c+i+65535)/65536),c=r-65536*i,i=Math.floor((r=l+i+65535)/65536),l=r-65536*i,i=Math.floor((r=h+i+65535)/65536),h=r-65536*i,i=Math.floor((r=f+i+65535)/65536),f=r-65536*i,i=Math.floor((r=d+i+65535)/65536),d=r-65536*i,i=Math.floor((r=p+i+65535)/65536),p=r-65536*i,i=Math.floor((r=g+i+65535)/65536),g=r-65536*i,i=Math.floor((r=v+i+65535)/65536),v=r-65536*i,i=Math.floor((r=y+i+65535)/65536),y=r-65536*i,i=Math.floor((r=m+i+65535)/65536),m=r-65536*i,i=Math.floor((r=b+i+65535)/65536),b=r-65536*i,i=Math.floor((r=_+i+65535)/65536),_=r-65536*i,o+=i-1+37*(i-1),e[0]=o,e[1]=a,e[2]=s,e[3]=u,e[4]=c,e[5]=l,e[6]=h,e[7]=f,e[8]=d,e[9]=p,e[10]=g,e[11]=v,e[12]=y,e[13]=m,e[14]=b,e[15]=_}function d(e,t){let n=new Uint8Array(32),r=new Float64Array(80),i=o(),a=o(),d=o(),p=o(),g=o(),v=o();for(let t=0;t<31;t++)n[t]=e[t];n[31]=127&e[31]|64,n[0]&=248,function(e,t){for(let n=0;n<16;n++)e[n]=t[2*n]+(t[2*n+1]<<8);e[15]&=32767}(r,t);for(let e=0;e<16;e++)a[e]=r[e];i[0]=p[0]=1;for(let e=254;e>=0;--e){let t=n[e>>>3]>>>(7&e)&1;c(i,a,t),c(d,p,t),l(g,i,d),h(i,i,d),l(d,a,p),h(a,a,p),f(p,g,g),f(v,i,i),f(i,d,i),f(d,a,g),l(g,i,d),h(i,i,d),f(a,i,i),h(d,p,v),f(i,d,s),l(i,i,p),f(d,d,i),f(i,p,v),f(p,a,r),f(a,g,g),c(i,a,t),c(d,p,t)}for(let e=0;e<16;e++)r[e+16]=i[e],r[e+32]=d[e],r[e+48]=a[e],r[e+64]=p[e];let y=r.subarray(32),m=r.subarray(16);!function(e,t){let n=o();for(let e=0;e<16;e++)n[e]=t[e];for(let e=253;e>=0;e--)f(n,n,n),2!==e&&4!==e&&f(n,n,t);for(let t=0;t<16;t++)e[t]=n[t]}(y,y),f(m,m,y);let b=new Uint8Array(32);return!function(e,t){let n=o(),r=o();for(let e=0;e<16;e++)r[e]=t[e];u(r),u(r),u(r);for(let e=0;e<2;e++){n[0]=r[0]-65517;for(let e=1;e<15;e++)n[e]=r[e]-65535-(n[e-1]>>16&1),n[e-1]&=65535;n[15]=r[15]-32767-(n[14]>>16&1);let e=n[15]>>16&1;n[14]&=65535,c(r,n,1-e)}for(let t=0;t<16;t++)e[2*t]=255&r[t],e[2*t+1]=r[t]>>8}(b,m),b}t.Au=function(e){let n=(0,r.randomBytes)(32,e),o=function(e){if(e.length!==t.KS)throw Error(`x25519: seed must be ${t.KS} bytes`);let n=new Uint8Array(e);return{publicKey:d(n,a),secretKey:n}}(n);return(0,i.wipe)(n),o},t.gi=function(e,n,r=!1){if(e.length!==t.kz)throw Error("X25519: incorrect secret key length");if(n.length!==t.kz)throw Error("X25519: incorrect public key length");let i=d(e,n);if(r){let e=0;for(let t=0;t<i.length;t++)e|=i[t];if(0===e)throw Error("X25519: invalid shared key")}return i}},457:function(){},240:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=n(4746);r.__exportStar(n(3539),t),r.__exportStar(n(5877),t)},3539:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_THOUSAND=t.ONE_HUNDRED=void 0,t.ONE_HUNDRED=100,t.ONE_THOUSAND=1e3},5877:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=5*t.ONE_MINUTE,t.TEN_MINUTES=10*t.ONE_MINUTE,t.THIRTY_MINUTES=30*t.ONE_MINUTE,t.SIXTY_MINUTES=60*t.ONE_MINUTE,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=3*t.ONE_HOUR,t.SIX_HOURS=6*t.ONE_HOUR,t.TWELVE_HOURS=12*t.ONE_HOUR,t.TWENTY_FOUR_HOURS=24*t.ONE_HOUR,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=3*t.ONE_DAY,t.FIVE_DAYS=5*t.ONE_DAY,t.SEVEN_DAYS=7*t.ONE_DAY,t.THIRTY_DAYS=30*t.ONE_DAY,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=2*t.ONE_WEEK,t.THREE_WEEKS=3*t.ONE_WEEK,t.FOUR_WEEKS=4*t.ONE_WEEK,t.ONE_YEAR=365*t.ONE_DAY},8332:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=n(4746);r.__exportStar(n(1210),t),r.__exportStar(n(9371),t),r.__exportStar(n(3013),t),r.__exportStar(n(240),t)},3013:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(4746).__exportStar(n(3983),t)},3983:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IWatch=void 0;class n{}t.IWatch=n},3678:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromMiliseconds=t.toMiliseconds=void 0;let r=n(240);t.toMiliseconds=function(e){return e*r.ONE_THOUSAND},t.fromMiliseconds=function(e){return Math.floor(e/r.ONE_THOUSAND)}},5061:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=function(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}},1210:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=n(4746);r.__exportStar(n(5061),t),r.__exportStar(n(3678),t)},9371:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Watch=void 0;class n{constructor(){this.timestamps=new Map}start(e){if(this.timestamps.has(e))throw Error(`Watch already started for label: ${e}`);this.timestamps.set(e,{started:Date.now()})}stop(e){let t=this.get(e);if(void 0!==t.elapsed)throw Error(`Watch already stopped for label: ${e}`);let n=Date.now()-t.started;this.timestamps.set(e,{started:t.started,elapsed:n})}get(e){let t=this.timestamps.get(e);if(void 0===t)throw Error(`No timestamp found for label: ${e}`);return t}elapsed(e){let t=this.get(e);return t.elapsed||Date.now()-t.started}}t.Watch=n,t.default=n},4746:function(e,t,n){"use strict";n.r(t),n.d(t,{__assign:function(){return o},__asyncDelegator:function(){return _},__asyncGenerator:function(){return b},__asyncValues:function(){return w},__await:function(){return m},__awaiter:function(){return l},__classPrivateFieldGet:function(){return T},__classPrivateFieldSet:function(){return S},__createBinding:function(){return f},__decorate:function(){return s},__exportStar:function(){return d},__extends:function(){return i},__generator:function(){return h},__importDefault:function(){return C},__importStar:function(){return I},__makeTemplateObject:function(){return E},__metadata:function(){return c},__param:function(){return u},__read:function(){return g},__rest:function(){return a},__spread:function(){return v},__spreadArrays:function(){return y},__values:function(){return p}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function u(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,s)}u((r=r.apply(e,t||[])).next())})}function h(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function f(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}function d(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function y(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function m(e){return this instanceof m?(this.v=e,this):new m(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise(function(n,r){o.push([e,t,n,r])>1||s(e,t)})})}function s(e,t){try{var n;(n=i[e](t)).value instanceof m?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(e){l(o[0][3],e)}}function u(e){s("next",e)}function c(e){s("throw",e)}function l(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function _(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:m(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function w(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=p(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,i){!function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}(r,i,(t=e[n](t)).done,t.value)})}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function I(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}function T(e,t){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return t.get(e)}function S(e,t,n){if(!t.has(e))throw TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},2962:function(e,t,n){"use strict";n.d(t,{AW:function(){return P},O6:function(){return tv},rV:function(){return O},gn:function(){return ep},H1:function(){return eu},hF:function(){return ec},WG:function(){return U},pe:function(){return B},m$:function(){return L},vB:function(){return V},HI:function(){return q},E0:function(){return ev},Gq:function(){return ef},$0:function(){return ei},Z4:function(){return eh},Bv:function(){return eD},Au:function(){return R},jd:function(){return M},gu:function(){return k},D:function(){return er},Z7:function(){return eG},cO:function(){return e_},_H:function(){return eb},fc:function(){return eU},D6:function(){return ez},Hh:function(){return em},Ym:function(){return F},rj:function(){return j},jU:function(){return et},gp:function(){return eq},rF:function(){return tc},Bw:function(){return eg},UG:function(){return Z},Gg:function(){return tf},xW:function(){return e1},b$:function(){return ee},Ih:function(){return eJ},h1:function(){return e2},Q8:function(){return G},o8:function(){return eQ},qt:function(){return eH},Dd:function(){return e3},$t:function(){return tn},nf:function(){return to},Q0:function(){return te},in:function(){return e8},p8:function(){return ta},sI:function(){return tu},al:function(){return ts},L5:function(){return e$},EJ:function(){return tt},Z2:function(){return e9},PM:function(){return e7},hH:function(){return tr},ON:function(){return th},n:function(){return e4},JT:function(){return ti},M_:function(){return eY},jv:function(){return e0},KC:function(){return ea},eG:function(){return ey},fK:function(){return eV},IP:function(){return es},DQ:function(){return S},iP:function(){return ed},M:function(){return eB},he:function(){return ek},uw:function(){return tp},Ll:function(){return W},EN:function(){return K}});var r=n(6340),i=n(1384),o=n(3566),a=n(6497),s=n(7161),u=n(7442),c=n(5409),l=function(e,t,n){if(n||2==arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},h=function(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"},f=function(e){this.version=e,this.type="node",this.name="node",this.os=c.platform},d=function(e,t,n,r){this.name=e,this.version=t,this.os=n,this.bot=r,this.type="bot-device"},p=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},g=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},v=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,y=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],m=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function b(e){var t=""!==e&&y.reduce(function(t,n){var r=n[0],i=n[1];if(t)return t;var o=i.exec(e);return!!o&&[r,o]},!1);if(!t)return null;var n=t[0],r=t[1];if("searchbot"===n)return new p;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<3&&(i=l(l([],i,!0),function(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}(3-i.length),!0)):i=[];var o=i.join("."),a=function(e){for(var t=0,n=m.length;t<n;t++){var r=m[t],i=r[0];if(r[1].exec(e))return i}return null}(e),s=v.exec(e);return s&&s[1]?new d(n,o,a,s[1]):new h(n,o,a)}var _=n(8332),w=n(469),E=n(9435),I=n(4351);n(457);let C={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};var T=n(5409);function S(e){let[t,n]=e.split(":");return{namespace:t,reference:n}}function k(e,t=[]){let n=[];return Object.keys(e).forEach(r=>{if(t.length&&!t.includes(r))return;let i=e[r];n.push(...i.accounts)}),n}function D(e,t){return e.includes(":")?[e]:t.chains||[]}let A="base10",P="base16",N="base64pad",x="utf8",O=1;function R(){let e=s.Au();return{privateKey:(0,u.BB)(e.secretKey,P),publicKey:(0,u.BB)(e.publicKey,P)}}function M(){let e=(0,o.randomBytes)(32);return(0,u.BB)(e,P)}function L(e,t){let n=s.gi((0,u.mL)(e,P),(0,u.mL)(t,P),!0),r=new i.t(a.mE,n).expand(32);return(0,u.BB)(r,P)}function F(e){let t=(0,a.vp)((0,u.mL)(e,P));return(0,u.BB)(t,P)}function j(e){let t=(0,a.vp)((0,u.mL)(e,x));return(0,u.BB)(t,P)}function U(e){return Number((0,u.BB)(e,A))}function q(e){var t;let n=(t="u">typeof e.type?e.type:0,(0,u.mL)(`${t}`,A));if(U(n)===O&&typeof e.senderPublicKey>"u")throw Error("Missing sender public key for type 1 envelope");let i="u">typeof e.senderPublicKey?(0,u.mL)(e.senderPublicKey,P):void 0,a="u">typeof e.iv?(0,u.mL)(e.iv,P):(0,o.randomBytes)(12);return function(e){if(U(e.type)===O){if(typeof e.senderPublicKey>"u")throw Error("Missing sender public key for type 1 envelope");return(0,u.BB)((0,u.zo)([e.type,e.senderPublicKey,e.iv,e.sealed]),N)}return(0,u.BB)((0,u.zo)([e.type,e.iv,e.sealed]),N)}({type:n,sealed:new r.OK((0,u.mL)(e.symKey,P)).seal(a,(0,u.mL)(e.message,x)),iv:a,senderPublicKey:i})}function B(e){let t=new r.OK((0,u.mL)(e.symKey,P)),{sealed:n,iv:i}=V(e.encoded),o=t.open(i,n);if(null===o)throw Error("Failed to decrypt");return(0,u.BB)(o,x)}function V(e){let t=(0,u.mL)(e,N),n=t.slice(0,1);if(U(n)===O){let e=t.slice(1,33),r=t.slice(33,45);return{type:n,sealed:t.slice(45),iv:r,senderPublicKey:e}}let r=t.slice(1,13);return{type:n,sealed:t.slice(13),iv:r}}function W(e,t){let n=V(e);return K({type:U(n.type),senderPublicKey:"u">typeof n.senderPublicKey?(0,u.BB)(n.senderPublicKey,P):void 0,receiverPublicKey:t?.receiverPublicKey})}function K(e){let t=e?.type||0;if(t===O){if(typeof e?.senderPublicKey>"u")throw Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function G(e){return e.type===O&&"string"==typeof e.senderPublicKey&&"string"==typeof e.receiverPublicKey}var z=Object.defineProperty,H=Object.getOwnPropertySymbols,$=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable,Y=(e,t,n)=>t in e?z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,X=(e,t)=>{for(var n in t||(t={}))$.call(t,n)&&Y(e,n,t[n]);if(H)for(var n of H(t))Q.call(t,n)&&Y(e,n,t[n]);return e};let J={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"};function Z(){return"u">typeof T&&"u">typeof T.versions&&"u">typeof T.versions.node}function ee(){return!(0,w.getDocument)()&&!!(0,w.getNavigator)()&&"ReactNative"===navigator.product}function et(){return!Z()&&!!(0,w.getNavigator)()}function en(){return ee()?J.reactNative:Z()?J.node:et()?J.browser:J.unknown}function er(){return(0,E.D)()||{name:"",description:"",url:"",icons:[""]}}function ei({protocol:e,version:t,relayUrl:r,sdkVersion:i,auth:o,projectId:a,useOnCloseEvent:s}){var u;let l;let h=r.split("?"),d=function(e,t,r){let i=function(){var e;if(en()===J.reactNative&&"u">typeof n.g&&"u">typeof(null==n.g?void 0:n.g.Platform)){let{OS:e,Version:t}=n.g.Platform;return[e,t].join("-")}let t=e?b(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new g:"undefined"!=typeof navigator?b(navigator.userAgent):void 0!==c&&c.version?new f(c.version.slice(1)):null;if(null===t)return"unknown";let r=t.os?t.os.replace(" ","").toLowerCase():"unknown";return"browser"===t.type?[r,t.name,t.version].join("-"):[r,t.version].join("-")}(),o=function(){var e;let t=en();return t===J.browser?[t,(null==(e=(0,w.getLocation)())?void 0:e.host)||"unknown"].join(":"):t}();return[[e,t].join("-"),["js",r].join("-"),i,o].join("/")}(e,t,i),p=(u=h[1]||"",l=X(X({},l=I.parse(u)),{auth:o,ua:d,projectId:a,useOnCloseEvent:s||void 0}),u=I.stringify(l));return h[0]+"?"+p}function eo(e,t){return e.filter(e=>t.includes(e)).length===e.length}function ea(e){return Object.fromEntries(e.entries())}function es(e){return new Map(Object.entries(e))}function eu(e=_.FIVE_MINUTES,t){let n,r,i;let o=(0,_.toMiliseconds)(e||_.FIVE_MINUTES);return{resolve:e=>{i&&n&&(clearTimeout(i),n(e))},reject:e=>{i&&r&&(clearTimeout(i),r(e))},done:()=>new Promise((e,a)=>{i=setTimeout(()=>{a(Error(t))},o),n=e,r=a})}}function ec(e,t,n){return new Promise(async(r,i)=>{let o=setTimeout(()=>i(Error(n)),t);try{let t=await e;r(t)}catch(e){i(e)}clearTimeout(o)})}function el(e,t){if("string"==typeof t&&t.startsWith(`${e}:`))return t;if("topic"===e.toLowerCase()){if("string"!=typeof t)throw Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}if("id"===e.toLowerCase()){if("number"!=typeof t)throw Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw Error(`Unknown expirer target type: ${e}`)}function eh(e){return el("topic",e)}function ef(e){return el("id",e)}function ed(e){let[t,n]=e.split(":"),r={id:void 0,topic:void 0};if("topic"===t&&"string"==typeof n)r.topic=n;else if("id"===t&&Number.isInteger(Number(n)))r.id=Number(n);else throw Error(`Invalid target, expected id:number or topic:string, got ${t}:${n}`);return r}function ep(e,t){return(0,_.fromMiliseconds)((t||Date.now())+(0,_.toMiliseconds)(e))}function eg(e){return Date.now()>=(0,_.toMiliseconds)(e)}function ev(e,t){return`${e}${t?`:${t}`:""}`}function ey(e=[],t=[]){return[...new Set([...e,...t])]}async function em({id:e,topic:t,wcDeepLink:r}){try{if(!r)return;let i="string"==typeof r?JSON.parse(r):r,o=i?.href;if("string"!=typeof o)return;o.endsWith("/")&&(o=o.slice(0,-1));let a=`${o}/wc?requestId=${e}&sessionTopic=${t}`,s=en();s===J.browser?a.startsWith("https://")?window.open(a,"_blank","noreferrer noopener"):window.open(a,"_self","noreferrer noopener"):s===J.reactNative&&"u">typeof(null==n.g?void 0:n.g.Linking)&&await n.g.Linking.openURL(a)}catch(e){console.error(e)}}function eb(e){return e?.relay||{protocol:"irn"}}function e_(e){let t=C[e];if(typeof t>"u")throw Error(`Relay Protocol not supported: ${e}`);return t}var ew=Object.defineProperty,eE=Object.getOwnPropertySymbols,eI=Object.prototype.hasOwnProperty,eC=Object.prototype.propertyIsEnumerable,eT=(e,t,n)=>t in e?ew(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,eS=(e,t)=>{for(var n in t||(t={}))eI.call(t,n)&&eT(e,n,t[n]);if(eE)for(var n of eE(t))eC.call(t,n)&&eT(e,n,t[n]);return e};function ek(e){var t;let n=e.indexOf(":"),r=-1!==e.indexOf("?")?e.indexOf("?"):void 0,i=e.substring(0,n),o=e.substring(n+1,r).split("@"),a="u">typeof r?e.substring(r):"",s=I.parse(a);return{protocol:i,topic:(t=o[0]).startsWith("//")?t.substring(2):t,version:parseInt(o[1],10),symKey:s.symKey,relay:function(e,t="-"){let n={},r="relay"+t;return Object.keys(e).forEach(t=>{if(t.startsWith(r)){let i=t.replace(r,""),o=e[t];n[i]=o}}),n}(s)}}function eD(e){return`${e.protocol}:${e.topic}@${e.version}?`+I.stringify(eS({symKey:e.symKey},function(e,t="-"){let n={};return Object.keys(e).forEach(r=>{e[r]&&(n["relay"+t+r]=e[r])}),n}(e.relay)))}var eA=Object.defineProperty,eP=Object.defineProperties,eN=Object.getOwnPropertyDescriptors,ex=Object.getOwnPropertySymbols,eO=Object.prototype.hasOwnProperty,eR=Object.prototype.propertyIsEnumerable,eM=(e,t,n)=>t in e?eA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,eL=(e,t)=>{for(var n in t||(t={}))eO.call(t,n)&&eM(e,n,t[n]);if(ex)for(var n of ex(t))eR.call(t,n)&&eM(e,n,t[n]);return e},eF=(e,t)=>eP(e,eN(t));function ej(e){let t=[];return e.forEach(e=>{let[n,r]=e.split(":");t.push(`${n}:${r}`)}),t}function eU(e,t){let n=e8(e,t);if(n)throw Error(n.message);let r={};for(let[t,n]of Object.entries(e))r[t]={methods:n.methods,events:n.events,chains:n.accounts.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)};return r}function eq(e){return e.includes(":")}function eB(e){return eq(e)?e.split(":")[0]:e}function eV(e){var t,n,r;let i={};if(!e$(e))return i;for(let[o,a]of Object.entries(e)){let e=eq(o)?[o]:a.chains,s=a.methods||[],u=a.events||[],c=eB(o);i[c]=eF(eL({},i[c]),{chains:ey(e,null==(t=i[c])?void 0:t.chains),methods:ey(s,null==(n=i[c])?void 0:n.methods),events:ey(u,null==(r=i[c])?void 0:r.events)})}return i}let eW={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},eK={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function eG(e,t){let{message:n,code:r}=eK[e];return{message:t?`${n} ${t}`:n,code:r}}function ez(e,t){let{message:n,code:r}=eW[e];return{message:t?`${n} ${t}`:n,code:r}}function eH(e,t){return!!Array.isArray(e)&&(!("u">typeof t)||!e.length||e.every(t))}function e$(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function eQ(e){return typeof e>"u"}function eY(e,t){return!!(t&&eQ(e))||"string"==typeof e&&!!e.trim().length}function eX(e,t){return!!(t&&eQ(e))||"number"==typeof e&&!isNaN(e)}function eJ(e,t){let{requiredNamespaces:n}=t,r=Object.keys(e.namespaces),i=Object.keys(n),o=!0;return!!eo(i,r)&&(r.forEach(t=>{let{accounts:r,methods:i,events:a}=e.namespaces[t],s=ej(r),u=n[t];eo(D(t,u),s)&&eo(u.methods,i)&&eo(u.events,a)||(o=!1)}),o)}function eZ(e){return!!(eY(e,!1)&&e.includes(":"))&&2===e.split(":").length}function e0(e){if(eY(e,!1))try{return"u">typeof new URL(e)}catch{}return!1}function e1(e){var t;return null==(t=e?.proposer)?void 0:t.publicKey}function e2(e){return e?.topic}function e3(e,t){let n=null;return eY(e?.publicKey,!1)||(n=eG("MISSING_OR_INVALID",`${t} controller public key should be a string`)),n}function e6(e){let t=!0;return eH(e)?e.length&&(t=e.every(e=>eY(e,!1))):t=!1,t}function e5(e,t){let n=null;return Object.values(e).forEach(e=>{var r;let i;if(n)return;let o=(r=`${t}, namespace`,i=null,e6(e?.methods)?e6(e?.events)||(i=ez("UNSUPPORTED_EVENTS",`${r}, events should be an array of strings or empty array for no events`)):i=ez("UNSUPPORTED_METHODS",`${r}, methods should be an array of strings or empty array for no methods`),i);o&&(n=o)}),n}function e4(e,t,n){let r=null;if(e&&e$(e)){let i;let o=e5(e,t);o&&(r=o);let a=(i=null,Object.entries(e).forEach(([e,r])=>{var o,a;let s;if(i)return;let u=(o=D(e,r),a=`${t} ${n}`,s=null,eH(o)&&o.length?o.forEach(e=>{s||eZ(e)||(s=ez("UNSUPPORTED_CHAINS",`${a}, chain ${e} should be a string and conform to "namespace:chainId" format`))}):eZ(e)||(s=ez("UNSUPPORTED_CHAINS",`${a}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),s);u&&(i=u)}),i);a&&(r=a)}else r=eG("MISSING_OR_INVALID",`${t}, ${n} should be an object with data`);return r}function e8(e,t){let n=null;if(e&&e$(e)){let r;let i=e5(e,t);i&&(n=i);let o=(r=null,Object.values(e).forEach(e=>{var n,i;let o;if(r)return;let a=(n=e?.accounts,i=`${t} namespace`,o=null,eH(n)?n.forEach(e=>{o||function(e){if(eY(e,!1)&&e.includes(":")){let t=e.split(":");if(3===t.length){let e=t[0]+":"+t[1];return!!t[2]&&eZ(e)}}return!1}(e)||(o=ez("UNSUPPORTED_ACCOUNTS",`${i}, account ${e} should be a string and conform to "namespace:chainId:address" format`))}):o=ez("UNSUPPORTED_ACCOUNTS",`${i}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),o);a&&(r=a)}),r);o&&(n=o)}else n=eG("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return n}function e9(e){return eY(e.protocol,!0)}function e7(e,t){let n=!1;return t&&!e?n=!0:e&&eH(e)&&e.length&&e.forEach(e=>{n=e9(e)}),n}function te(e){return"number"==typeof e}function tt(e){return"u">typeof e}function tn(e){return!(!e||"object"!=typeof e||!e.code||!eX(e.code,!1)||!e.message||!eY(e.message,!1))}function tr(e){return!(eQ(e)||!eY(e.method,!1))}function ti(e){return!(eQ(e)||eQ(e.result)&&eQ(e.error)||!eX(e.id,!1)||!eY(e.jsonrpc,!1))}function to(e){return!(eQ(e)||!eY(e.name,!1))}function ta(e,t){return!(!eZ(t)||!(function(e){let t=[];return Object.values(e).forEach(e=>{t.push(...ej(e.accounts))}),t})(e).includes(t))}function ts(e,t,n){return!!eY(n,!1)&&(function(e,t){let n=[];return Object.values(e).forEach(e=>{ej(e.accounts).includes(t)&&n.push(...e.methods)}),n})(e,t).includes(n)}function tu(e,t,n){return!!eY(n,!1)&&(function(e,t){let n=[];return Object.values(e).forEach(e=>{ej(e.accounts).includes(t)&&n.push(...e.events)}),n})(e,t).includes(n)}function tc(e,t,n){let r=null,i=function(e){let t={};return Object.keys(e).forEach(n=>{var r;n.includes(":")?t[n]=e[n]:null==(r=e[n].chains)||r.forEach(r=>{t[r]={methods:e[n].methods,events:e[n].events}})}),t}(e),o=function(e){let t={};return Object.keys(e).forEach(n=>{if(n.includes(":"))t[n]=e[n];else{let r=ej(e[n].accounts);r?.forEach(r=>{t[r]={accounts:e[n].accounts.filter(e=>e.includes(`${r}:`)),methods:e[n].methods,events:e[n].events}})}}),t}(t),a=Object.keys(i),s=Object.keys(o),u=tl(Object.keys(e)),c=tl(Object.keys(t)),l=u.filter(e=>!c.includes(e));return l.length&&(r=eG("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${l.toString()}
      Received: ${Object.keys(t).toString()}`)),eo(a,s)||(r=eG("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${a.toString()}
      Approved: ${s.toString()}`)),Object.keys(t).forEach(e=>{if(!e.includes(":")||r)return;let i=ej(t[e].accounts);i.includes(e)||(r=eG("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${e}
        Required: ${e}
        Approved: ${i.toString()}`))}),a.forEach(e=>{r||(eo(i[e].methods,o[e].methods)?eo(i[e].events,o[e].events)||(r=eG("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${e}`)):r=eG("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${e}`))}),r}function tl(e){return[...new Set(e.map(e=>e.includes(":")?e.split(":")[0]:e))]}function th(e,t){return eX(e,!1)&&e<=t.max&&e>=t.min}function tf(){let e=en();return new Promise(t=>{switch(e){case J.browser:t(et()&&navigator?.onLine);break;case J.reactNative:t(td());break;case J.node:default:t(!0)}})}async function td(){if(ee()&&"u">typeof n.g&&null!=n.g&&n.g.NetInfo){let e=await (null==n.g?void 0:n.g.NetInfo.fetch());return e?.isConnected}return!0}function tp(e){switch(en()){case J.browser:et()&&(window.addEventListener("online",()=>e(!0)),window.addEventListener("offline",()=>e(!1)));break;case J.reactNative:ee()&&"u">typeof n.g&&null!=n.g&&n.g.NetInfo&&n.g?.NetInfo.addEventListener(t=>e(t?.isConnected));case J.node:}}let tg={};class tv{static get(e){return tg[e]}static set(e,t){tg[e]=t}static delete(e){delete tg[e]}}},4351:function(e,t,n){"use strict";let r=n(4968),i=n(291),o=n(2744),a=n(3273),s=e=>null==e,u=Symbol("encodeFragmentIdentifier");function c(e){if("string"!=typeof e||1!==e.length)throw TypeError("arrayFormatSeparator must be single character string")}function l(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}function h(e,t){return t.decode?i(e):e}function f(e){let t=e.indexOf("#");return -1!==t&&(e=e.slice(0,t)),e}function d(e){let t=(e=f(e)).indexOf("?");return -1===t?"":e.slice(t+1)}function p(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):t.parseBooleans&&null!==e&&("true"===e.toLowerCase()||"false"===e.toLowerCase())&&(e="true"===e.toLowerCase()),e}function g(e,t){c((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);let n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,r)=>{if(t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),!t){r[e]=n;return}void 0===r[e]&&(r[e]={}),r[e][t[1]]=n};case"bracket":return(e,n,r)=>{if(t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),!t){r[e]=n;return}if(void 0===r[e]){r[e]=[n];return}r[e]=[].concat(r[e],n)};case"colon-list-separator":return(e,n,r)=>{if(t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),!t){r[e]=n;return}if(void 0===r[e]){r[e]=[n];return}r[e]=[].concat(r[e],n)};case"comma":case"separator":return(t,n,r)=>{let i="string"==typeof n&&n.includes(e.arrayFormatSeparator),o="string"==typeof n&&!i&&h(n,e).includes(e.arrayFormatSeparator);n=o?h(n,e):n;let a=i||o?n.split(e.arrayFormatSeparator).map(t=>h(t,e)):null===n?n:h(n,e);r[t]=a};case"bracket-separator":return(t,n,r)=>{let i=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!i){r[t]=n?h(n,e):n;return}let o=null===n?[]:n.split(e.arrayFormatSeparator).map(t=>h(t,e));if(void 0===r[t]){r[t]=o;return}r[t]=[].concat(r[t],o)};default:return(e,t,n)=>{if(void 0===n[e]){n[e]=t;return}n[e]=[].concat(n[e],t)}}}(t),r=Object.create(null);if("string"!=typeof e||!(e=e.trim().replace(/^[?#&]/,"")))return r;for(let i of e.split("&")){if(""===i)continue;let[e,a]=o(t.decode?i.replace(/\+/g," "):i,"=");a=void 0===a?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?a:h(a,t),n(h(e,t),a,r)}for(let e of Object.keys(r)){let n=r[e];if("object"==typeof n&&null!==n)for(let e of Object.keys(n))n[e]=p(n[e],t);else r[e]=p(n,t)}return!1===t.sort?r:(!0===t.sort?Object.keys(r).sort():Object.keys(r).sort(t.sort)).reduce((e,t)=>{let n=r[t];return n&&"object"==typeof n&&!Array.isArray(n)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((e,t)=>Number(e)-Number(t)).map(e=>t[e]):t}(n):e[t]=n,e},Object.create(null))}t.extract=d,t.parse=g,t.stringify=(e,t)=>{if(!e)return"";c((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);let n=n=>t.skipNull&&s(e[n])||t.skipEmptyString&&""===e[n],r=function(e){switch(e.arrayFormat){case"index":return t=>(n,r)=>{let i=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[l(t,e),"[",i,"]"].join("")]:[...n,[l(t,e),"[",l(i,e),"]=",l(r,e)].join("")]};case"bracket":return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[l(t,e),"[]"].join("")]:[...n,[l(t,e),"[]=",l(r,e)].join("")];case"colon-list-separator":return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[l(t,e),":list="].join("")]:[...n,[l(t,e),":list=",l(r,e)].join("")];case"comma":case"separator":case"bracket-separator":{let t="bracket-separator"===e.arrayFormat?"[]=":"=";return n=>(r,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?r:(i=null===i?"":i,0===r.length)?[[l(n,e),t,l(i,e)].join("")]:[[r,l(i,e)].join(e.arrayFormatSeparator)]}default:return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,l(t,e)]:[...n,[l(t,e),"=",l(r,e)].join("")]}}(t),i={};for(let t of Object.keys(e))n(t)||(i[t]=e[t]);let o=Object.keys(i);return!1!==t.sort&&o.sort(t.sort),o.map(n=>{let i=e[n];return void 0===i?"":null===i?l(n,t):Array.isArray(i)?0===i.length&&"bracket-separator"===t.arrayFormat?l(n,t)+"[]":i.reduce(r(n),[]).join("&"):l(n,t)+"="+l(i,t)}).filter(e=>e.length>0).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);let[n,r]=o(e,"#");return Object.assign({url:n.split("?")[0]||"",query:g(d(e),t)},t&&t.parseFragmentIdentifier&&r?{fragmentIdentifier:h(r,t)}:{})},t.stringifyUrl=(e,n)=>{n=Object.assign({encode:!0,strict:!0,[u]:!0},n);let r=f(e.url).split("?")[0]||"",i=t.extract(e.url),o=Object.assign(t.parse(i,{sort:!1}),e.query),a=t.stringify(o,n);a&&(a=`?${a}`);let s=function(e){let t="",n=e.indexOf("#");return -1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(s=`#${n[u]?l(e.fragmentIdentifier,n):e.fragmentIdentifier}`),`${r}${a}${s}`},t.pick=(e,n,r)=>{r=Object.assign({parseFragmentIdentifier:!0,[u]:!1},r);let{url:i,query:o,fragmentIdentifier:s}=t.parseUrl(e,r);return t.stringifyUrl({url:i,query:a(o,n),fragmentIdentifier:s},r)},t.exclude=(e,n,r)=>{let i=Array.isArray(n)?e=>!n.includes(e):(e,t)=>!n(e,t);return t.pick(e,i,r)}},469:function(e,t){"use strict";function n(e){let t;return"undefined"!=typeof window&&void 0!==window[e]&&(t=window[e]),t}function r(e){let t=n(e);if(!t)throw Error(`${e} is not defined in Window`);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalStorage=t.getLocalStorageOrThrow=t.getCrypto=t.getCryptoOrThrow=t.getLocation=t.getLocationOrThrow=t.getNavigator=t.getNavigatorOrThrow=t.getDocument=t.getDocumentOrThrow=t.getFromWindowOrThrow=t.getFromWindow=void 0,t.getFromWindow=n,t.getFromWindowOrThrow=r,t.getDocumentOrThrow=function(){return r("document")},t.getDocument=function(){return n("document")},t.getNavigatorOrThrow=function(){return r("navigator")},t.getNavigator=function(){return n("navigator")},t.getLocationOrThrow=function(){return r("location")},t.getLocation=function(){return n("location")},t.getCryptoOrThrow=function(){return r("crypto")},t.getCrypto=function(){return n("crypto")},t.getLocalStorageOrThrow=function(){return r("localStorage")},t.getLocalStorage=function(){return n("localStorage")}},9435:function(e,t,n){"use strict";t.D=void 0;let r=n(469);t.D=function(){let e,t,n;try{e=r.getDocumentOrThrow(),t=r.getLocationOrThrow()}catch(e){return null}function i(...t){let n=e.getElementsByTagName("meta");for(let e=0;e<n.length;e++){let r=n[e],i=["itemprop","property","name"].map(e=>r.getAttribute(e)).filter(e=>!!e&&t.includes(e));if(i.length&&i){let e=r.getAttribute("content");if(e)return e}}return""}let o=((n=i("name","og:site_name","og:title","twitter:title"))||(n=e.title),n),a=i("description","og:description","twitter:description","keywords");return{description:a,url:t.origin,icons:function(){let n=e.getElementsByTagName("link"),r=[];for(let e=0;e<n.length;e++){let i=n[e],o=i.getAttribute("rel");if(o&&o.toLowerCase().indexOf("icon")>-1){let e=i.getAttribute("href");if(e){if(-1===e.toLowerCase().indexOf("https:")&&-1===e.toLowerCase().indexOf("http:")&&0!==e.indexOf("//")){let n=t.protocol+"//"+t.host;if(0===e.indexOf("/"))n+=e;else{let r=t.pathname.split("/");r.pop(),n+=r.join("/")+"/"+e}r.push(n)}else if(0===e.indexOf("//")){let n=t.protocol+e;r.push(n)}else r.push(e)}}}return r}(),name:o}}},291:function(e){"use strict";var t="%[a-f0-9]{2}",n=RegExp("("+t+")|([^%]+?)","gi"),r=RegExp("("+t+")+","gi");e.exports=function(e){if("string"!=typeof e)throw TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},i=r.exec(e);i;){try{t[i[0]]=decodeURIComponent(i[0])}catch(e){var o=function(e){try{return decodeURIComponent(e)}catch(i){for(var t=e.match(n)||[],r=1;r<t.length;r++)t=(e=(function e(t,n){try{return[decodeURIComponent(t.join(""))]}catch(e){}if(1===t.length)return t;n=n||1;var r=t.slice(0,n),i=t.slice(n);return Array.prototype.concat.call([],e(r),e(i))})(t,r).join("")).match(n)||[];return e}}(i[0]);o!==i[0]&&(t[i[0]]=o)}i=r.exec(e)}t["%C2"]="�";for(var a=Object.keys(t),s=0;s<a.length;s++){var u=a[s];e=e.replace(RegExp(u,"g"),t[u])}return e}(e)}}},2903:function(e){"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!=typeof r)throw TypeError("The listener must be a function");var s=new i(r,o||e,a),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var u,c,l=this._events[s],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,i),!0;case 5:return l.fn.call(l.context,t,r,i,o),!0;case 6:return l.fn.call(l.context,t,r,i,o,a),!0}for(c=1,u=Array(h-1);c<h;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var f,d=l.length;for(c=0;c<d;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),h){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,r);break;case 4:l[c].fn.call(l[c].context,t,r,i);break;default:if(!u)for(f=1,u=Array(h-1);f<h;f++)u[f-1]=arguments[f];l[c].fn.apply(l[c].context,u)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var u=0,c=[],l=s.length;u<l;u++)(s[u].fn!==t||i&&!s[u].once||r&&s[u].context!==r)&&c.push(s[u]);c.length?this._events[o]=1===c.length?c[0]:c:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},3273:function(e){"use strict";e.exports=function(e,t){for(var n={},r=Object.keys(e),i=Array.isArray(t),o=0;o<r.length;o++){var a=r[o],s=e[a];(i?-1!==t.indexOf(a):t(a,s,e))&&(n[a]=s)}return n}},444:function(e,t){!function(e){"use strict";function t(e){return new Promise(function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function n(e,n,r){var i,o=new Promise(function(o,a){t(i=e[n].apply(e,r)).then(o,a)});return o.request=i,o}function r(e,t,n){n.forEach(function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})})}function i(e,t,r,i){i.forEach(function(i){i in r.prototype&&(e.prototype[i]=function(){return n(this[t],i,arguments)})})}function o(e,t,n,r){r.forEach(function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})})}function a(e,t,r,i){i.forEach(function(i){i in r.prototype&&(e.prototype[i]=function(){var e,r,o;return e=this[t],r=arguments,(o=n(e,i,r)).then(function(e){if(e)return new u(e,o.request)})})})}function s(e){this._index=e}function u(e,t){this._cursor=e,this._request=t}function c(e){this._store=e}function l(e){this._tx=e,this.complete=new Promise(function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}})}function h(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new l(n)}function f(e){this._db=e}r(s,"_index",["name","keyPath","multiEntry","unique"]),i(s,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),a(s,"_index",IDBIndex,["openCursor","openKeyCursor"]),r(u,"_cursor",["direction","key","primaryKey","value"]),i(u,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(e){e in IDBCursor.prototype&&(u.prototype[e]=function(){var n=this,r=arguments;return Promise.resolve().then(function(){return n._cursor[e].apply(n._cursor,r),t(n._request).then(function(e){if(e)return new u(e,n._request)})})})}),c.prototype.createIndex=function(){return new s(this._store.createIndex.apply(this._store,arguments))},c.prototype.index=function(){return new s(this._store.index.apply(this._store,arguments))},r(c,"_store",["name","keyPath","indexNames","autoIncrement"]),i(c,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),a(c,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),o(c,"_store",IDBObjectStore,["deleteIndex"]),l.prototype.objectStore=function(){return new c(this._tx.objectStore.apply(this._tx,arguments))},r(l,"_tx",["objectStoreNames","mode"]),o(l,"_tx",IDBTransaction,["abort"]),h.prototype.createObjectStore=function(){return new c(this._db.createObjectStore.apply(this._db,arguments))},r(h,"_db",["name","version","objectStoreNames"]),o(h,"_db",IDBDatabase,["deleteObjectStore","close"]),f.prototype.transaction=function(){return new l(this._db.transaction.apply(this._db,arguments))},r(f,"_db",["name","version","objectStoreNames"]),o(f,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(e){[c,s].forEach(function(t){e in t.prototype&&(t.prototype[e.replace("open","iterate")]=function(){var t,n=(t=arguments,Array.prototype.slice.call(t)),r=n[n.length-1],i=this._store||this._index,o=i[e].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})})}),[s,c].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise(function(i){n.iterateCursor(e,function(e){if(!e||(r.push(e.value),void 0!==t&&r.length==t)){i(r);return}e.continue()})})})}),e.openDb=function(e,t,r){var i=n(indexedDB,"open",[e,t]),o=i.request;return o&&(o.onupgradeneeded=function(e){r&&r(new h(o.result,e.oldVersion,o.transaction))}),i.then(function(e){return new f(e)})},e.deleteDb=function(e){return n(indexedDB,"deleteDatabase",[e])},Object.defineProperty(e,"__esModule",{value:!0})}(t)},2380:function(e,t,n){"use strict";var r,i=n(132);"function"==typeof i.createContext&&(r=(0,i.createContext)({t:function(e){return Array.isArray(e)?e[0]:e},lang:""})),t.Z=r},6379:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function i(e){var t=e.config,n=e.allNamespaces,i=e.pluralRules,u=e.lang,c=t.logger,l=void 0===c?s:c,h=t.allowEmptyStrings,f=void 0===h||h,d=function(e,n){return Array.isArray(e)?e.map(function(e){return d(e,n)}):e instanceof Object?function e(t){var n=t.obj,r=t.query,i=t.config,o=t.lang;return r&&0!==Object.keys(r).length&&Object.keys(n).forEach(function(t){n[t]instanceof Object&&e({obj:n[t],query:r,config:i,lang:o}),"string"==typeof n[t]&&(n[t]=a({text:n[t],query:r,config:i,lang:o}))}),n}({obj:e,query:n,config:t,lang:u}):a({text:e,query:n,config:t,lang:u})},p=function(e,a,s){void 0===e&&(e="");var u,c=Array.isArray(e)?e[0]:e,h=t.nsSeparator,g=t.loggerEnvironment,v=void 0===g?"browser":g,y=function(e,t){if(!t)return{i18nKey:e};var n=e.indexOf(t);return n<0?{i18nKey:e}:{namespace:e.slice(0,n),i18nKey:e.slice(n+t.length)}}(c,void 0===h?":":h),m=y.i18nKey,b=y.namespace,_=void 0===b?null!==(u=null==s?void 0:s.ns)&&void 0!==u?u:t.defaultNS:b,w=_&&n[_]||{},E=function(e,t,n,r,i){if(!i||"number"!=typeof i.count)return n;var a="".concat(n,"_").concat(i.count);if(void 0!==o(t,a,r))return a;var s="".concat(n,"_").concat(e.select(i.count));if(void 0!==o(t,s,r))return s;var u="".concat(n,".").concat(i.count);if(void 0!==o(t,u,r))return u;var c="".concat(n,".").concat(e.select(i.count));return void 0!==o(t,c,r)?c:n}(i,w,m,t,a),I=o(w,E,t,s),C="object"==typeof I?JSON.parse(JSON.stringify(I)):I,T=void 0===C||"object"==typeof C&&!Object.keys(C).length||""===C&&!f,S="string"==typeof(null==s?void 0:s.fallback)?[s.fallback]:(null==s?void 0:s.fallback)||[];if(T&&("both"===v||v===("undefined"==typeof window?"node":"browser"))&&l({namespace:_,i18nKey:m}),T&&Array.isArray(S)&&S.length){var k=S[0],D=S.slice(1);if("string"==typeof k)return p(k,a,r(r({},s),{fallback:D}))}return T&&s&&s.hasOwnProperty("default")&&!(null==S?void 0:S.length)?s.default?d(s.default,a):s.default:T?c:d(C,a)};return p}function o(e,t,n,r){void 0===t&&(t=""),void 0===r&&(r={returnObjects:!1});var i=(n||{}).keySeparator,o=void 0===i?".":i,a=o?t.split(o):[t];if(t===o&&r.returnObjects)return e;var s=a.reduce(function(e,t){if("string"==typeof e)return{};var n=e[t];return n||("string"==typeof n?n:{})},e);if("string"==typeof s||s instanceof Object&&r.returnObjects)return s}function a(e){var t=e.text,n=e.query,r=e.config,i=e.lang;if(!t||!n)return t||"";var o=function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},a=r.interpolation||{},s=a.format,u=void 0===s?null:s,c=a.prefix,l=void 0===c?"{{":c,h=a.suffix,f=void 0===h?"}}":h,d=""===f?"":"(?:[\\s,]+([\\w-]*))?\\s*".concat(o(f));return Object.keys(n).reduce(function(e,t){var r=RegExp("".concat(o(l),"\\s*").concat(t).concat(d),"gm");return e.replace(r,function(e,r){return r&&u?u(n[t],r,i):n[t]})},t)}function s(e){e.namespace,e.i18nKey}},5724:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(132),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function o(e,t){return"string"!=typeof t?e:function(n,r,o){return e(n,r,i({ns:t},o))}}var a=n(2380),s=n(6379),u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function c(e){var t=globalThis.__NEXT_TRANSLATE__;return((null==t?void 0:t.config)?function(e){var t,n=null!==(t=globalThis.__NEXT_TRANSLATE__)&&void 0!==t?t:{},r=n.lang,i=n.namespaces,a=n.config,u=a.localesToIgnore||["default"],c=!r||u.includes(r);return{t:o((0,s.Z)({config:a,allNamespaces:i,pluralRules:new Intl.PluralRules(c?void 0:r),lang:r}),e),lang:r}}:function(e){var t=(0,r.useContext)(a.Z);return(0,r.useMemo)(function(){return u(u({},t),{t:o(t.t,e)})},[t,e])})(e)}},5409:function(e,t,n){"use strict";var r,i;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(i=n.g.process)?void 0:i.env)?n.g.process:n(863)},863:function(e){!function(){var t={229:function(e){var t,n,r,i=e.exports={};function o(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var u=[],c=!1,l=-1;function h(){c&&r&&(c=!1,r.length?u=r.concat(u):l=-1,u.length&&f())}function f(){if(!c){var e=s(h);c=!0;for(var t=u.length;t;){for(r=u,u=[];++l<t;)r&&r[l].run();l=-1,t=u.length}r=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function p(){}i.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new d(e,t)),1!==u.length||c||s(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={exports:{}},a=!0;try{t[e](o,o.exports,r),a=!1}finally{a&&delete n[e]}return o.exports}r.ab="//";var i=r(229);e.exports=i}()},5762:function(e,t,n){e.exports=n(6767)},9003:function(e,t,n){"use strict";n.d(t,{jc:function(){return u},o5:function(){return s}}),Symbol();let r=Symbol(),i=Object.getPrototypeOf,o=new WeakMap,a=e=>e&&(o.has(e)?o.get(e):i(e)===Object.prototype||i(e)===Array.prototype),s=e=>a(e)&&e[r]||null,u=(e,t=!0)=>{o.set(e,t)}},2744:function(e){"use strict";e.exports=(e,t)=>{if(!("string"==typeof e&&"string"==typeof t))throw TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];let n=e.indexOf(t);return -1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},4968:function(e){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)},7455:function(e,t,n){"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(132),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=r.useState,a=r.useEffect,s=r.useLayoutEffect,u=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(e){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=o({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return s(function(){i.value=n,i.getSnapshot=t,c(i)&&l({inst:i})},[e,n,t]),a(function(){return c(i)&&l({inst:i}),e(function(){c(i)&&l({inst:i})})},[e]),u(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},2984:function(e,t,n){"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(132),i=n(6996),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=i.useSyncExternalStore,s=r.useRef,u=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var h=s(null);if(null===h.current){var f={hasValue:!1,value:null};h.current=f}else f=h.current;var d=a(e,(h=c(function(){function e(e){if(!u){if(u=!0,a=e,e=r(e),void 0!==i&&f.hasValue){var t=f.value;if(i(t,e))return s=t}return s=e}if(t=s,o(a,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(a=e,s=n)}var a,s,u=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,r,i]))[0],h[1]);return u(function(){f.hasValue=!0,f.value=d},[d]),l(d),d}},6996:function(e,t,n){"use strict";e.exports=n(7455)},5485:function(e,t,n){"use strict";e.exports=n(2984)},1118:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(6594)}])},2114:function(e,t,n){"use strict";n.d(t,{w:function(){return pw},u:function(){return pE}});var r,i,o,a,s,u,c,l,h,f,d,p,g,v,y,m,b,_,w,E,I,C,T,S,k,D,A,P,N,x,O=n(5311),R=n(132),M=n(1463);n(859),n(1152);var L=n(1499),F=n(402),j=n(46),U=function(e,t){return(U=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function q(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var B,V="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},W=W||{},K=V||self;function G(){}function z(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function H(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function $(e,t,n){return e.call.apply(e.bind,arguments)}function Q(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Y(e,t,n){return(Y=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?$:Q).apply(null,arguments)}function X(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function J(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function Z(){this.s=this.s,this.o=this.o}Z.prototype.s=!1,Z.prototype.na=function(){this.s||(this.s=!0,this.M())},Z.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var ee=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return -1},et=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function en(e){return Array.prototype.concat.apply([],arguments)}function er(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function ei(e){return/^[\s\xa0]*$/.test(e)}var eo=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function ea(e,t){return -1!=e.indexOf(t)}function es(e,t){return e<t?-1:e>t?1:0}e:{var eu=K.navigator;if(eu){var ec=eu.userAgent;if(ec){iz=ec;break e}}iz=""}function el(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function eh(e){var t={};for(var n in e)t[n]=e[n];return t}var ef="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ed(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<ef.length;o++)n=ef[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ep(e){return ep[" "](e),e}ep[" "]=G;var eg=ea(iz,"Opera"),ev=ea(iz,"Trident")||ea(iz,"MSIE"),ey=ea(iz,"Edge"),em=ey||ev,eb=ea(iz,"Gecko")&&!(ea(iz.toLowerCase(),"webkit")&&!ea(iz,"Edge"))&&!(ea(iz,"Trident")||ea(iz,"MSIE"))&&!ea(iz,"Edge"),e_=ea(iz.toLowerCase(),"webkit")&&!ea(iz,"Edge");function ew(){var e=K.document;return e?e.documentMode:void 0}e:{var eE,eI="",eC=(eE=iz,eb?/rv:([^\);]+)(\)|;)/.exec(eE):ey?/Edge\/([\d\.]+)/.exec(eE):ev?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(eE):e_?/WebKit\/(\S+)/.exec(eE):eg?/(?:Version)[ \/]?(\S+)/.exec(eE):void 0);if(eC&&(eI=eC?eC[1]:""),ev){var eT=ew();if(null!=eT&&eT>parseFloat(eI)){iH=String(eT);break e}}iH=eI}var eS={},ek=K.document&&ev&&(ew()||parseInt(iH,10))||void 0,eD=function(){if(!K.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{K.addEventListener("test",G,t),K.removeEventListener("test",G,t)}catch(e){}return e}();function eA(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function eP(e,t){if(eA.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(eb){e:{try{ep(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:eN[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&eP.Z.h.call(this)}}eA.prototype.h=function(){this.defaultPrevented=!0},J(eP,eA);var eN={2:"touch",3:"pen",4:"mouse"};eP.prototype.h=function(){eP.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ex="closure_listenable_"+(1e6*Math.random()|0),eO=0;function eR(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++eO,this.ca=this.fa=!1}function eM(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function eL(e){this.src=e,this.g={},this.h=0}function eF(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=ee(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(eM(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ej(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ca&&o.listener==t&&!!n==o.capture&&o.ia==r)return i}return -1}eL.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var a=ej(e,t,r,i);return -1<a?(t=e[a],n||(t.fa=!1)):((t=new eR(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var eU="closure_lm_"+(1e6*Math.random()|0),eq={};function eB(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=H(i)?!!i.capture:!!i,s=eG(e);if(s||(e[eU]=s=new eL(e)),(n=s.add(t,n,r,a,o)).proxy)return n;if(r=function e(t){return eK.call(e.src,e.listener,t)},n.proxy=r,r.src=e,r.listener=n,e.addEventListener)eD||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(eW(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function eV(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[ex])eF(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(eW(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=eG(t))?(eF(n,e),0==n.h&&(n.src=null,t[eU]=null)):eM(e)}}}function eW(e){return e in eq?eq[e]:eq[e]="on"+e}function eK(e,t){if(e.ca)e=!0;else{t=new eP(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&eV(e),e=n.call(r,t)}return e}function eG(e){return(e=e[eU])instanceof eL?e:null}var ez="__closure_events_fn_"+(1e9*Math.random()>>>0);function eH(e){return"function"==typeof e?e:(e[ez]||(e[ez]=function(t){return e.handleEvent(t)}),e[ez])}function e$(){Z.call(this),this.i=new eL(this),this.P=this,this.I=null}function eQ(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new eA(t,e);else if(t instanceof eA)t.target=t.target||e;else{var i=t;ed(t=new eA(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=t.g=n[o];i=eY(a,r,!0,t)&&i}if(i=eY(a=t.g=e,r,!0,t)&&i,i=eY(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=eY(a=t.g=n[o],r,!1,t)&&i}function eY(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.ca&&a.capture==n){var s=a.listener,u=a.ia||a.src;a.fa&&eF(e.i,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}J(e$,Z),e$.prototype[ex]=!0,e$.prototype.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,o){if(Array.isArray(n))for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);else(i=H(i)?!!i.capture:!!i,r=eH(r),t&&t[ex])?(t=t.i,(n=String(n).toString())in t.g&&-1<(r=ej(a=t.g[n],r,i,o))&&(eM(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete t.g[n],t.h--))):t&&(t=eG(t))&&(n=t.g[n.toString()],t=-1,n&&(t=ej(n,r,i,o)),(r=-1<t?n[t]:null)&&eV(r))}(this,e,t,n,r)},e$.prototype.M=function(){if(e$.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)eM(n[r]);delete t.g[e],t.h--}}this.I=null},e$.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},e$.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var eX=K.JSON.stringify,eJ=function(){function e(){this.h=this.g=null}return e.prototype.add=function(e,t){var n=eZ.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n},e}(),eZ=new(function(){function e(e,t){this.i=e,this.j=t,this.h=0,this.g=null}return e.prototype.get=function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e},e}())(function(){return new e0},function(e){return e.reset()}),e0=function(){function e(){this.next=this.g=this.h=null}return e.prototype.set=function(e,t){this.h=e,this.g=t,this.next=null},e.prototype.reset=function(){this.next=this.g=this.h=null},e}();function e1(e,t){var n;iQ||(n=K.Promise.resolve(void 0),iQ=function(){n.then(e6)}),e2||(iQ(),e2=!0),e3.add(e,t)}var e2=!1,e3=new eJ;function e6(){for(var e,t;e=null,e3.g&&(e=e3.g,e3.g=e3.g.next,e3.g||(e3.h=null),e.next=null),t=e;){try{t.h.call(t.g)}catch(e){!function(e){K.setTimeout(function(){throw e},0)}(e)}eZ.j(t),100>eZ.h&&(eZ.h++,t.next=eZ.g,eZ.g=t)}e2=!1}function e5(e,t){e$.call(this),this.h=e||1,this.g=t||K,this.j=Y(this.kb,this),this.l=Date.now()}function e4(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function e8(e,t,n){if("function"==typeof e)n&&(e=Y(e,n));else if(e&&"function"==typeof e.handleEvent)e=Y(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:K.setTimeout(e,t||0)}J(e5,e$),(B=e5.prototype).da=!1,B.S=null,B.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),eQ(this,"tick"),this.da&&(e4(this),this.start()))}},B.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},B.M=function(){e5.Z.M.call(this),e4(this),delete this.g};var e9=function(e){function t(t,n){var r=e.call(this)||this;return r.m=t,r.j=n,r.h=null,r.i=!1,r.g=null,r}return!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}U(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.l=function(e){this.h=arguments,this.g?this.i=!0:function e(t){t.g=e8(function(){t.g=null,t.i&&(t.i=!1,e(t))},t.j);var n=t.h;t.h=null,t.m.apply(null,n)}(this)},t.prototype.M=function(){e.prototype.M.call(this),this.g&&(K.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(Z);function e7(e){Z.call(this),this.h=e,this.g={}}J(e7,Z);var te=[];function tt(e,t,n,r){Array.isArray(n)||(n&&(te[0]=n.toString()),n=te);for(var i=0;i<n.length;i++){var o=function e(t,n,r,i,o){if(i&&i.once)return function e(t,n,r,i,o){if(Array.isArray(n)){for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);return null}return r=eH(r),t&&t[ex]?t.O(n,r,H(i)?!!i.capture:!!i,o):eB(t,n,r,!0,i,o)}(t,n,r,i,o);if(Array.isArray(n)){for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);return null}return r=eH(r),t&&t[ex]?t.N(n,r,H(i)?!!i.capture:!!i,o):eB(t,n,r,!1,i,o)}(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function tn(e){el(e.g,function(e,t){this.g.hasOwnProperty(t)&&eV(e)},e),e.g={}}function tr(){this.g=!0}function ti(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}}return eX(n)}catch(e){return t}}(e,n)+(r?" "+r:"")})}e7.prototype.M=function(){e7.Z.M.call(this),tn(this)},e7.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},tr.prototype.Aa=function(){this.g=!1},tr.prototype.info=function(){};var to={},ta=null;function ts(){return ta=ta||new e$}function tu(e){eA.call(this,to.Ma,e)}function tc(e){var t=ts();eQ(t,new tu(t,e))}function tl(e,t){eA.call(this,to.STAT_EVENT,e),this.stat=t}function th(e){var t=ts();eQ(t,new tl(t,e))}function tf(e,t){eA.call(this,to.Na,e),this.size=t}function td(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return K.setTimeout(function(){e()},t)}to.Ma="serverreachability",J(tu,eA),to.STAT_EVENT="statevent",J(tl,eA),to.Na="timingevent",J(tf,eA);var tp={NO_ERROR:0,TIMEOUT:8},tg={};function tv(){}function ty(e){return e.h||(e.h=e.i())}function tm(){}tv.prototype.h=null;var tb={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function t_(){eA.call(this,"d")}function tw(){eA.call(this,"c")}function tE(){}function tI(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new e7(this),this.P=tT,e=em?125:void 0,this.W=new e5(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new tC}function tC(){this.i=null,this.g="",this.h=!1}J(t_,eA),J(tw,eA),J(tE,tv),tE.prototype.g=function(){return new XMLHttpRequest},tE.prototype.i=function(){return{}},iY=new tE;var tT=45e3,tS={},tk={};function tD(e,t,n){e.K=1,e.v=tY(tK(t)),e.s=n,e.U=!0,tA(e,null)}function tA(e,t){e.F=Date.now(),tx(e),e.A=tK(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),t7(n.h,"t",r),e.C=0,n=e.l.H,e.h=new tC,e.g=nZ(e.l,n?t:null,!e.s),0<e.O&&(e.L=new e9(Y(e.Ia,e,e.g),e.O)),tt(e.V,e.g,"readystatechange",e.gb),t=e.H?eh(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),tc(1),function(e,t,n,r,i,o){e.info(function(){if(e.g){if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null}else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.j,e.u,e.A,e.m,e.X,e.s)}function tP(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function tN(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;)if((r=function(e,t){var n=e.C,r=t.indexOf("\n",n);return -1==r?tk:isNaN(n=Number(t.substring(n,r)))?tS:(r+=1)+n>t.length?tk:(t=t.substr(r,n),e.C=r+n,t)}(e,n))==tk){4==t&&(e.o=4,th(14),i=!1),ti(e.j,e.m,null,"[Incomplete Response]");break}else if(r==tS){e.o=4,th(15),ti(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}else ti(e.j,e.m,r,null),tF(e,r);tP(e)&&r!=tk&&r!=tS&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,th(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),nG(t),t.L=!0,th(11))):(ti(e.j,e.m,n,"[Invalid Chunked Response]"),tL(e),tM(e))}function tx(e){e.Y=Date.now()+e.P,tO(e,e.P)}function tO(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=td(Y(e.eb,e),t)}function tR(e){e.B&&(K.clearTimeout(e.B),e.B=null)}function tM(e){0==e.l.G||e.I||n$(e.l,e)}function tL(e){tR(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,e4(e.W),tn(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function tF(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||na(n.i,e))){if(n.I=e.N,!e.J&&na(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(n.g.F+3e3<e.F)nH(n),nL(n);else break e}nK(n),th(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=td(Y(n.ab,n),6e3));if(1>=no(n.i)&&n.ka){try{n.ka()}catch(e){}n.ka=void 0}}else nY(n,11)}else if((e.J||n.g==e)&&nH(n),!ei(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var o=i[t];if(n.U=o[0],o=o[1],2==n.G){if("c"==o[0]){n.J=o[1],n.la=o[2];var a=o[3];null!=a&&(n.ma=a,n.h.info("VER="+n.ma));var s=o[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(ea(l,"spdy")||ea(l,"quic")||ea(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(ns(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,tQ(r.F,r.D,f))}}if(n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms")),(r=n).oa=nJ(r,r.H?r.la:null,r.W),e.J){nu(r.i,e);var d=r.K;d&&e.setTimeout(d),e.B&&(tR(e),tx(e)),r.g=e}else nW(r);0<n.l.length&&nU(n)}else"stop"!=o[0]&&"close"!=o[0]||nY(n,7)}else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?nY(n,7):nM(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}}tc(4)}catch(e){}}function tj(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(z(e)||"string"==typeof e)et(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(z(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(z(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function tU(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e){if(e instanceof tU)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}}function tq(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];tB(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)tB(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function tB(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(B=tI.prototype).setTimeout=function(e){this.P=e},B.gb=function(e){e=e.target;var t=this.L;t&&3==nP(e)?t.l():this.Ia(e)},B.Ia=function(e){try{if(e==this.g)e:{var t=nP(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||em||this.g&&(this.h.h||this.g.ga()||nN(this.g)))){this.I||4!=t||7==n||(8==n||0>=r?tc(3):tc(2)),tR(this);var i=this.g.ba();this.N=i;t:if(tP(this)){var o=nN(this.g);e="";var a=o.length,s=4==nP(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){tL(this),tM(this);var u="";break t}this.h.i=new K.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(o[n],{stream:s&&n==a-1});o.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,o,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a})}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ei(c)){var h=c;break t}}h=null}if(i=h)ti(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,tF(this,i);else{this.i=!1,this.o=3,th(12),tL(this),tM(this);break e}}this.U?(tN(this,t,u),em&&this.i&&3==t&&(tt(this.V,this.W,"tick",this.fb),this.W.start())):(ti(this.j,this.m,u,null),tF(this,u)),4==t&&tL(this),this.i&&!this.I&&(4==t?n$(this.l,this):(this.i=!1,tx(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,th(12)):(this.o=0,th(13)),tL(this),tM(this)}}}catch(e){}finally{}},B.fb=function(){if(this.g){var e=nP(this.g),t=this.g.ga();this.C<t.length&&(tR(this),tN(this,e,t),this.i&&4!=e&&tx(this))}},B.cancel=function(){this.I=!0,tL(this)},B.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(tc(3),th(17)),tL(this),this.o=2,tM(this)):tO(this,this.Y-e)},(B=tU.prototype).R=function(){tq(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},B.T=function(){return tq(this),this.g.concat()},B.get=function(e,t){return tB(this.h,e)?this.h[e]:t},B.set=function(e,t){tB(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},B.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var tV=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function tW(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof tW){this.g=void 0!==t?t:e.g,tG(this,e.j),this.s=e.s,tz(this,e.i),tH(this,e.m),this.l=e.l,t=e.h;var n=new t5;n.i=t.i,t.g&&(n.g=new tU(t.g),n.h=t.h),t$(this,n),this.o=e.o}else e&&(n=String(e).match(tV))?(this.g=!!t,tG(this,n[1]||"",!0),this.s=tX(n[2]||""),tz(this,n[3]||"",!0),tH(this,n[4]),this.l=tX(n[5]||"",!0),t$(this,n[6]||"",!0),this.o=tX(n[7]||"")):(this.g=!!t,this.h=new t5(null,this.g))}function tK(e){return new tW(e)}function tG(e,t,n){e.j=n?tX(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function tz(e,t,n){e.i=n?tX(t,!0):t}function tH(e,t){if(t){if(isNaN(t=Number(t))||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function t$(e,t,n){var r,i;t instanceof t5?(e.h=t,r=e.h,(i=e.g)&&!r.j&&(t4(r),r.i=null,r.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(t8(this,t),t7(this,n,e))},r)),r.j=i):(n||(t=tJ(t,t3)),e.h=new t5(t,e.g))}function tQ(e,t,n){e.h.set(t,n)}function tY(e){return tQ(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function tX(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function tJ(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,tZ),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function tZ(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}tW.prototype.toString=function(){var e=[],t=this.j;t&&e.push(tJ(t,t0,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(tJ(t,t0,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(tJ(n,"/"==n.charAt(0)?t2:t1,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",tJ(n,t6)),e.join("")};var t0=/[#\/\?@]/g,t1=/[#\?:]/g,t2=/[#\?]/g,t3=/[#\?@]/g,t6=/#/g;function t5(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function t4(e){e.g||(e.g=new tU,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function t8(e,t){t4(e),t=ne(e,t),tB(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,tB((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&tq(e)))}function t9(e,t){return t4(e),t=ne(e,t),tB(e.g.h,t)}function t7(e,t,n){t8(e,t),0<n.length&&(e.i=null,e.g.set(ne(e,t),er(n)),e.h+=n.length)}function ne(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(B=t5.prototype).add=function(e,t){t4(this),this.i=null,e=ne(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},B.forEach=function(e,t){t4(this),this.g.forEach(function(n,r){et(n,function(n){e.call(t,n,r,this)},this)},this)},B.T=function(){t4(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},B.R=function(e){t4(this);var t=[];if("string"==typeof e)t9(this,e)&&(t=en(t,this.g.get(ne(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=en(t,e[n])}return t},B.set=function(e,t){return t4(this),this.i=null,t9(this,e=ne(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},B.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},B.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.i=e.join("&")};var nt=function(e,t){this.h=e,this.g=t};function nn(e){this.l=e||nr,e=K.PerformanceNavigationTiming?0<(e=K.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(K.g&&K.g.Ea&&K.g.Ea()&&K.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var nr=10;function ni(e){return!!e.h||!!e.g&&e.g.size>=e.j}function no(e){return e.h?1:e.g?e.g.size:0}function na(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ns(e,t){e.g?e.g.add(t):e.h=t}function nu(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nc(e){var t,n;if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var r=e.i;try{for(var i=q(e.g.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.D)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}return er(e.i)}function nl(){}function nh(){this.g=new nl}function nf(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}function nd(e){this.l=e.$b||null,this.j=e.ib||!1}function np(e,t){e$.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=ng,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}nn.prototype.cancel=function(){var e,t;if(this.i=nc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=q(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.g.clear()}},nl.prototype.stringify=function(e){return K.JSON.stringify(e,void 0)},nl.prototype.parse=function(e){return K.JSON.parse(e,void 0)},J(nd,tv),nd.prototype.g=function(){return new np(this.l,this.j)},nd.prototype.i=(iG={},function(){return iG}),J(np,e$);var ng=0;function nv(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function ny(e){e.readyState=4,e.l=null,e.j=null,e.A=null,nm(e)}function nm(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(B=np.prototype).open=function(e,t){if(this.readyState!=ng)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,nm(this)},B.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||K).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},B.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ny(this)),this.readyState=ng},B.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,nm(this)),this.g&&(this.readyState=3,nm(this),this.g))){if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==K.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;nv(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))}},B.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ny(this):nm(this),3==this.readyState&&nv(this)}},B.Ua=function(e){this.g&&(this.response=this.responseText=e,ny(this))},B.Ta=function(e){this.g&&(this.response=e,ny(this))},B.ha=function(){this.g&&ny(this)},B.setRequestHeader=function(e,t){this.v.append(e,t)},B.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},B.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)e.push((n=n.value)[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(np.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var nb=K.JSON.parse;function n_(e){e$.call(this),this.headers=new tU,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=nw,this.K=this.L=!1}J(n_,e$);var nw="",nE=/^https?$/i,nI=["POST","PUT"];function nC(e){return"content-type"==e.toLowerCase()}function nT(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,nS(e),nD(e)}function nS(e){e.D||(e.D=!0,eQ(e,"complete"),eQ(e,"error"))}function nk(e){if(e.h&&void 0!==W&&(!e.C[1]||4!=nP(e)||2!=e.ba())){if(e.v&&4==nP(e))e8(e.Fa,0,e);else if(eQ(e,"readystatechange"),4==nP(e)){e.h=!1;try{var t,n,r=e.ba();switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var i=!0;break;default:i=!1}if(!(t=i)){if(n=0===r){var o=String(e.H).match(tV)[1]||null;if(!o&&K.self&&K.self.location){var a=K.self.location.protocol;o=a.substr(0,a.length-1)}n=!nE.test(o?o.toLowerCase():"")}t=n}if(t)eQ(e,"complete"),eQ(e,"success");else{e.m=6;try{var s=2<nP(e)?e.g.statusText:""}catch(e){s=""}e.j=s+" ["+e.ba()+"]",nS(e)}}finally{nD(e)}}}}function nD(e,t){if(e.g){nA(e);var n=e.g,r=e.C[0]?G:null;e.g=null,e.C=null,t||eQ(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function nA(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(K.clearTimeout(e.A),e.A=null)}function nP(e){return e.g?e.g.readyState:0}function nN(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case nw:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function nx(e,t,n){e:{for(i in n){var r,i=!1;break e}i=!0}i||(r="",el(n,function(e,t){r+=t+":"+e+"\r\n"}),n=r,"string"==typeof e?null!=n&&encodeURIComponent(String(n)):tQ(e,t,n))}function nO(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function nR(e){this.za=0,this.l=[],this.h=new tr,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=nO("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=nO("baseRetryDelayMs",5e3,e),this.$a=nO("retryDelaySeedMs",1e4,e),this.Ya=nO("forwardChannelMaxRetries",2,e),this.ra=nO("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new nn(e&&e.concurrentRequestLimit),this.Ca=new nh,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function nM(e){if(nF(e),3==e.G){var t=e.V++,n=tK(e.F);tQ(n,"SID",e.J),tQ(n,"RID",t),tQ(n,"TYPE","terminate"),nB(e,n),(t=new tI(e,e.h,t,void 0)).K=2,t.v=tY(tK(n)),n=!1,K.navigator&&K.navigator.sendBeacon&&(n=K.navigator.sendBeacon(t.v.toString(),"")),!n&&K.Image&&((new Image).src=t.v,n=!0),n||(t.g=nZ(t.l,null),t.g.ea(t.v)),t.F=Date.now(),tx(t)}nX(e)}function nL(e){e.g&&(nG(e),e.g.cancel(),e.g=null)}function nF(e){nL(e),e.u&&(K.clearTimeout(e.u),e.u=null),nH(e),e.i.cancel(),e.m&&("number"==typeof e.m&&K.clearTimeout(e.m),e.m=null)}function nj(e,t){e.l.push(new nt(e.Za++,t)),3==e.G&&nU(e)}function nU(e){ni(e.i)||e.m||(e.m=!0,e1(e.Ha,e),e.C=0)}function nq(e,t){n=t?t.m:e.V++;var n,r=tK(e.F);tQ(r,"SID",e.J),tQ(r,"RID",n),tQ(r,"AID",e.U),nB(e,r),e.o&&e.s&&nx(r,e.o,e.s),n=new tI(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=nV(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),ns(e.i,n),tD(n,r,t)}function nB(e,t){e.j&&tj({},function(e,n){tQ(t,n,e)})}function nV(e,t,n){n=Math.min(e.l.length,n);for(var r=e.j?Y(e.j.Oa,e.j,e):null,i=e.l,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].h,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),s=!1;else try{!function(e,t,n){var r=n||"";try{tj(e,function(e,n){var i=e;H(e)&&(i=eX(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}(l,a,"req"+c+"_")}catch(e){r&&r(l)}}if(s){r=a.join("&");break}}return e=e.l.splice(0,n),t.D=e,r}function nW(e){e.g||e.u||(e.Y=1,e1(e.Ga,e),e.A=0)}function nK(e){return!e.g&&!e.u&&!(3<=e.A)&&(e.Y++,e.u=td(Y(e.Ga,e),nQ(e,e.A)),e.A++,!0)}function nG(e){null!=e.B&&(K.clearTimeout(e.B),e.B=null)}function nz(e){e.g=new tI(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=tK(e.oa);tQ(t,"RID","rpc"),tQ(t,"SID",e.J),tQ(t,"CI",e.N?"0":"1"),tQ(t,"AID",e.U),nB(e,t),tQ(t,"TYPE","xmlhttp"),e.o&&e.s&&nx(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=tY(tK(t)),n.s=null,n.U=!0,tA(n,e)}function nH(e){null!=e.v&&(K.clearTimeout(e.v),e.v=null)}function n$(e,t){var n=null;if(e.g==t){nH(e),nG(e),e.g=null;var r=2}else{if(!na(e.i,t))return;n=t.D,nu(e.i,t),r=1}if(e.I=t.N,0!=e.G){if(t.i){if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i,o=e.C;eQ(r=ts(),new tf(r,n,t,o)),nU(e)}else nW(e)}else if(3==(o=t.o)||0==o&&0<e.I||!(1==r&&(i=t,!(no(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=i.D.concat(e.l),!0):1!=e.G&&2!=e.G&&!(e.C>=(e.Xa?0:e.Ya))&&(e.m=td(Y(e.Ha,e,i),nQ(e,e.C)),e.C++,!0)))||2==r&&nK(e)))switch(n&&0<n.length&&((t=e.i).i=t.i.concat(n)),o){case 1:nY(e,5);break;case 4:nY(e,10);break;case 3:nY(e,6);break;default:nY(e,2)}}}function nQ(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function nY(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Y(e.jb,e);n||(n=new tW("//www.google.com/images/cleardot.gif"),K.location&&"http"==K.location.protocol||tG(n,"https"),tY(n)),function(e,t){var n=new tr;if(K.Image){var r=new Image;r.onload=X(nf,n,r,"TestLoadImage: loaded",!0,t),r.onerror=X(nf,n,r,"TestLoadImage: error",!1,t),r.onabort=X(nf,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=X(nf,n,r,"TestLoadImage: timeout",!1,t),K.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else th(2);e.G=0,e.j&&e.j.va(t),nX(e),nF(e)}function nX(e){e.G=0,e.I=-1,e.j&&((0!=nc(e.i).length||0!=e.l.length)&&(e.i.i.length=0,er(e.l),e.l.length=0),e.j.ua())}function nJ(e,t,n){var r=(i=n)instanceof tW?tK(i):new tW(i,void 0);if(""!=r.i)t&&tz(r,t+"."+r.i),tH(r,r.m);else{var i,o,a,s,u,c,l=K.location;o=l.protocol,a=t?t+"."+l.hostname:l.hostname,s=+l.port,u=n,c=new tW(null,void 0),o&&tG(c,o),a&&tz(c,a),s&&tH(c,s),u&&(c.l=u),r=c}return e.aa&&el(e.aa,function(e,t){tQ(r,t,e)}),t=e.D,n=e.sa,t&&n&&tQ(r,t,n),tQ(r,"VER",e.ma),nB(e,r),r}function nZ(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new n_(n&&e.Ba&&!e.qa?new nd({ib:!0}):e.qa)).L=e.H,t}function n0(){}function n1(){if(ev&&!(10<=Number(ek)))throw Error("Environmental error: no available transport.")}function n2(e,t){e$.call(this),this.g=new nR(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!ei(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ei(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new n5(this)}function n3(e){t_.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function n6(){tw.call(this),this.status=1}function n5(e){this.g=e}(B=n_.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():iY.g(),this.C=this.u?ty(this.u):ty(iY),this.g.onreadystatechange=Y(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(e){nT(this,e);return}e=n||"";var i,o=new tU(this.headers);r&&tj(r,function(e,t){o.set(t,e)}),r=function(e){e:{for(var t=nC,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(o.T()),n=K.FormData&&e instanceof K.FormData,!(0<=ee(nI,t))||r||n||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(e,t){this.g.setRequestHeader(t,e)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{nA(this),0<this.B&&((this.K=(i=this.g,ev&&(Object.prototype.hasOwnProperty.call(eS,9)?eS[9]:eS[9]=function(){for(var e=0,t=eo(String(iH)).split("."),n=eo("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var o=t[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;e=es(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||es(0==o[2].length,0==a[2].length)||es(o[2],a[2]),o=o[3],a=a[3]}while(0==e)}return 0<=e}(9))&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.g.timeout=this.B,this.g.ontimeout=Y(this.pa,this)):this.A=e8(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){nT(this,e)}},B.pa=function(){void 0!==W&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,eQ(this,"timeout"),this.abort(8))},B.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,eQ(this,"complete"),eQ(this,"abort"),nD(this))},B.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),nD(this,!0)),n_.Z.M.call(this)},B.Fa=function(){this.s||(this.F||this.v||this.l?nk(this):this.cb())},B.cb=function(){nk(this)},B.ba=function(){try{return 2<nP(this)?this.g.status:-1}catch(e){return -1}},B.ga=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},B.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),nb(t)}},B.Da=function(){return this.m},B.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(B=nR.prototype).ma=8,B.G=1,B.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(e){}},B.Ha=function(e){if(this.m){if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new tI(this,this.h,e,void 0),n=this.s;if(this.P&&(n?ed(n=eh(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){t:{var o=this.l[i];if("__data__"in o.g&&"string"==typeof(o=o.g.__data__)){o=o.length;break t}o=void 0}if(void 0===o)break;if(4096<(r+=o)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=nV(this,t,r),tQ(i=tK(this.F),"RID",e),tQ(i,"CVER",22),this.D&&tQ(i,"X-HTTP-Session-Id",this.D),nB(this,i),this.o&&n&&nx(i,this.o,n),ns(this.i,t),this.Ra&&tQ(i,"TYPE","init"),this.ja?(tQ(i,"$req",r),tQ(i,"SID","null"),t.$=!0,tD(t,i,null)):tD(t,i,r),this.G=2}}else 3==this.G&&(e?nq(this,e):0==this.l.length||ni(this.i)||nq(this))}},B.Ga=function(){if(this.u=null,nz(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=td(Y(this.bb,this),e)}},B.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,th(10),nL(this),nz(this))},B.ab=function(){null!=this.v&&(this.v=null,nL(this),nK(this),th(19))},B.jb=function(e){e?(this.h.info("Successfully pinged google.com"),th(2)):(this.h.info("Failed to ping google.com"),th(1))},(B=n0.prototype).xa=function(){},B.wa=function(){},B.va=function(){},B.ua=function(){},B.Oa=function(){},n1.prototype.g=function(e,t){return new n2(e,t)},J(n2,e$),n2.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),e1(Y(e.hb,e,t))),th(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=nJ(e,null,e.W),nU(e)},n2.prototype.close=function(){nM(this.g)},n2.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,nj(this.g,t)}else this.v?((t={}).__data__=eX(e),nj(this.g,t)):nj(this.g,e)},n2.prototype.M=function(){this.g.j=null,delete this.j,nM(this.g),delete this.g,n2.Z.M.call(this)},J(n3,t_),J(n6,tw),J(n5,n0),n5.prototype.xa=function(){eQ(this.g,"a")},n5.prototype.wa=function(e){eQ(this.g,new n3(e))},n5.prototype.va=function(e){eQ(this.g,new n6(e))},n5.prototype.ua=function(){eQ(this.g,"b")},n1.prototype.createWebChannel=n1.prototype.g,n2.prototype.send=n2.prototype.u,n2.prototype.open=n2.prototype.m,n2.prototype.close=n2.prototype.close,tp.NO_ERROR=0,tp.TIMEOUT=8,tp.HTTP_ERROR=6,tg.COMPLETE="complete",tm.EventType=tb,tb.OPEN="a",tb.CLOSE="b",tb.ERROR="c",tb.MESSAGE="d",e$.prototype.listen=e$.prototype.N,n_.prototype.listenOnce=n_.prototype.O,n_.prototype.getLastError=n_.prototype.La,n_.prototype.getLastErrorCode=n_.prototype.Da,n_.prototype.getStatus=n_.prototype.ba,n_.prototype.getResponseJson=n_.prototype.Qa,n_.prototype.getResponseText=n_.prototype.ga,n_.prototype.send=n_.prototype.ea;var n4={PROXY:10,NOPROXY:11},n8=n(5409),n9=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.t(e)},this.i=function(e){return t.writeSequenceNumber(e)})}return e.prototype.t=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.i&&this.i(e),e},e}();n9.o=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var n7={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},re=function(e){function t(t,n){var r=this;return(r=e.call(this,n)||this).code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,L.__extends)(t,e),t}(Error),rt=new j.Logger("@firebase/firestore");function rn(){return rt.logLevel}function rr(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(rt.logLevel<=j.LogLevel.DEBUG){var r=t.map(ra);rt.debug.apply(rt,(0,L.__spreadArray)(["Firestore (8.10.0): "+e],r))}}function ri(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(rt.logLevel<=j.LogLevel.ERROR){var r=t.map(ra);rt.error.apply(rt,(0,L.__spreadArray)(["Firestore (8.10.0): "+e],r))}}function ro(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(rt.logLevel<=j.LogLevel.WARN){var r=t.map(ra);rt.warn.apply(rt,(0,L.__spreadArray)(["Firestore (8.10.0): "+e],r))}}function ra(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(e){void 0===e&&(e="Unexpected state");var t="FIRESTORE (8.10.0) INTERNAL ASSERTION FAILED: "+e;throw ri(t),Error(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ru=function(){function e(){}return e.u=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n},e}();function rc(e,t){return e<t?-1:e>t?1:0}function rl(e,t,n){return e.length===t.length&&e.every(function(e,r){return n(e,t[r])})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rh=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new re(n7.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800||e>=253402300800)throw new re(n7.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?rc(this.nanoseconds,e.nanoseconds):rc(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},e.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},e}(),rf=function(){function e(e){this.timestamp=e}return e.fromTimestamp=function(t){return new e(t)},e.min=function(){return new e(new rh(0,0))},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function rp(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function rg(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rv=function(){function e(e,t,n){void 0===t?t=0:t>e.length&&rs(),void 0===n?n=e.length-t:n>e.length-t&&rs(),this.segments=e,this.offset=t,this.len=n}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(e){n.push(e)}):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return -1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),ry=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,L.__extends)(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=[],i=0;i<e.length;i++){var o=e[i];if(o.indexOf("//")>=0)throw new re(n7.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");r.push.apply(r,o.split("/").filter(function(e){return e.length>0}))}return new t(r)},t.emptyPath=function(){return new t([])},t}(rv),rm=/^[_a-zA-Z][_a-zA-Z0-9]*$/,rb=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,L.__extends)(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.isValidIdentifier=function(e){return rm.test(e)},t.prototype.canonicalString=function(){return this.toArray().map(function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e}).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(e){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new re(n7.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new re(n7.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new re(n7.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?a=!a:"."!==s||a?r+=s:o(),i++}if(o(),a)throw new re(n7.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.emptyPath=function(){return new t([])},t}(rv),r_=function(){function e(e){this.fields=e,e.sort(rb.comparator)}return e.prototype.covers=function(e){for(var t=0,n=this.fields;t<n.length;t++)if(n[t].isPrefixOf(e))return!0;return!1},e.prototype.isEqual=function(e){return rl(this.fields,e.fields,function(e,t){return e.isEqual(t)})},e}(),rw=function(){function e(e){this.binaryString=e}return e.fromBase64String=function(t){return new e(atob(t))},e.fromUint8Array=function(t){return new e(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))},e.prototype.toBase64=function(){return btoa(this.binaryString)},e.prototype.toUint8Array=function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)},e.prototype.approximateByteSize=function(){return 2*this.binaryString.length},e.prototype.compareTo=function(e){return rc(this.binaryString,e.binaryString)},e.prototype.isEqual=function(e){return this.binaryString===e.binaryString},e}();rw.EMPTY_BYTE_STRING=new rw("");var rE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rI(e){if(e||rs(),"string"==typeof e){var t=0,n=rE.exec(e);if(n||rs(),n[1]){var r=n[1];t=Number(r=(r+"000000000").substr(0,9))}return{seconds:Math.floor(new Date(e).getTime()/1e3),nanos:t}}return{seconds:rC(e.seconds),nanos:rC(e.nanos)}}function rC(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function rT(e){return"string"==typeof e?rw.fromBase64String(e):rw.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function rk(e){var t=rI(e.mapValue.fields.__local_write_time__.timestampValue);return new rh(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(e){return null==e}function rA(e){return 0===e&&1/e==-1/0}function rP(e){return"number"==typeof e&&Number.isInteger(e)&&!rA(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rN=function(){function e(e){this.path=e}return e.fromPath=function(t){return new e(ry.fromString(t))},e.fromName=function(t){return new e(ry.fromString(t).popFirst(5))},e.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===ry.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return ry.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2==0},e.fromSegments=function(t){return new e(new ry(t.slice()))},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?rS(e)?4:10:rs()}function rO(e,t){var n=rx(e);if(n!==rx(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return rk(e).isEqual(rk(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=rI(e.timestampValue),r=rI(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return rT(e.bytesValue).isEqual(rT(t.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return rC(e.geoPointValue.latitude)===rC(t.geoPointValue.latitude)&&rC(e.geoPointValue.longitude)===rC(t.geoPointValue.longitude);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return rC(e.integerValue)===rC(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=rC(e.doubleValue),r=rC(t.doubleValue);return n===r?rA(n)===rA(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return rl(e.arrayValue.values||[],t.arrayValue.values||[],rO);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(rd(n)!==rd(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!rO(n[i],r[i])))return!1;return!0}(e,t);default:return rs()}}function rR(e,t){return void 0!==(e.values||[]).find(function(e){return rO(e,t)})}function rM(e,t){var n,r,i,o,a,s,u,c,l,h=rx(e),f=rx(t);if(h!==f)return rc(h,f);switch(h){case 0:return 0;case 1:return rc(e.booleanValue,t.booleanValue);case 2:return(n=rC(e.integerValue||e.doubleValue))<(r=rC(t.integerValue||t.doubleValue))?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1;case 3:return rL(e.timestampValue,t.timestampValue);case 4:return rL(rk(e),rk(t));case 5:return rc(e.stringValue,t.stringValue);case 6:return i=e.bytesValue,o=t.bytesValue,a=rT(i),s=rT(o),a.compareTo(s);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var o=rc(n[i],r[i]);if(0!==o)return o}return rc(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return u=e.geoPointValue,c=t.geoPointValue,0!==(l=rc(rC(u.latitude),rC(c.latitude)))?l:rc(rC(u.longitude),rC(c.longitude));case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var o=rM(n[i],r[i]);if(o)return o}return rc(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=rc(r[a],o[a]);if(0!==s)return s;var u=rM(n[r[a]],i[o[a]]);if(0!==u)return u}return rc(r.length,o.length)}(e.mapValue,t.mapValue);default:throw rs()}}function rL(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return rc(e,t);var n=rI(e),r=rI(t),i=rc(n.seconds,r.seconds);return 0!==i?i:rc(n.nanos,r.nanos)}function rF(e){var t,n,r;return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?"time("+(r=rI(e.timestampValue)).seconds+","+r.nanos+")":"stringValue"in e?e.stringValue:"bytesValue"in e?rT(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,rN.fromName(n).toString()):"geoPointValue"in e?"geo("+(t=e.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in e?function(e){for(var t="[",n=!0,r=0,i=e.values||[];r<i.length;r++)n?n=!1:t+=",",t+=rF(i[r]);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var t="{",n=!0,r=0,i=Object.keys(e.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:t+=",",t+=o+":"+rF(e.fields[o])}return t+"}"}(e.mapValue):rs()}function rj(e,t){return{referenceValue:"projects/"+e.projectId+"/databases/"+e.database+"/documents/"+t.path.canonicalString()}}function rU(e){return!!e&&"integerValue"in e}function rq(e){return!!e&&"arrayValue"in e}function rB(e){return!!e&&"nullValue"in e}function rV(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function rW(e){return!!e&&"mapValue"in e}function rK(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return rp(e.mapValue.fields,function(e,n){return t.mapValue.fields[e]=rK(n)}),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=rK(e.arrayValue.values[r]);return n}return Object.assign({},e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rG=function(){function e(e){this.value=e}return e.empty=function(){return new e({mapValue:{}})},e.prototype.field=function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!rW(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null},e.prototype.set=function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=rK(t)},e.prototype.setAll=function(e){var t=this,n=rb.emptyPath(),r={},i=[];e.forEach(function(e,o){if(!n.isImmediateParentOf(o)){var a=t.getFieldsMap(n);t.applyChanges(a,r,i),r={},i=[],n=o.popLast()}e?r[o.lastSegment()]=rK(e):i.push(o.lastSegment())});var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},e.prototype.delete=function(e){var t=this.field(e.popLast());rW(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]},e.prototype.isEqual=function(e){return rO(this.value,e.value)},e.prototype.getFieldsMap=function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];rW(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields},e.prototype.applyChanges=function(e,t,n){rp(t,function(t,n){return e[t]=n});for(var r=0;r<n.length;r++){var i=n[r];delete e[i]}},e.prototype.clone=function(){return new e(rK(this.value))},e}(),rz=function(){function e(e,t,n,r,i){this.key=e,this.documentType=t,this.version=n,this.data=r,this.documentState=i}return e.newInvalidDocument=function(t){return new e(t,0,rf.min(),rG.empty(),0)},e.newFoundDocument=function(t,n,r){return new e(t,1,n,r,0)},e.newNoDocument=function(t,n){return new e(t,2,n,rG.empty(),0)},e.newUnknownDocument=function(t,n){return new e(t,3,n,rG.empty(),2)},e.prototype.convertToFoundDocument=function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this},e.prototype.convertToNoDocument=function(e){return this.version=e,this.documentType=2,this.data=rG.empty(),this.documentState=0,this},e.prototype.convertToUnknownDocument=function(e){return this.version=e,this.documentType=3,this.data=rG.empty(),this.documentState=2,this},e.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},e.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(e.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isValidDocument=function(){return 0!==this.documentType},e.prototype.isFoundDocument=function(){return 1===this.documentType},e.prototype.isNoDocument=function(){return 2===this.documentType},e.prototype.isUnknownDocument=function(){return 3===this.documentType},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},e.prototype.clone=function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},e}(),rH=function(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r$(e,t,n,r,i,o,a){return void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new rH(e,t,n,r,i,o,a)}function rQ(e){if(null===e.h){var t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:"+e.filters.map(function(e){return e.field.canonicalString()+e.op.toString()+rF(e.value)}).join(",")+"|ob:"+e.orderBy.map(function(e){return e.field.canonicalString()+e.dir}).join(","),rD(e.limit)||(t+="|l:"+e.limit),e.startAt&&(t+="|lb:"+r9(e.startAt)),e.endAt&&(t+="|ub:"+r9(e.endAt)),e.h=t}return e.h}function rY(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(var n,r,i,o,a=0;a<e.orderBy.length;a++)if(n=e.orderBy[a],r=t.orderBy[a],!(n.dir===r.dir&&n.field.isEqual(r.field)))return!1;if(e.filters.length!==t.filters.length)return!1;for(var s=0;s<e.filters.length;s++)if(i=e.filters[s],o=t.filters[s],i.op!==o.op||!i.field.isEqual(o.field)||!rO(i.value,o.value))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!it(e.startAt,t.startAt)&&it(e.endAt,t.endAt)}function rX(e){return rN.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var rJ=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).field=t,i.op=n,i.value=r,i}return(0,L.__extends)(t,e),t.create=function(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.l(e,n,r):new rZ(e,n,r):"array-contains"===n?new r3(e,r):"in"===n?new r6(e,r):"not-in"===n?new r5(e,r):"array-contains-any"===n?new r4(e,r):new t(e,n,r)},t.l=function(e,t,n){return"in"===t?new r0(e,n):new r1(e,n)},t.prototype.matches=function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.m(rM(t,this.value)):null!==t&&rx(this.value)===rx(t)&&this.m(rM(t,this.value))},t.prototype.m=function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return rs()}},t.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}(function(){}),rZ=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,r)||this).key=rN.fromName(r.referenceValue),i}return(0,L.__extends)(t,e),t.prototype.matches=function(e){var t=rN.comparator(e.key,this.key);return this.m(t)},t}(rJ),r0=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"in",n)||this).keys=r2("in",n),r}return(0,L.__extends)(t,e),t.prototype.matches=function(e){return this.keys.some(function(t){return t.isEqual(e.key)})},t}(rJ),r1=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"not-in",n)||this).keys=r2("not-in",n),r}return(0,L.__extends)(t,e),t.prototype.matches=function(e){return!this.keys.some(function(t){return t.isEqual(e.key)})},t}(rJ);function r2(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(e){return rN.fromName(e.referenceValue)})}var r3=function(e){function t(t,n){return e.call(this,t,"array-contains",n)||this}return(0,L.__extends)(t,e),t.prototype.matches=function(e){var t=e.data.field(this.field);return rq(t)&&rR(t.arrayValue,this.value)},t}(rJ),r6=function(e){function t(t,n){return e.call(this,t,"in",n)||this}return(0,L.__extends)(t,e),t.prototype.matches=function(e){var t=e.data.field(this.field);return null!==t&&rR(this.value.arrayValue,t)},t}(rJ),r5=function(e){function t(t,n){return e.call(this,t,"not-in",n)||this}return(0,L.__extends)(t,e),t.prototype.matches=function(e){if(rR(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!rR(this.value.arrayValue,t)},t}(rJ),r4=function(e){function t(t,n){return e.call(this,t,"array-contains-any",n)||this}return(0,L.__extends)(t,e),t.prototype.matches=function(e){var t=this,n=e.data.field(this.field);return!(!rq(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(e){return rR(t.value.arrayValue,e)})},t}(rJ),r8=function(e,t){this.position=e,this.before=t};function r9(e){return(e.before?"b":"a")+":"+e.position.map(function(e){return rF(e)}).join(",")}var r7=function(e,t){void 0===t&&(t="asc"),this.field=e,this.dir=t};function ie(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var o=t[i],a=e.position[i];if(r=o.field.isKeyField()?rN.comparator(rN.fromName(a.referenceValue),n.key):rM(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function it(e,t){if(null===e)return null===t;if(null===t||e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!rO(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ir=function(e,t,n,r,i,o,a,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function ii(e){return new ir(e)}function io(e){return!rD(e.limit)&&"F"===e.limitType}function ia(e){return!rD(e.limit)&&"L"===e.limitType}function is(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function iu(e){for(var t=0,n=e.filters;t<n.length;t++){var r=n[t];if(r.g())return r.field}return null}function ic(e){return null!==e.collectionGroup}function il(e){if(null===e.p){e.p=[];var t=iu(e),n=is(e);if(null!==t&&null===n)t.isKeyField()||e.p.push(new r7(t)),e.p.push(new r7(rb.keyField(),"asc"));else{for(var r=!1,i=0,o=e.explicitOrderBy;i<o.length;i++){var a=o[i];e.p.push(a),a.field.isKeyField()&&(r=!0)}if(!r){var s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new r7(rb.keyField(),s))}}}return e.p}function ih(e){if(!e.T){if("F"===e.limitType)e.T=r$(e.path,e.collectionGroup,il(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var t=[],n=0,r=il(e);n<r.length;n++){var i=r[n],o="desc"===i.dir?"asc":"desc";t.push(new r7(i.field,o))}var a=e.endAt?new r8(e.endAt.position,!e.endAt.before):null,s=e.startAt?new r8(e.startAt.position,!e.startAt.before):null;e.T=r$(e.path,e.collectionGroup,t,e.filters,e.limit,a,s)}}return e.T}function id(e,t,n){return new ir(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ip(e,t){return rY(ih(e),ih(t))&&e.limitType===t.limitType}function ig(e){return rQ(ih(e))+"|lt:"+e.limitType}function iv(e){var t,n;return"Query(target="+(n=(t=ih(e)).path.canonicalString(),null!==t.collectionGroup&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=", filters: ["+t.filters.map(function(e){return e.field.canonicalString()+" "+e.op+" "+rF(e.value)}).join(", ")+"]"),rD(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=", orderBy: ["+t.orderBy.map(function(e){return e.field.canonicalString()+" ("+e.dir+")"}).join(", ")+"]"),t.startAt&&(n+=", startAt: "+r9(t.startAt)),t.endAt&&(n+=", endAt: "+r9(t.endAt)),"Target("+n+")")+"; limitType="+e.limitType+")"}function iy(e,t){var n;return t.isFoundDocument()&&(n=t.key.path,null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):rN.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n))&&function(e,t){for(var n=0,r=e.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}return!0}(e,t)&&function(e,t){for(var n=0,r=e.filters;n<r.length;n++)if(!r[n].matches(t))return!1;return!0}(e,t)&&!(e.startAt&&!ie(e.startAt,il(e),t))&&(!e.endAt||!ie(e.endAt,il(e),t))}function im(e){return function(t,n){for(var r=!1,i=0,o=il(e);i<o.length;i++){var a=o[i],s=function(e,t,n){var r,i,o,a=e.field.isKeyField()?rN.comparator(t.key,n.key):(r=e.field,i=t.data.field(r),o=n.data.field(r),null!==i&&null!==o?rM(i,o):rs());switch(e.dir){case"asc":return a;case"desc":return -1*a;default:return rs()}}(a,t,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(e,t){if(e.I){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rA(t)?"-0":t}}function i_(e){return{integerValue:""+e}}function iw(e,t){return rP(t)?i_(t):ib(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iE=function(){this._=void 0};function iI(e,t){return e instanceof iA?rU(t)||t&&"doubleValue"in t?t:{integerValue:0}:null}var iC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,L.__extends)(t,e),t}(iE),iT=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return(0,L.__extends)(t,e),t}(iE);function iS(e,t){for(var n=iN(t),r=function(e){n.some(function(t){return rO(t,e)})||n.push(e)},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ik=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return(0,L.__extends)(t,e),t}(iE);function iD(e,t){for(var n=iN(t),r=function(e){n=n.filter(function(t){return!rO(t,e)})},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var iA=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).R=t,r.A=n,r}return(0,L.__extends)(t,e),t}(iE);function iP(e){return rC(e.integerValue||e.doubleValue)}function iN(e){return rq(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ix=function(e,t){this.field=e,this.transform=t},iO=function(e,t){this.version=e,this.transformResults=t},iR=function(){function e(e,t){this.updateTime=e,this.exists=t}return e.none=function(){return new e},e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)},e}();function iM(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var iL=function(){};function iF(e,t,n){e instanceof iq?function(e,t,n){if(iM(e.precondition,t)){var r=e.value.clone(),i=iK(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(iU(t),r).setHasLocalMutations()}}(e,t,n):e instanceof iB?function(e,t,n){if(iM(e.precondition,t)){var r=iK(e.fieldTransforms,n,t),i=t.data;i.setAll(iV(e)),i.setAll(r),t.convertToFoundDocument(iU(t),i).setHasLocalMutations()}}(e,t,n):iM(e.precondition,t)&&t.convertToNoDocument(rf.min())}function ij(e,t){var n,r;return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(n=e.fieldTransforms,r=t.fieldTransforms,!!(void 0===n&&void 0===r||!(!n||!r)&&rl(n,r,function(e,t){var n,r;return e.field.isEqual(t.field)&&(n=e.transform,r=t.transform,n instanceof iT&&r instanceof iT||n instanceof ik&&r instanceof ik?rl(n.elements,r.elements,rO):n instanceof iA&&r instanceof iA?rO(n.A,r.A):n instanceof iC&&r instanceof iC)})))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function iU(e){return e.isFoundDocument()?e.version:rf.min()}var iq=function(e){function t(t,n,r,i){void 0===i&&(i=[]);var o=this;return(o=e.call(this)||this).key=t,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return(0,L.__extends)(t,e),t}(iL),iB=function(e){function t(t,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=e.call(this)||this).key=t,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return(0,L.__extends)(t,e),t}(iL);function iV(e){var t=new Map;return e.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}}),t}function iW(e,t,n){var r=new Map;e.length===n.length||rs();for(var i=0;i<n.length;i++){var o,a=e[i],s=a.transform,u=t.data.field(a.field);r.set(a.field,(o=n[i],s instanceof iT?iS(s,u):s instanceof ik?iD(s,u):o))}return r}function iK(e,t,n){for(var r=new Map,i=0;i<e.length;i++){var o=e[i],a=o.transform,s=n.data.field(o.field);r.set(o.field,function(e,t,n){var r,i,o;return e instanceof iC?(r={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:n.seconds,nanos:n.nanoseconds}}}},t&&(r.fields.__previous_value__=t),{mapValue:r}):e instanceof iT?iS(e,t):e instanceof ik?iD(e,t):(o=iP(i=iI(e,t))+iP(e.A),rU(i)&&rU(e.A)?i_(o):ib(e.R,o))}(a,s,t))}return r}var iG,iz,iH,i$,iQ,iY,iX,iJ,iZ=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,L.__extends)(t,e),t}(iL),i0=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,L.__extends)(t,e),t}(iL),i1=function(e){this.count=e};function i2(e){switch(e){case n7.OK:return rs();case n7.CANCELLED:case n7.UNKNOWN:case n7.DEADLINE_EXCEEDED:case n7.RESOURCE_EXHAUSTED:case n7.INTERNAL:case n7.UNAVAILABLE:case n7.UNAUTHENTICATED:return!1;case n7.INVALID_ARGUMENT:case n7.NOT_FOUND:case n7.ALREADY_EXISTS:case n7.PERMISSION_DENIED:case n7.FAILED_PRECONDITION:case n7.ABORTED:case n7.OUT_OF_RANGE:case n7.UNIMPLEMENTED:case n7.DATA_LOSS:return!0;default:return rs()}}function i3(e){if(void 0===e)return ri("GRPC error has no .code"),n7.UNKNOWN;switch(e){case iX.OK:return n7.OK;case iX.CANCELLED:return n7.CANCELLED;case iX.UNKNOWN:return n7.UNKNOWN;case iX.DEADLINE_EXCEEDED:return n7.DEADLINE_EXCEEDED;case iX.RESOURCE_EXHAUSTED:return n7.RESOURCE_EXHAUSTED;case iX.INTERNAL:return n7.INTERNAL;case iX.UNAVAILABLE:return n7.UNAVAILABLE;case iX.UNAUTHENTICATED:return n7.UNAUTHENTICATED;case iX.INVALID_ARGUMENT:return n7.INVALID_ARGUMENT;case iX.NOT_FOUND:return n7.NOT_FOUND;case iX.ALREADY_EXISTS:return n7.ALREADY_EXISTS;case iX.PERMISSION_DENIED:return n7.PERMISSION_DENIED;case iX.FAILED_PRECONDITION:return n7.FAILED_PRECONDITION;case iX.ABORTED:return n7.ABORTED;case iX.OUT_OF_RANGE:return n7.OUT_OF_RANGE;case iX.UNIMPLEMENTED:return n7.UNIMPLEMENTED;case iX.DATA_LOSS:return n7.DATA_LOSS;default:return rs()}}(iJ=iX||(iX={}))[iJ.OK=0]="OK",iJ[iJ.CANCELLED=1]="CANCELLED",iJ[iJ.UNKNOWN=2]="UNKNOWN",iJ[iJ.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",iJ[iJ.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",iJ[iJ.NOT_FOUND=5]="NOT_FOUND",iJ[iJ.ALREADY_EXISTS=6]="ALREADY_EXISTS",iJ[iJ.PERMISSION_DENIED=7]="PERMISSION_DENIED",iJ[iJ.UNAUTHENTICATED=16]="UNAUTHENTICATED",iJ[iJ.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",iJ[iJ.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",iJ[iJ.ABORTED=10]="ABORTED",iJ[iJ.OUT_OF_RANGE=11]="OUT_OF_RANGE",iJ[iJ.UNIMPLEMENTED=12]="UNIMPLEMENTED",iJ[iJ.INTERNAL=13]="INTERNAL",iJ[iJ.UNAVAILABLE=14]="UNAVAILABLE",iJ[iJ.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var i6=function(){function e(e,t){this.comparator=e,this.root=t||i4.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,i4.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,i4.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return -1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal(function(t,n){return e(t,n),!1})},e.prototype.toString=function(){var e=[];return this.inorderTraversal(function(t,n){return e.push(t+":"+n),!1}),"{"+e.join(", ")+"}"},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new i5(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new i5(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new i5(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new i5(this.root,e,this.comparator,!0)},e}(),i5=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),i4=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(0>n(t,i.key))i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){return Math.pow(2,this.check())<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw rs();var e=this.left.check();if(e!==this.right.check())throw rs();return e+(this.isRed()?0:1)},e}();i4.EMPTY=null,i4.RED=!0,i4.BLACK=!1,i4.EMPTY=new(function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw rs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw rs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw rs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw rs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw rs()},enumerable:!1,configurable:!0}),e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new i4(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var i8=function(){function e(e){this.comparator=e,this.data=new i6(this.comparator)}return e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal(function(t,n){return e(t),!1})},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new i9(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new i9(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach(function(e){t=t.add(e)}),t},e.prototype.isEqual=function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},e.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),i9=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),i7=new i6(rN.comparator),oe=new i6(rN.comparator),ot=new i6(rN.comparator),on=new i8(rN.comparator);function or(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=on,r=0;r<e.length;r++){var i=e[r];n=n.add(i)}return n}var oi=new i8(rc),oo=function(){function e(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r=new Map;return r.set(t,oa.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(rf.min(),r,oi,i7,or())},e}(),oa=function(){function e(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(rw.EMPTY_BYTE_STRING,n,or(),or(),or())},e}(),os=function(e,t,n,r){this.v=e,this.removedTargetIds=t,this.key=n,this.P=r},ou=function(e,t){this.targetId=e,this.V=t},oc=function(e,t,n,r){void 0===n&&(n=rw.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},ol=function(){function e(){this.S=0,this.D=od(),this.C=rw.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),e.prototype.O=function(e){e.approximateByteSize()>0&&(this.k=!0,this.C=e)},e.prototype.M=function(){var e=or(),t=or(),n=or();return this.D.forEach(function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:rs()}}),new oa(this.C,this.N,e,t,n)},e.prototype.L=function(){this.k=!1,this.D=od()},e.prototype.B=function(e,t){this.k=!0,this.D=this.D.insert(e,t)},e.prototype.q=function(e){this.k=!0,this.D=this.D.remove(e)},e.prototype.U=function(){this.S+=1},e.prototype.K=function(){this.S-=1},e.prototype.j=function(){this.k=!0,this.N=!0},e}(),oh=function(){function e(e){this.W=e,this.G=new Map,this.H=i7,this.J=of(),this.Y=new i8(rc)}return e.prototype.X=function(e){for(var t=0,n=e.v;t<n.length;t++){var r=n[t];e.P&&e.P.isFoundDocument()?this.Z(r,e.P):this.tt(r,e.key,e.P)}for(var i=0,o=e.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,e.key,e.P)},e.prototype.et=function(e){var t=this;this.forEachTarget(e,function(n){var r=t.nt(n);switch(e.state){case 0:t.st(n)&&r.O(e.resumeToken);break;case 1:r.K(),r.F||r.L(),r.O(e.resumeToken);break;case 2:r.K(),r.F||t.removeTarget(n);break;case 3:t.st(n)&&(r.j(),r.O(e.resumeToken));break;case 4:t.st(n)&&(t.it(n),r.O(e.resumeToken));break;default:rs()}})},e.prototype.forEachTarget=function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.G.forEach(function(e,r){n.st(r)&&t(r)})},e.prototype.rt=function(e){var t=e.targetId,n=e.V.count,r=this.ot(t);if(r){var i=r.target;if(rX(i)){if(0===n){var o=new rN(i.path);this.tt(t,o,rz.newNoDocument(o,rf.min()))}else 1===n||rs()}else this.ct(t)!==n&&(this.it(t),this.Y=this.Y.add(t))}},e.prototype.ut=function(e){var t=this,n=new Map;this.G.forEach(function(r,i){var o=t.ot(i);if(o){if(r.current&&rX(o.target)){var a=new rN(o.target.path);null!==t.H.get(a)||t.at(i,a)||t.tt(i,a,rz.newNoDocument(a,e))}r.$&&(n.set(i,r.M()),r.L())}});var r=or();this.J.forEach(function(e,n){var i=!0;n.forEachWhile(function(e){var n=t.ot(e);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(e))});var i=new oo(e,n,this.Y,this.H,r);return this.H=i7,this.J=of(),this.Y=new i8(rc),i},e.prototype.Z=function(e,t){if(this.st(e)){var n=this.at(e,t.key)?2:0;this.nt(e).B(t.key,n),this.H=this.H.insert(t.key,t),this.J=this.J.insert(t.key,this.ht(t.key).add(e))}},e.prototype.tt=function(e,t,n){if(this.st(e)){var r=this.nt(e);this.at(e,t)?r.B(t,1):r.q(t),this.J=this.J.insert(t,this.ht(t).delete(e)),n&&(this.H=this.H.insert(t,n))}},e.prototype.removeTarget=function(e){this.G.delete(e)},e.prototype.ct=function(e){var t=this.nt(e).M();return this.W.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},e.prototype.U=function(e){this.nt(e).U()},e.prototype.nt=function(e){var t=this.G.get(e);return t||(t=new ol,this.G.set(e,t)),t},e.prototype.ht=function(e){var t=this.J.get(e);return t||(t=new i8(rc),this.J=this.J.insert(e,t)),t},e.prototype.st=function(e){var t=null!==this.ot(e);return t||rr("WatchChangeAggregator","Detected inactive target",e),t},e.prototype.ot=function(e){var t=this.G.get(e);return t&&t.F?null:this.W.lt(e)},e.prototype.it=function(e){var t=this;this.G.set(e,new ol),this.W.getRemoteKeysForTarget(e).forEach(function(n){t.tt(e,n,null)})},e.prototype.at=function(e,t){return this.W.getRemoteKeysForTarget(e).has(t)},e}();function of(){return new i6(rN.comparator)}function od(){return new i6(rN.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var op={asc:"ASCENDING",desc:"DESCENDING"},og={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ov=function(e,t){this.databaseId=e,this.I=t};function oy(e,t){return e.I?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function om(e,t){return e.I?t.toBase64():t.toUint8Array()}function ob(e){var t;return e||rs(),rf.fromTimestamp(new rh((t=rI(e)).seconds,t.nanos))}function o_(e,t){return new ry(["projects",e.projectId,"databases",e.database]).child("documents").child(t).canonicalString()}function ow(e){var t=ry.fromString(e);return oU(t)||rs(),t}function oE(e,t){return o_(e.databaseId,t.path)}function oI(e,t){var n=ow(t);if(n.get(1)!==e.databaseId.projectId)throw new re(n7.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new re(n7.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new rN(ok(n))}function oC(e,t){return o_(e.databaseId,t)}function oT(e){var t=ow(e);return 4===t.length?ry.emptyPath():ok(t)}function oS(e){return new ry(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ok(e){return e.length>4&&"documents"===e.get(4)||rs(),e.popFirst(5)}function oD(e,t,n){return{name:oE(e,t),fields:n.value.mapValue.fields}}function oA(e,t,n){var r=oI(e,t.name),i=ob(t.updateTime),o=new rG({mapValue:{fields:t.fields}}),a=rz.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function oP(e,t){var n,r,i,o;if(t instanceof iq)n={update:oD(e,t.key,t.value)};else if(t instanceof iZ)n={delete:oE(e,t.key)};else if(t instanceof iB)n={update:oD(e,t.key,t.data),updateMask:(i=t.fieldMask,o=[],i.fields.forEach(function(e){return o.push(e.canonicalString())}),{fieldPaths:o})};else{if(!(t instanceof i0))return rs();n={verify:oE(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(function(e){return function(e,t){var n=t.transform;if(n instanceof iC)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof iT)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ik)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof iA)return{fieldPath:t.field.canonicalString(),increment:n.A};throw rs()}(0,e)})),t.precondition.isNone||(n.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:oy(e,r.updateTime.toTimestamp())}:void 0!==r.exists?{exists:r.exists}:rs()),n}function oN(e,t){var n,r=t.currentDocument?void 0!==(n=t.currentDocument).updateTime?iR.updateTime(ob(n.updateTime)):void 0!==n.exists?iR.exists(n.exists):iR.none():iR.none(),i=t.updateTransforms?t.updateTransforms.map(function(t){var n;return n=null,"setToServerValue"in t?("REQUEST_TIME"===t.setToServerValue||rs(),n=new iC):"appendMissingElements"in t?n=new iT(t.appendMissingElements.values||[]):"removeAllFromArray"in t?n=new ik(t.removeAllFromArray.values||[]):"increment"in t?n=new iA(e,t.increment):rs(),new ix(rb.fromServerFormat(t.fieldPath),n)}):[];if(t.update){t.update.name;var o=oI(e,t.update.name),a=new rG({mapValue:{fields:t.update.fields}});return t.updateMask?new iB(o,a,new r_((t.updateMask.fieldPaths||[]).map(function(e){return rb.fromServerFormat(e)})),r,i):new iq(o,a,r,i)}return t.delete?new iZ(oI(e,t.delete),r):t.verify?new i0(oI(e,t.verify),r):rs()}function ox(e,t){return{documents:[oC(e,t.path)]}}function oO(e,t){var n,r={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(r.parent=oC(e,i),r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r.parent=oC(e,i.popLast()),r.structuredQuery.from=[{collectionId:i.lastSegment()}]);var o=function(e){if(0!==e.length){var t=e.map(function(e){return function(e){if("=="===e.op){if(rV(e.value))return{unaryFilter:{field:oF(e.field),op:"IS_NAN"}};if(rB(e.value))return{unaryFilter:{field:oF(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(rV(e.value))return{unaryFilter:{field:oF(e.field),op:"IS_NOT_NAN"}};if(rB(e.value))return{unaryFilter:{field:oF(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oF(e.field),op:og[e.op],value:e.value}}}(e)});return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);o&&(r.structuredQuery.where=o);var a=function(e){if(0!==e.length)return e.map(function(e){return{field:oF(e.field),direction:op[e.dir]}})}(t.orderBy);a&&(r.structuredQuery.orderBy=a);var s=(n=t.limit,e.I||rD(n)?n:{value:n});return null!==s&&(r.structuredQuery.limit=s),t.startAt&&(r.structuredQuery.startAt=oM(t.startAt)),t.endAt&&(r.structuredQuery.endAt=oM(t.endAt)),r}function oR(e){var t,n,r=oT(e.parent),i=e.structuredQuery,o=i.from?i.from.length:0,a=null;if(o>0){1===o||rs();var s=i.from[0];s.allDescendants?a=s.collectionId:r=r.child(s.collectionId)}var u=[];i.where&&(u=function e(t){return t?void 0!==t.unaryFilter?[function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=oj(e.unaryFilter.field);return rJ.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=oj(e.unaryFilter.field);return rJ.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=oj(e.unaryFilter.field);return rJ.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=oj(e.unaryFilter.field);return rJ.create(i,"!=",{nullValue:"NULL_VALUE"});default:return rs()}}(t)]:void 0!==t.fieldFilter?[rJ.create(oj(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rs()}}(t.fieldFilter.op),t.fieldFilter.value)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e(t)}).reduce(function(e,t){return e.concat(t)}):rs():[]}(i.where));var c=[];i.orderBy&&(c=i.orderBy.map(function(e){return new r7(oj(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}));var l=null;i.limit&&(l=rD(n="object"==typeof(t=i.limit)?t.value:t)?null:n);var h=null;i.startAt&&(h=oL(i.startAt));var f=null;return i.endAt&&(f=oL(i.endAt)),new ir(r,a,c,u,l,"F",h,f)}function oM(e){return{before:e.before,values:e.position}}function oL(e){var t=!!e.before;return new r8(e.values||[],t)}function oF(e){return{fieldPath:e.canonicalString()}}function oj(e){return rb.fromServerFormat(e.fieldPath)}function oU(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oq(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t+="\x01\x01"),t=function(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\x00":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}(e.get(n),t);return t+"\x01\x01"}function oB(e){var t=e.length;if(t>=2||rs(),2===t)return"\x01"===e.charAt(0)&&"\x01"===e.charAt(1)||rs(),ry.emptyPath();for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf("\x01",o);switch((a<0||a>n)&&rs(),e.charAt(a+1)){case"\x01":var s=e.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(o,a)+"\x00";break;case"\x11":i+=e.substring(o,a+1);break;default:rs()}o=a+2}return new ry(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oV=function(e,t){this.seconds=e,this.nanoseconds=t},oW=function(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n};oW.store="owner",oW.key="owner";var oK=function(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n};oK.store="mutationQueues",oK.keyPath="userId";var oG=function(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};oG.store="mutations",oG.keyPath="batchId",oG.userMutationsIndex="userMutationsIndex",oG.userMutationsKeyPath=["userId","batchId"];var oz=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,oq(t)]},e.key=function(e,t,n){return[e,oq(t),n]},e}();oz.store="documentMutations",oz.PLACEHOLDER=new oz;var oH=function(e,t){this.path=e,this.readTime=t},o$=function(e,t){this.path=e,this.version=t},oQ=function(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};oQ.store="remoteDocuments",oQ.readTimeIndex="readTimeIndex",oQ.readTimeIndexPath="readTime",oQ.collectionReadTimeIndex="collectionReadTimeIndex",oQ.collectionReadTimeIndexPath=["parentPath","readTime"];var oY=function(e){this.byteSize=e};oY.store="remoteDocumentGlobal",oY.key="remoteDocumentGlobalKey";var oX=function(e,t,n,r,i,o,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};oX.store="targets",oX.keyPath="targetId",oX.queryTargetsIndexName="queryTargetsIndex",oX.queryTargetsKeyPath=["canonicalId","targetId"];var oJ=function(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n};oJ.store="targetDocuments",oJ.keyPath=["targetId","path"],oJ.documentTargetsIndex="documentTargetsIndex",oJ.documentTargetsKeyPath=["path","targetId"];var oZ=function(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r};oZ.key="targetGlobalKey",oZ.store="targetGlobal";var o0=function(e,t){this.collectionId=e,this.parent=t};o0.store="collectionParents",o0.keyPath=["collectionId","parent"];var o1=function(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r};o1.store="clientMetadata",o1.keyPath="clientId";var o2=function(e,t,n){this.bundleId=e,this.createTime=t,this.version=n};o2.store="bundles",o2.keyPath="bundleId";var o3=function(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n};o3.store="namedQueries",o3.keyPath="name";var o6=(0,L.__spreadArray)((0,L.__spreadArray)([],(0,L.__spreadArray)((0,L.__spreadArray)([],(0,L.__spreadArray)((0,L.__spreadArray)([],(0,L.__spreadArray)((0,L.__spreadArray)([],[oK.store,oG.store,oz.store,oQ.store,oX.store,oW.store,oZ.store,oJ.store]),[o1.store])),[oY.store])),[o0.store])),[o2.store,o3.store]),o5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",o4=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(e){return e()})},e}(),o8=function(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})},o9=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)},function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)})}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&rs(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}})},e.prototype.toPromise=function(){var e=this;return new Promise(function(t,n){e.next(t,n)})},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)},e.resolve=function(t){return new e(function(e,n){e(t)})},e.reject=function(t){return new e(function(e,n){n(t)})},e.waitFor=function(t){return new e(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(e){return n(e)})}),o=!0,i===r&&e()})},e.or=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next(function(n){return n?e.resolve(n):t()})},i=0;i<t.length;i++)r(t[i]);return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach(function(e,i){r.push(t.call(n,e,i))}),this.waitFor(r)},e}(),o7=function(){function e(e,t){var n=this;this.action=e,this.transaction=t,this.aborted=!1,this.ft=new o8,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){t.error?n.ft.reject(new an(e,t.error)):n.ft.resolve()},this.transaction.onerror=function(t){var r=as(t.target.error);n.ft.reject(new an(e,r))}}return e.open=function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(e){throw new an(n,e)}},Object.defineProperty(e.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),e.prototype.abort=function(e){e&&this.ft.reject(e),this.aborted||(rr("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){return new ai(this.transaction.objectStore(e))},e}(),ae=function(){function e(t,n,r){this.name=t,this.version=n,this.wt=r,12.2===e._t((0,F.getUA)())&&ri("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(e){return rr("SimpleDb","Removing database:",e),ao(window.indexedDB.deleteDatabase(e)).toPromise()},e.yt=function(){if("undefined"==typeof indexedDB)return!1;if(e.gt())return!0;var t=(0,F.getUA)(),n=e._t(t),r=e.Et(t);return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||0<n&&n<10||0<r&&r<4.5)},e.gt=function(){var e;return void 0!==n8&&"YES"===(null===(e=n8.env)||void 0===e?void 0:e.Tt)},e.It=function(e,t){return e.store(t)},e._t=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i);return Number(t?t[1].split("_").slice(0,2).join("."):"-1")},e.Et=function(e){var t=e.match(/Android ([\d.]+)/i);return Number(t?t[1].split(".").slice(0,2).join("."):"-1")},e.prototype.At=function(e){return(0,L.__awaiter)(this,void 0,void 0,function(){var t,n=this;return(0,L.__generator)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(rr("SimpleDb","Opening database:",this.name),t=this,[4,new Promise(function(t,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(e){t(e.target.result)},i.onblocked=function(){r(new an(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var n=t.target.error;"VersionError"===n.name?r(new re(n7.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new an(e,n))},i.onupgradeneeded=function(e){rr("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.wt.Rt(t,i.transaction,e.oldVersion,n.version).next(function(){rr("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:t.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(e){return n.bt(e)}),this.db)]}})})},e.prototype.vt=function(e){this.bt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},e.prototype.runTransaction=function(e,t,n,r){return(0,L.__awaiter)(this,void 0,void 0,function(){var i,o,a,s,u;return(0,L.__generator)(this,function(c){switch(c.label){case 0:i="readonly"===t,o=0,a=function(){var t,a,u,c,l;return(0,L.__generator)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,s.At(e)];case 2:return s.db=h.sent(),a=r(t=o7.open(s.db,e,i?"readonly":"readwrite",n)).catch(function(e){return t.abort(e),o9.reject(e)}).toPromise(),u={},a.catch(function(){}),[4,t.dt];case 3:return[2,(u.value=(h.sent(),a),u)];case 4:return l="FirebaseError"!==(c=h.sent()).name&&o<3,rr("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),s.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},s=this,c.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),at=function(){function e(e){this.Pt=e,this.Vt=!1,this.St=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.Pt=e},enumerable:!1,configurable:!0}),e.prototype.done=function(){this.Vt=!0},e.prototype.Ct=function(e){this.St=e},e.prototype.delete=function(){return ao(this.Pt.delete())},e}(),an=function(e){function t(t,n){var r=this;return(r=e.call(this,n7.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,L.__extends)(t,e),t}(re);function ar(e){return"IndexedDbTransactionError"===e.name}var ai=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(rr("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(rr("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),ao(n)},e.prototype.add=function(e){return rr("SimpleDb","ADD",this.store.name,e,e),ao(this.store.add(e))},e.prototype.get=function(e){var t=this;return ao(this.store.get(e)).next(function(n){return void 0===n&&(n=null),rr("SimpleDb","GET",t.store.name,e,n),n})},e.prototype.delete=function(e){return rr("SimpleDb","DELETE",this.store.name,e),ao(this.store.delete(e))},e.prototype.count=function(){return rr("SimpleDb","COUNT",this.store.name),ao(this.store.count())},e.prototype.Nt=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.xt(n,function(e,t){r.push(t)}).next(function(){return r})},e.prototype.kt=function(e,t){rr("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Ft=!1;var r=this.cursor(n);return this.xt(r,function(e,t,n){return n.delete()})},e.prototype.$t=function(e,t){t?n=e:(n={},t=e);var n,r=this.cursor(n);return this.xt(r,t)},e.prototype.Ot=function(e){var t=this.cursor({});return new o9(function(n,r){t.onerror=function(e){r(as(e.target.error))},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next(function(e){e?r.continue():n()}):n()}})},e.prototype.xt=function(e,t){var n=[];return new o9(function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new at(i),a=t(i.primaryKey,i.value,o);if(a instanceof o9){var s=a.catch(function(e){return o.done(),o9.reject(e)});n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return o9.waitFor(n)})},e.prototype.options=function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Ft?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function ao(e){return new o9(function(t,n){e.onsuccess=function(e){t(e.target.result)},e.onerror=function(e){n(as(e.target.error))}})}var aa=!1;function as(e){var t=ae._t((0,F.getUA)());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new re("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return aa||(aa=!0,setTimeout(function(){throw r},0)),r}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var au=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Mt=t,r.currentSequenceNumber=n,r}return(0,L.__extends)(t,e),t}(o4);function ac(e,t){return ae.It(e.Mt,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var al=function(){function e(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}return e.prototype.applyToRemoteDocument=function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&function(e,t,n){var r,i;e instanceof iq?(r=e.value.clone(),i=iW(e.fieldTransforms,t,n.transformResults),r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()):e instanceof iB?function(e,t,n){if(iM(e.precondition,t)){var r=iW(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(iV(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}(i,e,n[r])}},e.prototype.applyToLocalView=function(e){for(var t,n=0,r=this.baseMutations;n<r.length;n++)(t=r[n]).key.isEqual(e.key)&&iF(t,e,this.localWriteTime);for(var i=0,o=this.mutations;i<o.length;i++)(t=o[i]).key.isEqual(e.key)&&iF(t,e,this.localWriteTime)},e.prototype.applyToLocalDocumentSet=function(e){var t=this;this.mutations.forEach(function(n){var r=e.get(n.key);t.applyToLocalView(r),r.isValidDocument()||r.convertToNoDocument(rf.min())})},e.prototype.keys=function(){return this.mutations.reduce(function(e,t){return e.add(t.key)},or())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&rl(this.mutations,e.mutations,function(e,t){return ij(e,t)})&&rl(this.baseMutations,e.baseMutations,function(e,t){return ij(e,t)})},e}(),ah=function(){function e(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}return e.from=function(t,n,r){t.mutations.length===r.length||rs();for(var i=ot,o=t.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new e(t,n,r,i)},e}(),af=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=rf.min()),void 0===o&&(o=rf.min()),void 0===a&&(a=rw.EMPTY_BYTE_STRING),this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e}(),ad=function(e){this.Lt=e};function ap(e,t){if(t.document)return oA(e.Lt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=rN.fromSegments(t.noDocument.path),r=ab(t.noDocument.readTime),i=rz.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var o=rN.fromSegments(t.unknownDocument.path);return r=ab(t.unknownDocument.version),rz.newUnknownDocument(o,r)}return rs()}function ag(e,t,n){var r=av(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){var o,a={name:oE(o=e.Lt,t.key),fields:t.data.value.mapValue.fields,updateTime:oy(o,t.version.toTimestamp())},s=t.hasCommittedMutations;return new oQ(null,null,a,s,r,i)}if(t.isNoDocument()){var u=t.key.path.toArray(),c=am(t.version);return s=t.hasCommittedMutations,new oQ(null,new oH(u,c),null,s,r,i)}return t.isUnknownDocument()?new oQ(new o$(t.key.path.toArray(),am(t.version)),null,null,!0,r,i):rs()}function av(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function ay(e){var t=new rh(e[0],e[1]);return rf.fromTimestamp(t)}function am(e){var t=e.toTimestamp();return new oV(t.seconds,t.nanoseconds)}function ab(e){var t=new rh(e.seconds,e.nanoseconds);return rf.fromTimestamp(t)}function a_(e,t){for(var n=(t.baseMutations||[]).map(function(t){return oN(e.Lt,t)}),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var o=t.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var a=t.mutations.map(function(t){return oN(e.Lt,t)}),s=rh.fromMillis(t.localWriteTimeMs);return new al(t.batchId,s,n,a)}function aw(e){var t,n,r=ab(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?ab(e.lastLimboFreeSnapshotVersion):rf.min();return void 0!==e.query.documents?(1===(n=e.query).documents.length||rs(),t=ih(ii(oT(n.documents[0])))):t=ih(oR(e.query)),new af(t,e.targetId,0,e.lastListenSequenceNumber,r,i,rw.fromBase64String(e.resumeToken))}function aE(e,t){var n,r=am(t.snapshotVersion),i=am(t.lastLimboFreeSnapshotVersion);n=rX(t.target)?ox(e.Lt,t.target):oO(e.Lt,t.target);var o=t.resumeToken.toBase64();return new oX(t.targetId,rQ(t.target),r,o,t.sequenceNumber,i,n)}function aI(e){var t=oR({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?id(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aC=function(){function e(){}return e.prototype.getBundleMetadata=function(e,t){return aT(e).get(t).next(function(e){if(e)return{id:e.bundleId,createTime:ab(e.createTime),version:e.version}})},e.prototype.saveBundleMetadata=function(e,t){return aT(e).put({bundleId:t.id,createTime:am(ob(t.createTime)),version:t.version})},e.prototype.getNamedQuery=function(e,t){return aS(e).get(t).next(function(e){if(e)return{name:e.name,query:aI(e.bundledQuery),readTime:ab(e.readTime)}})},e.prototype.saveNamedQuery=function(e,t){return aS(e).put({name:t.name,readTime:am(ob(t.readTime)),bundledQuery:t.bundledQuery})},e}();function aT(e){return ac(e,o2.store)}function aS(e){return ac(e,o3.store)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ak=function(){function e(){this.Bt=new aD}return e.prototype.addToCollectionParentIndex=function(e,t){return this.Bt.add(t),o9.resolve()},e.prototype.getCollectionParents=function(e,t){return o9.resolve(this.Bt.getEntries(t))},e}(),aD=function(){function e(){this.index={}}return e.prototype.add=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new i8(ry.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},e.prototype.has=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)},e.prototype.getEntries=function(e){return(this.index[e]||new i8(ry.comparator)).toArray()},e}(),aA=function(){function e(){this.qt=new aD}return e.prototype.addToCollectionParentIndex=function(e,t){var n=this;if(!this.qt.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(function(){n.qt.add(t)});var o={collectionId:r,parent:oq(i)};return aP(e).put(o)}return o9.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[t+"\x00",""],!1,!0);return aP(e).Nt(r).next(function(e){for(var r=0;r<e.length;r++){var i=e[r];if(i.collectionId!==t)break;n.push(oB(i.parent))}return n})},e}();function aP(e){return ac(e,o0.store)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ax=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aO(e,t,n){var r=e.store(oG.store),i=e.store(oz.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.$t({range:a},function(e,t,n){return s++,n.delete()});o.push(u.next(function(){1===s||rs()}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=oz.key(t,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return o9.waitFor(o).next(function(){return c})}function aR(e){var t;if(!e)return 0;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw rs();t=e.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ax.DEFAULT_COLLECTION_PERCENTILE=10,ax.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ax.DEFAULT=new ax(41943040,ax.DEFAULT_COLLECTION_PERCENTILE,ax.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ax.DISABLED=new ax(-1,0,0);var aM=function(){function e(e,t,n,r){this.userId=e,this.R=t,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return e.Qt=function(t,n,r,i){return""!==t.uid||rs(),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return aF(e).$t({index:oG.userMutationsIndex,range:n},function(e,n,r){t=!1,r.done()}).next(function(){return t})},e.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=aj(e),a=aF(e);return a.add({}).next(function(s){"number"==typeof s||rs();for(var u,c,l,h,f=new al(s,t,n,r),d=(u=i.R,c=i.userId,l=f.baseMutations.map(function(e){return oP(u.Lt,e)}),h=f.mutations.map(function(e){return oP(u.Lt,e)}),new oG(c,f.batchId,f.localWriteTime.toMillis(),l,h)),p=[],g=new i8(function(e,t){return rc(e.canonicalString(),t.canonicalString())}),v=0;v<r.length;v++){var y=r[v],m=oz.key(i.userId,y.key.path,s);g=g.add(y.key.path.popLast()),p.push(a.put(d)),p.push(o.put(m,oz.PLACEHOLDER))}return g.forEach(function(t){p.push(i.Ut.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(function(){i.Kt[s]=f.keys()}),o9.waitFor(p).next(function(){return f})})},e.prototype.lookupMutationBatch=function(e,t){var n=this;return aF(e).get(t).next(function(e){return e?(e.userId===n.userId||rs(),a_(n.R,e)):null})},e.prototype.jt=function(e,t){var n=this;return this.Kt[t]?o9.resolve(this.Kt[t]):this.lookupMutationBatch(e,t).next(function(e){if(e){var r=e.keys();return n.Kt[t]=r,r}return null})},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return aF(e).$t({index:oG.userMutationsIndex,range:i},function(e,t,i){t.userId===n.userId&&(t.batchId>=r||rs(),o=a_(n.R,t)),i.done()}).next(function(){return o})},e.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return aF(e).$t({index:oG.userMutationsIndex,range:t,reverse:!0},function(e,t,r){n=t.batchId,r.done()}).next(function(){return n})},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return aF(e).Nt(oG.userMutationsIndex,n).next(function(e){return e.map(function(e){return a_(t.R,e)})})},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=oz.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return aj(e).$t({range:i},function(r,i,a){var s=r[0],u=r[1],c=r[2],l=oB(u);if(s===n.userId&&t.path.isEqual(l))return aF(e).get(c).next(function(e){if(!e)throw rs();e.userId===n.userId||rs(),o.push(a_(n.R,e))});a.done()}).next(function(){return o})},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new i8(rc),i=[];return t.forEach(function(t){var o=oz.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=aj(e).$t({range:a},function(e,i,o){var a=e[0],s=e[1],u=e[2],c=oB(s);a===n.userId&&t.path.isEqual(c)?r=r.add(u):o.done()});i.push(s)}),o9.waitFor(i).next(function(){return n.Wt(e,r)})},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this,r=t.path,i=r.length+1,o=oz.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new i8(rc);return aj(e).$t({range:a},function(e,t,o){var a=e[0],u=e[1],c=e[2],l=oB(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()}).next(function(){return n.Wt(e,s)})},e.prototype.Wt=function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(aF(e).get(t).next(function(e){if(null===e)throw rs();e.userId===n.userId||rs(),r.push(a_(n.R,e))}))}),o9.waitFor(i).next(function(){return r})},e.prototype.removeMutationBatch=function(e,t){var n=this;return aO(e.Mt,this.userId,t).next(function(r){return e.addOnCommittedListener(function(){n.Gt(t.batchId)}),o9.forEach(r,function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)})})},e.prototype.Gt=function(e){delete this.Kt[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next(function(n){if(!n)return o9.resolve();var r=IDBKeyRange.lowerBound(oz.prefixForUser(t.userId)),i=[];return aj(e).$t({range:r},function(e,n,r){if(e[0]===t.userId){var o=oB(e[1]);i.push(o)}else r.done()}).next(function(){0===i.length||rs()})})},e.prototype.containsKey=function(e,t){return aL(e,this.userId,t)},e.prototype.zt=function(e){var t=this;return aU(e).get(this.userId).next(function(e){return e||new oK(t.userId,-1,"")})},e}();function aL(e,t,n){var r=oz.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return aj(e).$t({range:o,Ft:!0},function(e,n,r){var o=e[0],s=e[1];e[2],o===t&&s===i&&(a=!0),r.done()}).next(function(){return a})}function aF(e){return ac(e,oG.store)}function aj(e){return ac(e,oz.store)}function aU(e){return ac(e,oK.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aq=function(){function e(e){this.Ht=e}return e.prototype.next=function(){return this.Ht+=2,this.Ht},e.Jt=function(){return new e(0)},e.Yt=function(){return new e(-1)},e}(),aB=function(){function e(e,t){this.referenceDelegate=e,this.R=t}return e.prototype.allocateTargetId=function(e){var t=this;return this.Xt(e).next(function(n){var r=new aq(n.highestTargetId);return n.highestTargetId=r.next(),t.Zt(e,n).next(function(){return n.highestTargetId})})},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.Xt(e).next(function(e){return rf.fromTimestamp(new rh(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))})},e.prototype.getHighestSequenceNumber=function(e){return this.Xt(e).next(function(e){return e.highestListenSequenceNumber})},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.Xt(e).next(function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Zt(e,i)})},e.prototype.addTargetData=function(e,t){var n=this;return this.te(e,t).next(function(){return n.Xt(e).next(function(r){return r.targetCount+=1,n.ee(t,r),n.Zt(e,r)})})},e.prototype.updateTargetData=function(e,t){return this.te(e,t)},e.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return aV(e).delete(t.targetId)}).next(function(){return n.Xt(e)}).next(function(t){return t.targetCount>0||rs(),t.targetCount-=1,n.Zt(e,t)})},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return aV(e).$t(function(a,s){var u=aw(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(e,u)))}).next(function(){return o9.waitFor(o)}).next(function(){return i})},e.prototype.forEachTarget=function(e,t){return aV(e).$t(function(e,n){t(aw(n))})},e.prototype.Xt=function(e){return aW(e).get(oZ.key).next(function(e){return null!==e||rs(),e})},e.prototype.Zt=function(e,t){return aW(e).put(oZ.key,t)},e.prototype.te=function(e,t){return aV(e).put(aE(this.R,t))},e.prototype.ee=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getTargetCount=function(e){return this.Xt(e).next(function(e){return e.targetCount})},e.prototype.getTargetData=function(e,t){var n=rQ(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return aV(e).$t({range:r,index:oX.queryTargetsIndexName},function(e,n,r){var o=aw(n);rY(t,o.target)&&(i=o,r.done())}).next(function(){return i})},e.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=aK(e);return t.forEach(function(t){var a=oq(t.path);i.push(o.put(new oJ(n,a))),i.push(r.referenceDelegate.addReference(e,n,t))}),o9.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=aK(e);return o9.forEach(t,function(t){var o=oq(t.path);return o9.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,n,t)])})},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=aK(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=aK(e),i=or();return r.$t({range:n,Ft:!0},function(e,t,n){var r=new rN(oB(e[1]));i=i.add(r)}).next(function(){return i})},e.prototype.containsKey=function(e,t){var n=oq(t.path),r=IDBKeyRange.bound([n],[n+"\x00"],!1,!0),i=0;return aK(e).$t({index:oJ.documentTargetsIndex,Ft:!0,range:r},function(e,t,n){var r=e[0];e[1],0!==r&&(i++,n.done())}).next(function(){return i>0})},e.prototype.lt=function(e,t){return aV(e).get(t).next(function(e){return e?aw(e):null})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(e){return ac(e,oX.store)}function aW(e){return ac(e,oZ.store)}function aK(e){return ac(e,oJ.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aG(e){return(0,L.__awaiter)(this,void 0,void 0,function(){return(0,L.__generator)(this,function(t){if(e.code!==n7.FAILED_PRECONDITION||e.message!==o5)throw e;return rr("LocalStore","Unexpectedly lost primary lease"),[2]})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function az(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=rc(n,i);return 0===a?rc(r,o):a}var aH=function(){function e(e){this.ne=e,this.buffer=new i8(az),this.se=0}return e.prototype.ie=function(){return++this.se},e.prototype.re=function(e){var t=[e,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();0>az(t,n)&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),e}(),a$=function(){function e(e,t){this.garbageCollector=e,this.asyncQueue=t,this.oe=!1,this.ce=null}return e.prototype.start=function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(e)},e.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),e.prototype.ue=function(e){var t=this,n=this.oe?3e5:6e4;rr("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return(0,L.__awaiter)(t,void 0,void 0,function(){var t;return(0,L.__generator)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,e.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return ar(t=n.sent())?(rr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t),[3,6]):[3,4];case 4:return[4,aG(t)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(e)];case 8:return n.sent(),[2]}})})})},e}(),aQ=function(){function e(e,t){this.ae=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.ae.he(e).next(function(e){return Math.floor(t/100*e)})},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return o9.resolve(n9.o);var r=new aH(t);return this.ae.forEachTarget(e,function(e){return r.re(e.sequenceNumber)}).next(function(){return n.ae.le(e,function(e){return r.re(e)})}).next(function(){return r.maxValue})},e.prototype.removeTargets=function(e,t,n){return this.ae.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.ae.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return -1===this.params.cacheSizeCollectionThreshold?(rr("LruGarbageCollector","Garbage collection skipped; disabled"),o9.resolve(aN)):this.getCacheSize(e).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(rr("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),aN):n.fe(e,t)})},e.prototype.getCacheSize=function(e){return this.ae.getCacheSize(e)},e.prototype.fe=function(e,t){var n,r,i,o,a,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(t){return t>c.params.maximumSequenceNumbersToCollect?(rr("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+t),r=c.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),c.nthSequenceNumber(e,r)}).next(function(r){return n=r,a=Date.now(),c.removeTargets(e,n,t)}).next(function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)}).next(function(e){return u=Date.now(),rn()<=j.LogLevel.DEBUG&&rr("LruGarbageCollector","LRU Garbage Collection\n	Counted targets in "+(o-l)+"ms\n	Determined least recently used "+r+" in "+(a-o)+"ms\n	Removed "+i+" targets in "+(s-a)+"ms\n	Removed "+e+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-l)+"ms"),o9.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})})},e}(),aY=function(){function e(e,t){this.db=e,this.garbageCollector=new aQ(this,t)}return e.prototype.he=function(e){var t=this.de(e);return this.db.getTargetCache().getTargetCount(e).next(function(e){return t.next(function(t){return e+t})})},e.prototype.de=function(e){var t=0;return this.le(e,function(e){t++}).next(function(){return t})},e.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},e.prototype.le=function(e,t){return this.we(e,function(e,n){return t(n)})},e.prototype.addReference=function(e,t,n){return aX(e,n)},e.prototype.removeReference=function(e,t,n){return aX(e,n)},e.prototype.removeTargets=function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)},e.prototype.markPotentiallyOrphaned=function(e,t){return aX(e,t)},e.prototype._e=function(e,t){var n;return n=!1,aU(e).Ot(function(r){return aL(e,r,t).next(function(e){return e&&(n=!0),o9.resolve(!e)})}).next(function(){return n})},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(e,function(a,s){if(s<=t){var u=n._e(e,a).next(function(t){if(!t)return o++,r.getEntry(e,a).next(function(){return r.removeEntry(a),aK(e).delete([0,oq(a.path)])})});i.push(u)}}).next(function(){return o9.waitFor(i)}).next(function(){return r.apply(e)}).next(function(){return o})},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)},e.prototype.updateLimboDocument=function(e,t){return aX(e,t)},e.prototype.we=function(e,t){var n,r=aK(e),i=n9.o;return r.$t({index:oJ.documentTargetsIndex},function(e,r){var o=e[0];e[1];var a=r.path,s=r.sequenceNumber;0===o?(i!==n9.o&&t(new rN(oB(n)),i),i=s,n=a):i=n9.o}).next(function(){i!==n9.o&&t(new rN(oB(n)),i)})},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}();function aX(e,t){var n;return aK(e).put((n=e.currentSequenceNumber,new oJ(0,oq(t.path),n)))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aJ=function(){function e(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0;r<n.length;r++){var i=n[r],o=i[0],a=i[1];if(this.equalsFn(o,e))return a}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){rp(this.inner,function(t,n){for(var r=0;r<n.length;r++){var i=n[r];e(i[0],i[1])}})},e.prototype.isEmpty=function(){return rg(this.inner)},e}(),aZ=function(){function e(){this.changes=new aJ(function(e){return e.toString()},function(e,t){return e.isEqual(t)}),this.changesApplied=!1}return e.prototype.getReadTime=function(e){var t=this.changes.get(e);return t?t.readTime:rf.min()},e.prototype.addEntry=function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})},e.prototype.removeEntry=function(e,t){void 0===t&&(t=null),this.assertNotApplied(),this.changes.set(e,{document:rz.newInvalidDocument(e),readTime:t})},e.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?o9.resolve(n.document):this.getFromCache(e,t)},e.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},e.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},e.prototype.assertNotApplied=function(){},e}(),a0=function(){function e(e,t){this.R=e,this.Ut=t}return e.prototype.addEntry=function(e,t,n){return a3(e).put(a6(t),n)},e.prototype.removeEntry=function(e,t){var n=a3(e),r=a6(t);return n.delete(r)},e.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next(function(r){return r.byteSize+=t,n.me(e,r)})},e.prototype.getEntry=function(e,t){var n=this;return a3(e).get(a6(t)).next(function(e){return n.ye(t,e)})},e.prototype.ge=function(e,t){var n=this;return a3(e).get(a6(t)).next(function(e){return{document:n.ye(t,e),size:aR(e)}})},e.prototype.getEntries=function(e,t){var n=this,r=i7;return this.pe(e,t,function(e,t){var i=n.ye(e,t);r=r.insert(e,i)}).next(function(){return r})},e.prototype.Ee=function(e,t){var n=this,r=i7,i=new i6(rN.comparator);return this.pe(e,t,function(e,t){var o=n.ye(e,t);r=r.insert(e,o),i=i.insert(e,aR(t))}).next(function(){return{documents:r,Te:i}})},e.prototype.pe=function(e,t,n){if(t.isEmpty())return o9.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return a3(e).$t({range:r},function(e,t,r){for(var a=rN.fromSegments(e);o&&0>rN.comparator(o,a);)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},e.prototype.getDocumentsMatchingQuery=function(e,t,n){var r=this,i=i7,o=t.path.length+1,a={};if(n.isEqual(rf.min())){var s=t.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=t.path.toArray(),c=av(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=oQ.collectionReadTimeIndex}return a3(e).$t(a,function(e,n,a){if(e.length===o){var s=ap(r.R,n);t.path.isPrefixOf(s.key.path)?iy(t,s)&&(i=i.insert(s.key,s)):a.done()}}).next(function(){return i})},e.prototype.newChangeBuffer=function(e){return new a1(this,!!e&&e.trackRemovals)},e.prototype.getSize=function(e){return this.getMetadata(e).next(function(e){return e.byteSize})},e.prototype.getMetadata=function(e){return a2(e).get(oY.key).next(function(e){return e||rs(),e})},e.prototype.me=function(e,t){return a2(e).put(oY.key,t)},e.prototype.ye=function(e,t){if(t){var n=ap(this.R,t);if(!n.isNoDocument()||!n.version.isEqual(rf.min()))return n}return rz.newInvalidDocument(e)},e}(),a1=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Ie=t,r.trackRemovals=n,r.Ae=new aJ(function(e){return e.toString()},function(e,t){return e.isEqual(t)}),r}return(0,L.__extends)(t,e),t.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=new i8(function(e,t){return rc(e.canonicalString(),t.canonicalString())});return this.changes.forEach(function(o,a){var s=t.Ae.get(o);if(a.document.isValidDocument()){var u=ag(t.Ie.R,a.document,t.getReadTime(o));i=i.add(o.path.popLast());var c=aR(u);r+=c-s,n.push(t.Ie.addEntry(e,o,u))}else if(r-=s,t.trackRemovals){var l=ag(t.Ie.R,rz.newNoDocument(o,rf.min()),t.getReadTime(o));n.push(t.Ie.addEntry(e,o,l))}else n.push(t.Ie.removeEntry(e,o))}),i.forEach(function(r){n.push(t.Ie.Ut.addToCollectionParentIndex(e,r))}),n.push(this.Ie.updateMetadata(e,r)),o9.waitFor(n)},t.prototype.getFromCache=function(e,t){var n=this;return this.Ie.ge(e,t).next(function(e){return n.Ae.set(t,e.size),e.document})},t.prototype.getAllFromCache=function(e,t){var n=this;return this.Ie.Ee(e,t).next(function(e){var t=e.documents;return e.Te.forEach(function(e,t){n.Ae.set(e,t)}),t})},t}(aZ);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(e){return ac(e,oY.store)}function a3(e){return ac(e,oQ.store)}function a6(e){return e.path.toArray()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var a5=function(){function e(e){this.R=e}return e.prototype.Rt=function(e,t,n,r){var i=this;n<r&&n>=0&&r<=11||rs();var o=new o7("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(oW.store)}(e),e.createObjectStore(oK.store,{keyPath:oK.keyPath}),e.createObjectStore(oG.store,{keyPath:oG.keyPath,autoIncrement:!0}).createIndex(oG.userMutationsIndex,oG.userMutationsKeyPath,{unique:!0}),e.createObjectStore(oz.store),a4(e),function(e){e.createObjectStore(oQ.store)}(e));var a=o9.resolve();return n<3&&r>=3&&(0!==n&&(e.deleteObjectStore(oJ.store),e.deleteObjectStore(oX.store),e.deleteObjectStore(oZ.store),a4(e)),a=a.next(function(){var e,t;return e=o.store(oZ.store),t=new oZ(0,0,rf.min().toTimestamp(),0),e.put(oZ.key,t)})),n<4&&r>=4&&(0!==n&&(a=a.next(function(){return o.store(oG.store).Nt().next(function(t){e.deleteObjectStore(oG.store),e.createObjectStore(oG.store,{keyPath:oG.keyPath,autoIncrement:!0}).createIndex(oG.userMutationsIndex,oG.userMutationsKeyPath,{unique:!0});var n=o.store(oG.store),r=t.map(function(e){return n.put(e)});return o9.waitFor(r)})})),a=a.next(function(){!function(e){e.createObjectStore(o1.store,{keyPath:o1.keyPath})}(e)})),n<5&&r>=5&&(a=a.next(function(){return i.Re(o)})),n<6&&r>=6&&(a=a.next(function(){return function(e){e.createObjectStore(oY.store)}(e),i.be(o)})),n<7&&r>=7&&(a=a.next(function(){return i.ve(o)})),n<8&&r>=8&&(a=a.next(function(){return i.Pe(e,o)})),n<9&&r>=9&&(a=a.next(function(){var n;e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges"),(n=t.objectStore(oQ.store)).createIndex(oQ.readTimeIndex,oQ.readTimeIndexPath,{unique:!1}),n.createIndex(oQ.collectionReadTimeIndex,oQ.collectionReadTimeIndexPath,{unique:!1})})),n<10&&r>=10&&(a=a.next(function(){return i.Ve(o)})),n<11&&r>=11&&(a=a.next(function(){(function(e){e.createObjectStore(o2.store,{keyPath:o2.keyPath})})(e),function(e){e.createObjectStore(o3.store,{keyPath:o3.keyPath})}(e)})),a},e.prototype.be=function(e){var t=0;return e.store(oQ.store).$t(function(e,n){t+=aR(n)}).next(function(){var n=new oY(t);return e.store(oY.store).put(oY.key,n)})},e.prototype.Re=function(e){var t=this,n=e.store(oK.store),r=e.store(oG.store);return n.Nt().next(function(n){return o9.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(oG.userMutationsIndex,i).next(function(r){return o9.forEach(r,function(r){r.userId===n.userId||rs();var i=a_(t.R,r);return aO(e,n.userId,i).next(function(){})})})})})},e.prototype.ve=function(e){var t=e.store(oJ.store),n=e.store(oQ.store);return e.store(oZ.store).get(oZ.key).next(function(e){var r=[];return n.$t(function(n,i){var o=new ry(n),a=[0,oq(o)];r.push(t.get(a).next(function(n){return n?o9.resolve():t.put(new oJ(0,oq(o),e.highestListenSequenceNumber))}))}).next(function(){return o9.waitFor(r)})})},e.prototype.Pe=function(e,t){e.createObjectStore(o0.store,{keyPath:o0.keyPath});var n=t.store(o0.store),r=new aD,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:oq(i)})}};return t.store(oQ.store).$t({Ft:!0},function(e,t){return i(new ry(e).popLast())}).next(function(){return t.store(oz.store).$t({Ft:!0},function(e,t){e[0];var n=e[1];return e[2],i(oB(n).popLast())})})},e.prototype.Ve=function(e){var t=this,n=e.store(oX.store);return n.$t(function(e,r){var i=aw(r),o=aE(t.R,i);return n.put(o)})},e}();function a4(e){e.createObjectStore(oJ.store,{keyPath:oJ.keyPath}).createIndex(oJ.documentTargetsIndex,oJ.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(oX.store,{keyPath:oX.keyPath}).createIndex(oX.queryTargetsIndexName,oX.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(oZ.store)}var a8="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",a9=function(){function e(t,n,r,i,o,a,s,u,c,l){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(e){return Promise.resolve()},!e.yt())throw new re(n7.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new aY(this,i),this.Le=n+"main",this.R=new ad(u),this.Be=new ae(this.Le,11,new a5(this.R)),this.qe=new aB(this.referenceDelegate,this.R),this.Ut=new aA,this.Ue=new a0(this.R,this.Ut),this.Ke=new aC,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&ri("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e.prototype.start=function(){var e=this;return this.je().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new re(n7.FAILED_PRECONDITION,a8);return e.We(),e.Ge(),e.ze(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e.qe.getHighestSequenceNumber(t)})}).then(function(t){e.Ne=new n9(t,e.De)}).then(function(){e.xe=!0}).catch(function(t){return e.Be&&e.Be.close(),Promise.reject(t)})},e.prototype.He=function(e){var t=this;return this.Me=function(n){return(0,L.__awaiter)(t,void 0,void 0,function(){return(0,L.__generator)(this,function(t){return this.started?[2,e(n)]:[2]})})},e(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(e){var t=this;this.Be.vt(function(n){return(0,L.__awaiter)(t,void 0,void 0,function(){return(0,L.__generator)(this,function(t){switch(t.label){case 0:return null===n.newVersion?[4,e()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Se.enqueueAndForget(function(){return(0,L.__awaiter)(t,void 0,void 0,function(){return(0,L.__generator)(this,function(e){switch(e.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})}))},e.prototype.je=function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(t){return se(t).put(new o1(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next(function(){if(e.isPrimary)return e.Je(t).next(function(t){t||(e.isPrimary=!1,e.Se.enqueueRetryable(function(){return e.Me(!1)}))})}).next(function(){return e.Ye(t)}).next(function(n){return e.isPrimary&&!n?e.Xe(t).next(function(){return!1}):!!n&&e.Ze(t).next(function(){return!0})})}).catch(function(t){if(ar(t))return rr("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return rr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){e.isPrimary!==t&&e.Se.enqueueRetryable(function(){return e.Me(t)}),e.isPrimary=t})},e.prototype.Je=function(e){var t=this;return a7(e).get(oW.key).next(function(e){return o9.resolve(t.tn(e))})},e.prototype.en=function(e){return se(e).delete(this.clientId)},e.prototype.nn=function(){return(0,L.__awaiter)(this,void 0,void 0,function(){var e,t,n,r,i=this;return(0,L.__generator)(this,function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(e){var t=ac(e,o1.store);return t.Nt().next(function(e){var n=i.rn(e,18e5),r=e.filter(function(e){return -1===n.indexOf(e)});return o9.forEach(r,function(e){return t.delete(e.clientId)}).next(function(){return r})})}).catch(function(){return[]})]);case 1:if(e=o.sent(),this.Qe)for(t=0,n=e;t<n.length;t++)r=n[t],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}})})},e.prototype.ze=function(){var e=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return e.je().then(function(){return e.nn()}).then(function(){return e.ze()})})},e.prototype.tn=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.Ye=function(e){var t=this;return this.Ce?o9.resolve(!0):a7(e).get(oW.key).next(function(n){if(null!==n&&t.sn(n.leaseTimestampMs,5e3)&&!t.cn(n.ownerId)){if(t.tn(n)&&t.networkEnabled)return!0;if(!t.tn(n)){if(!n.allowTabSynchronization)throw new re(n7.FAILED_PRECONDITION,a8);return!1}}return!(!t.networkEnabled||!t.inForeground)||se(e).Nt().next(function(e){return void 0===t.rn(e,5e3).find(function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1})})}).next(function(e){return t.isPrimary!==e&&rr("IndexedDbPersistence","Client "+(e?"is":"is not")+" eligible for a primary lease."),e})},e.prototype.shutdown=function(){return(0,L.__awaiter)(this,void 0,void 0,function(){var e=this;return(0,L.__generator)(this,function(t){switch(t.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[oW.store,o1.store],function(t){var n=new au(t,n9.o);return e.Xe(n).next(function(){return e.en(n)})})];case 1:return t.sent(),this.Be.close(),this.ln(),[2]}})})},e.prototype.rn=function(e,t){var n=this;return e.filter(function(e){return n.sn(e.updateTimeMs,t)&&!n.cn(e.clientId)})},e.prototype.fn=function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return se(t).Nt().next(function(t){return e.rn(t,18e5).map(function(e){return e.clientId})})})},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.getMutationQueue=function(e){return aM.Qt(e,this.R,this.Ut,this.referenceDelegate)},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(e,t,n){var r,i=this;return rr("IndexedDbPersistence","Starting transaction:",e),this.Be.runTransaction(e,"readonly"===t?"readonly":"readwrite",o6,function(o){return r=new au(o,i.Ne?i.Ne.next():n9.o),"readwrite-primary"===t?i.Je(r).next(function(e){return!!e||i.Ye(r)}).next(function(t){if(!t)throw ri("Failed to obtain primary lease for action '"+e+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new re(n7.FAILED_PRECONDITION,o5);return n(r)}).next(function(e){return i.Ze(r).next(function(){return e})}):i.dn(r).next(function(){return n(r)})}).then(function(e){return r.raiseOnCommittedEvent(),e})},e.prototype.dn=function(e){var t=this;return a7(e).get(oW.key).next(function(e){if(null!==e&&t.sn(e.leaseTimestampMs,5e3)&&!t.cn(e.ownerId)&&!t.tn(e)&&!(t.Ce||t.allowTabSynchronization&&e.allowTabSynchronization))throw new re(n7.FAILED_PRECONDITION,a8)})},e.prototype.Ze=function(e){var t=new oW(this.clientId,this.allowTabSynchronization,Date.now());return a7(e).put(oW.key,t)},e.yt=function(){return ae.yt()},e.prototype.Xe=function(e){var t=this,n=a7(e);return n.get(oW.key).next(function(e){return t.tn(e)?(rr("IndexedDbPersistence","Releasing primary lease."),n.delete(oW.key)):o9.resolve()})},e.prototype.sn=function(e,t){var n=Date.now();return!(e<n-t||e>n&&(ri("Detected an update time that is in the future: "+e+" > "+n),1))},e.prototype.We=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){e.Se.enqueueAndForget(function(){return e.inForeground="visible"===e.document.visibilityState,e.je()})},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},e.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},e.prototype.Ge=function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ke=function(){t.un(),(0,F.isSafari)()&&navigator.appVersion.match("Version/14")&&t.Se.enterRestrictedMode(!0),t.Se.enqueueAndForget(function(){return t.shutdown()})},this.window.addEventListener("pagehide",this.ke))},e.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},e.prototype.cn=function(e){var t;try{var n=null!==(null===(t=this.Qe)||void 0===t?void 0:t.getItem(this.on(e)));return rr("IndexedDbPersistence","Client '"+e+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(e){return ri("IndexedDbPersistence","Failed to get zombied client id.",e),!1}},e.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(e){ri("Failed to set zombie client id.",e)}},e.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(e){}},e.prototype.on=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e}();function a7(e){return ac(e,oW.store)}function se(e){return ac(e,o1.store)}function st(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var sn=function(e,t){this.progress=e,this.wn=t},sr=function(){function e(e,t,n){this.Ue=e,this._n=t,this.Ut=n}return e.prototype.mn=function(e,t){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(e,t).next(function(r){return n.yn(e,t,r)})},e.prototype.yn=function(e,t,n){return this.Ue.getEntry(e,t).next(function(e){for(var t=0;t<n.length;t++)n[t].applyToLocalView(e);return e})},e.prototype.gn=function(e,t){e.forEach(function(e,n){for(var r=0;r<t.length;r++)t[r].applyToLocalView(n)})},e.prototype.pn=function(e,t){var n=this;return this.Ue.getEntries(e,t).next(function(t){return n.En(e,t).next(function(){return t})})},e.prototype.En=function(e,t){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(e,t).next(function(e){return n.gn(t,e)})},e.prototype.getDocumentsMatchingQuery=function(e,t,n){return rN.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length?this.Tn(e,t.path):ic(t)?this.In(e,t,n):this.An(e,t,n)},e.prototype.Tn=function(e,t){return this.mn(e,new rN(t)).next(function(e){var t=oe;return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})},e.prototype.In=function(e,t,n){var r=this,i=t.collectionGroup,o=oe;return this.Ut.getCollectionParents(e,i).next(function(a){return o9.forEach(a,function(a){var s=new ir(a.child(i),null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt);return r.An(e,s,n).next(function(e){e.forEach(function(e,t){o=o.insert(e,t)})})}).next(function(){return o})})},e.prototype.An=function(e,t,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(e,t,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(e,t)}).next(function(t){return i=t,o.Rn(e,i,r).next(function(e){r=e;for(var t=0;t<i.length;t++)for(var n=i[t],o=0,a=n.mutations;o<a.length;o++){var s=a[o],u=s.key,c=r.get(u);null==c&&(c=rz.newInvalidDocument(u),r=r.insert(u,c)),iF(s,c,n.localWriteTime),c.isFoundDocument()||(r=r.remove(u))}})}).next(function(){return r.forEach(function(e,n){iy(t,n)||(r=r.remove(e))}),r})},e.prototype.Rn=function(e,t,n){for(var r=or(),i=0;i<t.length;i++)for(var o=0,a=t[i].mutations;o<a.length;o++){var s=a[o];s instanceof iB&&null===n.get(s.key)&&(r=r.add(s.key))}var u=n;return this.Ue.getEntries(e,r).next(function(e){return e.forEach(function(e,t){t.isFoundDocument()&&(u=u.insert(e,t))}),u})},e}(),si=function(){function e(e,t,n,r){this.targetId=e,this.fromCache=t,this.bn=n,this.vn=r}return e.Pn=function(t,n){for(var r=or(),i=or(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),so=function(){function e(){}return e.prototype.Vn=function(e){this.Sn=e},e.prototype.getDocumentsMatchingQuery=function(e,t,n,r){var i=this;return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())||n.isEqual(rf.min())?this.Dn(e,t):this.Sn.pn(e,r).next(function(o){var a=i.Cn(t,o);return(io(t)||ia(t))&&i.Nn(t.limitType,a,r,n)?i.Dn(e,t):(rn()<=j.LogLevel.DEBUG&&rr("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),iv(t)),i.Sn.getDocumentsMatchingQuery(e,t,n).next(function(e){return a.forEach(function(t){e=e.insert(t.key,t)}),e}))})},e.prototype.Cn=function(e,t){var n=new i8(im(e));return t.forEach(function(t,r){iy(e,r)&&(n=n.add(r))}),n},e.prototype.Nn=function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},e.prototype.Dn=function(e,t){return rn()<=j.LogLevel.DEBUG&&rr("QueryEngine","Using full collection scan to execute query:",iv(t)),this.Sn.getDocumentsMatchingQuery(e,t,rf.min())},e}(),sa=function(){function e(e,t,n,r){this.persistence=e,this.xn=t,this.R=r,this.kn=new i6(rc),this.Fn=new aJ(function(e){return rQ(e)},rY),this.$n=rf.min(),this._n=e.getMutationQueue(n),this.On=e.getRemoteDocumentCache(),this.qe=e.getTargetCache(),this.Mn=new sr(this.On,this._n,this.persistence.getIndexManager()),this.Ke=e.getBundleCache(),this.xn.Vn(this.Mn)}return e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return e.collect(n,t.kn)})},e}();function ss(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return(0,L.__generator)(this,function(a){switch(a.label){case 0:return r=(n=e)._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(e){var o;return n._n.getAllMutationBatches(e).next(function(a){return o=a,r=n.persistence.getMutationQueue(t),i=new sr(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(e)}).next(function(t){for(var n=[],r=[],a=or(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var d=0;d<t.length;d++){var p=t[d];r.push(p.batchId);for(var g=0,v=p.mutations;g<v.length;g++){var y=v[g];a=a.add(y.key)}}return i.pn(e,a).next(function(e){return{Ln:e,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function su(e){return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function sc(e,t,n,r,i){var o=or();return n.forEach(function(e){return o=o.add(e)}),t.getEntries(e,o).next(function(e){var o=i7;return n.forEach(function(n,a){var s=e.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(rf.min())?(t.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(a,u),o=o.insert(n,a)):rr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)}),o})}function sl(e,t){return e.persistence.runTransaction("Allocate target","readwrite",function(n){var r;return e.qe.getTargetData(n,t).next(function(i){return i?(r=i,o9.resolve(r)):e.qe.allocateTargetId(n).next(function(i){return r=new af(t,i,0,n.currentSequenceNumber),e.qe.addTargetData(n,r).next(function(){return r})})})}).then(function(n){var r=e.kn.get(n.targetId);return(null===r||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.kn=e.kn.insert(n.targetId,n),e.Fn.set(t,n.targetId)),n})}function sh(e,t,n){return(0,L.__awaiter)(this,void 0,void 0,function(){var r,i,o,a;return(0,L.__generator)(this,function(s){switch(s.label){case 0:i=(r=e).kn.get(t),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(e){return r.persistence.referenceDelegate.removeTarget(e,i)})];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!ar(a=s.sent()))throw a;return rr("LocalStore","Failed to update sequence numbers for target "+t+": "+a),[3,5];case 5:return r.kn=r.kn.remove(t),r.Fn.delete(i.target),[2]}})})}function sf(e,t,n){var r=rf.min(),i=or();return e.persistence.runTransaction("Execute query","readonly",function(o){var a,s;return(a=ih(t),void 0!==(s=e.Fn.get(a))?o9.resolve(e.kn.get(s)):e.qe.getTargetData(o,a)).next(function(t){if(t)return r=t.lastLimboFreeSnapshotVersion,e.qe.getMatchingKeysForTargetId(o,t.targetId).next(function(e){i=e})}).next(function(){return e.xn.getDocumentsMatchingQuery(o,t,n?r:rf.min(),n?i:or())}).next(function(e){return{documents:e,Bn:i}})})}function sd(e,t){var n=e.qe,r=e.kn.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",function(e){return n.lt(e,t).next(function(e){return e?e.target:null})})}function sp(e){return e.persistence.runTransaction("Get new document changes","readonly",function(t){var n,r,i,o,a,s;return n=e.On,r=e.$n,i=i7,o=av(r),a=a3(t),s=IDBKeyRange.lowerBound(o,!0),a.$t({index:oQ.readTimeIndex,range:s},function(e,t){var r=ap(n.R,t);i=i.insert(r.key,r),o=t.readTime}).next(function(){return{wn:i,readTime:ay(o)}})}).then(function(t){var n=t.wn,r=t.readTime;return e.$n=r,n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sg=function(){function e(e){this.R=e,this.Qn=new Map,this.jn=new Map}return e.prototype.getBundleMetadata=function(e,t){return o9.resolve(this.Qn.get(t))},e.prototype.saveBundleMetadata=function(e,t){return this.Qn.set(t.id,{id:t.id,version:t.version,createTime:ob(t.createTime)}),o9.resolve()},e.prototype.getNamedQuery=function(e,t){return o9.resolve(this.jn.get(t))},e.prototype.saveNamedQuery=function(e,t){return this.jn.set(t.name,{name:t.name,query:aI(t.bundledQuery),readTime:ob(t.readTime)}),o9.resolve()},e}(),sv=function(){function e(){this.Wn=new i8(sy.Gn),this.zn=new i8(sy.Hn)}return e.prototype.isEmpty=function(){return this.Wn.isEmpty()},e.prototype.addReference=function(e,t){var n=new sy(e,t);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},e.prototype.Jn=function(e,t){var n=this;e.forEach(function(e){return n.addReference(e,t)})},e.prototype.removeReference=function(e,t){this.Yn(new sy(e,t))},e.prototype.Xn=function(e,t){var n=this;e.forEach(function(e){return n.removeReference(e,t)})},e.prototype.Zn=function(e){var t=this,n=new rN(new ry([])),r=new sy(n,e),i=new sy(n,e+1),o=[];return this.zn.forEachInRange([r,i],function(e){t.Yn(e),o.push(e.key)}),o},e.prototype.ts=function(){var e=this;this.Wn.forEach(function(t){return e.Yn(t)})},e.prototype.Yn=function(e){this.Wn=this.Wn.delete(e),this.zn=this.zn.delete(e)},e.prototype.es=function(e){var t=new rN(new ry([])),n=new sy(t,e),r=new sy(t,e+1),i=or();return this.zn.forEachInRange([n,r],function(e){i=i.add(e.key)}),i},e.prototype.containsKey=function(e){var t=new sy(e,0),n=this.Wn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),sy=function(){function e(e,t){this.key=e,this.ns=t}return e.Gn=function(e,t){return rN.comparator(e.key,t.key)||rc(e.ns,t.ns)},e.Hn=function(e,t){return rc(e.ns,t.ns)||rN.comparator(e.key,t.key)},e}(),sm=function(){function e(e,t){this.Ut=e,this.referenceDelegate=t,this._n=[],this.ss=1,this.rs=new i8(sy.Gn)}return e.prototype.checkEmpty=function(e){return o9.resolve(0===this._n.length)},e.prototype.addMutationBatch=function(e,t,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new al(i,t,n,r);this._n.push(o);for(var a=0;a<r.length;a++){var s=r[a];this.rs=this.rs.add(new sy(s.key,i)),this.Ut.addToCollectionParentIndex(e,s.key.path.popLast())}return o9.resolve(o)},e.prototype.lookupMutationBatch=function(e,t){return o9.resolve(this.os(t))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this.cs(t+1),r=n<0?0:n;return o9.resolve(this._n.length>r?this._n[r]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return o9.resolve(0===this._n.length?-1:this.ss-1)},e.prototype.getAllMutationBatches=function(e){return o9.resolve(this._n.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new sy(t,0),i=new sy(t,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(e){var t=n.os(e.ns);o.push(t)}),o9.resolve(o)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new i8(rc);return t.forEach(function(e){var t=new sy(e,0),i=new sy(e,Number.POSITIVE_INFINITY);n.rs.forEachInRange([t,i],function(e){r=r.add(e.ns)})}),o9.resolve(this.us(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=t.path,r=n.length+1,i=n;rN.isDocumentKey(i)||(i=i.child(""));var o=new sy(new rN(i),0),a=new i8(rc);return this.rs.forEachWhile(function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.ns)),!0)},o),o9.resolve(this.us(a))},e.prototype.us=function(e){var t=this,n=[];return e.forEach(function(e){var r=t.os(e);null!==r&&n.push(r)}),n},e.prototype.removeMutationBatch=function(e,t){var n=this;0===this.hs(t.batchId,"removed")||rs(),this._n.shift();var r=this.rs;return o9.forEach(t.mutations,function(i){var o=new sy(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(function(){n.rs=r})},e.prototype.Gt=function(e){},e.prototype.containsKey=function(e,t){var n=new sy(t,0),r=this.rs.firstAfterOrEqual(n);return o9.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return this._n.length,o9.resolve()},e.prototype.hs=function(e,t){return this.cs(e)},e.prototype.cs=function(e){return 0===this._n.length?0:e-this._n[0].batchId},e.prototype.os=function(e){var t=this.cs(e);return t<0||t>=this._n.length?null:this._n[t]},e}(),sb=function(){function e(e,t){this.Ut=e,this.ls=t,this.docs=new i6(rN.comparator),this.size=0}return e.prototype.addEntry=function(e,t,n){var r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(e,r.path.popLast())},e.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return o9.resolve(n?n.document.clone():rz.newInvalidDocument(t))},e.prototype.getEntries=function(e,t){var n=this,r=i7;return t.forEach(function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.clone():rz.newInvalidDocument(e))}),o9.resolve(r)},e.prototype.getDocumentsMatchingQuery=function(e,t,n){for(var r=i7,i=new rN(t.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.document,l=u.readTime;if(!t.path.isPrefixOf(s.path))break;0>=l.compareTo(n)||iy(t,c)&&(r=r.insert(c.key,c.clone()))}return o9.resolve(r)},e.prototype.fs=function(e,t){return o9.forEach(this.docs,function(e){return t(e)})},e.prototype.newChangeBuffer=function(e){return new s_(this)},e.prototype.getSize=function(e){return o9.resolve(this.size)},e}(),s_=function(e){function t(t){var n=this;return(n=e.call(this)||this).Ie=t,n}return(0,L.__extends)(t,e),t.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(t.Ie.addEntry(e,i.document,t.getReadTime(r))):t.Ie.removeEntry(r)}),o9.waitFor(n)},t.prototype.getFromCache=function(e,t){return this.Ie.getEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.Ie.getEntries(e,t)},t}(aZ),sw=function(){function e(e){this.persistence=e,this.ds=new aJ(function(e){return rQ(e)},rY),this.lastRemoteSnapshotVersion=rf.min(),this.highestTargetId=0,this.ws=0,this._s=new sv,this.targetCount=0,this.ys=aq.Jt()}return e.prototype.forEachTarget=function(e,t){return this.ds.forEach(function(e,n){return t(n)}),o9.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return o9.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return o9.resolve(this.ws)},e.prototype.allocateTargetId=function(e){return this.highestTargetId=this.ys.next(),o9.resolve(this.highestTargetId)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ws&&(this.ws=t),o9.resolve()},e.prototype.te=function(e){this.ds.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.ys=new aq(t),this.highestTargetId=t),e.sequenceNumber>this.ws&&(this.ws=e.sequenceNumber)},e.prototype.addTargetData=function(e,t){return this.te(t),this.targetCount+=1,o9.resolve()},e.prototype.updateTargetData=function(e,t){return this.te(t),o9.resolve()},e.prototype.removeTargetData=function(e,t){return this.ds.delete(t.target),this._s.Zn(t.targetId),this.targetCount-=1,o9.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.ds.forEach(function(a,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)}),o9.waitFor(o).next(function(){return i})},e.prototype.getTargetCount=function(e){return o9.resolve(this.targetCount)},e.prototype.getTargetData=function(e,t){var n=this.ds.get(t)||null;return o9.resolve(n)},e.prototype.addMatchingKeys=function(e,t,n){return this._s.Jn(t,n),o9.resolve()},e.prototype.removeMatchingKeys=function(e,t,n){this._s.Xn(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.markPotentiallyOrphaned(e,t))}),o9.waitFor(i)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this._s.Zn(t),o9.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this._s.es(t);return o9.resolve(n)},e.prototype.containsKey=function(e,t){return o9.resolve(this._s.containsKey(t))},e}(),sE=function(){function e(e,t){var n=this;this.gs={},this.Ne=new n9(0),this.xe=!1,this.xe=!0,this.referenceDelegate=e(this),this.qe=new sw(this),this.Ut=new ak,this.Ue=new sb(this.Ut,function(e){return n.referenceDelegate.ps(e)}),this.R=new ad(t),this.Ke=new sg(this.R)}return e.prototype.start=function(){return Promise.resolve()},e.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(){},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getMutationQueue=function(e){var t=this.gs[e.toKey()];return t||(t=new sm(this.Ut,this.referenceDelegate),this.gs[e.toKey()]=t),t},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(e,t,n){var r=this;rr("MemoryPersistence","Starting transaction:",e);var i=new sI(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(e){return r.referenceDelegate.Ts(i).next(function(){return e})}).toPromise().then(function(e){return i.raiseOnCommittedEvent(),e})},e.prototype.Is=function(e,t){return o9.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(e,t)}}))},e}(),sI=function(e){function t(t){var n=this;return(n=e.call(this)||this).currentSequenceNumber=t,n}return(0,L.__extends)(t,e),t}(o4),sC=function(){function e(e){this.persistence=e,this.As=new sv,this.Rs=null}return e.bs=function(t){return new e(t)},Object.defineProperty(e.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw rs()},enumerable:!1,configurable:!0}),e.prototype.addReference=function(e,t,n){return this.As.addReference(n,t),this.vs.delete(n.toString()),o9.resolve()},e.prototype.removeReference=function(e,t,n){return this.As.removeReference(n,t),this.vs.add(n.toString()),o9.resolve()},e.prototype.markPotentiallyOrphaned=function(e,t){return this.vs.add(t.toString()),o9.resolve()},e.prototype.removeTarget=function(e,t){var n=this;this.As.Zn(t.targetId).forEach(function(e){return n.vs.add(e.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(function(e){e.forEach(function(e){return n.vs.add(e.toString())})}).next(function(){return r.removeTargetData(e,t)})},e.prototype.Es=function(){this.Rs=new Set},e.prototype.Ts=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return o9.forEach(this.vs,function(r){var i=rN.fromPath(r);return t.Ps(e,i).next(function(e){e||n.removeEntry(i)})}).next(function(){return t.Rs=null,n.apply(e)})},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.Ps(e,t).next(function(e){e?n.vs.delete(t.toString()):n.vs.add(t.toString())})},e.prototype.ps=function(e){return 0},e.prototype.Ps=function(e,t){var n=this;return o9.or([function(){return o9.resolve(n.As.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Is(e,t)}])},e}(),sT=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(e,t){return"firestore_clients_"+e+"_"+t}function sk(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}function sD(e,t){return"firestore_targets_"+e+"_"+t}sT.UNAUTHENTICATED=new sT(null),sT.GOOGLE_CREDENTIALS=new sT("google-credentials-uid"),sT.FIRST_PARTY=new sT("first-party-uid"),sT.MOCK_USER=new sT("mock-user");var sA=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}return e.Vs=function(t,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new re(o.error.code,o.error.message)),a?new e(t,n,o.state,i):(ri("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),sP=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n}return e.Vs=function(t,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new re(i.error.code,i.error.message)),o?new e(t,i.state,r):(ri("SharedClientState","Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),sN=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.Vs=function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=oi,a=0;i&&a<r.activeTargetIds.length;++a)i=rP(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new e(t,o):(ri("SharedClientState","Failed to parse client data for instance '"+t+"': "+n),null)},e}(),sx=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.Vs=function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(ri("SharedClientState","Failed to parse online state: "+t),null)},e}(),sO=function(){function e(){this.activeTargetIds=oi}return e.prototype.Ds=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.Cs=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.Ss=function(){return JSON.stringify({activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()})},e}(),sR=function(){function e(e,t,n,r,i){this.window=e,this.Se=t,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new i6(rc),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=sS(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.Fs=this.Fs.insert(this.Ns,new sO),this.Ls=RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us="firestore_online_state_"+this.persistenceKey,this.Ks="firestore_bundle_loaded_"+this.persistenceKey,this.window.addEventListener("storage",this.xs)}return e.yt=function(e){return!(!e||!e.localStorage)},e.prototype.start=function(){return(0,L.__awaiter)(this,void 0,void 0,function(){var e,t,n,r,i,o,a,s,u,c,l,h=this;return(0,L.__generator)(this,function(f){switch(f.label){case 0:return[4,this.syncEngine.fn()];case 1:for(e=f.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.Ns&&(i=this.getItem(sS(this.persistenceKey,r)))&&(o=sN.Vs(r,i))&&(this.Fs=this.Fs.insert(o.clientId,o));for(this.Qs(),(a=this.storage.getItem(this.Us))&&(s=this.js(a))&&this.Ws(s),u=0,c=this.$s;u<c.length;u++)l=c[u],this.ks(l);return this.$s=[],this.window.addEventListener("pagehide",function(){return h.shutdown()}),this.started=!0,[2]}})})},e.prototype.writeSequenceNumber=function(e){this.setItem(this.Ms,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},e.prototype.isActiveQueryTarget=function(e){var t=!1;return this.Fs.forEach(function(n,r){r.activeTargetIds.has(e)&&(t=!0)}),t},e.prototype.addPendingMutation=function(e){this.zs(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.zs(e,t,n),this.Hs(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(sD(this.persistenceKey,e));if(n){var r=sP.Vs(e,n);r&&(t=r.state)}}return this.Js.Ds(e),this.Qs(),t},e.prototype.removeLocalQueryTarget=function(e){this.Js.Cs(e),this.Qs()},e.prototype.isLocalQueryTarget=function(e){return this.Js.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(sD(this.persistenceKey,e))},e.prototype.updateQueryState=function(e,t,n){this.Ys(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach(function(e){r.Hs(e)}),this.currentUser=e,n.forEach(function(e){r.addPendingMutation(e)})},e.prototype.setOnlineState=function(e){this.Xs(e)},e.prototype.notifyBundleLoaded=function(){this.Zs()},e.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return rr("SharedClientState","READ",e,t),t},e.prototype.setItem=function(e,t){rr("SharedClientState","SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){rr("SharedClientState","REMOVE",e),this.storage.removeItem(e)},e.prototype.ks=function(e){var t=this;if(e.storageArea===this.storage){if(rr("SharedClientState","EVENT",e.key,e.newValue),e.key===this.Os)return void ri("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,L.__awaiter)(t,void 0,void 0,function(){var t,n,r,i,o,a;return(0,L.__generator)(this,function(s){if(this.started){if(null!==e.key){if(this.Ls.test(e.key)){if(null==e.newValue)return t=this.ti(e.key),[2,this.ei(t,null)];if(n=this.ni(e.key,e.newValue))return[2,this.ei(n.clientId,n)]}else if(this.Bs.test(e.key)){if(null!==e.newValue&&(r=this.si(e.key,e.newValue)))return[2,this.ii(r)]}else if(this.qs.test(e.key)){if(null!==e.newValue&&(i=this.ri(e.key,e.newValue)))return[2,this.oi(i)]}else if(e.key===this.Us){if(null!==e.newValue&&(o=this.js(e.newValue)))return[2,this.Ws(o)]}else if(e.key===this.Ms)(a=function(e){var t=n9.o;if(null!=e)try{var n=JSON.parse(e);"number"==typeof n||rs(),t=n}catch(e){ri("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(e.newValue))!==n9.o&&this.sequenceNumberHandler(a);else if(e.key===this.Ks)return[2,this.syncEngine.ci()]}}else this.$s.push(e);return[2]})})})}},Object.defineProperty(e.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),e.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},e.prototype.zs=function(e,t,n){var r=new sA(this.currentUser,e,t,n),i=sk(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Ss())},e.prototype.Hs=function(e){var t=sk(this.persistenceKey,this.currentUser,e);this.removeItem(t)},e.prototype.Xs=function(e){var t={clientId:this.Ns,onlineState:e};this.storage.setItem(this.Us,JSON.stringify(t))},e.prototype.Ys=function(e,t,n){var r=sD(this.persistenceKey,e),i=new sP(e,t,n);this.setItem(r,i.Ss())},e.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},e.prototype.ti=function(e){var t=this.Ls.exec(e);return t?t[1]:null},e.prototype.ni=function(e,t){var n=this.ti(e);return sN.Vs(n,t)},e.prototype.si=function(e,t){var n=this.Bs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return sA.Vs(new sT(i),r,t)},e.prototype.ri=function(e,t){var n=Number(this.qs.exec(e)[1]);return sP.Vs(n,t)},e.prototype.js=function(e){return sx.Vs(e)},e.prototype.ii=function(e){return(0,L.__awaiter)(this,void 0,void 0,function(){return(0,L.__generator)(this,function(t){return e.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(e.batchId,e.state,e.error)]:(rr("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},e.prototype.oi=function(e){return this.syncEngine.ai(e.targetId,e.state,e.error)},e.prototype.ei=function(e,t){var n=this,r=t?this.Fs.insert(e,t):this.Fs.remove(e),i=this.Gs(this.Fs),o=this.Gs(r),a=[],s=[];return o.forEach(function(e){i.has(e)||a.push(e)}),i.forEach(function(e){o.has(e)||s.push(e)}),this.syncEngine.hi(a,s).then(function(){n.Fs=r})},e.prototype.Ws=function(e){this.Fs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)},e.prototype.Gs=function(e){var t=oi;return e.forEach(function(e,n){t=t.unionWith(n.activeTargetIds)}),t},e}(),sM=function(){function e(){this.li=new sO,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.li.Ds(e),this.fi[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.fi[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.li.Cs(e)},e.prototype.isLocalQueryTarget=function(e){return this.li.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.fi[e]},e.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.li.activeTargetIds.has(e)},e.prototype.start=function(){return this.li=new sO,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e.prototype.notifyBundleLoaded=function(){},e}(),sL=function(){function e(){}return e.prototype.di=function(e){},e.prototype.shutdown=function(){},e}(),sF=function(){function e(){var e=this;this.wi=function(){return e._i()},this.mi=function(){return e.yi()},this.gi=[],this.pi()}return e.prototype.di=function(e){this.gi.push(e)},e.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},e.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},e.prototype._i=function(){rr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(0)},e.prototype.yi=function(){rr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(1)},e.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),sj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},sU=function(){function e(e){this.Ei=e.Ei,this.Ti=e.Ti}return e.prototype.Ii=function(e){this.Ai=e},e.prototype.Ri=function(e){this.bi=e},e.prototype.onMessage=function(e){this.vi=e},e.prototype.close=function(){this.Ti()},e.prototype.send=function(e){this.Ei(e)},e.prototype.Pi=function(){this.Ai()},e.prototype.Vi=function(e){this.bi(e)},e.prototype.Si=function(e){this.vi(e)},e}(),sq=function(e){function t(t){var n=this;return(n=e.call(this,t)||this).forceLongPolling=t.forceLongPolling,n.autoDetectLongPolling=t.autoDetectLongPolling,n.useFetchStreams=t.useFetchStreams,n}return(0,L.__extends)(t,e),t.prototype.Fi=function(e,t,n,r){return new Promise(function(i,o){var a=new n_;a.listenOnce(tg.COMPLETE,function(){try{switch(a.getLastErrorCode()){case tp.NO_ERROR:var t=a.getResponseJson();rr("Connection","XHR received:",JSON.stringify(t)),i(t);break;case tp.TIMEOUT:rr("Connection",'RPC "'+e+'" timed out'),o(new re(n7.DEADLINE_EXCEEDED,"Request time out"));break;case tp.HTTP_ERROR:var n=a.getStatus();if(rr("Connection",'RPC "'+e+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s,u=(s=r.status.toLowerCase().replace(/_/g,"-"),Object.values(n7).indexOf(s)>=0?s:n7.UNKNOWN);o(new re(u,r.message))}else o(new re(n7.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new re(n7.UNAVAILABLE,"Connection failed."));break;default:rs()}}finally{rr("Connection",'RPC "'+e+'" completed.')}});var s=JSON.stringify(r);a.send(t,"POST",s,n,15)})},t.prototype.Oi=function(e,t){var n=[this.Di,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=new n1,i=ts(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new nd({})),this.ki(o.initMessageHeaders,t),(0,F.isMobileCordova)()||(0,F.isReactNative)()||(0,F.isElectron)()||(0,F.isIE)()||(0,F.isUWP)()||(0,F.isBrowserExtension)()||(o.httpHeadersOverwriteParam="$httpHeaders");var a=n.join("");rr("Connection","Creating WebChannel: "+a,o);var s=r.createWebChannel(a,o),u=!1,c=!1,l=new sU({Ei:function(e){c?rr("Connection","Not sending because WebChannel is closed:",e):(u||(rr("Connection","Opening WebChannel transport."),s.open(),u=!0),rr("Connection","WebChannel sending:",e),s.send(e))},Ti:function(){return s.close()}}),h=function(e,t,n){e.listen(t,function(e){try{n(e)}catch(e){setTimeout(function(){throw e},0)}})};return h(s,tm.EventType.OPEN,function(){c||rr("Connection","WebChannel transport opened.")}),h(s,tm.EventType.CLOSE,function(){c||(c=!0,rr("Connection","WebChannel transport closed"),l.Vi())}),h(s,tm.EventType.ERROR,function(e){c||(c=!0,ro("Connection","WebChannel transport errored:",e),l.Vi(new re(n7.UNAVAILABLE,"The operation could not be completed")))}),h(s,tm.EventType.MESSAGE,function(e){var t;if(!c){var n=e.data[0];n||rs();var r=n.error||(null===(t=n[0])||void 0===t?void 0:t.error);if(r){rr("Connection","WebChannel received error:",r);var i=r.status,o=function(e){var t=iX[e];if(void 0!==t)return i3(t)}(i),a=r.message;void 0===o&&(o=n7.INTERNAL,a="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new re(o,a)),s.close()}else rr("Connection","WebChannel received:",n),l.Si(n)}}),h(i,to.STAT_EVENT,function(e){e.stat===n4.PROXY?rr("Connection","Detected buffering proxy"):e.stat===n4.NOPROXY&&rr("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},t}(function(){function e(e){this.databaseInfo=e,this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.Di=t+"://"+e.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return e.prototype.Ni=function(e,t,n,r){var i=this.xi(e,t);rr("RestConnection","Sending: ",i,n);var o={};return this.ki(o,r),this.Fi(e,i,o,n).then(function(e){return rr("RestConnection","Received: ",e),e},function(t){throw ro("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t})},e.prototype.$i=function(e,t,n,r){return this.Ni(e,t,n,r)},e.prototype.ki=function(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/8.10.0",e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])},e.prototype.xi=function(e,t){var n=sj[e];return this.Di+"/v1/"+t+":"+n},e}());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sB(){return"undefined"!=typeof window?window:null}function sV(){return"undefined"!=typeof document?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sW(e){return new ov(e,!0)}var sK=function(){function e(e,t,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=e,this.timerId=t,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return e.prototype.reset=function(){this.qi=0},e.prototype.Qi=function(){this.qi=this.Bi},e.prototype.ji=function(e){var t=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&rr("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return t.Ki=Date.now(),e()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},e.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},e.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},e.prototype.Wi=function(){return(Math.random()-.5)*this.qi},e}(),sG=function(){function e(e,t,n,r,i,o){this.Se=e,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new sK(e,t)}return e.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},e.prototype.er=function(){return 2===this.state},e.prototype.start=function(){3!==this.state?this.auth():this.nr()},e.prototype.stop=function(){return(0,L.__awaiter)(this,void 0,void 0,function(){return(0,L.__generator)(this,function(e){switch(e.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.sr=function(){this.state=0,this.Zi.reset()},e.prototype.ir=function(){var e=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return e.rr()}))},e.prototype.cr=function(e){this.ur(),this.stream.send(e)},e.prototype.rr=function(){return(0,L.__awaiter)(this,void 0,void 0,function(){return(0,L.__generator)(this,function(e){return this.er()?[2,this.close(0)]:[2]})})},e.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},e.prototype.close=function(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){return(0,L.__generator)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==e?this.Zi.reset():t&&t.code===n7.RESOURCE_EXHAUSTED?(ri(t.toString()),ri("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):t&&t.code===n7.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Ri(t)];case 1:return n.sent(),[2]}})})},e.prototype.ar=function(){},e.prototype.auth=function(){var e=this;this.state=1;var t=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(t){e.Yi===n&&e.lr(t)},function(n){t(function(){var t=new re(n7.UNKNOWN,"Fetching auth token failed: "+n.message);return e.dr(t)})})},e.prototype.lr=function(e){var t=this,n=this.hr(this.Yi);this.stream=this.wr(e),this.stream.Ii(function(){n(function(){return t.state=2,t.listener.Ii()})}),this.stream.Ri(function(e){n(function(){return t.dr(e)})}),this.stream.onMessage(function(e){n(function(){return t.onMessage(e)})})},e.prototype.nr=function(){var e=this;this.state=4,this.Zi.ji(function(){return(0,L.__awaiter)(e,void 0,void 0,function(){return(0,L.__generator)(this,function(e){return this.state=0,this.start(),[2]})})})},e.prototype.dr=function(e){return rr("PersistentStream","close with error: "+e),this.stream=null,this.close(3,e)},e.prototype.hr=function(e){var t=this;return function(n){t.Se.enqueueAndForget(function(){return t.Yi===e?n():(rr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},e}(),sz=function(e){function t(t,n,r,i,o){var a=this;return(a=e.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return(0,L.__extends)(t,e),t.prototype.wr=function(e){return this.Hi.Oi("Listen",e)},t.prototype.onMessage=function(e){this.Zi.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r,i,o,a="NO_CHANGE"===(r=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:rs(),s=t.targetChange.targetIds||[],u=(i=t.targetChange.resumeToken,e.I?(void 0===i||"string"==typeof i||rs(),rw.fromBase64String(i||"")):(void 0===i||i instanceof Uint8Array||rs(),rw.fromUint8Array(i||new Uint8Array))),c=(l=t.targetChange.cause)&&new re(void 0===(o=l).code?n7.UNKNOWN:i3(o.code),o.message||"");n=new oc(a,s,u,c||null)}else if("documentChange"in t){t.documentChange,(a=t.documentChange).document,a.document.name,a.document.updateTime,s=oI(e,a.document.name),u=ob(a.document.updateTime);var l=new rG({mapValue:{fields:a.document.fields}});n=new os((c=rz.newFoundDocument(s,u,l),a.targetIds||[]),a.removedTargetIds||[],c.key,c)}else if("documentDelete"in t)t.documentDelete,(a=t.documentDelete).document,s=oI(e,a.document),u=a.readTime?ob(a.readTime):rf.min(),l=rz.newNoDocument(s,u),n=new os([],c=a.removedTargetIds||[],l.key,l);else if("documentRemove"in t)t.documentRemove,(a=t.documentRemove).document,s=oI(e,a.document),n=new os([],u=a.removedTargetIds||[],s,null);else{if(!("filter"in t))return rs();t.filter;var h=t.filter;h.targetId,s=new i1(a=h.count||0),n=new ou(u=h.targetId,s)}return n}(this.R,e),n=function(e){if(!("targetChange"in e))return rf.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?rf.min():t.readTime?ob(t.readTime):rf.min()}(e);return this.listener._r(t,n)},t.prototype.mr=function(e){var t,n,r,i,o={};o.database=oS(this.R),o.addTarget=(t=this.R,(n=rX(r=e.target)?{documents:ox(t,r)}:{query:oO(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=om(t,e.resumeToken):e.snapshotVersion.compareTo(rf.min())>0&&(n.readTime=oy(t,e.snapshotVersion.toTimestamp())),n);var a=(this.R,null==(i=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return rs()}}(0,e.purpose))?null:{"goog-listen-tags":i});a&&(o.labels=a),this.cr(o)},t.prototype.yr=function(e){var t={};t.database=oS(this.R),t.removeTarget=e,this.cr(t)},t}(sG),sH=function(e){function t(t,n,r,i,o){var a=this;return(a=e.call(this,t,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return(0,L.__extends)(t,e),Object.defineProperty(t.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,e.prototype.start.call(this)},t.prototype.ar=function(){this.gr&&this.Er([])},t.prototype.wr=function(e){return this.Hi.Oi("Write",e)},t.prototype.onMessage=function(e){if(e.streamToken||rs(),this.lastStreamToken=e.streamToken,this.gr){this.Zi.reset();var t,n,r=(t=e.writeResults,n=e.commitTime,t&&t.length>0?(void 0!==n||rs(),t.map(function(e){var t;return(t=e.updateTime?ob(e.updateTime):ob(n)).isEqual(rf.min())&&(t=ob(n)),new iO(t,e.transformResults||[])})):[]),i=ob(e.commitTime);return this.listener.Tr(i,r)}return e.writeResults&&0!==e.writeResults.length&&rs(),this.gr=!0,this.listener.Ir()},t.prototype.Ar=function(){var e={};e.database=oS(this.R),this.cr(e)},t.prototype.Er=function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map(function(e){return oP(t.R,e)})};this.cr(n)},t}(sG),s$=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).credentials=t,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,L.__extends)(t,e),t.prototype.br=function(){if(this.Rr)throw new re(n7.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Ni=function(e,t,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(e,t,n,i)}).catch(function(e){throw"FirebaseError"===e.name?(e.code===n7.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new re(n7.UNKNOWN,e.toString())})},t.prototype.$i=function(e,t,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.$i(e,t,n,i)}).catch(function(e){throw"FirebaseError"===e.name?(e.code===n7.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new re(n7.UNKNOWN,e.toString())})},t.prototype.terminate=function(){this.Rr=!0},t}(function(){}),sQ=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return e.prototype.Sr=function(){var e=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return e.Pr=null,e.Cr("Backend didn't respond within 10 seconds."),e.Dr("Offline"),Promise.resolve()}))},e.prototype.Nr=function(e){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+e.toString()),this.Dr("Offline")))},e.prototype.set=function(e){this.kr(),this.vr=0,"Online"===e&&(this.Vr=!1),this.Dr(e)},e.prototype.Dr=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.Cr=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(ri(t),this.Vr=!1):rr("OnlineStateTracker",t)},e.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},e}(),sY=function(e,t,n,r,i){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(e){n.enqueueAndForget(function(){return(0,L.__awaiter)(o,void 0,void 0,function(){return(0,L.__generator)(this,function(e){switch(e.label){case 0:return s5(this)?(rr("RemoteStore","Restarting streams for network reachability change."),[4,function(e){return(0,L.__awaiter)(this,void 0,void 0,function(){var t;return(0,L.__generator)(this,function(n){switch(n.label){case 0:return(t=e).Or.add(4),[4,sJ(t)];case 1:return n.sent(),t.Br.set("Unknown"),t.Or.delete(4),[4,sX(t)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})}),this.Br=new sQ(n,r)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sX(e){return(0,L.__awaiter)(this,void 0,void 0,function(){var t,n;return(0,L.__generator)(this,function(r){switch(r.label){case 0:if(!s5(e))return[3,4];t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function sJ(e){return(0,L.__awaiter)(this,void 0,void 0,function(){var t,n;return(0,L.__generator)(this,function(r){switch(r.label){case 0:t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function sZ(e,t){e.$r.has(t.targetId)||(e.$r.set(t.targetId,t),s6(e)?s3(e):uc(e).er()&&s1(e,t))}function s0(e,t){var n=uc(e);e.$r.delete(t),n.er()&&s2(e,t),0===e.$r.size&&(n.er()?n.ir():s5(e)&&e.Br.set("Unknown"))}function s1(e,t){e.qr.U(t.targetId),uc(e).mr(t)}function s2(e,t){e.qr.U(t),uc(e).yr(t)}function s3(e){e.qr=new oh({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.$r.get(t)||null}}),uc(e).start(),e.Br.Sr()}function s6(e){return s5(e)&&!uc(e).tr()&&e.$r.size>0}function s5(e){return 0===e.Or.size}function s4(e){return(0,L.__awaiter)(this,void 0,void 0,function(){return(0,L.__generator)(this,function(t){return e.$r.forEach(function(t,n){s1(e,t)}),[2]})})}function s8(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){return(0,L.__generator)(this,function(n){return e.qr=void 0,s6(e)?(e.Br.Nr(t),s3(e)):e.Br.set("Unknown"),[2]})})}function s9(e,t,n){return(0,L.__awaiter)(this,void 0,void 0,function(){var r,i,o;return(0,L.__generator)(this,function(a){switch(a.label){case 0:if(e.Br.set("Online"),!(t instanceof oc&&2===t.state&&t.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return(0,L.__generator)(this,function(a){switch(a.label){case 0:n=t.cause,r=0,i=t.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],e.$r.has(o)?[4,e.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),e.$r.delete(o),e.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(e,t)];case 2:case 4:return a.sent(),[3,5];case 3:return r=a.sent(),rr("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),[4,s7(e,r)];case 5:return[3,13];case 6:if(t instanceof os?e.qr.X(t):t instanceof ou?e.qr.rt(t):e.qr.et(t),n.isEqual(rf.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,su(e.localStore)];case 8:var s;return i=a.sent(),n.compareTo(i)>=0?[4,((s=e.qr.ut(n)).targetChanges.forEach(function(t,r){if(t.resumeToken.approximateByteSize()>0){var i=e.$r.get(r);i&&e.$r.set(r,i.withResumeToken(t.resumeToken,n))}}),s.targetMismatches.forEach(function(t){var n=e.$r.get(t);n&&(e.$r.set(t,n.withResumeToken(rw.EMPTY_BYTE_STRING,n.snapshotVersion)),s2(e,t),s1(e,new af(n.target,t,1,n.sequenceNumber)))}),e.remoteSyncer.applyRemoteEvent(s))]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return rr("RemoteStore","Failed to raise snapshot:",o=a.sent()),[4,s7(e,o)];case 12:return a.sent(),[3,13];case 13:return[2]}})})}function s7(e,t,n){return(0,L.__awaiter)(this,void 0,void 0,function(){var r=this;return(0,L.__generator)(this,function(i){switch(i.label){case 0:if(!ar(t))throw t;return e.Or.add(1),[4,sJ(e)];case 1:return i.sent(),e.Br.set("Offline"),n||(n=function(){return su(e.localStore)}),e.asyncQueue.enqueueRetryable(function(){return(0,L.__awaiter)(r,void 0,void 0,function(){return(0,L.__generator)(this,function(t){switch(t.label){case 0:return rr("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return t.sent(),e.Or.delete(1),[4,sX(e)];case 2:return t.sent(),[2]}})})}),[2]}})})}function ue(e,t){return t().catch(function(n){return s7(e,n,t)})}function ut(e){return(0,L.__awaiter)(this,void 0,void 0,function(){var t,n,r,i,o;return(0,L.__generator)(this,function(a){var s,u,c;switch(a.label){case 0:n=ul(t=e),r=t.Fr.length>0?t.Fr[t.Fr.length-1].batchId:-1,a.label=1;case 1:if(!(s5(s=t)&&s.Fr.length<10))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,(u=t.localStore,c=r,u.persistence.runTransaction("Get next mutation batch","readonly",function(e){return void 0===c&&(c=-1),u._n.getNextMutationBatchAfterBatchId(e,c)}))];case 3:return null===(i=a.sent())?(0===t.Fr.length&&n.ir(),[3,7]):(r=i.batchId,function(e,t){e.Fr.push(t);var n=ul(e);n.er()&&n.pr&&n.Er(t.mutations)}(t,i),[3,6]);case 4:return o=a.sent(),[4,s7(t,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return un(t)&&ur(t),[2]}})})}function un(e){return s5(e)&&!ul(e).tr()&&e.Fr.length>0}function ur(e){ul(e).start()}function ui(e){return(0,L.__awaiter)(this,void 0,void 0,function(){return(0,L.__generator)(this,function(t){return ul(e).Ar(),[2]})})}function uo(e){return(0,L.__awaiter)(this,void 0,void 0,function(){var t,n,r,i;return(0,L.__generator)(this,function(o){for(t=ul(e),n=0,r=e.Fr;n<r.length;n++)i=r[n],t.Er(i.mutations);return[2]})})}function ua(e,t,n){return(0,L.__awaiter)(this,void 0,void 0,function(){var r,i;return(0,L.__generator)(this,function(o){switch(o.label){case 0:return r=e.Fr.shift(),i=ah.from(r,t,n),[4,ue(e,function(){return e.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,ut(e)];case 2:return o.sent(),[2]}})})}function us(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){return(0,L.__generator)(this,function(n){switch(n.label){case 0:return t&&ul(e).pr?[4,function(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,L.__generator)(this,function(i){switch(i.label){case 0:return i2(r=t.code)&&r!==n7.ABORTED?(n=e.Fr.shift(),ul(e).sr(),[4,ue(e,function(){return e.remoteSyncer.rejectFailedWrite(n.batchId,t)})]):[3,3];case 1:return i.sent(),[4,ut(e)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(e,t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return un(e)&&ur(e),[2]}})})}function uu(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n;return(0,L.__generator)(this,function(r){switch(r.label){case 0:return n=e,t?(n.Or.delete(2),[4,sX(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return t?[3,4]:(n.Or.add(2),[4,sJ(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function uc(e){var t,n,r,i=this;return e.Ur||(e.Ur=(t=e.datastore,n=e.asyncQueue,r={Ii:s4.bind(null,e),Ri:s8.bind(null,e),_r:s9.bind(null,e)},t.br(),new sz(n,t.Hi,t.credentials,t.R,r)),e.Mr.push(function(t){return(0,L.__awaiter)(i,void 0,void 0,function(){return(0,L.__generator)(this,function(n){switch(n.label){case 0:return t?(e.Ur.sr(),s6(e)?s3(e):e.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,e.Ur.stop()];case 2:n.sent(),e.qr=void 0,n.label=3;case 3:return[2]}})})})),e.Ur}function ul(e){var t,n,r,i=this;return e.Kr||(e.Kr=(t=e.datastore,n=e.asyncQueue,r={Ii:ui.bind(null,e),Ri:us.bind(null,e),Ir:uo.bind(null,e),Tr:ua.bind(null,e)},t.br(),new sH(n,t.Hi,t.credentials,t.R,r)),e.Mr.push(function(t){return(0,L.__awaiter)(i,void 0,void 0,function(){return(0,L.__generator)(this,function(n){switch(n.label){case 0:return t?(e.Kr.sr(),[4,ut(e)]):[3,2];case 1:return n.sent(),[3,4];case 2:return[4,e.Kr.stop()];case 3:n.sent(),e.Fr.length>0&&(rr("RemoteStore","Stopping write stream with "+e.Fr.length+" pending writes"),e.Fr=[]),n.label=4;case 4:return[2]}})})})),e.Kr}var uh=function(){function e(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new o8,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(e){})}return e.createAndSchedule=function(t,n,r,i,o){var a=new e(t,n,Date.now()+r,i,o);return a.start(r),a},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout(function(){return t.handleDelayElapsed()},e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new re(n7.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}();function uf(e,t){if(ri("AsyncQueue",t+": "+e),ar(e))return new re(n7.UNAVAILABLE,t+": "+e);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ud=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||rN.comparator(t.key,n.key)}:function(e,t){return rN.comparator(e.key,t.key)},this.keyedMap=oe,this.sortedSet=new i6(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal(function(t,n){return e(t),!1})},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}(),up=function(){function e(){this.Qr=new i6(rN.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.Qr.get(t);n?0!==e.type&&3===n.type?this.Qr=this.Qr.insert(t,e):3===e.type&&1!==n.type?this.Qr=this.Qr.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Qr=this.Qr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Qr=this.Qr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Qr=this.Qr.remove(t):1===e.type&&2===n.type?this.Qr=this.Qr.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Qr=this.Qr.insert(t,{type:2,doc:e.doc}):rs():this.Qr=this.Qr.insert(t,e)},e.prototype.jr=function(){var e=[];return this.Qr.inorderTraversal(function(t,n){e.push(n)}),e},e}(),ug=function(){function e(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return e.fromInitialDocuments=function(t,n,r,i){var o=[];return n.forEach(function(e){o.push({type:0,doc:e})}),new e(t,n,ud.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ip(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),uv=function(){this.Wr=void 0,this.listeners=[]},uy=function(){this.queries=new aJ(function(e){return ig(e)},ip),this.onlineState="Unknown",this.Gr=new Set};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function um(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,a,s;return(0,L.__generator)(this,function(u){switch(u.label){case 0:if(n=e,r=t.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new uv),!i)return[3,4];u.label=1;case 1:return u.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Wr=u.sent(),[3,4];case 3:return s=uf(u.sent(),"Initialization of query '"+iv(t.query)+"' failed"),[2,void t.onError(s)];case 4:return n.queries.set(r,o),o.listeners.push(t),t.zr(n.onlineState),o.Wr&&t.Hr(o.Wr)&&uE(n),[2]}})})}function ub(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,a;return(0,L.__generator)(this,function(s){return n=e,r=t.query,i=!1,(o=n.queries.get(r))&&(a=o.listeners.indexOf(t))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function u_(e,t){for(var n=!1,r=0;r<t.length;r++){var i=t[r],o=i.query,a=e.queries.get(o);if(a){for(var s=0,u=a.listeners;s<u.length;s++)u[s].Hr(i)&&(n=!0);a.Wr=i}}n&&uE(e)}function uw(e,t,n){var r=e.queries.get(t);if(r)for(var i=0,o=r.listeners;i<o.length;i++)o[i].onError(n);e.queries.delete(t)}function uE(e){e.Gr.forEach(function(e){e.next()})}var uI=function(){function e(e,t,n){this.query=e,this.Jr=t,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return e.prototype.Hr=function(e){if(!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&t.push(i)}e=new ug(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(e)&&(this.Jr.next(e),o=!0):this.eo(e,this.onlineState)&&(this.no(e),o=!0),this.Xr=e,o},e.prototype.onError=function(e){this.Jr.error(e)},e.prototype.zr=function(e){this.onlineState=e;var t=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,e)&&(this.no(this.Xr),t=!0),t},e.prototype.eo=function(e,t){return!e.fromCache||!(this.options.so&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)},e.prototype.Zr=function(e){if(e.docChanges.length>0)return!0;var t=this.Xr&&this.Xr.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},e.prototype.no=function(e){e=ug.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Yr=!0,this.Jr.next(e)},e}(),uC=function(){function e(e,t){this.payload=e,this.byteLength=t}return e.prototype.io=function(){return"metadata"in this.payload},e}(),uT=function(){function e(e){this.R=e}return e.prototype.qn=function(e){return oI(this.R,e)},e.prototype.Un=function(e){return e.metadata.exists?oA(this.R,e.document,!1):rz.newNoDocument(this.qn(e.metadata.name),this.Kn(e.metadata.readTime))},e.prototype.Kn=function(e){return ob(e)},e}(),uS=function(){function e(e,t,n){this.ro=e,this.localStore=t,this.R=n,this.queries=[],this.documents=[],this.progress=uk(e)}return e.prototype.oo=function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null},e.prototype.co=function(e){for(var t=new Map,n=new uT(this.R),r=0;r<e.length;r++){var i=e[r];if(i.metadata.queries)for(var o=n.qn(i.metadata.name),a=0,s=i.metadata.queries;a<s.length;a++){var u=s[a],c=(t.get(u)||or()).add(o);t.set(u,c)}}return t},e.prototype.complete=function(){return(0,L.__awaiter)(this,void 0,void 0,function(){var e,t,n,r,i;return(0,L.__generator)(this,function(o){switch(o.label){case 0:return[4,function(e,t,n,r){return(0,L.__awaiter)(this,void 0,void 0,function(){var i,o,a,s,u,c,l,h,f,d;return(0,L.__generator)(this,function(p){switch(p.label){case 0:for(i=e,o=or(),a=i7,s=ot,u=0,c=n;u<c.length;u++)l=c[u],h=t.qn(l.metadata.name),l.document&&(o=o.add(h)),a=a.insert(h,t.Un(l)),s=s.insert(h,t.Kn(l.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,sl(i,ih(ii(ry.fromString("__bundle__/docs/"+r))))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(e){return sc(e,f,a,rf.min(),s).next(function(t){return f.apply(e),t}).next(function(t){return i.qe.removeMatchingKeysForTargetId(e,d.targetId).next(function(){return i.qe.addMatchingKeys(e,o,d.targetId)}).next(function(){return i.Mn.En(e,t)}).next(function(){return t})})})]}})})}(this.localStore,new uT(this.R),this.documents,this.ro.id)];case 1:e=o.sent(),t=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,function(e,t,n){return void 0===n&&(n=or()),(0,L.__awaiter)(this,void 0,void 0,function(){var r,i;return(0,L.__generator)(this,function(o){switch(o.label){case 0:return[4,sl(e,ih(aI(t.bundledQuery)))];case 1:return r=o.sent(),[2,(i=e).persistence.runTransaction("Save named query","readwrite",function(e){var o=ob(t.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(e,t);var a=r.withResumeToken(rw.EMPTY_BYTE_STRING,o);return i.kn=i.kn.insert(a.targetId,a),i.qe.updateTargetData(e,a).next(function(){return i.qe.removeMatchingKeysForTargetId(e,r.targetId)}).next(function(){return i.qe.addMatchingKeys(e,n,r.targetId)}).next(function(){return i.Ke.saveNamedQuery(e,t)})})]}})})}(this.localStore,i,t.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new sn(Object.assign({},this.progress),e))]}})})},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uD=function(e){this.key=e},uA=function(e){this.key=e},uP=function(){function e(e,t){this.query=e,this.uo=t,this.ao=null,this.current=!1,this.ho=or(),this.mutatedKeys=or(),this.lo=im(e),this.fo=new ud(this.lo)}return Object.defineProperty(e.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),e.prototype._o=function(e,t){var n=this,r=t?t.mo:new up,i=t?t.fo:this.fo,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=io(this.query)&&i.size===this.query.limit?i.last():null,c=ia(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(function(e,t){var l=i.get(e),h=iy(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&0>n.lo(h,c))&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(a=a.add(h),o=d?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))}),io(this.query)||ia(this.query))for(;a.size>this.query.limit;){var l=io(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},e.prototype.yo=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this,i=this.fo;this.fo=e.fo,this.mutatedKeys=e.mutatedKeys;var o=e.mo.jr();o.sort(function(e,t){var n,i,o;return n=e.type,i=t.type,(o=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rs()}})(n)-o(i)||r.lo(e.doc,t.doc)}),this.po(n);var a=t?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new ug(this.query,e.fo,i,o,e.mutatedKeys,0===s,u,!1),To:a}:{To:a}},e.prototype.zr=function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({fo:this.fo,mo:new up,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},e.prototype.Io=function(e){return!this.uo.has(e)&&!!this.fo.has(e)&&!this.fo.get(e).hasLocalMutations},e.prototype.po=function(e){var t=this;e&&(e.addedDocuments.forEach(function(e){return t.uo=t.uo.add(e)}),e.modifiedDocuments.forEach(function(e){}),e.removedDocuments.forEach(function(e){return t.uo=t.uo.delete(e)}),this.current=e.current)},e.prototype.Eo=function(){var e=this;if(!this.current)return[];var t=this.ho;this.ho=or(),this.fo.forEach(function(t){e.Io(t.key)&&(e.ho=e.ho.add(t.key))});var n=[];return t.forEach(function(t){e.ho.has(t)||n.push(new uA(t))}),this.ho.forEach(function(e){t.has(e)||n.push(new uD(e))}),n},e.prototype.Ao=function(e){this.uo=e.Bn,this.ho=or();var t=this._o(e.documents);return this.applyChanges(t,!0)},e.prototype.Ro=function(){return ug.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},e}(),uN=function(e,t,n){this.query=e,this.targetId=t,this.view=n},ux=function(e){this.key=e,this.bo=!1},uO=function(){function e(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new aJ(function(e){return ig(e)},ip),this.Vo=new Map,this.So=new Set,this.Do=new i6(rN.comparator),this.Co=new Map,this.No=new sv,this.xo={},this.ko=new Map,this.Fo=aq.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),e}();function uR(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,a,s;return(0,L.__generator)(this,function(u){switch(u.label){case 0:return(o=(n=u4(e)).Po.get(t))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,sl(n.localStore,ih(t))];case 2:return a=u.sent(),s=n.sharedClientState.addLocalQueryTarget(a.targetId),r=a.targetId,[4,uM(n,t,r,"current"===s)];case 3:i=u.sent(),n.isPrimaryClient&&sZ(n.remoteStore,a),u.label=4;case 4:return[2,i]}})})}function uM(e,t,n,r){return(0,L.__awaiter)(this,void 0,void 0,function(){var i,o,a,s,u,c;return(0,L.__generator)(this,function(l){switch(l.label){case 0:return e.Oo=function(t,n,r){return function(e,t,n,r){return(0,L.__awaiter)(this,void 0,void 0,function(){var i,o,a;return(0,L.__generator)(this,function(s){switch(s.label){case 0:return(i=t.view._o(n)).Nn?[4,sf(e.localStore,t.query,!1).then(function(e){var n=e.documents;return t.view._o(n,i)})]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.targetChanges.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,o),[2,(u$(e,t.targetId,a.To),a.snapshot)]}})})}(e,t,n,r)},[4,sf(e.localStore,t,!0)];case 1:return a=(o=new uP(t,(i=l.sent()).Bn))._o(i.documents),s=oa.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),u=o.applyChanges(a,e.isPrimaryClient,s),u$(e,n,u.To),c=new uN(t,n,o),[2,(e.Po.set(t,c),e.Vo.has(n)?e.Vo.get(n).push(t):e.Vo.set(n,[t]),u.snapshot)]}})})}function uL(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,L.__generator)(this,function(o){switch(o.label){case 0:return r=(n=e).Po.get(t),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(e){return!ip(e,t)})),void n.Po.delete(t))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,sh(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),s0(n.remoteStore,r.targetId),uz(n,r.targetId)}).catch(aG)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return uz(n,r.targetId),[4,sh(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function uF(e,t,n){return(0,L.__awaiter)(this,void 0,void 0,function(){var r,i,o;return(0,L.__generator)(this,function(a){var s,u,c,l,h,f,d;switch(a.label){case 0:r=u8(e),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,(s=r.localStore,c=rh.now(),l=t.reduce(function(e,t){return e.add(t.key)},or()),s.persistence.runTransaction("Locally write mutations","readwrite",function(e){return s.Mn.pn(e,l).next(function(n){u=n;for(var r=[],i=0;i<t.length;i++){var o=t[i],a=function(e,t){for(var n=null,r=0,i=e.fieldTransforms;r<i.length;r++){var o=i[r],a=t.data.field(o.field),s=iI(o.transform,a||null);null!=s&&(null==n&&(n=rG.empty()),n.set(o.field,s))}return n||null}(o,u.get(o.key));null!=a&&r.push(new iB(o.key,a,function e(t){var n=[];return rp(t.fields,function(t,r){var i=new rb([t]);if(rW(r)){var o=e(r.mapValue).fields;if(0===o.length)n.push(i);else for(var a=0;a<o.length;a++){var s=o[a];n.push(i.child(s))}}else n.push(i)}),new r_(n)}(a.value.mapValue),iR.exists(!0)))}return s._n.addMutationBatch(e,c,r,t)})}).then(function(e){return e.applyToLocalDocumentSet(u),{batchId:e.batchId,changes:u}}))];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),h=r,f=i.batchId,(d=h.xo[h.currentUser.toKey()])||(d=new i6(rc)),d=d.insert(f,n),h.xo[h.currentUser.toKey()]=d,[4,uY(r,i.changes)];case 3:return a.sent(),[4,ut(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=uf(a.sent(),"Failed to persist write"),n.reject(o),[3,6];case 6:return[2]}})})}function uj(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,L.__generator)(this,function(i){var o,a,s;switch(i.label){case 0:n=e,i.label=1;case 1:return i.trys.push([1,4,,6]),[4,(o=n.localStore,a=t.snapshotVersion,s=o.kn,o.persistence.runTransaction("Apply remote event","readwrite-primary",function(e){var n=o.On.newChangeBuffer({trackRemovals:!0});s=o.kn;var r=[];t.targetChanges.forEach(function(t,n){var i=s.get(n);if(i){r.push(o.qe.removeMatchingKeys(e,t.removedDocuments,n).next(function(){return o.qe.addMatchingKeys(e,t.addedDocuments,n)}));var u=t.resumeToken;if(u.approximateByteSize()>0){var c=i.withResumeToken(u,a).withSequenceNumber(e.currentSequenceNumber);s=s.insert(n,c),c.resumeToken.approximateByteSize()>0||rs(),(0===i.resumeToken.approximateByteSize()||c.snapshotVersion.toMicroseconds()-i.snapshotVersion.toMicroseconds()>=3e8||t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size>0)&&r.push(o.qe.updateTargetData(e,c))}}});var i=i7;if(t.documentUpdates.forEach(function(n,i){t.resolvedLimboDocuments.has(n)&&r.push(o.persistence.referenceDelegate.updateLimboDocument(e,n))}),r.push(sc(e,n,t.documentUpdates,a,void 0).next(function(e){i=e})),!a.isEqual(rf.min())){var u=o.qe.getLastRemoteSnapshotVersion(e).next(function(t){return o.qe.setTargetsMetadata(e,e.currentSequenceNumber,a)});r.push(u)}return o9.waitFor(r).next(function(){return n.apply(e)}).next(function(){return o.Mn.En(e,i)}).next(function(){return i})}).then(function(e){return o.kn=s,e}))];case 2:return r=i.sent(),t.targetChanges.forEach(function(e,t){var r=n.Co.get(t);r&&(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1||rs(),e.addedDocuments.size>0?r.bo=!0:e.modifiedDocuments.size>0?r.bo||rs():e.removedDocuments.size>0&&(r.bo||rs(),r.bo=!1))}),[4,uY(n,r,t)];case 3:case 5:return i.sent(),[3,6];case 4:return[4,aG(i.sent())];case 6:return[2]}})})}function uU(e,t,n){if(e.isPrimaryClient&&0===n||!e.isPrimaryClient&&1===n){var r,i,o=[];e.Po.forEach(function(e,n){var r=n.view.zr(t);r.snapshot&&o.push(r.snapshot)}),(r=e.eventManager).onlineState=t,i=!1,r.queries.forEach(function(e,n){for(var r=0,o=n.listeners;r<o.length;r++)o[r].zr(t)&&(i=!0)}),i&&uE(r),o.length&&e.vo._r(o),e.onlineState=t,e.isPrimaryClient&&e.sharedClientState.setOnlineState(t)}}function uq(e,t,n){return(0,L.__awaiter)(this,void 0,void 0,function(){var r,i,o,a,s,u;return(0,L.__generator)(this,function(c){switch(c.label){case 0:return(r=e).sharedClientState.updateQueryState(t,"rejected",n),(o=(i=r.Co.get(t))&&i.key)?(a=(a=new i6(rN.comparator)).insert(o,rz.newNoDocument(o,rf.min())),s=or().add(o),u=new oo(rf.min(),new Map,new i8(rc),a,s),[4,uj(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(t),uQ(r),[3,4];case 2:return[4,sh(r.localStore,t,!1).then(function(){return uz(r,t,n)}).catch(aG)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function uB(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,L.__generator)(this,function(o){var a;switch(o.label){case 0:n=e,r=t.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,(a=n.localStore).persistence.runTransaction("Acknowledge batch","readwrite-primary",function(e){var n,r,i,o=t.batch.keys(),s=a.On.newChangeBuffer({trackRemovals:!0});return(r=(n=t.batch).keys(),i=o9.resolve(),r.forEach(function(r){i=i.next(function(){return s.getEntry(e,r)}).next(function(e){var i=t.docVersions.get(r);null!==i||rs(),0>e.version.compareTo(i)&&(n.applyToRemoteDocument(e,t),e.isValidDocument()&&s.addEntry(e,t.commitVersion))})}),i.next(function(){return a._n.removeMutationBatch(e,n)})).next(function(){return s.apply(e)}).next(function(){return a._n.performConsistencyCheck(e)}).next(function(){return a.Mn.pn(e,o)})})];case 2:return i=o.sent(),uG(n,r,null),uK(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,uY(n,i)];case 3:case 5:return o.sent(),[3,6];case 4:return[4,aG(o.sent())];case 6:return[2]}})})}function uV(e,t,n){return(0,L.__awaiter)(this,void 0,void 0,function(){var r,i;return(0,L.__generator)(this,function(o){var a;switch(o.label){case 0:r=e,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,(a=r.localStore).persistence.runTransaction("Reject batch","readwrite-primary",function(e){var n;return a._n.lookupMutationBatch(e,t).next(function(t){return null!==t||rs(),n=t.keys(),a._n.removeMutationBatch(e,t)}).next(function(){return a._n.performConsistencyCheck(e)}).next(function(){return a.Mn.pn(e,n)})})];case 2:return i=o.sent(),uG(r,t,n),uK(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),[4,uY(r,i)];case 3:case 5:return o.sent(),[3,6];case 4:return[4,aG(o.sent())];case 6:return[2]}})})}function uW(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return(0,L.__generator)(this,function(a){var s;switch(a.label){case 0:s5((n=e).remoteStore)||rr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(s=n.localStore).persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(e){return s._n.getHighestUnacknowledgedBatchId(e)})];case 2:return -1===(r=a.sent())?[2,void t.resolve()]:((i=n.ko.get(r)||[]).push(t),n.ko.set(r,i),[3,4]);case 3:return o=uf(a.sent(),"Initialization of waitForPendingWrites() operation failed"),t.reject(o),[3,4];case 4:return[2]}})})}function uK(e,t){(e.ko.get(t)||[]).forEach(function(e){e.resolve()}),e.ko.delete(t)}function uG(e,t,n){var r=e.xo[e.currentUser.toKey()];if(r){var i=r.get(t);i&&(n?i.reject(n):i.resolve(),r=r.remove(t)),e.xo[e.currentUser.toKey()]=r}}function uz(e,t,n){void 0===n&&(n=null),e.sharedClientState.removeLocalQueryTarget(t);for(var r=0,i=e.Vo.get(t);r<i.length;r++){var o=i[r];e.Po.delete(o),n&&e.vo.Mo(o,n)}e.Vo.delete(t),e.isPrimaryClient&&e.No.Zn(t).forEach(function(t){e.No.containsKey(t)||uH(e,t)})}function uH(e,t){e.So.delete(t.path.canonicalString());var n=e.Do.get(t);null!==n&&(s0(e.remoteStore,n),e.Do=e.Do.remove(t),e.Co.delete(n),uQ(e))}function u$(e,t,n){for(var r=0;r<n.length;r++){var i=n[r];i instanceof uD?(e.No.addReference(i.key,t),function(e,t){var n=t.key,r=n.path.canonicalString();e.Do.get(n)||e.So.has(r)||(rr("SyncEngine","New document in limbo: "+n),e.So.add(r),uQ(e))}(e,i)):i instanceof uA?(rr("SyncEngine","Document no longer in limbo: "+i.key),e.No.removeReference(i.key,t),e.No.containsKey(i.key)||uH(e,i.key)):rs()}}function uQ(e){for(;e.So.size>0&&e.Do.size<e.maxConcurrentLimboResolutions;){var t=e.So.values().next().value;e.So.delete(t);var n=new rN(ry.fromString(t)),r=e.Fo.next();e.Co.set(r,new ux(n)),e.Do=e.Do.insert(n,r),sZ(e.remoteStore,new af(ih(ii(n.path)),r,2,n9.o))}}function uY(e,t,n){return(0,L.__awaiter)(this,void 0,void 0,function(){var r,i,o,a;return(0,L.__generator)(this,function(s){switch(s.label){case 0:return i=[],o=[],a=[],(r=e).Po.isEmpty()?[3,3]:(r.Po.forEach(function(e,s){a.push(r.Oo(s,t,n).then(function(e){if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,e.fromCache?"not-current":"current"),i.push(e);var t=si.Pn(s.targetId,e);o.push(t)}}))}),[4,Promise.all(a)]);case 1:return s.sent(),r.vo._r(i),[4,function(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,a,s,u,c,l;return(0,L.__generator)(this,function(h){switch(h.label){case 0:n=e,h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(e){return o9.forEach(t,function(t){return o9.forEach(t.bn,function(r){return n.persistence.referenceDelegate.addReference(e,t.targetId,r)}).next(function(){return o9.forEach(t.vn,function(r){return n.persistence.referenceDelegate.removeReference(e,t.targetId,r)})})})})];case 2:return h.sent(),[3,4];case 3:if(!ar(r=h.sent()))throw r;return rr("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=t;i<o.length;i++)s=(a=o[i]).targetId,a.fromCache||(c=(u=n.kn.get(s)).snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),n.kn=n.kn.insert(s,l));return[2]}})})}(r.localStore,o)];case 2:s.sent(),s.label=3;case 3:return[2]}})})}function uX(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,L.__generator)(this,function(i){var o;switch(i.label){case 0:return(n=e).currentUser.isEqual(t)?[3,3]:(rr("SyncEngine","User change. New user:",t.toKey()),[4,ss(n.localStore,t)]);case 1:return r=i.sent(),n.currentUser=t,(o=n).ko.forEach(function(e){e.forEach(function(e){e.reject(new re(n7.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.ko.clear(),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),[4,uY(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function uJ(e,t){var n=e.Co.get(t);if(n&&n.bo)return or().add(n.key);var r=or(),i=e.Vo.get(t);if(!i)return r;for(var o=0;o<i.length;o++){var a=i[o],s=e.Po.get(a);r=r.unionWith(s.view.wo)}return r}function uZ(e){return(0,L.__awaiter)(this,void 0,void 0,function(){var t;return(0,L.__generator)(this,function(n){return[2,sp((t=e).localStore).then(function(e){return uY(t,e)})]})})}function u0(e,t,n,r){return(0,L.__awaiter)(this,void 0,void 0,function(){var i,o;return(0,L.__generator)(this,function(a){switch(a.label){case 0:var s,u;return[4,(u=(s=(i=e).localStore)._n,s.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return u.jt(e,t).next(function(t){return t?s.Mn.pn(e,t):o9.resolve(null)})}))];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,ut(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(uG(i,t,r||null),uK(i,t),function(e,t){e._n.Gt(t)}(i.localStore,t)):rs(),a.label=4;case 4:return[4,uY(i,o)];case 5:return a.sent(),[3,7];case 6:rr("SyncEngine","Cannot apply mutation batch with id: "+t),a.label=7;case 7:return[2]}})})}function u1(e,t,n){return(0,L.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,a,s,u,c,l,h,f,d,p,g;return(0,L.__generator)(this,function(v){switch(v.label){case 0:n=e,r=[],i=[],o=0,a=t,v.label=1;case 1:return o<a.length?(s=a[o],u=void 0,(c=n.Vo.get(s))&&0!==c.length?[4,sl(n.localStore,ih(c[0]))]:[3,7]):[3,13];case 2:u=v.sent(),l=0,h=c,v.label=3;case 3:return l<h.length?(f=h[l],d=n.Po.get(f),[4,function(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,L.__generator)(this,function(o){switch(o.label){case 0:return[4,sf((n=e).localStore,t.query,!0)];case 1:return r=o.sent(),i=t.view.Ao(r),[2,(n.isPrimaryClient&&u$(n,t.targetId,i.To),i)]}})})}(n,d)]):[3,6];case 4:(p=v.sent()).snapshot&&i.push(p.snapshot),v.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,sd(n.localStore,s)];case 8:return g=v.sent(),[4,sl(n.localStore,g)];case 9:return u=v.sent(),[4,uM(n,u2(g),s,!1)];case 10:v.sent(),v.label=11;case 11:r.push(u),v.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function u2(e){var t,n,r,i;return t=e.path,n=e.collectionGroup,r=e.orderBy,i=e.filters,new ir(t,n,r,i,e.limit,"F",e.startAt,e.endAt)}function u3(e){return e.localStore.persistence.fn()}function u6(e,t,n,r){return(0,L.__awaiter)(this,void 0,void 0,function(){var i,o,a;return(0,L.__generator)(this,function(s){switch(s.label){case 0:return(i=e).$o?(rr("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(t))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,sp(i.localStore)];case 3:return o=s.sent(),a=oo.createSynthesizedRemoteEventForCurrentChange(t,"current"===n),[4,uY(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,sh(i.localStore,t,!0)];case 6:return s.sent(),uz(i,t,r),[3,8];case 7:rs(),s.label=8;case 8:return[2]}})})}function u5(e,t,n){return(0,L.__awaiter)(this,void 0,void 0,function(){var r,i,o,a,s,u,c,l,h,f;return(0,L.__generator)(this,function(d){switch(d.label){case 0:if(!(r=u4(e)).$o)return[3,10];i=0,o=t,d.label=1;case 1:return i<o.length?(a=o[i],r.Vo.has(a)?(rr("SyncEngine","Adding an already active target "+a),[3,5]):[4,sd(r.localStore,a)]):[3,6];case 2:return s=d.sent(),[4,sl(r.localStore,s)];case 3:return u=d.sent(),[4,uM(r,u2(s),u.targetId,!1)];case 4:d.sent(),sZ(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(e){return(0,L.__generator)(this,function(t){switch(t.label){case 0:return r.Vo.has(e)?[4,sh(r.localStore,e,!1).then(function(){s0(r.remoteStore,e),uz(r,e)}).catch(aG)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})},l=0,h=n,d.label=7;case 7:return l<h.length?(f=h[l],[5,c(f)]):[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function u4(e){return e.remoteStore.remoteSyncer.applyRemoteEvent=uj.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uJ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uq.bind(null,e),e.vo._r=u_.bind(null,e.eventManager),e.vo.Mo=uw.bind(null,e.eventManager),e}function u8(e){return e.remoteStore.remoteSyncer.applySuccessfulWrite=uB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uV.bind(null,e),e}function u9(e,t,n){(function(e,t,n){return(0,L.__awaiter)(this,void 0,void 0,function(){var r,i,o,a,s,u;return(0,L.__generator)(this,function(c){var l,h,f,d,p,g;switch(c.label){case 0:return c.trys.push([0,14,,15]),[4,t.getMetadata()];case 1:return r=c.sent(),[4,(l=e.localStore,f=ob((h=r).createTime),l.persistence.runTransaction("hasNewerBundle","readonly",function(e){return l.Ke.getBundleMetadata(e,h.id)}).then(function(e){return!!e&&e.createTime.compareTo(f)>=0}))];case 2:return c.sent()?[4,t.close()]:[3,4];case 3:return[2,(c.sent(),void n._completeWith({taskState:"Success",documentsLoaded:(d=r).totalDocuments,bytesLoaded:d.totalBytes,totalDocuments:d.totalDocuments,totalBytes:d.totalBytes}))];case 4:return n._updateProgress(uk(r)),i=new uS(r,e.localStore,t.R),[4,t.Lo()];case 5:o=c.sent(),c.label=6;case 6:return o?[4,i.oo(o)]:[3,10];case 7:return(a=c.sent())&&n._updateProgress(a),[4,t.Lo()];case 8:o=c.sent(),c.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return[4,uY(e,(s=c.sent()).wn,void 0)];case 12:return c.sent(),[4,(p=e.localStore,g=r,p.persistence.runTransaction("Save bundle","readwrite",function(e){return p.Ke.saveBundleMetadata(e,g)}))];case 13:return c.sent(),n._completeWith(s.progress),[3,15];case 14:return ro("SyncEngine","Loading bundle failed with "+(u=c.sent())),n._failWith(u),[3,15];case 15:return[2]}})})})(e,t,n).then(function(){e.sharedClientState.notifyBundleLoaded()})}var u7=function(){function e(){this.synchronizeTabs=!1}return e.prototype.initialize=function(e){return(0,L.__awaiter)(this,void 0,void 0,function(){return(0,L.__generator)(this,function(t){switch(t.label){case 0:return this.R=sW(e.databaseInfo.databaseId),this.sharedClientState=this.Bo(e),this.persistence=this.qo(e),[4,this.persistence.start()];case 1:return t.sent(),this.gcScheduler=this.Uo(e),this.localStore=this.Ko(e),[2]}})})},e.prototype.Uo=function(e){return null},e.prototype.Ko=function(e){var t;return t=this.persistence,new sa(t,new so,e.initialUser,this.R)},e.prototype.qo=function(e){return new sE(sC.bs,this.R)},e.prototype.Bo=function(e){return new sM},e.prototype.terminate=function(){return(0,L.__awaiter)(this,void 0,void 0,function(){return(0,L.__generator)(this,function(e){switch(e.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return e.sent(),[4,this.persistence.shutdown()];case 2:return e.sent(),[2]}})})},e}(),ce=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).Qo=t,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,L.__extends)(t,e),t.prototype.initialize=function(t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n=this;return(0,L.__generator)(this,function(r){switch(r.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return r.sent(),[4,function(e){return(0,L.__awaiter)(this,void 0,void 0,function(){var t;return(0,L.__generator)(this,function(n){return[2,(t=e).persistence.runTransaction("Synchronize last document change read time","readonly",function(e){var t,n;return t=a3(e),n=rf.min(),t.$t({index:oQ.readTimeIndex,reverse:!0},function(e,t,r){t.readTime&&(n=ay(t.readTime)),r.done()}).next(function(){return n})}).then(function(e){t.$n=e})]})})}(this.localStore)];case 2:return r.sent(),[4,this.Qo.initialize(this,t)];case 3:return r.sent(),[4,u8(this.Qo.syncEngine)];case 4:return r.sent(),[4,ut(this.Qo.remoteStore)];case 5:return r.sent(),[4,this.persistence.He(function(){return n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()})];case 6:return r.sent(),[2]}})})},t.prototype.Ko=function(e){var t;return t=this.persistence,new sa(t,new so,e.initialUser,this.R)},t.prototype.Uo=function(e){return new a$(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)},t.prototype.qo=function(e){var t=st(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ax.withCacheSize(this.cacheSizeBytes):ax.DEFAULT;return new a9(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,sB(),sV(),this.R,this.sharedClientState,!!this.forceOwnership)},t.prototype.Bo=function(e){return new sM},t}(u7),ct=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n,!1)||this).Qo=t,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,L.__extends)(t,e),t.prototype.initialize=function(t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n,r=this;return(0,L.__generator)(this,function(i){switch(i.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof sR?(this.sharedClientState.syncEngine={ui:u0.bind(null,n),ai:u6.bind(null,n),hi:u5.bind(null,n),fn:u3.bind(null,n),ci:uZ.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(e){return(0,L.__awaiter)(r,void 0,void 0,function(){return(0,L.__generator)(this,function(t){switch(t.label){case 0:return[4,function(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,a,s,u,c;return(0,L.__generator)(this,function(l){var h;switch(l.label){case 0:return u4(n=e),u8(n),!0!==t||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,u1(n,r.toArray())]);case 1:return i=l.sent(),n.$o=!0,[4,uu(n.remoteStore,!0)];case 2:for(l.sent(),o=0,a=i;o<a.length;o++)s=a[o],sZ(n.remoteStore,s);return[3,7];case 3:return!1!==t||!1===n.$o?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach(function(e,t){n.sharedClientState.isLocalQueryTarget(t)?u.push(t):c=c.then(function(){return uz(n,t),sh(n.localStore,t,!0)}),s0(n.remoteStore,t)}),[4,c]);case 4:return l.sent(),[4,u1(n,u)];case 5:return l.sent(),(h=n).Co.forEach(function(e,t){s0(h.remoteStore,t)}),h.No.ts(),h.Co=new Map,h.Do=new i6(rN.comparator),n.$o=!1,[4,uu(n.remoteStore,!1)];case 6:l.sent(),l.label=7;case 7:return[2]}})})}(this.Qo.syncEngine,e)];case 1:return t.sent(),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):e||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},t.prototype.Bo=function(e){var t=sB();if(!sR.yt(t))throw new re(n7.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=st(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new sR(t,e.asyncQueue,n,e.clientId,e.initialUser)},t}(ce),cn=function(){function e(){}return e.prototype.initialize=function(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n=this;return(0,L.__generator)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return uU(n.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=uX.bind(null,this.syncEngine),[4,uu(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},e.prototype.createEventManager=function(e){return new uy},e.prototype.createDatastore=function(e){var t=sW(e.databaseInfo.databaseId),n=new sq(e.databaseInfo);return new s$(e.credentials,n,t)},e.prototype.createRemoteStore=function(e){var t,n=this;return t=this.localStore,new sY(t,this.datastore,e.asyncQueue,function(e){return uU(n.syncEngine,e,0)},sF.yt()?new sF:new sL)},e.prototype.createSyncEngine=function(e,t){var n,r,i,o,a;return n=this.localStore,r=this.remoteStore,i=this.eventManager,o=this.sharedClientState,a=new uO(n,r,i,o,e.initialUser,e.maxConcurrentLimboResolutions),t&&(a.$o=!0),a},e.prototype.terminate=function(){return function(e){return(0,L.__awaiter)(this,void 0,void 0,function(){var t;return(0,L.__generator)(this,function(n){switch(n.label){case 0:return t=e,rr("RemoteStore","RemoteStore shutting down."),t.Or.add(5),[4,sJ(t)];case 1:return n.sent(),t.Lr.shutdown(),t.Br.set("Unknown"),[2]}})})}(this.remoteStore)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(e,t){void 0===t&&(t=10240);var n=0;return{read:function(){return(0,L.__awaiter)(this,void 0,void 0,function(){var r;return(0,L.__generator)(this,function(i){return n<e.byteLength?(r={value:e.slice(n,n+t),done:!1},[2,(n+=t,r)]):[2,{done:!0}]})})},cancel:function(){return(0,L.__awaiter)(this,void 0,void 0,function(){return(0,L.__generator)(this,function(e){return[2]})})},releaseLock:function(){},closed:Promise.reject("unimplemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ci=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.observer.next&&this.jo(this.observer.next,e)},e.prototype.error=function(e){this.observer.error?this.jo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)},e.prototype.Wo=function(){this.muted=!0},e.prototype.jo=function(e,t){var n=this;this.muted||setTimeout(function(){n.muted||e(t)},0)},e}(),co=function(){function e(e,t){var n=this;this.Go=e,this.R=t,this.metadata=new o8,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(e){e&&e.io()?n.metadata.resolve(e.payload.metadata):n.metadata.reject(Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==e?void 0:e.payload)))},function(e){return n.metadata.reject(e)})}return e.prototype.close=function(){return this.Go.cancel()},e.prototype.getMetadata=function(){return(0,L.__awaiter)(this,void 0,void 0,function(){return(0,L.__generator)(this,function(e){return[2,this.metadata.promise]})})},e.prototype.Lo=function(){return(0,L.__awaiter)(this,void 0,void 0,function(){return(0,L.__generator)(this,function(e){switch(e.label){case 0:return[4,this.getMetadata()];case 1:return[2,(e.sent(),this.Ho())]}})})},e.prototype.Ho=function(){return(0,L.__awaiter)(this,void 0,void 0,function(){var e,t,n;return(0,L.__generator)(this,function(r){switch(r.label){case 0:return[4,this.Jo()];case 1:return null===(e=r.sent())?[2,null]:(isNaN(n=Number(t=this.zo.decode(e)))&&this.Yo("length string ("+t+") is not valid number"),[4,this.Xo(n)]);case 2:return[2,new uC(JSON.parse(r.sent()),e.length+n)]}})})},e.prototype.Zo=function(){return this.buffer.findIndex(function(e){return 123===e})},e.prototype.Jo=function(){return(0,L.__awaiter)(this,void 0,void 0,function(){var e,t;return(0,L.__generator)(this,function(n){switch(n.label){case 0:return 0>this.Zo()?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((e=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),t=this.buffer.slice(0,e),[2,(this.buffer=this.buffer.slice(e),t)])}})})},e.prototype.Xo=function(e){return(0,L.__awaiter)(this,void 0,void 0,function(){var t;return(0,L.__generator)(this,function(n){switch(n.label){case 0:return this.buffer.length<e?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return t=this.zo.decode(this.buffer.slice(0,e)),[2,(this.buffer=this.buffer.slice(e),t)]}})})},e.prototype.Yo=function(e){throw this.Go.cancel(),Error("Invalid bundle format: "+e)},e.prototype.tc=function(){return(0,L.__awaiter)(this,void 0,void 0,function(){var e,t;return(0,L.__generator)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(e=n.sent()).done||((t=new Uint8Array(this.buffer.length+e.value.length)).set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t),[2,e.done]}})})},e}(),ca=function(){function e(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(e){return(0,L.__awaiter)(this,void 0,void 0,function(){var t,n=this;return(0,L.__generator)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new re(n7.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,a,s;return(0,L.__generator)(this,function(u){switch(u.label){case 0:return r=oS((n=e).R)+"/documents",i={documents:t.map(function(e){return oE(n.R,e)})},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),a=new Map,o.forEach(function(e){var t,r,i,o,s,u,c=(t=n.R,"found"in e?(e.found||rs(),e.found.name,e.found.updateTime,r=oI(t,e.found.name),i=ob(e.found.updateTime),o=new rG({mapValue:{fields:e.found.fields}}),rz.newFoundDocument(r,i,o)):"missing"in e?(e.missing||rs(),e.readTime||rs(),s=oI(t,e.missing),u=ob(e.readTime),rz.newNoDocument(s,u)):rs());a.set(c.key.toString(),c)}),s=[],[2,(t.forEach(function(e){var t=a.get(e.toString());t||rs(),s.push(t)}),s)]}})})}(this.datastore,e)];case 1:return[2,((t=r.sent()).forEach(function(e){return n.recordVersion(e)}),t)]}})})},e.prototype.set=function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())},e.prototype.update=function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())},e.prototype.delete=function(e){this.write(new iZ(e,this.precondition(e))),this.writtenDocs.add(e.toString())},e.prototype.commit=function(){return(0,L.__awaiter)(this,void 0,void 0,function(){var e,t=this;return(0,L.__generator)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach(function(t){e.delete(t.key.toString())}),e.forEach(function(e,n){var r=rN.fromPath(n);t.mutations.push(new i0(r,t.precondition(r)))}),[4,function(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,L.__generator)(this,function(o){switch(o.label){case 0:return r=oS((n=e).R)+"/documents",i={writes:t.map(function(e){return oP(n.R,e)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},e.prototype.recordVersion=function(e){if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw rs();t=rf.min()}var t,n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new re(n7.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)},e.prototype.precondition=function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?iR.updateTime(t):iR.none()},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(rf.min()))throw new re(n7.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return iR.updateTime(t)}return iR.exists(!0)},e.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations.push(e)},e.prototype.ensureCommitNotCalled=function(){},e}(),cs=function(){function e(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new sK(this.asyncQueue,"transaction_retry")}return e.prototype.run=function(){this.ec-=1,this.nc()},e.prototype.nc=function(){var e=this;this.Zi.ji(function(){return(0,L.__awaiter)(e,void 0,void 0,function(){var e,t,n=this;return(0,L.__generator)(this,function(r){return e=new ca(this.datastore),(t=this.sc(e))&&t.then(function(t){n.asyncQueue.enqueueAndForget(function(){return e.commit().then(function(){n.deferred.resolve(t)}).catch(function(e){n.ic(e)})})}).catch(function(e){n.ic(e)}),[2]})})})},e.prototype.sc=function(e){try{var t=this.updateFunction(e);return!rD(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}},e.prototype.ic=function(e){var t=this;this.ec>0&&this.rc(e)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return t.nc(),Promise.resolve()})):this.deferred.reject(e)},e.prototype.rc=function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!i2(t)}return!1},e}(),cu=function(){function e(e,t,n){var r=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=n,this.user=sT.UNAUTHENTICATED,this.clientId=ru.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(t,function(e){return(0,L.__awaiter)(r,void 0,void 0,function(){return(0,L.__generator)(this,function(t){switch(t.label){case 0:return rr("FirestoreClient","Received user=",e.uid),[4,this.credentialListener(e)];case 1:return t.sent(),this.user=e,[2]}})})})}return e.prototype.getConfiguration=function(){return(0,L.__awaiter)(this,void 0,void 0,function(){return(0,L.__generator)(this,function(e){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},e.prototype.setCredentialChangeListener=function(e){this.credentialListener=e},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new re(n7.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.terminate=function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new o8;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,L.__awaiter)(e,void 0,void 0,function(){var e;return(0,L.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:n.sent(),n.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:n.sent(),n.label=4;case 4:return this.credentials.removeChangeListener(),t.resolve(),[3,6];case 5:return e=uf(n.sent(),"Failed to shutdown persistence"),t.reject(e),[3,6];case 6:return[2]}})})}),t.promise},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n,r,i=this;return(0,L.__generator)(this,function(o){switch(o.label){case 0:return e.asyncQueue.verifyOperationInProgress(),rr("FirestoreClient","Initializing OfflineComponentProvider"),[4,e.getConfiguration()];case 1:return n=o.sent(),[4,t.initialize(n)];case 2:return o.sent(),r=n.initialUser,e.setCredentialChangeListener(function(e){return(0,L.__awaiter)(i,void 0,void 0,function(){return(0,L.__generator)(this,function(n){switch(n.label){case 0:return r.isEqual(e)?[3,2]:[4,ss(t.localStore,e)];case 1:n.sent(),r=e,n.label=2;case 2:return[2]}})})}),t.persistence.setDatabaseDeletedListener(function(){return e.terminate()}),e.offlineComponents=t,[2]}})})}function cl(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,L.__generator)(this,function(i){switch(i.label){case 0:return e.asyncQueue.verifyOperationInProgress(),[4,ch(e)];case 1:return n=i.sent(),rr("FirestoreClient","Initializing OnlineComponentProvider"),[4,e.getConfiguration()];case 2:return r=i.sent(),[4,t.initialize(n,r)];case 3:return i.sent(),e.setCredentialChangeListener(function(e){return function(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,L.__generator)(this,function(i){switch(i.label){case 0:return(n=e).asyncQueue.verifyOperationInProgress(),rr("RemoteStore","RemoteStore received new credentials"),r=s5(n),n.Or.add(3),[4,sJ(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(t)];case 2:return i.sent(),n.Or.delete(3),[4,sX(n)];case 3:return i.sent(),[2]}})})}(t.remoteStore,e)}),e.onlineComponents=t,[2]}})})}function ch(e){return(0,L.__awaiter)(this,void 0,void 0,function(){return(0,L.__generator)(this,function(t){switch(t.label){case 0:return e.offlineComponents?[3,2]:(rr("FirestoreClient","Using default OfflineComponentProvider"),[4,cc(e,new u7)]);case 1:t.sent(),t.label=2;case 2:return[2,e.offlineComponents]}})})}function cf(e){return(0,L.__awaiter)(this,void 0,void 0,function(){return(0,L.__generator)(this,function(t){switch(t.label){case 0:return e.onlineComponents?[3,2]:(rr("FirestoreClient","Using default OnlineComponentProvider"),[4,cl(e,new cn)]);case 1:t.sent(),t.label=2;case 2:return[2,e.onlineComponents]}})})}function cd(e){return ch(e).then(function(e){return e.persistence})}function cp(e){return ch(e).then(function(e){return e.localStore})}function cg(e){return cf(e).then(function(e){return e.remoteStore})}function cv(e){return cf(e).then(function(e){return e.syncEngine})}function cy(e){return(0,L.__awaiter)(this,void 0,void 0,function(){var t,n;return(0,L.__generator)(this,function(r){switch(r.label){case 0:return[4,cf(e)];case 1:return[2,((n=(t=r.sent()).eventManager).onListen=uR.bind(null,t.syncEngine),n.onUnlisten=uL.bind(null,t.syncEngine),n)]}})})}function cm(e,t,n){var r=this;void 0===n&&(n={});var i=new o8;return e.asyncQueue.enqueueAndForget(function(){return(0,L.__awaiter)(r,void 0,void 0,function(){var r;return(0,L.__generator)(this,function(o){switch(o.label){case 0:return r=function(e,t,n,r,i){var o=new ci({next:function(o){t.enqueueAndForget(function(){return ub(e,a)});var s=o.docs.has(n);!s&&o.fromCache?i.reject(new re(n7.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new re(n7.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(e){return i.reject(e)}}),a=new uI(ii(n.path),o,{includeMetadataChanges:!0,so:!0});return um(e,a)},[4,cy(e)];case 1:return[2,r.apply(void 0,[o.sent(),e.asyncQueue,t,n,i])]}})})}),i.promise}function cb(e,t,n){var r=this;void 0===n&&(n={});var i=new o8;return e.asyncQueue.enqueueAndForget(function(){return(0,L.__awaiter)(r,void 0,void 0,function(){var r;return(0,L.__generator)(this,function(o){switch(o.label){case 0:return r=function(e,t,n,r,i){var o=new uI(n,new ci({next:function(n){t.enqueueAndForget(function(){return ub(e,o)}),n.fromCache&&"server"===r.source?i.reject(new re(n7.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),{includeMetadataChanges:!0,so:!0});return um(e,o)},[4,cy(e)];case 1:return[2,r.apply(void 0,[o.sent(),e.asyncQueue,t,n,i])]}})})}),i.promise}var c_=function(e,t,n,r,i,o,a,s){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=s},cw=function(){function e(e,t){this.projectId=e,this.database=t||"(default)"}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e}(),cE=new Map,cI=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},cC=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e,t){this.changeListener=t,e.enqueueRetryable(function(){return t(sT.UNAUTHENTICATED)})},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),cT=function(){function e(e){this.token=e,this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(this.token)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable(function(){return t(n.token.user)})},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),cS=function(){function e(e){var t=this;this.currentUser=sT.UNAUTHENTICATED,this.oc=new o8,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){t.cc++,t.currentUser=t.ac(),t.oc.resolve(),t.changeListener&&t.asyncQueue.enqueueRetryable(function(){return t.changeListener(t.currentUser)})};var n=function(e){rr("FirebaseCredentialsProvider","Auth detected"),t.auth=e,t.auth.addAuthTokenListener(t.uc)};e.onInit(function(e){return n(e)}),setTimeout(function(){if(!t.auth){var r=e.getImmediate({optional:!0});r?n(r):(rr("FirebaseCredentialsProvider","Auth not yet detected"),t.oc.resolve())}},0)}return e.prototype.getToken=function(){var e=this,t=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return e.cc!==t?(rr("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?("string"==typeof n.accessToken||rs(),new cI(n.accessToken,e.currentUser)):null}):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e,t){var n=this;this.asyncQueue=e,this.asyncQueue.enqueueRetryable(function(){return(0,L.__awaiter)(n,void 0,void 0,function(){return(0,L.__generator)(this,function(e){switch(e.label){case 0:return[4,this.oc.promise];case 1:return e.sent(),[4,t(this.currentUser)];case 2:return e.sent(),this.changeListener=t,[2]}})})})},e.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},e.prototype.ac=function(){var e=this.auth&&this.auth.getUid();return null===e||"string"==typeof e||rs(),new sT(e)},e}(),ck=function(){function e(e,t,n){this.hc=e,this.lc=t,this.fc=n,this.type="FirstParty",this.user=sT.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.lc},t=this.hc.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.fc&&(e["X-Goog-Iam-Authorization-Token"]=this.fc),e},enumerable:!1,configurable:!0}),e}(),cD=function(){function e(e,t,n){this.hc=e,this.lc=t,this.fc=n}return e.prototype.getToken=function(){return Promise.resolve(new ck(this.hc,this.lc,this.fc))},e.prototype.setChangeListener=function(e,t){e.enqueueRetryable(function(){return t(sT.FIRST_PARTY)})},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(e,t,n){if(!n)throw new re(n7.INVALID_ARGUMENT,"Function "+e+"() cannot be called with an empty "+t+".")}function cP(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new re(n7.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function cN(e,t,n,r){if(!0===t&&!0===r)throw new re(n7.INVALID_ARGUMENT,e+" and "+n+" cannot be used together.")}function cx(e){if(!rN.isDocumentKey(e))throw new re(n7.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e+" has "+e.length+".")}function cO(e){if(rN.isDocumentKey(e))throw new re(n7.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e+" has "+e.length+".")}function cR(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return"function"==typeof e?"a function":rs()}function cM(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new re(n7.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=cR(e);throw new re(n7.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+n)}return e}function cL(e,t){if(t<=0)throw new re(n7.INVALID_ARGUMENT,"Function "+e+"() requires a positive number, but it was: "+t+".")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cF=function(){function e(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new re(n7.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new re(n7.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,cN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams},e}(),cj=function(){function e(e,t){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cF({}),this._settingsFrozen=!1,e instanceof cw?(this._databaseId=e,this._credentials=new cC):(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new re(n7.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cw(e.options.projectId)}(e),this._credentials=new cS(t))}return Object.defineProperty(e.prototype,"app",{get:function(){if(!this._app)throw new re(n7.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),e.prototype._setSettings=function(e){if(this._settingsFrozen)throw new re(n7.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cF(e),void 0!==e.credentials&&(this._credentials=function(e){if(!e)return new cC;switch(e.type){case"gapi":var t=e.client;return"object"==typeof t&&null!==t&&t.auth&&t.auth.getAuthHeaderValueForFirstParty||rs(),new cD(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new re(n7.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},e.prototype._getSettings=function(){return this._settings},e.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},e.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},e.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},e.prototype._terminate=function(){var e;return(e=cE.get(this))&&(rr("ComponentProvider","Removing Datastore"),cE.delete(this),e.terminate()),Promise.resolve()},e}(),cU=function(){function e(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}return Object.defineProperty(e.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new cB(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._key)},e}(),cq=function(){function e(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}return e.prototype.withConverter=function(t){return new e(this.firestore,t,this._query)},e}(),cB=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,ii(r))||this)._path=r,i.type="collection",i}return(0,L.__extends)(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._path.popLast();return e.isEmpty()?null:new cU(this.firestore,null,new rN(e))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._path)},t}(cq);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cV(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=(0,F.getModularInstance)(e),cA("collection","path",t),e instanceof cj)return cO(n=ry.fromString.apply(ry,(0,L.__spreadArray)([t],r))),new cB(e,null,n);if(!(e instanceof cU||e instanceof cB))throw new re(n7.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return cO(n=ry.fromString.apply(ry,(0,L.__spreadArray)([e.path],r)).child(ry.fromString(t))),new cB(e.firestore,null,n)}function cW(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=(0,F.getModularInstance)(e),1==arguments.length&&(t=ru.u()),cA("doc","path",t),e instanceof cj)return cx(n=ry.fromString.apply(ry,(0,L.__spreadArray)([t],r))),new cU(e,null,new rN(n));if(!(e instanceof cU||e instanceof cB))throw new re(n7.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return cx(n=e._path.child(ry.fromString.apply(ry,(0,L.__spreadArray)([t],r)))),new cU(e.firestore,e instanceof cB?e.converter:null,new rN(n))}function cK(e,t){return e=(0,F.getModularInstance)(e),t=(0,F.getModularInstance)(t),(e instanceof cU||e instanceof cB)&&(t instanceof cU||t instanceof cB)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function cG(e,t){return e=(0,F.getModularInstance)(e),t=(0,F.getModularInstance)(t),e instanceof cq&&t instanceof cq&&e.firestore===t.firestore&&ip(e._query,t._query)&&e.converter===t.converter/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var cz=function(){function e(){var e=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new sK(this,"async_queue_retry"),this.Ic=function(){var t=sV();t&&rr("AsyncQueue","Visibility state changed to "+t.visibilityState),e.Zi.Gi()};var t=sV();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueueAndForgetEvenWhileRestricted=function(e){this.Ac(),this.Rc(e)},e.prototype.enterRestrictedMode=function(e){if(!this._c){this._c=!0,this.Ec=e||!1;var t=sV();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ic)}},e.prototype.enqueue=function(e){var t=this;if(this.Ac(),this._c)return new Promise(function(){});var n=new o8;return this.Rc(function(){return t._c&&t.Ec?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)}).then(function(){return n.promise})},e.prototype.enqueueRetryable=function(e){var t=this;this.enqueueAndForget(function(){return t.wc.push(e),t.bc()})},e.prototype.bc=function(){return(0,L.__awaiter)(this,void 0,void 0,function(){var e,t=this;return(0,L.__generator)(this,function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!ar(e=n.sent()))throw e;return rr("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return t.bc()}),n.label=5;case 5:return[2]}})})},e.prototype.Rc=function(e){var t=this,n=this.dc.then(function(){return t.gc=!0,e().catch(function(e){var n;throw t.yc=e,t.gc=!1,ri("INTERNAL UNHANDLED ERROR: ",(n=e.message||"",e.stack&&(n=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),n)),e}).then(function(e){return t.gc=!1,e})});return this.dc=n,n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.Ac(),this.Tc.indexOf(e)>-1&&(t=0);var i=uh.createAndSchedule(this,e,t,n,function(e){return r.vc(e)});return this.mc.push(i),i},e.prototype.Ac=function(){this.yc&&rs()},e.prototype.verifyOperationInProgress=function(){},e.prototype.Pc=function(){return(0,L.__awaiter)(this,void 0,void 0,function(){var e;return(0,L.__generator)(this,function(t){switch(t.label){case 0:return[4,e=this.dc];case 1:t.sent(),t.label=2;case 2:if(e!==this.dc)return[3,0];t.label=3;case 3:return[2]}})})},e.prototype.Vc=function(e){for(var t=0,n=this.mc;t<n.length;t++)if(n[t].timerId===e)return!0;return!1},e.prototype.Sc=function(e){var t=this;return this.Pc().then(function(){t.mc.sort(function(e,t){return e.targetTimeMs-t.targetTimeMs});for(var n=0,r=t.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==e&&i.timerId===e)break}return t.Pc()})},e.prototype.Dc=function(e){this.Tc.push(e)},e.prototype.vc=function(e){var t=this.mc.indexOf(e);this.mc.splice(t,1)},e}();function cH(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e)}var c$=function(){function e(){this._progressObserver={},this._taskCompletionResolver=new o8,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return e.prototype.onProgress=function(e,t,n){this._progressObserver={next:e,error:t,complete:n}},e.prototype.catch=function(e){return this._taskCompletionResolver.promise.catch(e)},e.prototype.then=function(e,t){return this._taskCompletionResolver.promise.then(e,t)},e.prototype._completeWith=function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)},e.prototype._failWith=function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)},e.prototype._updateProgress=function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)},e}(),cQ=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this).type="firestore",r._queue=new cz,r._persistenceKey="name"in t?t.name:"[DEFAULT]",r}return(0,L.__extends)(t,e),t.prototype._terminate=function(){return this._firestoreClient||cX(this),this._firestoreClient.terminate()},t}(cj);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cY(e){return e._firestoreClient||cX(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function cX(e){var t,n,r=e._freezeSettings(),i=(t=e._databaseId,new c_(t,(null===(n=e._app)||void 0===n?void 0:n.options.appId)||"",e._persistenceKey,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams));e._firestoreClient=new cu(e._credentials,e._queue,i)}function cJ(e,t,n){var r=this,i=new o8;return e.asyncQueue.enqueue(function(){return(0,L.__awaiter)(r,void 0,void 0,function(){var r;return(0,L.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,cc(e,n)];case 1:return o.sent(),[4,cl(e,t)];case 2:return o.sent(),i.resolve(),[3,4];case 3:var a;if(!("FirebaseError"===(a=r=o.sent()).name?a.code===n7.FAILED_PRECONDITION||a.code===n7.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function cZ(e){if(e._initialized||e._terminated)throw new re(n7.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var c0=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0;n<e.length;++n)if(0===e[n].length)throw new re(n7.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rb(e)}return e.prototype.isEqual=function(e){return this._internalPath.isEqual(e._internalPath)},e}(),c1=function(){function e(e){this._byteString=e}return e.fromBase64String=function(t){try{return new e(rw.fromBase64String(t))}catch(e){throw new re(n7.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},e.fromUint8Array=function(t){return new e(rw.fromUint8Array(t))},e.prototype.toBase64=function(){return this._byteString.toBase64()},e.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},e.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._byteString.isEqual(e._byteString)},e}(),c2=function(e){this._methodName=e},c3=function(){function e(e,t){if(!isFinite(e)||e<-90||e>90)throw new re(n7.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new re(n7.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},e.prototype._compareTo=function(e){return rc(this._lat,e._lat)||rc(this._long,e._long)},e}(),c6=/^__.*__$/,c5=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutation=function(e,t){return null!==this.fieldMask?new iB(e,this.data,this.fieldMask,t,this.fieldTransforms):new iq(e,this.data,t,this.fieldTransforms)},e}(),c4=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutation=function(e,t){return new iB(e,this.data,this.fieldMask,t,this.fieldTransforms)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c8(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rs()}}var c9=function(){function e(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(e.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),e.prototype.xc=function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},e.prototype.kc=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.xc({path:n,Fc:!1});return r.$c(e),r},e.prototype.Oc=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.xc({path:n,Fc:!1});return r.Cc(),r},e.prototype.Mc=function(e){return this.xc({path:void 0,Fc:!0})},e.prototype.Lc=function(e){return lm(e,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})},e.prototype.Cc=function(){if(this.path)for(var e=0;e<this.path.length;e++)this.$c(this.path.get(e))},e.prototype.$c=function(e){if(0===e.length)throw this.Lc("Document fields must not be empty");if(c8(this.Nc)&&c6.test(e))throw this.Lc('Document fields cannot begin and end with "__"')},e}(),c7=function(){function e(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.R=n||sW(e)}return e.prototype.Uc=function(e,t,n,r){return void 0===r&&(r=!1),new c9({Nc:e,methodName:t,qc:n,path:rb.emptyPath(),Fc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},e}();function le(e){var t=e._freezeSettings(),n=sW(e._databaseId);return new c7(e._databaseId,!!t.ignoreUndefinedProperties,n)}function lt(e,t,n,r,i,o){void 0===o&&(o={});var a=e.Uc(o.merge||o.mergeFields?2:0,t,n,i);lp("Data must be an object, but it was:",a,r);var s,u,c=lf(r,a);if(o.merge)s=new r_(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=lg(t,f[h],n);if(!a.contains(d))throw new re(n7.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");lb(l,d)||l.push(d)}s=new r_(l),u=a.fieldTransforms.filter(function(e){return s.covers(e.field)})}else s=null,u=a.fieldTransforms;return new c5(new rG(c),s,u)}var ln=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,L.__extends)(t,e),t.prototype._toFieldTransform=function(e){if(2!==e.Nc)throw 1===e.Nc?e.Lc(this._methodName+"() can only appear at the top level of your update data"):e.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return e.fieldMask.push(e.path),null},t.prototype.isEqual=function(e){return e instanceof t},t}(c2);function lr(e,t,n){return new c9({Nc:3,qc:t.settings.qc,methodName:e._methodName,Fc:n},t.databaseId,t.R,t.ignoreUndefinedProperties)}var li=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,L.__extends)(t,e),t.prototype._toFieldTransform=function(e){return new ix(e.path,new iC)},t.prototype.isEqual=function(e){return e instanceof t},t}(c2),lo=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Kc=n,r}return(0,L.__extends)(t,e),t.prototype._toFieldTransform=function(e){var t=lr(this,e,!0),n=new iT(this.Kc.map(function(e){return lh(e,t)}));return new ix(e.path,n)},t.prototype.isEqual=function(e){return this===e},t}(c2),la=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Kc=n,r}return(0,L.__extends)(t,e),t.prototype._toFieldTransform=function(e){var t=lr(this,e,!0),n=new ik(this.Kc.map(function(e){return lh(e,t)}));return new ix(e.path,n)},t.prototype.isEqual=function(e){return this===e},t}(c2),ls=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Qc=n,r}return(0,L.__extends)(t,e),t.prototype._toFieldTransform=function(e){var t=new iA(e.R,iw(e.R,this.Qc));return new ix(e.path,t)},t.prototype.isEqual=function(e){return this===e},t}(c2);function lu(e,t,n,r){var i=e.Uc(1,t,n);lp("Data must be an object, but it was:",i,r);var o=[],a=rG.empty();return rp(r,function(e,r){var s=ly(t,e,n);r=(0,F.getModularInstance)(r);var u=i.Oc(s);if(r instanceof ln)o.push(s);else{var c=lh(r,u);null!=c&&(o.push(s),a.set(s,c))}}),new c4(a,new r_(o),i.fieldTransforms)}function lc(e,t,n,r,i,o){var a=e.Uc(1,t,n),s=[lg(t,r,n)],u=[i];if(o.length%2!=0)throw new re(n7.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(lg(t,o[c])),u.push(o[c+1]);for(var l=[],h=rG.empty(),f=s.length-1;f>=0;--f)if(!lb(l,s[f])){var d=s[f],p=u[f];p=(0,F.getModularInstance)(p);var g=a.Oc(d);if(p instanceof ln)l.push(d);else{var v=lh(p,g);null!=v&&(l.push(d),h.set(d,v))}}return new c4(h,new r_(l),a.fieldTransforms)}function ll(e,t,n,r){return void 0===r&&(r=!1),lh(n,e.Uc(r?4:3,t))}function lh(e,t){if(ld(e=(0,F.getModularInstance)(e)))return lp("Unsupported field value:",t,e),lf(e,t);if(e instanceof c2)return function(e,t){if(!c8(t.Nc))throw t.Lc(e._methodName+"() can only be used with update() and set()");if(!t.path)throw t.Lc(e._methodName+"() is not currently supported inside arrays");var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Fc&&4!==t.Nc)throw t.Lc("Nested arrays are not supported");return function(e,t){for(var n=[],r=0,i=0;i<e.length;i++){var o=lh(e[i],t.Mc(r));null==o&&(o={nullValue:"NULL_VALUE"}),n.push(o),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,F.getModularInstance)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return iw(t.R,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=rh.fromDate(e);return{timestampValue:oy(t.R,n)}}if(e instanceof rh)return n=new rh(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)),{timestampValue:oy(t.R,n)};if(e instanceof c3)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof c1)return{bytesValue:om(t.R,e._byteString)};if(e instanceof cU){n=t.databaseId;var r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:o_(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Lc("Unsupported field value: "+cR(e))}(e,t)}function lf(e,t){var n={};return rg(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):rp(e,function(e,r){var i=lh(r,t.kc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function ld(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof rh||e instanceof c3||e instanceof c1||e instanceof cU||e instanceof c2)}function lp(e,t,n){if(!ld(n)||!("object"==typeof n&&null!==n&&(Object.getPrototypeOf(n)===Object.prototype||null===Object.getPrototypeOf(n)))){var r=cR(n);throw"an object"===r?t.Lc(e+" a custom object"):t.Lc(e+" "+r)}}function lg(e,t,n){if((t=(0,F.getModularInstance)(t))instanceof c0)return t._internalPath;if("string"==typeof t)return ly(e,t);throw lm("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var lv=RegExp("[~\\*/\\[\\]]");function ly(e,t,n){if(t.search(lv)>=0)throw lm("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,n);try{return(new(c0.bind.apply(c0,(0,L.__spreadArray)([void 0],t.split(".")))))._internalPath}catch(r){throw lm("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,n)}}function lm(e,t,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+t+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new re(n7.INVALID_ARGUMENT,(s+=". ")+e+u)}function lb(e,t){return e.some(function(e){return e.isEqual(t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var l_=function(){function e(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new cU(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),e.prototype.exists=function(){return null!==this._document},e.prototype.data=function(){if(this._document){if(this._converter){var e=new lw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}},e.prototype.get=function(e){if(this._document){var t=this._document.data.field(lE("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}},e}(),lw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,L.__extends)(t,e),t.prototype.data=function(){return e.prototype.data.call(this)},t}(l_);function lE(e,t){return"string"==typeof t?ly(e,t):t instanceof c0?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lI=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),lC=function(e){function t(t,n,r,i,o,a){var s=this;return(s=e.call(this,t,n,r,i,a)||this)._firestore=t,s._firestoreImpl=t,s.metadata=o,s}return(0,L.__extends)(t,e),t.prototype.exists=function(){return e.prototype.exists.call(this)},t.prototype.data=function(e){if(void 0===e&&(e={}),this._document){if(this._converter){var t=new lT(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}},t.prototype.get=function(e,t){if(void 0===t&&(t={}),this._document){var n=this._document.data.field(lE("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}},t}(l_),lT=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,L.__extends)(t,e),t.prototype.data=function(t){return void 0===t&&(t={}),e.prototype.data.call(this,t)},t}(lC),lS=function(){function e(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new lI(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;this._snapshot.docs.forEach(function(r){e.call(t,new lT(n._firestore,n._userDataWriter,r.key,r,new lI(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},e.prototype.docChanges=function(e){void 0===e&&(e={});var t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new re(n7.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map(function(t){return{type:"added",doc:new lT(e._firestore,e._userDataWriter,t.doc.key,t.doc,new lI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}})}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(function(e){return t||3!==e.type}).map(function(t){var n=new lT(e._firestore,e._userDataWriter,t.doc.key,t.doc,new lI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,o=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(o=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:function(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rs()}}(t.type),doc:n,oldIndex:i,newIndex:o}})}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e}();function lk(e,t){return e instanceof lC&&t instanceof lC?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof lS&&t instanceof lS&&e._firestore===t._firestore&&cG(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(e){if(ia(e)&&0===e.explicitOrderBy.length)throw new re(n7.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var lA=function(){};function lP(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++)e=t[r]._apply(e);return e}var lN=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).jc=t,i.Wc=n,i.Gc=r,i.type="where",i}return(0,L.__extends)(t,e),t.prototype._apply=function(e){var t,n,r=le(e.firestore),i=function(e,t,n,r,i,o,a){if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new re(n7.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){lj(a,o);for(var s,u=[],c=0;c<a.length;c++){var l=a[c];u.push(lF(r,e,l))}s={arrayValue:{values:u}}}else s=lF(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||lj(a,o),s=ll(n,"where",a,"in"===o||"not-in"===o);var h=rJ.create(i,o,s);return function(e,t){if(t.g()){var n=iu(e);if(null!==n&&!n.isEqual(t.field))throw new re(n7.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+t.field.toString()+"'");var r=is(e);null!==r&&lU(e,t.field,r)}var i=function(e,t){for(var n=0,r=e.filters;n<r.length;n++){var i=r[n];if(t.indexOf(i.op)>=0)return i.op}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new re(n7.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new re(n7.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+i.toString()+"' filters.")}(e,h),h}(e._query,0,r,e.firestore._databaseId,this.jc,this.Wc,this.Gc);return new cq(e.firestore,e.converter,(n=(t=e._query).filters.concat([i]),new ir(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)))},t}(lA),lx=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).jc=t,r.zc=n,r.type="orderBy",r}return(0,L.__extends)(t,e),t.prototype._apply=function(e){var t,n,r=function(e,t,n){if(null!==e.startAt)throw new re(n7.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new re(n7.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new r7(t,n);return function(e,t){if(null===is(e)){var n=iu(e);null!==n&&lU(e,n,t.field)}}(e,r),r}(e._query,this.jc,this.zc);return new cq(e.firestore,e.converter,(n=(t=e._query).explicitOrderBy.concat([r]),new ir(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)))},t}(lA),lO=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Hc=n,i.Jc=r,i}return(0,L.__extends)(t,e),t.prototype._apply=function(e){return new cq(e.firestore,e.converter,id(e._query,this.Hc,this.Jc))},t}(lA),lR=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Yc=n,i.Xc=r,i}return(0,L.__extends)(t,e),t.prototype._apply=function(e){var t,n=lL(e,this.type,this.Yc,this.Xc);return new cq(e.firestore,e.converter,new ir((t=e._query).path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,n,t.endAt))},t}(lA),lM=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Yc=n,i.Xc=r,i}return(0,L.__extends)(t,e),t.prototype._apply=function(e){var t,n=lL(e,this.type,this.Yc,this.Xc);return new cq(e.firestore,e.converter,new ir((t=e._query).path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,n))},t}(lA);function lL(e,t,n,r){if(n[0]=(0,F.getModularInstance)(n[0]),n[0]instanceof l_)return function(e,t,n,r,i){if(!r)throw new re(n7.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=il(e);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(rj(t,r.key));else{var c=r.data.field(u.field);if(rS(c))throw new re(n7.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new re(n7.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new r8(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=le(e.firestore);return function(e,t,n,r,i,o){var a=e.explicitOrderBy;if(i.length>a.length)throw new re(n7.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new re(n7.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!ic(e)&&-1!==c.indexOf("/"))throw new re(n7.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=e.path.child(ry.fromString(c));if(!rN.isDocumentKey(l))throw new re(n7.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new rN(l);s.push(rj(t,h))}else{var f=ll(n,r,c);s.push(f)}}return new r8(s,o)}(e._query,e.firestore._databaseId,i,t,n,r)}function lF(e,t,n){if("string"==typeof(n=(0,F.getModularInstance)(n))){if(""===n)throw new re(n7.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!ic(t)&&-1!==n.indexOf("/"))throw new re(n7.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=t.path.child(ry.fromString(n));if(!rN.isDocumentKey(r))throw new re(n7.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return rj(e,new rN(r))}if(n instanceof cU)return rj(e,n._key);throw new re(n7.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+cR(n)+".")}function lj(e,t){if(!Array.isArray(e)||0===e.length)throw new re(n7.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new re(n7.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function lU(e,t,n){if(!n.isEqual(t))throw new re(n7.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lq=function(){function e(){}return e.prototype.convertValue=function(e,t){switch(void 0===t&&(t="none"),rx(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rC(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(rT(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw rs()}},e.prototype.convertObject=function(e,t){var n=this,r={};return rp(e.fields,function(e,i){r[e]=n.convertValue(i,t)}),r},e.prototype.convertGeoPoint=function(e){return new c3(rC(e.latitude),rC(e.longitude))},e.prototype.convertArray=function(e,t){var n=this;return(e.values||[]).map(function(e){return n.convertValue(e,t)})},e.prototype.convertServerTimestamp=function(e,t){switch(t){case"previous":var n=function e(t){var n=t.mapValue.fields.__previous_value__;return rS(n)?e(n):n}(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(rk(e));default:return null}},e.prototype.convertTimestamp=function(e){var t=rI(e);return new rh(t.seconds,t.nanos)},e.prototype.convertDocumentKey=function(e,t){var n=ry.fromString(e);oU(n)||rs();var r=new cw(n.get(1),n.get(3)),i=new rN(n.popFirst(5));return r.isEqual(t)||ri("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+t.projectId+"/"+t.database+") instead."),i},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lB(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var lV=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return(0,L.__extends)(t,e),t.prototype.convertBytes=function(e){return new c1(e)},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new cU(this.firestore,null,t)},t}(lq),lW=function(){function e(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=le(e)}return e.prototype.set=function(e,t,n){this._verifyNotCommitted();var r=lK(e,this._firestore),i=lB(r.converter,t,n),o=lt(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,iR.none())),this},e.prototype.update=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,a=lK(e,this._firestore);return o="string"==typeof(t=(0,F.getModularInstance)(t))||t instanceof c0?lc(this._dataReader,"WriteBatch.update",a._key,t,n,r):lu(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(o.toMutation(a._key,iR.exists(!0))),this},e.prototype.delete=function(e){this._verifyNotCommitted();var t=lK(e,this._firestore);return this._mutations=this._mutations.concat(new iZ(t._key,iR.none())),this},e.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},e.prototype._verifyNotCommitted=function(){if(this._committed)throw new re(n7.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lK(e,t){if((e=(0,F.getModularInstance)(e)).firestore!==t)throw new re(n7.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lG=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return(0,L.__extends)(t,e),t.prototype.convertBytes=function(e){return new c1(e)},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new cU(this.firestore,null,t)},t}(lq);function lz(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];e=cM(e,cU);var o=cM(e.firestore,cQ),a=le(o);return l$(o,[("string"==typeof(t=(0,F.getModularInstance)(t))||t instanceof c0?lc(a,"updateDoc",e._key,t,n,r):lu(a,"updateDoc",e._key,t)).toMutation(e._key,iR.exists(!0))])}function lH(e){for(var t,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];e=(0,F.getModularInstance)(e);var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[0]||cH(i[s])||(a=i[s],s++);var u,c,l,h={includeMetadataChanges:a.includeMetadataChanges};if(cH(i[s])){var f=i[s];i[s]=null===(t=f.next)||void 0===t?void 0:t.bind(f),i[s+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[s+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(e instanceof cU)c=cM(e.firestore,cQ),l=ii(e._key.path),u={next:function(t){i[s]&&i[s](lQ(c,e,t))},error:i[s+1],complete:i[s+2]};else{var d=cM(e,cq);c=cM(d.firestore,cQ),l=d._query;var p=new lG(c);u={next:function(e){i[s]&&i[s](new lS(c,p,d,e))},error:i[s+1],complete:i[s+2]},lD(e._query)}return function(e,t,n,r){var i=this,o=new ci(r),a=new uI(t,o,n);return e.asyncQueue.enqueueAndForget(function(){return(0,L.__awaiter)(i,void 0,void 0,function(){var t;return(0,L.__generator)(this,function(n){switch(n.label){case 0:return t=um,[4,cy(e)];case 1:return[2,t.apply(void 0,[n.sent(),a])]}})})}),function(){o.Wo(),e.asyncQueue.enqueueAndForget(function(){return(0,L.__awaiter)(i,void 0,void 0,function(){var t;return(0,L.__generator)(this,function(n){switch(n.label){case 0:return t=ub,[4,cy(e)];case 1:return[2,t.apply(void 0,[n.sent(),a])]}})})})}}(cY(c),l,h,u)}function l$(e,t){return function(e,t){var n=this,r=new o8;return e.asyncQueue.enqueueAndForget(function(){return(0,L.__awaiter)(n,void 0,void 0,function(){var n;return(0,L.__generator)(this,function(i){switch(i.label){case 0:return n=uF,[4,cv(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}})})}),r.promise}(cY(e),t)}function lQ(e,t,n){var r=n.docs.get(t._key),i=new lG(e);return new lC(e,i,t._key,r,new lI(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lY=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this)._firestore=t,r}return(0,L.__extends)(t,e),t.prototype.get=function(t){var n=this,r=lK(t,this._firestore),i=new lG(this._firestore);return e.prototype.get.call(this,t).then(function(e){return new lC(n._firestore,i,r._key,e._document,new lI(!1,!1),r.converter)})},t}(function(){function e(e,t){this._firestore=e,this._transaction=t,this._dataReader=le(e)}return e.prototype.get=function(e){var t=this,n=lK(e,this._firestore),r=new lV(this._firestore);return this._transaction.lookup([n._key]).then(function(e){if(!e||1!==e.length)return rs();var i=e[0];if(i.isFoundDocument())return new l_(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new l_(t._firestore,r,n._key,null,n.converter);throw rs()})},e.prototype.set=function(e,t,n){var r=lK(e,this._firestore),i=lB(r.converter,t,n),o=lt(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},e.prototype.update=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a=lK(e,this._firestore);return o="string"==typeof(t=(0,F.getModularInstance)(t))||t instanceof c0?lc(this._dataReader,"Transaction.update",a._key,t,n,r):lu(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,o),this},e.prototype.delete=function(e){var t=lK(e,this._firestore);return this._transaction.delete(t._key),this},e}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lX(){if("undefined"==typeof Uint8Array)throw new re(n7.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function lJ(){if("undefined"==typeof atob)throw new re(n7.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var lZ=function(){function e(e){this._delegate=e}return e.fromBase64String=function(t){return lJ(),new e(c1.fromBase64String(t))},e.fromUint8Array=function(t){return lX(),new e(c1.fromUint8Array(t))},e.prototype.toBase64=function(){return lJ(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return lX(),this._delegate.toUint8Array()},e.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(),l0=function(){function e(){}return e.prototype.enableIndexedDbPersistence=function(e,t){var n,r,i,o,a;return n=e._delegate,r={forceOwnership:t},cZ(n=cM(n,cQ)),i=cY(n),o=n._freezeSettings(),cJ(i,a=new cn,new ce(a,o.cacheSizeBytes,null==r?void 0:r.forceOwnership))},e.prototype.enableMultiTabIndexedDbPersistence=function(e){var t,n,r,i;return cZ(t=cM(t=e._delegate,cQ)),n=cY(t),r=t._freezeSettings(),cJ(n,i=new cn,new ct(i,r.cacheSizeBytes))},e.prototype.clearIndexedDbPersistence=function(e){return function(e){var t=this;if(e._initialized&&!e._terminated)throw new re(n7.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new o8;return e._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,L.__awaiter)(t,void 0,void 0,function(){var t;return(0,L.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(e){return(0,L.__awaiter)(this,void 0,void 0,function(){var t;return(0,L.__generator)(this,function(n){switch(n.label){case 0:return ae.yt()?(t=e+"main",[4,ae.delete(t)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}})})}(st(e._databaseId,e._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return t=r.sent(),n.reject(t),[3,3];case 3:return[2]}})})}),n.promise}(e._delegate)},e}(),l1=function(){function e(e,t,n){var r=this;this._delegate=t,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},e instanceof cw||(this.tu=e)}return Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||ro("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)},e.prototype.useEmulator=function(e,t,n){void 0===n&&(n={}),function(e,t,n,r){void 0===r&&(r={});var i,o,a,s=(e=cM(e,cj))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&ro("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},s),{host:t+":"+n,ssl:!1})),r.mockUserToken){if("string"==typeof r.mockUserToken)o=r.mockUserToken,a=sT.MOCK_USER;else{o=(0,F.createMockUserToken)(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);var u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new re(n7.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new sT(u)}e._credentials=new cT(new cI(o,a))}}(this._delegate,e,t,n)},e.prototype.enableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue(function(){return(0,L.__awaiter)(t,void 0,void 0,function(){var t,n;return(0,L.__generator)(this,function(r){switch(r.label){case 0:return[4,cd(e)];case 1:return t=r.sent(),[4,cg(e)];case 2:return n=r.sent(),[2,(t.setNetworkEnabled(!0),n.Or.delete(0),sX(n))]}})})})}(cY(cM(this._delegate,cQ)))},e.prototype.disableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue(function(){return(0,L.__awaiter)(t,void 0,void 0,function(){var t,n;return(0,L.__generator)(this,function(r){switch(r.label){case 0:return[4,cd(e)];case 1:return t=r.sent(),[4,cg(e)];case 2:return n=r.sent(),[2,(t.setNetworkEnabled(!1),function(e){return(0,L.__awaiter)(this,void 0,void 0,function(){var t;return(0,L.__generator)(this,function(n){switch(n.label){case 0:return(t=e).Or.add(0),[4,sJ(t)];case 1:return n.sent(),t.Br.set("Offline"),[2]}})})}(n))]}})})})}(cY(cM(this._delegate,cQ)))},e.prototype.enablePersistence=function(e){var t=!1,n=!1;return e&&cN("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(e){var t=this,n=new o8;return e.asyncQueue.enqueueAndForget(function(){return(0,L.__awaiter)(t,void 0,void 0,function(){var t;return(0,L.__generator)(this,function(r){switch(r.label){case 0:return t=uW,[4,cv(e)];case 1:return[2,t.apply(void 0,[r.sent(),n])]}})})}),n.promise}(cY(cM(this._delegate,cQ)))},e.prototype.onSnapshotsInSync=function(e){var t;return function(e,t){var n=this,r=new ci(t);return e.asyncQueue.enqueueAndForget(function(){return(0,L.__awaiter)(n,void 0,void 0,function(){var t;return(0,L.__generator)(this,function(n){switch(n.label){case 0:return t=function(e,t){e.Gr.add(t),t.next()},[4,cy(e)];case 1:return[2,t.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),e.asyncQueue.enqueueAndForget(function(){return(0,L.__awaiter)(n,void 0,void 0,function(){var t;return(0,L.__generator)(this,function(n){switch(n.label){case 0:return t=function(e,t){e.Gr.delete(t)},[4,cy(e)];case 1:return[2,t.apply(void 0,[n.sent(),r])]}})})})}}(cY(cM(this._delegate,cQ)),cH(e)?e:{next:e})},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.tu)throw new re(n7.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),e.prototype.collection=function(e){try{return new ho(this,cV(this._delegate,e))}catch(e){throw l8(e,"collection()","Firestore.collection()")}},e.prototype.doc=function(e){try{return new l4(this,cW(this._delegate,e))}catch(e){throw l8(e,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(e){try{return new hn(this,function(e,t){if(e=cM(e,cj),cA("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new re(n7.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new cq(e,null,new ir(ry.emptyPath(),t))}(this._delegate,e))}catch(e){throw l8(e,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(e){var t,n=this;return function(e,t){var n=this,r=new o8;return e.asyncQueue.enqueueAndForget(function(){return(0,L.__awaiter)(n,void 0,void 0,function(){var n;return(0,L.__generator)(this,function(i){switch(i.label){case 0:return[4,cf(e).then(function(e){return e.datastore})];case 1:return n=i.sent(),new cs(e.asyncQueue,n,t,r).run(),[2]}})})}),r.promise}(cY(t=this._delegate),function(r){return e(new l3(n,new lY(t,r)))})},e.prototype.batch=function(){var e=this;return cY(this._delegate),new l6(new lW(this._delegate,function(t){return l$(e._delegate,t)}))},e.prototype.loadBundle=function(e){throw new re(n7.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(e){throw new re(n7.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(),l2=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return(0,L.__extends)(t,e),t.prototype.convertBytes=function(e){return new lZ(new c1(e))},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return l4.eu(t,this.firestore,null)},t}(lq),l3=function(){function e(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new l2(e)}return e.prototype.get=function(e){var t=this,n=cM(e,cU);return this._delegate.get(n).then(function(e){return new he(t._firestore,new lC(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))})},e.prototype.set=function(e,t,n){var r=cM(e,cU);return n?(cP("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this},e.prototype.update=function(e,t,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=cM(e,cU);return 2==arguments.length?this._delegate.update(a,t):(r=this._delegate).update.apply(r,(0,L.__spreadArray)([a,t,n],i)),this},e.prototype.delete=function(e){var t=cM(e,cU);return this._delegate.delete(t),this},e}(),l6=function(){function e(e){this._delegate=e}return e.prototype.set=function(e,t,n){var r=cM(e,cU);return n?(cP("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this},e.prototype.update=function(e,t,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=cM(e,cU);return 2==arguments.length?this._delegate.update(a,t):(r=this._delegate).update.apply(r,(0,L.__spreadArray)([a,t,n],i)),this},e.prototype.delete=function(e){var t=cM(e,cU);return this._delegate.delete(t),this},e.prototype.commit=function(){return this._delegate.commit()},e}(),l5=function(){function e(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}return e.prototype.fromFirestore=function(e,t){var n=new lT(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ht(this._firestore,n),null!=t?t:{})},e.prototype.toFirestore=function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)},e.nu=function(t,n){var r=e.su,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new l2(t),n),i.set(n,o)),o},e}();l5.su=new WeakMap;var l4=function(){function e(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new l2(e)}return e.iu=function(t,n,r){if(t.length%2!=0)throw new re(n7.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new cU(n._delegate,r,new rN(t)))},e.eu=function(t,n,r){return new e(n,new cU(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new ho(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(e){try{return new ho(this.firestore,cV(this._delegate,e))}catch(e){throw l8(e,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(e){return(e=(0,F.getModularInstance)(e))instanceof cU&&cK(this._delegate,e)},e.prototype.set=function(e,t){t=cP("DocumentReference.set",t);try{var n,r,i,o;return n=this._delegate,r=t,n=cM(n,cU),i=cM(n.firestore,cQ),o=lB(n.converter,e,r),l$(i,[lt(le(i),"setDoc",n._key,o,null!==n.converter,r).toMutation(n._key,iR.none())])}catch(e){throw l8(e,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1==arguments.length?lz(this._delegate,e):lz.apply(void 0,(0,L.__spreadArray)([this._delegate,e,t],n))}catch(e){throw l8(e,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){var e;return l$(cM((e=this._delegate).firestore,cQ),[new iZ(e._key,iR.none())])},e.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=l9(t),i=l7(t,function(t){return new he(e.firestore,new lC(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))});return lH(this._delegate,r,i)},e.prototype.get=function(e){var t,n,r,i,o,a,s,u,c=this;return("cache"===(null==e?void 0:e.source)?(t=cM(t=this._delegate,cU),r=cY(n=cM(t.firestore,cQ)),i=new lG(n),(function(e,t){var n=this,r=new o8;return e.asyncQueue.enqueueAndForget(function(){return(0,L.__awaiter)(n,void 0,void 0,function(){var n;return(0,L.__generator)(this,function(i){switch(i.label){case 0:return n=function(e,t,n){return(0,L.__awaiter)(this,void 0,void 0,function(){var r;return(0,L.__generator)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,e.persistence.runTransaction("read document","readonly",function(n){return e.Mn.mn(n,t)})];case 1:return(r=i.sent()).isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new re(n7.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=uf(i.sent(),"Failed to get document '"+t+" from cache"),n.reject(r),[3,3];case 3:return[2]}})})},[4,cp(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}})})}),r.promise})(r,t._key).then(function(e){return new lC(n,i,t._key,e,new lI(null!==e&&e.hasLocalMutations,!0),t.converter)})):"server"===(null==e?void 0:e.source)?(o=cM(o=this._delegate,cU),cm(cY(a=cM(o.firestore,cQ)),o._key,{source:"server"}).then(function(e){return lQ(a,o,e)})):(s=cM(s=this._delegate,cU),cm(cY(u=cM(s.firestore,cQ)),s._key).then(function(e){return lQ(u,s,e)}))).then(function(e){return new he(c.firestore,new lC(c.firestore._delegate,c._userDataWriter,e._key,e._document,e.metadata,c._delegate.converter))})},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(l5.nu(this.firestore,t)):this._delegate.withConverter(null))},e}();function l8(e,t,n){return e.message=e.message.replace(t,n),e}function l9(e){for(var t=0;t<e.length;t++){var n=e[t];if("object"==typeof n&&!cH(n))return n}return{}}function l7(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=cH(e[0])?e[0]:cH(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var he=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"ref",{get:function(){return new l4(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(e){return this._delegate.data(e)},e.prototype.get=function(e,t){return this._delegate.get(e,t)},e.prototype.isEqual=function(e){return lk(this._delegate,e._delegate)},e}(),ht=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,L.__extends)(t,e),t.prototype.data=function(e){return this._delegate.data(e)},t}(he),hn=function(){function e(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new l2(e)}return e.prototype.where=function(t,n,r){try{var i;return new e(this.firestore,lP(this._delegate,(i=lE("where",t),new lN(i,n,r))))}catch(e){throw l8(e,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{var r,i,o;return new e(this.firestore,lP(this._delegate,(r=n,void 0===r&&(r="asc"),i=r,o=lE("orderBy",t),new lx(o,i))))}catch(e){throw l8(e,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,lP(this._delegate,(cL("limit",t),new lO("limit",t,"F"))))}catch(e){throw l8(e,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,lP(this._delegate,(cL("limitToLast",t),new lO("limitToLast",t,"L"))))}catch(e){throw l8(e,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,lP(this._delegate,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new lR("startAt",e,!0)}).apply(void 0,t)))}catch(e){throw l8(e,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,lP(this._delegate,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new lR("startAfter",e,!1)}).apply(void 0,t)))}catch(e){throw l8(e,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,lP(this._delegate,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new lM("endBefore",e,!0)}).apply(void 0,t)))}catch(e){throw l8(e,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,lP(this._delegate,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new lM("endAt",e,!1)}).apply(void 0,t)))}catch(e){throw l8(e,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(e){return cG(this._delegate,e._delegate)},e.prototype.get=function(e){var t,n,r,i,o,a,s,u,c,l,h,f,d=this;return("cache"===(null==e?void 0:e.source)?(t=cM(t=this._delegate,cq),r=cY(n=cM(t.firestore,cQ)),i=new lG(n),(function(e,t){var n=this,r=new o8;return e.asyncQueue.enqueueAndForget(function(){return(0,L.__awaiter)(n,void 0,void 0,function(){var n;return(0,L.__generator)(this,function(i){switch(i.label){case 0:return n=function(e,t,n){return(0,L.__awaiter)(this,void 0,void 0,function(){var r,i,o,a;return(0,L.__generator)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,sf(e,t,!0)];case 1:return i=(r=new uP(t,(a=s.sent()).Bn))._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return a=uf(s.sent(),"Failed to execute query '"+t+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,cp(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}})})}),r.promise})(r,t._query).then(function(e){return new lS(n,i,t,e)})):"server"===(null==e?void 0:e.source)?(o=cM(o=this._delegate,cq),s=cY(a=cM(o.firestore,cQ)),u=new lG(a),cb(s,o._query,{source:"server"}).then(function(e){return new lS(a,u,o,e)})):(c=cM(c=this._delegate,cq),h=cY(l=cM(c.firestore,cQ)),f=new lG(l),lD(c._query),cb(h,c._query).then(function(e){return new lS(l,f,c,e)}))).then(function(e){return new hi(d.firestore,new lS(d.firestore._delegate,d._userDataWriter,d._delegate,e._snapshot))})},e.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=l9(t),i=l7(t,function(t){return new hi(e.firestore,new lS(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))});return lH(this._delegate,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(l5.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(),hr=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new ht(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(),hi=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"query",{get:function(){return new hn(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var e=this;return this._delegate.docs.map(function(t){return new ht(e._firestore,t)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(e){var t=this;return this._delegate.docChanges(e).map(function(e){return new hr(t._firestore,e)})},e.prototype.forEach=function(e,t){var n=this;this._delegate.forEach(function(r){e.call(t,new ht(n._firestore,r))})},e.prototype.isEqual=function(e){return lk(this._delegate,e._delegate)},e}(),ho=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this).firestore=t,r._delegate=n,r}return(0,L.__extends)(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return e?new l4(this.firestore,e):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(e){try{return new l4(this.firestore,void 0===e?cW(this._delegate):cW(this._delegate,e))}catch(e){throw l8(e,"doc()","CollectionReference.doc()")}},t.prototype.add=function(e){var t,n,r,i,o=this;return(n=cM((t=this._delegate).firestore,cQ),r=cW(t),i=lB(t.converter,e),l$(n,[lt(le(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,iR.exists(!1))]).then(function(){return r})).then(function(e){return new l4(o.firestore,e)})},t.prototype.isEqual=function(e){return cK(this._delegate,e._delegate)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(l5.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(hn),ha=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._delegate=new(c0.bind.apply(c0,(0,L.__spreadArray)([void 0],e)))}return e.documentId=function(){return new e(rb.keyField().canonicalString())},e.prototype.isEqual=function(e){return(e=(0,F.getModularInstance)(e))instanceof c0&&this._delegate._internalPath.isEqual(e._internalPath)},e}(),hs=function(){function e(e){this._delegate=e}return e.serverTimestamp=function(){var t=new li("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new ln("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new lo("arrayUnion",e)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new la("arrayRemove",e)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=new ls("increment",t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},e}(),hu=n(9182),hc={Firestore:l1,GeoPoint:c3,Timestamp:rh,Blob:lZ,Transaction:l3,WriteBatch:l6,DocumentReference:l4,DocumentSnapshot:he,Query:hn,QueryDocumentSnapshot:ht,QuerySnapshot:hi,CollectionReference:ho,FieldPath:ha,FieldValue:hs,setLogLevel:function(e){rt.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};!function(e,t){e.INTERNAL.registerComponent(new hu.Component("firestore",function(e){return t(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},hc)))}(r=M.default,function(e,t){return new l1(e,new cQ(e,t),new l0)}),r.registerVersion("@firebase/firestore","2.4.0"),l1.prototype.loadBundle=/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){var t,n,r;return n=cY(t=cM(t=this._delegate,cQ)),r=new c$,function(e,t,n,r){var i,o=this,a=(i=sW(t),new co(function(e,t){if(e instanceof Uint8Array)return cr(e,t);if(e instanceof ArrayBuffer)return cr(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof n?(new TextEncoder).encode(n):n),i));e.asyncQueue.enqueueAndForget(function(){return(0,L.__awaiter)(o,void 0,void 0,function(){var t;return(0,L.__generator)(this,function(n){switch(n.label){case 0:return t=u9,[4,cv(e)];case 1:return t.apply(void 0,[n.sent(),a,r]),[2]}})})})}(n,t._databaseId,e,r),r},l1.prototype.namedQuery=function(e){var t,n=this;return(function(e,t){var n=this;return e.asyncQueue.enqueue(function(){return(0,L.__awaiter)(n,void 0,void 0,function(){var n;return(0,L.__generator)(this,function(r){switch(r.label){case 0:return n=function(e,t){return e.persistence.runTransaction("Get named query","readonly",function(n){return e.Ke.getNamedQuery(n,t)})},[4,cp(e)];case 1:return[2,n.apply(void 0,[r.sent(),t])]}})})})})(cY(t=cM(t=this._delegate,cQ)),e).then(function(e){return e?new cq(t,null,e.query):null}).then(function(e){return e?new hn(n,e):null})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},hh=function(e){function t(n,r,i){var o=e.call(this,r)||this;return Object.setPrototypeOf(o,t.prototype),o.code=n,o.details=i,o}return(0,L.__extends)(t,e),t}(Error),hf=function(){function e(e,t){var n=this;this.auth=null,this.messaging=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(function(e){return n.auth=e},function(){}),this.messaging||t.get().then(function(e){return n.messaging=e},function(){})}return e.prototype.getAuthToken=function(){return(0,L.__awaiter)(this,void 0,void 0,function(){var e;return(0,L.__generator)(this,function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:if(!(e=t.sent()))return[2,void 0];return[2,e.accessToken];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},e.prototype.getInstanceIdToken=function(){return(0,L.__awaiter)(this,void 0,void 0,function(){return(0,L.__generator)(this,function(e){switch(e.label){case 0:if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,e.sent()];case 3:return e.sent(),[2,void 0];case 4:return[2]}})})},e.prototype.getContext=function(){return(0,L.__awaiter)(this,void 0,void 0,function(){var e,t;return(0,L.__generator)(this,function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return e=n.sent(),[4,this.getInstanceIdToken()];case 2:return t=n.sent(),[2,{authToken:e,instanceIdToken:t}]}})})},e}();function hd(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}var hp=function(){function e(){}return e.prototype.encode=function(e){var t=this;if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"==typeof e&&isFinite(e)||!0===e||!1===e||"[object String]"===Object.prototype.toString.call(e))return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(function(e){return t.encode(e)});if("function"==typeof e||"object"==typeof e)return hd(e,function(e){return t.encode(e)});throw Error("Data cannot be encoded in JSON: "+e)},e.prototype.decode=function(e){var t=this;if(null==e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(e.value);if(isNaN(n))throw Error("Data cannot be decoded from JSON: "+e);return n;default:throw Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(function(e){return t.decode(e)}):"function"==typeof e||"object"==typeof e?hd(e,function(e){return t.decode(e)}):e},e}(),hg=function(){function e(e,t,n,r,i,o){var a=this;void 0===i&&(i="us-central1"),this.app_=e,this.appCheckProvider=r,this.fetchImpl=o,this.serializer=new hp,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(a.deleteService())}},this.contextProvider=new hf(t,n),this.cancelAllRequests=new Promise(function(e){a.deleteService=function(){return e()}});try{var s=new URL(i);this.customDomain=s.origin,this.region="us-central1"}catch(e){this.customDomain=null,this.region=i}}return Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),e.prototype._url=function(e){var t=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+t+"/"+this.region+"/"+e:null!==this.customDomain?this.customDomain+"/"+e:"https://"+this.region+"-"+t+".cloudfunctions.net/"+e},e.prototype.useEmulator=function(e,t){this.emulatorOrigin="http://"+e+":"+t},e.prototype.useFunctionsEmulator=function(e){this.emulatorOrigin=e},e.prototype.httpsCallable=function(e,t){var n=this;return function(r){return n.call(e,r,t||{})}},e.prototype.postJSON=function(e,t,n){return(0,L.__awaiter)(this,void 0,void 0,function(){var r,i,o;return(0,L.__generator)(this,function(a){switch(a.label){case 0:return n["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:null!==(r=a.sent())&&(n["X-Firebase-AppCheck"]=r),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.fetchImpl(e,{method:"POST",body:JSON.stringify(t),headers:n})];case 3:return i=a.sent(),[3,5];case 4:return a.sent(),[2,{status:0,json:null}];case 5:o=null,a.label=6;case 6:return a.trys.push([6,8,,9]),[4,i.json()];case 7:return o=a.sent(),[3,9];case 8:return a.sent(),[3,9];case 9:return[2,{status:i.status,json:o}]}})})},e.prototype.getAppCheckToken=function(){return(0,L.__awaiter)(this,void 0,void 0,function(){var e;return(0,L.__generator)(this,function(t){switch(t.label){case 0:if(!(e=this.appCheckProvider.getImmediate({optional:!0})))return[3,2];return[4,e.getToken()];case 1:return[2,t.sent().token];case 2:return[2,null]}})})},e.prototype.call=function(e,t,n){return(0,L.__awaiter)(this,void 0,void 0,function(){var r,i,o,a,s,u,c,l,h,f;return(0,L.__generator)(this,function(d){switch(d.label){case 0:return r=this._url(e),i={data:t=this.serializer.encode(t)},o={},[4,this.contextProvider.getContext()];case 1:var p,g,v;return(a=d.sent()).authToken&&(o.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=a.instanceIdToken),p=n.timeout||7e4,v=new Promise(function(e,t){g=setTimeout(function(){t(new hh("deadline-exceeded","deadline-exceeded"))},p)}),u=(s={timer:g,promise:v}).timer,c=s.promise,[4,Promise.race([hv(u,this.postJSON(r,i,o)),c,hv(u,this.cancelAllRequests)])];case 2:if(!(l=d.sent()))throw new hh("cancelled","Firebase Functions instance was deleted.");if(h=function(e,t,n){var r=function(e){if(e>=200&&e<300)return"ok";switch(e){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),i=r,o=void 0;try{var a=t&&t.error;if(a){var s=a.status;if("string"==typeof s){if(!hl[s])return new hh("internal","internal");r=hl[s],i=s}var u=a.message;"string"==typeof u&&(i=u),o=a.details,void 0!==o&&(o=n.decode(o))}}catch(e){}return"ok"===r?null:new hh(r,i,o)}(l.status,l.json,this.serializer))throw h;if(!l.json)throw new hh("internal","Response is not valid JSON object.");if(void 0===(f=l.json.data)&&(f=l.json.result),void 0===f)throw new hh("internal","Response is missing data field.");return[2,{data:this.serializer.decode(f)}]}})})},e}();function hv(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n;return(0,L.__generator)(this,function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),clearTimeout(e),[2,n]}})})}!/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t){e.INTERNAL.registerComponent(new hu.Component("functions",function(e,n){var r=n.instanceIdentifier,i=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new hg(i,o,e.getProvider("messaging"),a,r,t)},"PUBLIC").setServiceProps({Functions:hg}).setMultipleInstances(!0))}(M.default,fetch.bind(self)),M.default.registerVersion("@firebase/functions","0.6.15");var hy=n(444),hm="0.4.32",hb="w:"+hm,h_="FIS_v2",hw=((g={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',g["not-registered"]="Firebase Installation is not registered.",g["installation-not-found"]="Firebase Installation not found.",g["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',g["app-offline"]="Could not process request. Application offline.",g["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",g),hE=new F.ErrorFactory("installations","Installations",hw);function hI(e){return e instanceof F.FirebaseError&&e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(e){return"https://firebaseinstallations.googleapis.com/v1/projects/"+e.projectId+"/installations"}function hT(e){return{token:e.token,requestStatus:2,expiresIn:Number(e.expiresIn.replace("s","000")),creationTime:Date.now()}}function hS(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n;return(0,L.__generator)(this,function(r){switch(r.label){case 0:return[4,t.json()];case 1:return n=r.sent().error,[2,hE.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})]}})})}function hk(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function hD(e,t){var n=t.refreshToken,r=hk(e);return r.append("Authorization",h_+" "+n),r}function hA(e){return(0,L.__awaiter)(this,void 0,void 0,function(){var t;return(0,L.__generator)(this,function(n){switch(n.label){case 0:return[4,e()];case 1:if((t=n.sent()).status>=500&&t.status<600)return[2,e()];return[2,t]}})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(e){return new Promise(function(t){setTimeout(t,e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hN=/^[cdef][\w-]{21}$/;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(e){return e.appName+"!"+e.appId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hO=new Map;function hR(e,t){var n,r=hx(e);hM(r,t),(n=hF())&&n.postMessage({key:r,fid:t}),hj()}function hM(e,t){var n,r,i=hO.get(e);if(i)try{for(var o=(0,L.__values)(i),a=o.next();!a.done;a=o.next())(0,a.value)(t)}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var hL=null;function hF(){return!hL&&"BroadcastChannel"in self&&((hL=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){hM(e.data.key,e.data.fid)}),hL}function hj(){0===hO.size&&hL&&(hL.close(),hL=null)}var hU="firebase-installations-store",hq=null;function hB(){return hq||(hq=(0,hy.openDb)("firebase-installations-database",1,function(e){0===e.oldVersion&&e.createObjectStore(hU)})),hq}function hV(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return(0,L.__generator)(this,function(a){switch(a.label){case 0:return n=hx(e),[4,hB()];case 1:return[4,(i=(r=a.sent().transaction(hU,"readwrite")).objectStore(hU)).get(n)];case 2:return o=a.sent(),[4,i.put(t,n)];case 3:return a.sent(),[4,r.complete];case 4:return a.sent(),o&&o.fid===t.fid||hR(e,t.fid),[2,t]}})})}function hW(e){return(0,L.__awaiter)(this,void 0,void 0,function(){var t,n;return(0,L.__generator)(this,function(r){switch(r.label){case 0:return t=hx(e),[4,hB()];case 1:return[4,(n=r.sent().transaction(hU,"readwrite")).objectStore(hU).delete(t)];case 2:return r.sent(),[4,n.complete];case 3:return r.sent(),[2]}})})}function hK(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,a;return(0,L.__generator)(this,function(s){switch(s.label){case 0:return n=hx(e),[4,hB()];case 1:return[4,(i=(r=s.sent().transaction(hU,"readwrite")).objectStore(hU)).get(n)];case 2:if(void 0!==(a=t(o=s.sent())))return[3,4];return[4,i.delete(n)];case 3:return s.sent(),[3,6];case 4:return[4,i.put(a,n)];case 5:s.sent(),s.label=6;case 6:return[4,r.complete];case 7:return s.sent(),a&&(!o||o.fid!==a.fid)&&hR(e,a.fid),[2,a]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hG(e){return(0,L.__awaiter)(this,void 0,void 0,function(){var t,n,r;return(0,L.__generator)(this,function(i){switch(i.label){case 0:return[4,hK(e,function(n){var r=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(hE.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=function(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n;return(0,L.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,7]),[4,/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t){var n=t.fid;return(0,L.__awaiter)(this,void 0,void 0,function(){var t,r,i,o;return(0,L.__generator)(this,function(a){switch(a.label){case 0:return t=hC(e),r={method:"POST",headers:hk(e),body:JSON.stringify({fid:n,authVersion:h_,appId:e.appId,sdkVersion:hb})},[4,hA(function(){return fetch(t,r)})];case 1:if(!(i=a.sent()).ok)return[3,3];return[4,i.json()];case 2:return[2,{fid:(o=a.sent()).fid||n,registrationStatus:2,refreshToken:o.refreshToken,authToken:hT(o.authToken)}];case 3:return[4,hS("Create Installation",i)];case 4:throw a.sent()}})})}(e,t)];case 1:return[2,hV(e,r.sent())];case 2:if(!(hI(n=r.sent())&&409===n.customData.serverCode))return[3,4];return[4,hW(e)];case 3:return r.sent(),[3,6];case 4:return[4,hV(e,{fid:t.fid,registrationStatus:0})];case 5:r.sent(),r.label=6;case 6:throw n;case 7:return[2]}})})}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:function(e){return(0,L.__awaiter)(this,void 0,void 0,function(){var t,n,r,i;return(0,L.__generator)(this,function(o){switch(o.label){case 0:return[4,hz(e)];case 1:t=o.sent(),o.label=2;case 2:if(1!==t.registrationStatus)return[3,5];return[4,hP(100)];case 3:return o.sent(),[4,hz(e)];case 4:return t=o.sent(),[3,2];case 5:if(0!==t.registrationStatus)return[3,7];return[4,hG(e)];case 6:if(r=(n=o.sent()).installationEntry,i=n.registrationPromise)return[2,i];return[2,r];case 7:return[2,t]}})})}(e)}:{installationEntry:t}}(e,hH(n||{fid:function(){try{var e,t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var n=(e=t,btoa(String.fromCharCode.apply(String,(0,L.__spreadArray)([],(0,L.__read)(e)))).replace(/\+/g,"-").replace(/\//g,"_").substr(0,22));return hN.test(n)?n:""}catch(e){return""}}(),registrationStatus:0}));return t=r.registrationPromise,r.installationEntry})];case 1:if(""!==(n=i.sent()).fid)return[3,3];return r={},[4,t];case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}})})}function hz(e){return hK(e,function(e){if(!e)throw hE.create("installation-not-found");return hH(e)})}function hH(e){return 1===e.registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h$(e,t){return void 0===t&&(t=!1),(0,L.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,L.__generator)(this,function(o){switch(o.label){case 0:return[4,hK(e.appConfig,function(r){if(!hY(r))throw hE.create("not-registered");var i,o,a,s,u=r.authToken;if(!t&&2===(i=u).requestStatus&&(o=i,!((a=Date.now())<o.creationTime)&&!(o.creationTime+o.expiresIn<a+36e5)))return r;if(1===u.requestStatus)return n=function(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,L.__generator)(this,function(i){switch(i.label){case 0:return[4,hQ(e.appConfig)];case 1:n=i.sent(),i.label=2;case 2:if(1!==n.authToken.requestStatus)return[3,5];return[4,hP(100)];case 3:return i.sent(),[4,hQ(e.appConfig)];case 4:return n=i.sent(),[3,2];case 5:if(0===(r=n.authToken).requestStatus)return[2,h$(e,t)];return[2,r]}})})}(e,t),r;if(!navigator.onLine)throw hE.create("app-offline");var c=(s={requestStatus:1,requestTime:Date.now()},(0,L.__assign)((0,L.__assign)({},r),{authToken:s}));return n=function(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,L.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t){var n=e.appConfig,r=e.platformLoggerProvider;return(0,L.__awaiter)(this,void 0,void 0,function(){var e,i,o,a,s;return(0,L.__generator)(this,function(u){switch(u.label){case 0:var c;return c=t.fid,e=hC(n)+"/"+c+"/authTokens:generate",i=hD(n,t),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:hb}})},[4,hA(function(){return fetch(e,a)})];case 1:if(!(s=u.sent()).ok)return[3,3];return[4,s.json()];case 2:return[2,hT(u.sent())];case 3:return[4,hS("Generate Auth Token",s)];case 4:throw u.sent()}})})}(e,t)];case 1:return n=o.sent(),r=(0,L.__assign)((0,L.__assign)({},t),{authToken:n}),[4,hV(e.appConfig,r)];case 2:return o.sent(),[2,n];case 3:if(!(hI(i=o.sent())&&(401===i.customData.serverCode||404===i.customData.serverCode)))return[3,5];return[4,hW(e.appConfig)];case 4:return o.sent(),[3,7];case 5:return r=(0,L.__assign)((0,L.__assign)({},t),{authToken:{requestStatus:0}}),[4,hV(e.appConfig,r)];case 6:o.sent(),o.label=7;case 7:throw i;case 8:return[2]}})})}(e,c),c})];case 1:if(r=o.sent(),!n)return[3,3];return[4,n];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}})})}function hQ(e){return hK(e,function(e){var t;if(!hY(e))throw hE.create("not-registered");return 1===(t=e.authToken).requestStatus&&t.requestTime+1e4<Date.now()?(0,L.__assign)((0,L.__assign)({},e),{authToken:{requestStatus:0}}):e})}function hY(e){return void 0!==e&&2===e.registrationStatus}function hX(e){return hE.create("missing-app-config-values",{valueName:e})}(i=M.default).INTERNAL.registerComponent(new hu.Component("installations",function(e){var t=e.getProvider("app").getImmediate(),n={appConfig:/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){if(!e||!e.options)throw hX("App Configuration");if(!e.name)throw hX("App Name");try{for(var t,n,r=(0,L.__values)(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!e.options[o])throw hX(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),platformLoggerProvider:e.getProvider("platform-logger")};return{app:t,getId:function(){return(/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){return(0,L.__awaiter)(this,void 0,void 0,function(){var t,n,r;return(0,L.__generator)(this,function(i){switch(i.label){case 0:return[4,hG(e.appConfig)];case 1:return n=(t=i.sent()).installationEntry,(r=t.registrationPromise)?r.catch(console.error):h$(e).catch(console.error),[2,n.fid]}})})}(n))},getToken:function(e){return(/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t){return void 0===t&&(t=!1),(0,L.__awaiter)(this,void 0,void 0,function(){return(0,L.__generator)(this,function(n){switch(n.label){case 0:return[4,function(e){return(0,L.__awaiter)(this,void 0,void 0,function(){var t;return(0,L.__generator)(this,function(n){switch(n.label){case 0:return[4,hG(e)];case 1:if(!(t=n.sent().registrationPromise))return[3,3];return[4,t];case 2:n.sent(),n.label=3;case 3:return[2]}})})}(e.appConfig)];case 1:return n.sent(),[4,h$(e,t)];case 2:return[2,n.sent().token]}})})}(n,e))},delete:function(){return(/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){return(0,L.__awaiter)(this,void 0,void 0,function(){var t,n;return(0,L.__generator)(this,function(r){switch(r.label){case 0:return[4,hK(t=e.appConfig,function(e){if(!e||0!==e.registrationStatus)return e})];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw hE.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw hE.create("app-offline");case 3:return[4,/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,L.__generator)(this,function(o){switch(o.label){case 0:var a;return a=t.fid,n=hC(e)+"/"+a,r={method:"DELETE",headers:hD(e,t)},[4,hA(function(){return fetch(n,r)})];case 1:if((i=o.sent()).ok)return[3,3];return[4,hS("Delete Installation",i)];case 2:throw o.sent();case 3:return[2]}})})}(t,n)];case 4:return r.sent(),[4,hW(t)];case 5:r.sent(),r.label=6;case 6:return[2]}})})}(n))},onIdChange:function(e){var t,r,i,o;return r=t=n.appConfig,hF(),i=hx(r),(o=hO.get(i))||(o=new Set,hO.set(i,o)),o.add(e),function(){var n,r;n=hx(t),(r=hO.get(n))&&(r.delete(e),0===r.size&&hO.delete(n),hj())}}}},"PUBLIC")),i.registerVersion("@firebase/installations",hm);var hJ=((v={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',v["only-available-in-window"]="This method is available in a Window context.",v["only-available-in-sw"]="This method is available in a service worker context.",v["permission-default"]="The notification permission was not granted and dismissed instead.",v["permission-blocked"]="The notification permission was not granted and blocked instead.",v["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",v["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",v["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",v["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",v["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",v["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",v["token-update-no-token"]="FCM returned no token when updating the user to push.",v["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",v["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",v["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",v["invalid-vapid-key"]="The public VAPID key must be a string.",v["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",v),hZ=new F.ErrorFactory("messaging","Messaging",hJ),h0="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",h1="FCM_MSG",h2="google.c.a.c_id";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h3(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,(0,L.__spreadArray)([],(0,L.__read)(t)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(o=y||(y={})).PUSH_RECEIVED="push-received",o.NOTIFICATION_CLICKED="notification-clicked";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var h6="fcm_token_details_db",h5="fcm_token_object_Store",h4="firebase-messaging-store",h8=null;function h9(){return h8||(h8=(0,hy.openDb)("firebase-messaging-database",1,function(e){0===e.oldVersion&&e.createObjectStore(h4)})),h8}function h7(e){return(0,L.__awaiter)(this,void 0,void 0,function(){var t,n,r;return(0,L.__generator)(this,function(i){switch(i.label){case 0:return t=ft(e),[4,h9()];case 1:return[4,i.sent().transaction(h4).objectStore(h4).get(t)];case 2:if(!(n=i.sent()))return[3,3];return[2,n];case 3:return[4,function(e){return(0,L.__awaiter)(this,void 0,void 0,function(){var t,n=this;return(0,L.__generator)(this,function(r){switch(r.label){case 0:if(!("databases"in indexedDB))return[3,2];return[4,indexedDB.databases()];case 1:if(!r.sent().map(function(e){return e.name}).includes(h6))return[2,null];r.label=2;case 2:return t=null,[4,(0,hy.openDb)(h6,5,function(r){return(0,L.__awaiter)(n,void 0,void 0,function(){var n,i,o,a;return(0,L.__generator)(this,function(s){switch(s.label){case 0:if(r.oldVersion<2||!r.objectStoreNames.contains(h5))return[2];return[4,(n=r.transaction.objectStore(h5)).index("fcmSenderId").get(e)];case 1:return i=s.sent(),[4,n.clear()];case 2:if(s.sent(),!i)return[2];if(2===r.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];t={token:o.fcmToken,createTime:null!==(a=o.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"==typeof o.vapidKey?o.vapidKey:h3(o.vapidKey)}}}else 3===r.oldVersion?t={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:h3(o.auth),p256dh:h3(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:h3(o.vapidKey)}}:4===r.oldVersion&&(t={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:h3(o.auth),p256dh:h3(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:h3(o.vapidKey)}});return[2]}})})})];case 3:return r.sent().close(),[4,(0,hy.deleteDb)(h6)];case 4:return r.sent(),[4,(0,hy.deleteDb)("fcm_vapid_details_db")];case 5:return r.sent(),[4,(0,hy.deleteDb)("undefined")];case 6:return r.sent(),[2,!function(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}(t)?null:t]}})})}(e.appConfig.senderId)];case 4:if(!(r=i.sent()))return[3,6];return[4,fe(e,r)];case 5:return i.sent(),[2,r];case 6:return[2]}})})}function fe(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,L.__generator)(this,function(i){switch(i.label){case 0:return n=ft(e),[4,h9()];case 1:return[4,(r=i.sent().transaction(h4,"readwrite")).objectStore(h4).put(t,n)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2,t]}})})}function ft(e){return e.appConfig.appId}function fn(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return(0,L.__generator)(this,function(a){switch(a.label){case 0:return[4,fi(e)];case 1:n={method:"DELETE",headers:a.sent()},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(fr(e.appConfig)+"/"+t,n)];case 3:return[4,a.sent().json()];case 4:if((r=a.sent()).error)throw i=r.error.message,hZ.create("token-unsubscribe-failed",{errorInfo:i});return[3,6];case 5:throw o=a.sent(),hZ.create("token-unsubscribe-failed",{errorInfo:o});case 6:return[2]}})})}function fr(e){return"https://fcmregistrations.googleapis.com/v1/projects/"+e.projectId+"/registrations"}function fi(e){var t=e.appConfig,n=e.installations;return(0,L.__awaiter)(this,void 0,void 0,function(){var e;return(0,L.__generator)(this,function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return e=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}})})}function fo(e){var t=e.p256dh,n=e.auth,r=e.endpoint,i=e.vapidKey,o={web:{endpoint:r,auth:n,p256dh:t}};return i!==h0&&(o.web.applicationPubKey=i),o}function fa(e,t,n){return(0,L.__awaiter)(this,void 0,void 0,function(){var r,i,o;return(0,L.__generator)(this,function(a){switch(a.label){case 0:if("granted"!==Notification.permission)throw hZ.create("permission-blocked");return[4,function(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n;return(0,L.__generator)(this,function(r){switch(r.label){case 0:return[4,e.pushManager.getSubscription()];case 1:if(n=r.sent())return[2,n];return[2,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(e){for(var t="=".repeat((4-e.length%4)%4),n=atob((e+t).replace(/\-/g,"+").replace(/_/g,"/")),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}(t)})]}})})}(t,n)];case 1:return r=a.sent(),[4,h7(e)];case 2:if(i=a.sent(),o={vapidKey:n,swScope:t.scope,endpoint:r.endpoint,auth:h3(r.getKey("auth")),p256dh:h3(r.getKey("p256dh"))},i)return[3,3];return[2,fu(e,o)];case 3:var s,u,c,l,h,f;if(s=i.subscriptionOptions,c=(u=o).vapidKey===s.vapidKey,l=u.endpoint===s.endpoint,h=u.auth===s.auth,f=u.p256dh===s.p256dh,c&&l&&h&&f)return[3,8];a.label=4;case 4:return a.trys.push([4,6,,7]),[4,fn(e,i.token)];case 5:return a.sent(),[3,7];case 6:return console.warn(a.sent()),[3,7];case 7:return[2,fu(e,o)];case 8:if(Date.now()>=i.createTime+6048e5)return[2,function(e,t,n){return(0,L.__awaiter)(this,void 0,void 0,function(){var r,i;return(0,L.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,5]),[4,function(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return(0,L.__generator)(this,function(a){switch(a.label){case 0:return[4,fi(e)];case 1:n={method:"PATCH",headers:a.sent(),body:JSON.stringify(fo(t.subscriptionOptions))},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(fr(e.appConfig)+"/"+t.token,n)];case 3:return[4,a.sent().json()];case 4:return r=a.sent(),[3,6];case 5:throw i=a.sent(),hZ.create("token-update-failed",{errorInfo:i});case 6:if(r.error)throw o=r.error.message,hZ.create("token-update-failed",{errorInfo:o});if(!r.token)throw hZ.create("token-update-no-token");return[2,r.token]}})})}(t,e)];case 1:return r=o.sent(),[4,fe(t,(0,L.__assign)((0,L.__assign)({},e),{token:r,createTime:Date.now()}))];case 2:return o.sent(),[2,r];case 3:return i=o.sent(),[4,fs(t,n)];case 4:throw o.sent(),i;case 5:return[2]}})})}({token:i.token,createTime:Date.now(),subscriptionOptions:o},e,t)];return[2,i.token];case 9:return[2]}})})}function fs(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,L.__generator)(this,function(i){switch(i.label){case 0:return[4,h7(e)];case 1:if(!(n=i.sent()))return[3,4];return[4,fn(e,n.token)];case 2:return i.sent(),[4,function(e){return(0,L.__awaiter)(this,void 0,void 0,function(){var t,n;return(0,L.__generator)(this,function(r){switch(r.label){case 0:return t=ft(e),[4,h9()];case 1:return[4,(n=r.sent().transaction(h4,"readwrite")).objectStore(h4).delete(t)];case 2:return r.sent(),[4,n.complete];case 3:return r.sent(),[2]}})})}(e)];case 3:i.sent(),i.label=4;case 4:return[4,t.pushManager.getSubscription()];case 5:if(r=i.sent())return[2,r.unsubscribe()];return[2,!0]}})})}function fu(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n;return(0,L.__generator)(this,function(r){switch(r.label){case 0:return[4,/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return(0,L.__generator)(this,function(a){switch(a.label){case 0:return[4,fi(e)];case 1:n={method:"POST",headers:a.sent(),body:JSON.stringify(fo(t))},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(fr(e.appConfig),n)];case 3:return[4,a.sent().json()];case 4:return r=a.sent(),[3,6];case 5:throw i=a.sent(),hZ.create("token-subscribe-failed",{errorInfo:i});case 6:if(r.error)throw o=r.error.message,hZ.create("token-subscribe-failed",{errorInfo:o});if(!r.token)throw hZ.create("token-subscribe-no-token");return[2,r.token]}})})}(e,t)];case 1:return[4,fe(e,n={token:r.sent(),createTime:Date.now(),subscriptionOptions:t})];case 2:return r.sent(),[2,n.token]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(e){return"object"==typeof e&&!!e&&h2 in e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(e){return new Promise(function(t){setTimeout(t,e)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fh=function(){function e(e){var t=this;this.firebaseDependencies=e,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(e){e.waitUntil(t.onPush(e))}),self.addEventListener("pushsubscriptionchange",function(e){e.waitUntil(t.onSubChange(e))}),self.addEventListener("notificationclick",function(e){e.waitUntil(t.onNotificationClick(e))})}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.setBackgroundMessageHandler=function(e){if(this.isOnBackgroundMessageUsed=!1,!e||"function"!=typeof e)throw hZ.create("invalid-bg-handler");this.bgMessageHandler=e},e.prototype.onBackgroundMessage=function(e){var t=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=e,function(){t.bgMessageHandler=null}},e.prototype.getToken=function(){var e,t;return(0,L.__awaiter)(this,void 0,void 0,function(){var n;return(0,L.__generator)(this,function(r){switch(r.label){case 0:if(this.vapidKey)return[3,2];return[4,h7(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(t=null===(e=null==n?void 0:n.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==t?t:h0,r.label=2;case 2:return[2,fa(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},e.prototype.deleteToken=function(){return fs(this.firebaseDependencies,self.registration)},e.prototype.requestPermission=function(){throw hZ.create("only-available-in-window")},e.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw hZ.create("use-vapid-key-after-get-token");if("string"!=typeof e||0===e.length)throw hZ.create("invalid-vapid-key");this.vapidKey=e},e.prototype.useServiceWorker=function(){throw hZ.create("only-available-in-window")},e.prototype.onMessage=function(){throw hZ.create("only-available-in-window")},e.prototype.onTokenRefresh=function(){throw hZ.create("only-available-in-window")},e.prototype.onPush=function(e){return(0,L.__awaiter)(this,void 0,void 0,function(){var t,n,r,i;return(0,L.__generator)(this,function(o){var a,s,u,c,l,h,f,d,p;switch(o.label){case 0:if(!(t=function(e){var t=e.data;if(!t)return null;try{return t.json()}catch(e){return null}}(e)))return console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2];return[4,ff()];case 1:if((n=o.sent()).some(function(e){return"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")}))return[2,function(e,t){var n,r;t.isFirebaseMessaging=!0,t.messageType=y.PUSH_RECEIVED;try{for(var i=(0,L.__values)(e),o=i.next();!o.done;o=i.next())o.value.postMessage(t)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}(n,t)];if(r=!1,!t.notification)return[3,3];return[4,(h=(a=t,(u=(0,L.__assign)({},a.notification)).data=((s={})[h1]=a,s),c=u).actions,f=Notification.maxActions,h&&f&&h.length>f&&console.warn("This browser only supports "+f+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(l=c.title)&&void 0!==l?l:"",c))];case 2:o.sent(),r=!0,o.label=3;case 3:if(!0===r&&!1===this.isOnBackgroundMessageUsed)return[2];return this.bgMessageHandler&&(function(e,t){if(t.notification){e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var i=t.notification.image;i&&(e.notification.image=i)}}(p={from:(d=t).from,collapseKey:d.collapse_key,messageId:d.fcm_message_id},d),d.data&&(p.data=d.data),function(e,t){if(t.fcmOptions){e.fcmOptions={};var n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);var r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}}(p,d),i=p,"function"==typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,fl(1e3)];case 4:return o.sent(),[2]}})})},e.prototype.onSubChange=function(e){var t,n;return(0,L.__awaiter)(this,void 0,void 0,function(){var r;return(0,L.__generator)(this,function(i){switch(i.label){case 0:if(e.newSubscription)return[3,2];return[4,fs(this.firebaseDependencies,self.registration)];case 1:case 5:return i.sent(),[2];case 2:return[4,h7(this.firebaseDependencies)];case 3:return r=i.sent(),[4,fs(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,fa(this.firebaseDependencies,self.registration,null!==(n=null===(t=null==r?void 0:r.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==n?n:h0)]}})})},e.prototype.onNotificationClick=function(e){var t,n;return(0,L.__awaiter)(this,void 0,void 0,function(){var r,i,o,a,s;return(0,L.__generator)(this,function(u){switch(u.label){case 0:var c,l,h,f,d;if(!(r=null===(n=null===(t=e.notification)||void 0===t?void 0:t.data)||void 0===n?void 0:n[h1])||e.action||(e.stopImmediatePropagation(),e.notification.close(),!(i=(null!==(h=null===(l=(c=r).fcmOptions)||void 0===l?void 0:l.link)&&void 0!==h?h:null===(f=c.notification)||void 0===f?void 0:f.click_action)||(fc(c.data)?self.location.origin:null))||(o=new URL(i,self.location.href),a=new URL(self.location.origin),o.host!==a.host)))return[2];return[4,function(e){return(0,L.__awaiter)(this,void 0,void 0,function(){var t,n,r,i,o,a,s;return(0,L.__generator)(this,function(u){switch(u.label){case 0:return[4,ff()];case 1:t=u.sent();try{for(r=(n=(0,L.__values)(t)).next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),e.host===o.host)return[2,i]}catch(e){a={error:e}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}}return[2,null]}})})}(o)];case 1:if(s=u.sent())return[3,4];return[4,self.clients.openWindow(i)];case 2:return s=u.sent(),[4,fl(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,s.focus()];case 5:s=u.sent(),u.label=6;case 6:if(!s)return[2];return r.messageType=y.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,s.postMessage(r)]}})})},e}();function ff(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fd=function(){function e(e){var t=this;this.firebaseDependencies=e,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(e){return t.messageEventListener(e)})}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.messageEventListener=function(e){return(0,L.__awaiter)(this,void 0,void 0,function(){var t,n;return(0,L.__generator)(this,function(r){switch(r.label){case 0:var i;if(!(t=e.data).isFirebaseMessaging)return[2];if(this.onMessageCallback&&t.messageType===y.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback((i=Object.assign({},t),delete i.messageType,delete i.isFirebaseMessaging,i)):this.onMessageCallback.next(Object.assign({},t))),!(fc(n=t.data)&&"1"===n["google.c.a.e"]))return[3,2];return[4,this.logEvent(t.messageType,n)];case 1:r.sent(),r.label=2;case 2:return[2]}})})},e.prototype.getVapidKey=function(){return this.vapidKey},e.prototype.getSwReg=function(){return this.swRegistration},e.prototype.getToken=function(e){return(0,L.__awaiter)(this,void 0,void 0,function(){return(0,L.__generator)(this,function(t){switch(t.label){case 0:if("default"!==Notification.permission)return[3,2];return[4,Notification.requestPermission()];case 1:t.sent(),t.label=2;case 2:if("granted"!==Notification.permission)throw hZ.create("permission-blocked");return[4,this.updateVapidKey(null==e?void 0:e.vapidKey)];case 3:return t.sent(),[4,this.updateSwReg(null==e?void 0:e.serviceWorkerRegistration)];case 4:return t.sent(),[2,fa(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},e.prototype.updateVapidKey=function(e){return(0,L.__awaiter)(this,void 0,void 0,function(){return(0,L.__generator)(this,function(t){return e?this.vapidKey=e:this.vapidKey||(this.vapidKey=h0),[2]})})},e.prototype.updateSwReg=function(e){return(0,L.__awaiter)(this,void 0,void 0,function(){return(0,L.__generator)(this,function(t){switch(t.label){case 0:if(!(!e&&!this.swRegistration))return[3,2];return[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:if(!e&&this.swRegistration)return[2];if(!(e instanceof ServiceWorkerRegistration))throw hZ.create("invalid-sw-registration");return this.swRegistration=e,[2]}})})},e.prototype.registerDefaultSw=function(){return(0,L.__awaiter)(this,void 0,void 0,function(){var e,t;return(0,L.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return e.swRegistration=n.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw t=n.sent(),hZ.create("failed-service-worker-registration",{browserErrorMessage:t.message});case 3:return[2]}})})},e.prototype.deleteToken=function(){return(0,L.__awaiter)(this,void 0,void 0,function(){return(0,L.__generator)(this,function(e){switch(e.label){case 0:if(this.swRegistration)return[3,2];return[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:return[2,fs(this.firebaseDependencies,this.swRegistration)]}})})},e.prototype.requestPermission=function(){return(0,L.__awaiter)(this,void 0,void 0,function(){var e;return(0,L.__generator)(this,function(t){switch(t.label){case 0:if("granted"===Notification.permission)return[2];return[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];if("denied"===e)throw hZ.create("permission-blocked");throw hZ.create("permission-default")}})})},e.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw hZ.create("use-vapid-key-after-get-token");if("string"!=typeof e||0===e.length)throw hZ.create("invalid-vapid-key");this.vapidKey=e},e.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw hZ.create("invalid-sw-registration");if(this.swRegistration)throw hZ.create("use-sw-after-get-token");this.swRegistration=e},e.prototype.onMessage=function(e){var t=this;return this.onMessageCallback=e,function(){t.onMessageCallback=null}},e.prototype.setBackgroundMessageHandler=function(){throw hZ.create("only-available-in-sw")},e.prototype.onBackgroundMessage=function(){throw hZ.create("only-available-in-sw")},e.prototype.onTokenRefresh=function(){return function(){}},e.prototype.logEvent=function(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n;return(0,L.__generator)(this,function(r){switch(r.label){case 0:return n=function(e){switch(e){case y.NOTIFICATION_CLICKED:return"notification_open";case y.PUSH_RECEIVED:return"notification_foreground";default:throw Error()}}(e),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:t[h2],message_name:t["google.c.a.c_l"],message_time:t["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},e}();function fp(e){return hZ.create("missing-app-config-values",{valueName:e})}function fg(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}M.default.INTERNAL.registerComponent(new hu.Component("messaging",function(e){var t=e.getProvider("app").getImmediate(),n=/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){if(!e||!e.options)throw fp("App Configuration Object");if(!e.name)throw fp("App Name");var t,n,r=e.options;try{for(var i=(0,L.__values)(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var a=o.value;if(!r[a])throw fp(a)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return{appName:e.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(t),r={app:t,appConfig:n,installations:e.getProvider("installations").getImmediate(),analyticsProvider:e.getProvider("analytics-internal")};if(!fg())throw hZ.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new fh(r):new fd(r)},"PUBLIC").setServiceProps({isSupported:fg}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fv="firebasestorage.googleapis.com",fy="storageBucket",fm=function(e){function t(n,r){var i=e.call(this,fb(n),"Firebase Storage: "+r+" ("+fb(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,t.prototype),i}return(0,L.__extends)(t,e),t.prototype._codeEquals=function(e){return fb(e)===this.code},Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),t}(F.FirebaseError);function fb(e){return"storage/"+e}function f_(){return new fm("unknown","An unknown error occurred, please check the error payload for server response.")}function fw(){return new fm("canceled","User canceled the upload/download.")}function fE(){return new fm("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function fI(e){return new fm("invalid-argument",e)}function fC(){return new fm("app-deleted","The Firebase app was deleted.")}function fT(e){return new fm("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function fS(e,t){return new fm("invalid-format","String does not match format '"+e+"': "+t)}function fk(e){throw new fm("internal-error","Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fD={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},fA=function(e,t){this.data=e,this.contentType=t||null};function fP(e,t){switch(e){case fD.RAW:return new fA(fN(t));case fD.BASE64:case fD.BASE64URL:return new fA(fx(e,t));case fD.DATA_URL:var n;return new fA((n=new fO(t)).base64?fx(fD.BASE64,n.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(e){throw fS(fD.DATA_URL,"Malformed data URL.")}return fN(t)}(n.rest),new fO(t).contentType)}throw f_()}function fN(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);r<=127?t.push(r):r<=2047?t.push(192|r>>6,128|63&r):(64512&r)==55296?n<e.length-1&&(64512&e.charCodeAt(n+1))==56320?(r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):t.push(239,191,189):(64512&r)==56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function fx(e,t){switch(e){case fD.BASE64:var n,r,i=-1!==t.indexOf("-"),o=-1!==t.indexOf("_");if(i||o){var a=i?"-":"_";throw fS(e,"Invalid character '"+a+"' found: is it base64url encoded?")}break;case fD.BASE64URL:var s=-1!==t.indexOf("+"),u=-1!==t.indexOf("/");if(s||u){var a=s?"+":"/";throw fS(e,"Invalid character '"+a+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/")}try{n=t,r=atob(n)}catch(t){throw fS(e,"Invalid character found")}for(var c=new Uint8Array(r.length),l=0;l<r.length;l++)c[l]=r.charCodeAt(l);return c}var fO=function(e){this.base64=!1,this.contentType=null;var t,n=e.match(/^data:([^,]+)?,/);if(null===n)throw fS(fD.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=(t=";base64",r.length>=t.length&&r.substring(r.length-t.length)===t),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)},fR={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function fM(e){switch(e){case"running":case"pausing":case"canceling":return fR.RUNNING;case"paused":return fR.PAUSED;case"success":return fR.SUCCESS;case"canceled":return fR.CANCELED;default:return fR.ERROR}}(a=m||(m={}))[a.NO_ERROR=0]="NO_ERROR",a[a.NETWORK_ERROR=1]="NETWORK_ERROR",a[a.ABORT=2]="ABORT";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fL=function(){function e(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=m.NO_ERROR,this.sendPromise_=new Promise(function(t){e.xhr_.addEventListener("abort",function(){e.errorCode_=m.ABORT,t()}),e.xhr_.addEventListener("error",function(){e.errorCode_=m.NETWORK_ERROR,t()}),e.xhr_.addEventListener("load",function(){t()})})}return e.prototype.send=function(e,t,n,r){if(this.sent_)throw fk("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw fk("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw fk("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return -1}},e.prototype.getResponseText=function(){if(!this.sent_)throw fk("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},e.prototype.addUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)},e.prototype.removeUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)},e}(),fF=function(){function e(){}return e.prototype.createConnection=function(){return new fL},e}(),fj=function(){function e(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),e.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},e.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},e.makeFromBucketSpec=function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(n){return new e(t,"")}if(""===r.path)return r;throw new fm("invalid-default-bucket","Invalid default bucket '"+t+"'.")},e.makeFromUrl=function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)",o=RegExp("^gs://"+i+"(/(.*))?$","i");function a(e){e.path_=decodeURIComponent(e.path)}for(var s=n.replace(/[.]/g,"\\."),u=RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),c=RegExp("^https?://"+(n===fv?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),l=[{regex:o,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:u,indices:{bucket:1,path:3},postModify:a},{regex:c,indices:{bucket:1,path:2},postModify:a}],h=0;h<l.length;h++){var f=l[h],d=f.regex.exec(t);if(d){var p=d[f.indices.bucket],g=d[f.indices.path];g||(g=""),r=new e(p,g),f.postModify(r);break}}if(null==r)throw new fm("invalid-url","Invalid URL '"+t+"'.");return r},e}(),fU=function(){function e(e){this.promise_=Promise.reject(e)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){},e}();function fq(e){return"string"==typeof e||e instanceof String}function fB(e){return fV()&&e instanceof Blob}function fV(){return"undefined"!=typeof Blob}function fW(e,t,n,r){if(r<t)throw fI("Invalid value for '"+e+"'. Expected "+t+" or greater.");if(r>n)throw fI("Invalid value for '"+e+"'. Expected "+n+" or less.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fK(e,t){var n=t.match(/^(\w+):\/\/.+/),r=null==n?void 0:n[1],i=t;return null==r&&(i="https://"+t),i+"/v0"+e}function fG(e){var t=encodeURIComponent,n="?";for(var r in e)e.hasOwnProperty(r)&&(n=n+(t(r)+"=")+t(e[r])+"&");return n.slice(0,-1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fz=function(){function e(e,t,n,r,i,o,a,s,u,c,l){var h=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(e,t){h.resolve_=e,h.reject_=t,h.start_()})}return e.prototype.start_=function(){var e=this;function t(t,n){var r=e.resolve_,i=e.reject_,o=n.connection;if(n.wasSuccessCode)try{var a=e.callback_(o,o.getResponseText());void 0!==a?r(a):r()}catch(e){i(e)}else if(null!==o){var s=f_();s.serverResponse=o.getResponseText(),i(e.errorCallback_?e.errorCallback_(o,s):s)}else if(n.canceled){var s=e.appDelete_?fC():fw();i(s)}else{var s=new fm("retry-limit-exceeded","Max retry time for operation exceeded, please try again.");i(s)}}this.canceled_?t(!1,new fH(!1,null,!0)):this.backoffId_=/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t,n){var r=1,i=null,o=!1,a=0,s=!1;function u(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];s||(s=!0,t.apply(null,e))}function c(t){i=setTimeout(function(){i=null,e(l,2===a)},t)}function l(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];if(!s){if(e||2===a||o){u.call.apply(u,(0,L.__spreadArray)([null,e],n));return}r<64&&(r*=2),1===a?(a=2,t=0):t=(r+Math.random())*1e3,c(t)}}var h=!1;function f(e){!h&&(h=!0,!s&&(null!==i?(e||(a=2),clearTimeout(i),c(0)):e||(a=1)))}return c(0),setTimeout(function(){o=!0,f(!0)},n),f}(function(t,n){if(n){t(!1,new fH(!1,null,!0));return}var r=e.pool_.createConnection();function i(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)}e.pendingConnection_=r,null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then(function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===m.NO_ERROR,o=r.getStatus();if(!n||e.isRetryStatusCode_(o)){t(!1,new fH(!1,null,r.getErrorCode()===m.ABORT));return}t(!0,new fH(-1!==e.successCodes_.indexOf(o),r))})},t,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()},e.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r},e}(),fH=function(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n};function f$(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}if(fV())return new Blob(e);throw new fm("unsupported-environment","This browser doesn't seem to support creating Blobs")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fQ=function(){function e(e,t){var n=0,r="";fB(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(!fB(this.data_))return new e(new Uint8Array(this.data_.buffer,t,n-t),!0);var r,i=(r=this.data_).webkitSlice?r.webkitSlice(t,n):r.mozSlice?r.mozSlice(t,n):r.slice?r.slice(t,n):null;return null===i?null:new e(i)},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(fV()){var r=t.map(function(t){return t instanceof e?t.data_:t});return new e(f$.apply(null,r))}var i=t.map(function(e){return fq(e)?fP(fD.RAW,e).data:e.data_}),o=0;i.forEach(function(e){o+=e.byteLength});var a=new Uint8Array(o),s=0;return i.forEach(function(e){for(var t=0;t<e.length;t++)a[s++]=e[t]}),new e(a,!0)},e.prototype.uploadData=function(){return this.data_},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fY(e){var t,n;try{t=JSON.parse(e)}catch(e){return null}return"object"!=typeof(n=t)||Array.isArray(n)?null:t}function fX(e){var t=e.lastIndexOf("/",e.length-2);return -1===t?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fJ(e,t){return t}var fZ=function(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||fJ},f0=null;function f1(){if(f0)return f0;var e=[];e.push(new fZ("bucket")),e.push(new fZ("generation")),e.push(new fZ("metageneration")),e.push(new fZ("name","fullPath",!0));var t=new fZ("name");t.xform=function(e,t){return!fq(t)||t.length<2?t:fX(t)},e.push(t);var n=new fZ("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new fZ("timeCreated")),e.push(new fZ("updated")),e.push(new fZ("md5Hash",null,!0)),e.push(new fZ("cacheControl",null,!0)),e.push(new fZ("contentDisposition",null,!0)),e.push(new fZ("contentEncoding",null,!0)),e.push(new fZ("contentLanguage",null,!0)),e.push(new fZ("contentType",null,!0)),e.push(new fZ("metadata","customMetadata",!0)),f0=e}function f2(e,t,n){var r=fY(t);return null===r?null:function(e,t,n){var r={};r.type="file";for(var i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,t[a.server])}return Object.defineProperty(r,"ref",{get:function(){var t=new fj(r.bucket,r.fullPath);return e._makeStorageReference(t)}}),r}(e,r,n)}function f3(e,t){for(var n={},r=t.length,i=0;i<r;i++){var o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var f6="prefixes",f5="items",f4=function(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f8(e){if(!e)throw f_()}function f9(e,t){return function(n,r){var i=f2(e,r,t);return f8(null!==i),i}}function f7(e){return function(t,n){var r;return(r=401===t.getStatus()?t.getResponseText().includes("Firebase App Check token is invalid")?new fm("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new fm("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?new fm("quota-exceeded","Quota for bucket '"+e.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===t.getStatus()?new fm("unauthorized","User does not have permission to access '"+e.path+"'."):n).serverResponse=n.serverResponse,r}}function de(e){var t=f7(e);return function(n,r){var i=t(n,r);return 404===n.getStatus()&&(i=new fm("object-not-found","Object '"+e.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function dt(e,t,n){var r=fK(t.fullServerUrl(),e.host),i=e.maxOperationRetryTime,o=new f4(r,"GET",f9(e,n),i);return o.errorHandler=de(t),o}function dn(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=t&&t.type()||"application/octet-stream"),r}var dr=function(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null};function di(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(e){f8(!1)}return f8(!!n&&-1!==(t||["active"]).indexOf(n)),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var da=function(e,t,n){"function"==typeof e||null!=t||null!=n?(this.next=e,this.error=t,this.complete=n):(this.next=e.next,this.error=e.error,this.complete=e.complete)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then(function(){return e.apply(void 0,t)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var du=function(){function e(e,t,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=f1(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise(function(e,t){r._resolve=e,r._reject=t,r._start()}),this._promise.then(null,function(){})}return e.prototype._makeProgressCallback=function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}},e.prototype._shouldDoResumable=function(e){return e.size()>262144},e.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},e.prototype._resolveToken=function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(n){var r=n[0],i=n[1];switch(t._state){case"running":e(r,i);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}})},e.prototype._createResumable=function(){var e=this;this._resolveToken(function(t,n){var r,i,o,a,s,u,c,l,h,f,d,p,g=(r=e._ref.storage,i=e._ref._location,o=e._mappings,a=e._blob,s=e._metadata,u=i.bucketOnlyServerUrl(),l={name:(c=dn(i,a,s)).fullPath},h=fK(u,r.host),f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+a.size(),"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},d=f3(c,o),(p=new f4(h,"POST",function(e){var t;di(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(e){f8(!1)}return f8(fq(t)),t},r.maxUploadRetryTime)).urlParams=l,p.headers=f,p.body=d,p.errorHandler=f7(i),p),v=e._ref.storage._makeRequest(g,t,n);e._request=v,v.getPromise().then(function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()},e._errorHandler)})},e.prototype._fetchStatus=function(){var e=this,t=this._uploadUrl;this._resolveToken(function(n,r){var i,o,a,s,u=(i=e._ref.storage,o=e._ref._location,a=e._blob,(s=new f4(t,"POST",function(e){var t=di(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(e){f8(!1)}n||f8(!1);var r=Number(n);return f8(!isNaN(r)),new dr(r,a.size(),"final"===t)},i.maxUploadRetryTime)).headers={"X-Goog-Upload-Command":"query"},s.errorHandler=f7(o),s),c=e._ref.storage._makeRequest(u,n,r);e._request=c,c.getPromise().then(function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()},e._errorHandler)})},e.prototype._continueUpload=function(){var e=this,t=262144*this._chunkMultiplier,n=new dr(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i,o){try{a=function(e,t,n,r,i,o,a,s){var u=new dr(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new fm("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f=h+l,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":""+u.current},p=r.slice(h,f);if(null===p)throw fE();var g=new f4(n,"POST",function(e,n){var i,a=di(e,["active","final"]),s=u.current+l,c=r.size();return i="final"===a?f9(t,o)(e,n):null,new dr(s,c,"final"===a,i)},t.maxUploadRetryTime);return g.headers=d,g.body=p.uploadData(),g.progressCallback=s||null,g.errorHandler=f7(e),g}(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(t){e._error=t,e._transition("error");return}var a,s=e._ref.storage._makeRequest(a,i,o);e._request=s,s.getPromise().then(function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()},e._errorHandler)})},e.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},e.prototype._fetchMetadata=function(){var e=this;this._resolveToken(function(t,n){var r=dt(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then(function(t){e._request=void 0,e._metadata=t,e._transition("success")},e._metadataErrorHandler)})},e.prototype._oneShotUpload=function(){var e=this;this._resolveToken(function(t,n){var r=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+s;var u=dn(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+f3(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l=fQ.getBlob(c,r,"\r\n--"+s+"--");if(null===l)throw fE();var h={name:u.fullPath},f=fK(o,e.host),d=e.maxUploadRetryTime,p=new f4(f,"POST",f9(e,n),d);return p.urlParams=h,p.headers=a,p.body=l.uploadData(),p.errorHandler=f7(t),p}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then(function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")},e._errorHandler)})},e.prototype._updateProgress=function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()},e.prototype._transition=function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=fw(),this._state=e,this._notifyObservers()}},e.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var e=fM(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),e.prototype.on=function(e,t,n,r){var i=this,o=new da(t,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},e.prototype.then=function(e,t){return this._promise.then(e,t)},e.prototype.catch=function(e){return this.then(null,e)},e.prototype._addObserver=function(e){this._observers.push(e),this._notifyObserver(e)},e.prototype._removeObserver=function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)},e.prototype._notifyObservers=function(){var e=this;this._finishPromise(),this._observers.slice().forEach(function(t){e._notifyObserver(t)})},e.prototype._finishPromise=function(){if(void 0!==this._resolve){var e=!0;switch(fM(this._state)){case fR.SUCCESS:ds(this._resolve.bind(null,this.snapshot))();break;case fR.CANCELED:case fR.ERROR:ds(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}},e.prototype._notifyObserver=function(e){switch(fM(this._state)){case fR.RUNNING:case fR.PAUSED:e.next&&ds(e.next.bind(e,this.snapshot))();break;case fR.SUCCESS:e.complete&&ds(e.complete.bind(e))();break;case fR.CANCELED:case fR.ERROR:default:e.error&&ds(e.error.bind(e,this._error))()}},e.prototype.resume=function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e},e.prototype.pause=function(){var e="running"===this._state;return e&&this._transition("pausing"),e},e.prototype.cancel=function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e},e}(),dc=function(){function e(e,t){this._service=e,t instanceof fj?this._location=t:this._location=fj.makeFromUrl(t,e.host)}return e.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},e.prototype._newRef=function(t,n){return new e(t,n)},Object.defineProperty(e.prototype,"root",{get:function(){var e=new fj(this._location.bucket,"");return this._newRef(this._service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return fX(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return -1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new fj(this._location.bucket,t);return new e(this._service,n)},enumerable:!1,configurable:!0}),e.prototype._throwIfRoot=function(e){if(""===this._location.path)throw fT(e)},e}();function dl(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,L.__generator)(this,function(i){switch(i.label){case 0:var o,a,s,u,c,l,h,f,d;return null!=t&&"number"==typeof t.maxResults&&fW("options.maxResults",1,1e3,t.maxResults),n=t||{},o=e.storage,a=e._location,s=n.pageToken,u=n.maxResults,c={},a.isRoot?c.prefix="":c.prefix=a.path+"/",c.delimiter="/",s&&(c.pageToken=s),u&&(c.maxResults=u),l=fK(a.bucketOnlyServerUrl(),o.host),h=o.maxOperationRetryTime,(d=new f4(l,"GET",(f=a.bucket,function(e,t){var n,r=null===(n=fY(t))?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[f6])for(var i=0,o=n[f6];i<o.length;i++){var a=o[i].replace(/\/$/,""),s=e._makeStorageReference(new fj(t,a));r.prefixes.push(s)}if(n[f5])for(var u=0,c=n[f5];u<c.length;u++){var l=c[u],s=e._makeStorageReference(new fj(t,l.name));r.items.push(s)}return r}(o,f,n);return f8(null!==r),r}),h)).urlParams=c,d.errorHandler=f7(a),r=d,[4,e.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}})})}function dh(e,t){var n,r,i=(n=e._location.path,r=t.split("/").filter(function(e){return e.length>0}).join("/"),0===n.length?r:n+"/"+r),o=new fj(e._location.bucket,i);return new dc(e.storage,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(e){return/^[A-Za-z]+:\/\//.test(e)}function dd(e,t){var n=null==t?void 0:t[fy];return null==n?null:fj.makeFromBucketSpec(n,e)}var dp=function(){function e(e,t,n,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=fv,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,null!=i?this._bucket=fj.makeFromBucketSpec(i,this._host):this._bucket=dd(this._host,this.app.options)}return Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=fj.makeFromBucketSpec(this._url,e):this._bucket=dd(e,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(e){fW("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(e){fW("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e},enumerable:!1,configurable:!0}),e.prototype._getAuthToken=function(){return(0,L.__awaiter)(this,void 0,void 0,function(){var e,t;return(0,L.__generator)(this,function(n){switch(n.label){case 0:if(this._overrideAuthToken)return[2,this._overrideAuthToken];if(!(e=this._authProvider.getImmediate({optional:!0})))return[3,2];return[4,e.getToken()];case 1:if(null!==(t=n.sent()))return[2,t.accessToken];n.label=2;case 2:return[2,null]}})})},e.prototype._getAppCheckToken=function(){return(0,L.__awaiter)(this,void 0,void 0,function(){var e;return(0,L.__generator)(this,function(t){switch(t.label){case 0:if(!(e=this._appCheckProvider.getImmediate({optional:!0})))return[3,2];return[4,e.getToken()];case 1:return[2,t.sent().token];case 2:return[2,null]}})})},e.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach(function(e){return e.cancel()}),this._requests.clear()),Promise.resolve()},e.prototype._makeStorageReference=function(e){return new dc(this,e)},e.prototype._makeRequest=function(e,t,n){var r,i,o,a,s,u,c,l=this;if(this._deleted)return new fU(fC());var h=(r=this._appId,i=this._pool,o=this._firebaseVersion,a=fG(e.urlParams),s=e.url+a,c=u=Object.assign({},e.headers),r&&(c["X-Firebase-GMPID"]=r),null!==t&&t.length>0&&(u.Authorization="Firebase "+t),u["X-Firebase-Storage-Version"]="webjs/"+(null!=o?o:"AppManager"),null!==n&&(u["X-Firebase-AppCheck"]=n),new fz(s,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i));return this._requests.add(h),h.getPromise().then(function(){return l._requests.delete(h)},function(){return l._requests.delete(h)}),h},e.prototype.makeRequestWithTokens=function(e){return(0,L.__awaiter)(this,void 0,void 0,function(){var t,n,r;return(0,L.__generator)(this,function(i){switch(i.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return n=(t=i.sent())[0],r=t[1],[2,this._makeRequest(e,n,r)]}})})},e}();function dg(e,t){return function(e,t){if(!(t&&df(t)))return function e(t,n){if(t instanceof dp){if(null==t._bucket)throw new fm("no-default-bucket","No default bucket found. Did you set the '"+fy+"' property when initializing the app?");var r=new dc(t,t._bucket);return null!=n?e(r,n):r}return void 0!==n?dh(t,n):t}(e,t);if(e instanceof dp)return new dc(e,t);throw fI("To use ref(service, url), the first argument must be a Storage instance.")}(e=(0,F.getModularInstance)(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dv=function(){function e(e,t,n){this._delegate=e,this.task=t,this.ref=n}return Object.defineProperty(e.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),e}(),dy=function(){function e(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(e.prototype,"snapshot",{get:function(){return new dv(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),e.prototype.then=function(e,t){var n=this;return this._delegate.then(function(t){if(e)return e(new dv(t,n,n._ref))},t)},e.prototype.on=function(e,t,n,r){var i=this,o=void 0;return t&&(o="function"==typeof t?function(e){return t(new dv(e,i,i._ref))}:{next:t.next?function(e){return t.next(new dv(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,n||void 0,r||void 0)},e}(),dm=function(){function e(e,t){this._delegate=e,this._service=t}return Object.defineProperty(e.prototype,"prefixes",{get:function(){var e=this;return this._delegate.prefixes.map(function(t){return new db(t,e._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){var e=this;return this._delegate.items.map(function(t){return new db(t,e._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),e}(),db=function(){function e(e,t){this._delegate=e,this.storage=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this._delegate.toString()},e.prototype.child=function(t){return new e(dh(this._delegate,t),this.storage)},Object.defineProperty(e.prototype,"root",{get:function(){return new e(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)},enumerable:!1,configurable:!0}),e.prototype.put=function(e,t){var n,r;return this._throwIfRoot("put"),new dy((n=this._delegate,(r=n=(0,F.getModularInstance)(n))._throwIfRoot("uploadBytesResumable"),new du(r,new fQ(e),t)),this)},e.prototype.putString=function(e,t,n){void 0===t&&(t=fD.RAW),this._throwIfRoot("putString");var r=fP(t,e),i=(0,L.__assign)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new dy(new du(this._delegate,new fQ(r.data,!0),i),this)},e.prototype.listAll=function(){var e,t,n=this;return(e=this._delegate,(function e(t,n,r){return(0,L.__awaiter)(this,void 0,void 0,function(){var i,o,a;return(0,L.__generator)(this,function(s){switch(s.label){case 0:return[4,dl(t,{pageToken:r})];case 1:if(i=s.sent(),(o=n.prefixes).push.apply(o,i.prefixes),(a=n.items).push.apply(a,i.items),!(null!=i.nextPageToken))return[3,3];return[4,e(t,n,i.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}})})})(e=(0,F.getModularInstance)(e),t={prefixes:[],items:[]}).then(function(){return t})).then(function(e){return new dm(e,n.storage)})},e.prototype.list=function(e){var t,n=this;return(t=this._delegate,dl(t=(0,F.getModularInstance)(t),e||void 0)).then(function(e){return new dm(e,n.storage)})},e.prototype.getMetadata=function(){var e;return e=this._delegate,function(e){return(0,L.__awaiter)(this,void 0,void 0,function(){var t;return(0,L.__generator)(this,function(n){switch(n.label){case 0:return e._throwIfRoot("getMetadata"),t=dt(e.storage,e._location,f1()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}})})}(e=(0,F.getModularInstance)(e))},e.prototype.updateMetadata=function(e){var t;return t=this._delegate,function(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n;return(0,L.__generator)(this,function(r){switch(r.label){case 0:var i,o,a,s,u,c,l;return e._throwIfRoot("updateMetadata"),i=e.storage,o=e._location,a=f1(),s=fK(o.fullServerUrl(),i.host),u=f3(t,a),c=i.maxOperationRetryTime,(l=new f4(s,"PATCH",f9(i,a),c)).headers={"Content-Type":"application/json; charset=utf-8"},l.body=u,l.errorHandler=de(o),n=l,[4,e.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}})})}(t=(0,F.getModularInstance)(t),e)},e.prototype.getDownloadURL=function(){var e;return e=this._delegate,function(e){return(0,L.__awaiter)(this,void 0,void 0,function(){var t;return(0,L.__generator)(this,function(n){switch(n.label){case 0:var r,i,o,a;return e._throwIfRoot("getDownloadURL"),r=e.storage,i=e._location,o=f1(),(a=new f4(fK(i.fullServerUrl(),r.host),"GET",function(e,t){var n=f2(r,t,o);return f8(null!==n),function(e,t,n){var r=fY(t);if(null===r||!fq(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map(function(t){var r=e.bucket,i=e.fullPath;return fK("/b/"+o(r)+"/o/"+o(i),n)+fG({alt:"media",token:t})})[0]}(n,t,r.host)},r.maxOperationRetryTime)).errorHandler=de(i),t=a,[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise().then(function(e){if(null===e)throw new fm("no-download-url","The given file does not have any download URLs.");return e})]}})})}(e=(0,F.getModularInstance)(e))},e.prototype.delete=function(){var e;return this._throwIfRoot("delete"),e=this._delegate,function(e){return(0,L.__awaiter)(this,void 0,void 0,function(){var t;return(0,L.__generator)(this,function(n){switch(n.label){case 0:var r,i,o;return e._throwIfRoot("deleteObject"),r=e.storage,(o=new f4(fK((i=e._location).fullServerUrl(),r.host),"DELETE",function(e,t){},r.maxOperationRetryTime)).successCodes=[200,204],o.errorHandler=de(i),t=o,[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}})})}(e=(0,F.getModularInstance)(e))},e.prototype._throwIfRoot=function(e){if(""===this._delegate._location.path)throw fT(e)},e}(),d_=function(){function e(e,t){this.app=e,this._delegate=t}return Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),e.prototype.ref=function(e){if(df(e))throw fI("ref() expected a child path but got a URL, use refFromURL instead.");return new db(dg(this._delegate,e),this)},e.prototype.refFromURL=function(e){if(!df(e))throw fI("refFromURL() expected a full URL but got a child path, use ref() instead.");try{fj.makeFromUrl(e,this._delegate.host)}catch(e){throw fI("refFromUrl() expected a valid full URL but got an invalid one.")}return new db(dg(this._delegate,e),this)},e.prototype.setMaxUploadRetryTime=function(e){this._delegate.maxUploadRetryTime=e},e.prototype.setMaxOperationRetryTime=function(e){this._delegate.maxOperationRetryTime=e},e.prototype.useEmulator=function(e,t,n){var r,i,o,a;void 0===n&&(n={}),r=this._delegate,void 0===(i=n)&&(i={}),void 0===(o=i)&&(o={}),r.host="http://"+e+":"+t,(a=o.mockUserToken)&&(r._overrideAuthToken="string"==typeof a?a:(0,F.createMockUserToken)(a,r.app.options.projectId))},e}();(s=M.default).INTERNAL.registerComponent(new hu.Component("storage",function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate();return new d_(r,new dp(r,e.getProvider("auth-internal"),e.getProvider("app-check-internal"),new fF,n,M.default.SDK_VERSION))},"PUBLIC").setServiceProps({TaskState:fR,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:fD,Storage:dp,Reference:db}).setMultipleInstances(!0)),s.registerVersion("@firebase/storage","0.7.0");var dw="0.4.18",dE="FB-PERF-TRACE-MEASURE",dI="_wt_",dC="_fcp",dT="_fid",dS="@firebase/performance/config",dk="@firebase/performance/configexpire",dD="Performance",dA=((b={})["trace started"]="Trace {$traceName} was started before.",b["trace stopped"]="Trace {$traceName} is not running.",b["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",b["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",b["no window"]="Window is not available.",b["no app id"]="App id is not available.",b["no project id"]="Project id is not available.",b["no api key"]="Api key is not available.",b["invalid cc log"]="Attempted to queue invalid cc event",b["FB not default"]="Performance can only start when Firebase app instance is the default one.",b["RC response not ok"]="RC response is not ok",b["invalid attribute name"]="Attribute name {$attributeName} is invalid.",b["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",b["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",b["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",b),dP=new F.ErrorFactory("performance",dD,dA),dN=new j.Logger(dD);dN.logLevel=j.LogLevel.INFO;var dx=function(){function e(e){if(this.window=e,!e)throw dP.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}return e.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},e.prototype.mark=function(e){this.performance&&this.performance.mark&&this.performance.mark(e)},e.prototype.measure=function(e,t,n){this.performance&&this.performance.measure&&this.performance.measure(e,t,n)},e.prototype.getEntriesByType=function(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]},e.prototype.getEntriesByName=function(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]},e.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},e.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!(0,F.isIndexedDBAvailable)()||(dN.info("IndexedDB is not supported by current browswer"),!1):(dN.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},e.prototype.setupObserver=function(e,t){this.PerformanceObserver&&new this.PerformanceObserver(function(e){for(var n=0,r=e.getEntries();n<r.length;n++)t(r[n])}).observe({entryTypes:[e]})},e.getInstance=function(){return void 0===_&&(_=new e(w)),_},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dO(e,t){var n=e.length-t.length;if(n<0||n>1)throw dP.create("invalid String merger input");for(var r=[],i=0;i<e.length;i++)r.push(e.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}var dR=function(){function e(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=dO("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=dO("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return e.prototype.getAppId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!e)throw dP.create("no app id");return e},e.prototype.getProjectId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!e)throw dP.create("no project id");return e},e.prototype.getApiKey=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!e)throw dP.create("no api key");return e},e.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},e.getInstance=function(){return void 0===E&&(E=new e),E},e}();(u=C||(C={}))[u.UNKNOWN=0]="UNKNOWN",u[u.VISIBLE=1]="VISIBLE",u[u.HIDDEN=2]="HIDDEN";var dM=["firebase_","google_","ga_"],dL=RegExp("^[a-zA-Z]\\w*$");function dF(){switch(dx.getInstance().document.visibilityState){case"visible":return C.VISIBLE;case"hidden":return C.HIDDEN;default:return C.UNKNOWN}}var dj={loggingEnabled:!0};function dU(e){if(!e)return e;var t=dR.getInstance(),n=e.entries||{};return void 0!==n.fpr_enabled?t.loggingEnabled="true"===String(n.fpr_enabled):t.loggingEnabled=dj.loggingEnabled,n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(t.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=dq(t.tracesSamplingRate),t.logNetworkAfterSampling=dq(t.networkRequestsSamplingRate),e}function dq(e){return Math.random()<=e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dB=1;function dV(){var e;return dB=2,T=T||(e=dx.getInstance().document,new Promise(function(t){if(e&&"complete"!==e.readyState){var n=function(){"complete"===e.readyState&&(e.removeEventListener("readystatechange",n),t())};e.addEventListener("readystatechange",n)}else t()})).then(function(){var e;return(e=dR.getInstance().installationsService.getId()).then(function(e){I=e}),e}).then(function(e){var t,n;return(t=function(){var e=dx.getInstance().localStorage;if(e){var t=e.getItem(dk);if(t&&Number(t)>Date.now()){var n=e.getItem(dS);if(n)try{return JSON.parse(n)}catch(e){return}}}}())?(dU(t),Promise.resolve()):((n=dR.getInstance().installationsService.getToken()).then(function(e){}),n).then(function(t){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+dR.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+dR.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+t},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:dR.getInstance().getAppId(),app_version:dw,sdk_version:"0.0.1"})});return fetch(r).then(function(e){if(e.ok)return e.json();throw dP.create("RC response not ok")})}).catch(function(){dN.info("Could not fetch config, will use default configs")}).then(dU).then(function(e){var t;return t=dx.getInstance().localStorage,void(e&&t&&(t.setItem(dS,JSON.stringify(e)),t.setItem(dk,String(Date.now()+36e5*dR.getInstance().configTimeToLive))))},function(){})}).then(function(){dB=3},function(){dB=3})}var dW=3,dK=[],dG=!1;function dz(e,t){!S&&(S=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];!function(e){if(!e.eventTime||!e.message)throw dP.create("invalid cc log");dK=(0,L.__spreadArray)((0,L.__spreadArray)([],dK),[e])}({message:dQ.apply(void 0,e),eventTime:Date.now()})}),S(e,t)}function dH(e){var t=dR.getInstance();(t.instrumentationEnabled||!e.isAuto)&&(t.dataCollectionEnabled||e.isAuto)&&dx.getInstance().requiredApisAvailable()&&(!e.isAuto||dF()===C.VISIBLE)&&(3===dB?d$(e):dV().then(function(){return d$(e)},function(){return d$(e)}))}function d$(e){if(I){var t=dR.getInstance();t.loggingEnabled&&t.logTraceAfterSampling&&setTimeout(function(){return dz(e,1)},0)}}function dQ(e,t){var n,r,i;return 0===t?(n={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},JSON.stringify({application_info:dY(),network_request_metric:n})):(r={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs},0!==Object.keys(e.counters).length&&(r.counters=e.counters),0!==Object.keys(i=e.getAttributes()).length&&(r.custom_attributes=i),JSON.stringify({application_info:dY(),trace_metric:r}))}function dY(){var e;return{google_app_id:dR.getInstance().getAppId(),app_instance_id:I,web_app_info:{sdk_version:dw,page_url:dx.getInstance().getUrl(),service_worker_status:"serviceWorker"in(e=dx.getInstance().navigator)?e.serviceWorker.controller?2:3:1,visibility_state:dF(),effective_connection_type:function(){var e=dx.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0}}var dX=["_fp",dC,dT],dJ=function(){function e(e,t,n){void 0===t&&(t=!1),this.name=e,this.isAuto=t,this.state=1,this.customAttributes={},this.counters={},this.api=dx.getInstance(),this.randomId=Math.floor(1e6*Math.random()),!this.isAuto&&(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||dE+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return e.prototype.start=function(){if(1!==this.state)throw dP.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},e.prototype.stop=function(){if(2!==this.state)throw dP.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),dH(this)},e.prototype.record=function(e,t,n){if(e<=0)throw dP.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw dP.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes&&(this.customAttributes=(0,L.__assign)({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}dH(this)},e.prototype.incrementMetric=function(e,t){void 0===t&&(t=1),void 0===this.counters[e]?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)},e.prototype.putMetric=function(e,t){var n,r;if(n=this.name,0!==e.length&&!(e.length>100)&&(n&&n.startsWith(dI)&&dX.indexOf(e)>-1||!e.startsWith("_")))this.counters[e]=((r=Math.floor(t))<t&&dN.info("Metric value should be an Integer, setting the value as : "+r+"."),r);else throw dP.create("invalid custom metric name",{customMetricName:e})},e.prototype.getMetric=function(e){return this.counters[e]||0},e.prototype.putAttribute=function(e,t){var n=0!==e.length&&!(e.length>40)&&!dM.some(function(t){return e.startsWith(t)})&&!!e.match(dL),r=0!==t.length&&t.length<=100;if(n&&r){this.customAttributes[e]=t;return}if(!n)throw dP.create("invalid attribute name",{attributeName:e});if(!r)throw dP.create("invalid attribute value",{attributeValue:t})},e.prototype.getAttribute=function(e){return this.customAttributes[e]},e.prototype.removeAttribute=function(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]},e.prototype.getAttributes=function(){return(0,L.__assign)({},this.customAttributes)},e.prototype.setStartTime=function(e){this.startTimeUs=e},e.prototype.setDuration=function(e){this.durationUs=e},e.prototype.calculateTraceMetrics=function(){var e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor((t.startTime+this.api.getTimeOrigin())*1e3))},e.createOobTrace=function(t,n,r){var i=dx.getInstance().getUrl();if(i){var o=new e(dI+i,!0),a=Math.floor(1e3*dx.getInstance().getTimeOrigin());if(o.setStartTime(a),t&&t[0]&&(o.setDuration(Math.floor(1e3*t[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),n){var s=n.find(function(e){return"first-paint"===e.name});s&&s.startTime&&o.putMetric("_fp",Math.floor(1e3*s.startTime));var u=n.find(function(e){return"first-contentful-paint"===e.name});u&&u.startTime&&o.putMetric(dC,Math.floor(1e3*u.startTime)),r&&o.putMetric(dT,Math.floor(1e3*r))}dH(o)}},e.createUserTimingTrace=function(t){dH(new e(t,!1,t))},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dZ(e){if(e&&void 0!==e.responseStart){var t=dx.getInstance().getTimeOrigin(),n=Math.floor((e.startTime+t)*1e3),r=e.responseStart?Math.floor((e.responseStart-e.startTime)*1e3):void 0,i=Math.floor((e.responseEnd-e.startTime)*1e3);!function(e){var t=dR.getInstance();if(t.instrumentationEnabled){var n=e.url,r=t.logEndPointUrl.split("?")[0],i=t.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&t.loggingEnabled&&t.logNetworkAfterSampling&&setTimeout(function(){return dz(e,0)},0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:n,timeToResponseInitiatedUs:r,timeToResponseCompletedUs:i})}}function d0(){I&&(setTimeout(function(){return function(){var e=dx.getInstance(),t=e.getEntriesByType("navigation"),n=e.getEntriesByType("paint");if(e.onFirstInputDelay){var r=setTimeout(function(){dJ.createOobTrace(t,n),r=void 0},5e3);e.onFirstInputDelay(function(e){r&&(clearTimeout(r),dJ.createOobTrace(t,n,e))})}else dJ.createOobTrace(t,n)}()},0),setTimeout(function(){return function(){for(var e=dx.getInstance(),t=e.getEntriesByType("resource"),n=0;n<t.length;n++)dZ(t[n]);e.setupObserver("resource",dZ)}()},0),setTimeout(function(){return function(){for(var e=dx.getInstance(),t=e.getEntriesByType("measure"),n=0;n<t.length;n++)d1(t[n]);e.setupObserver("measure",d1)}()},0))}function d1(e){var t=e.name;t.substring(0,dE.length)!==dE&&dJ.createUserTimingTrace(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var d2=function(){function e(e){this.app=e,dx.getInstance().requiredApisAvailable()&&(0,F.validateIndexedDBOpenable)().then(function(e){e&&(dG||(function e(t){setTimeout(function(){if(0!==dW){var t,n,r,i;if(!dK.length)return e(1e4);n=(t=dK.splice(0,1e3)).map(function(e){return{source_extension_json_proto3:e.message,event_time_ms:String(e.eventTime)}}),(r={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:dR.getInstance().logSource,log_event:n},(i=dR.getInstance().getFlTransportFullUrl(),fetch(i,{method:"POST",body:JSON.stringify(r)})).then(function(e){return e.ok||dN.info("Call to Firebase backend failed."),e.json()}).then(function(n){var r=Number(n.nextRequestWaitMillis),i=1e4;isNaN(r)||(i=Math.max(r,i));var o=n.logResponseDetails;Array.isArray(o)&&o.length>0&&"RETRY_REQUEST_LATER"===o[0].responseAction&&(dK=(0,L.__spreadArray)((0,L.__spreadArray)([],t),dK),dN.info("Retry transport request later.")),dW=3,e(i)})).catch(function(){dK=(0,L.__spreadArray)((0,L.__spreadArray)([],t),dK),dW--,dN.info("Tries left: "+dW+"."),e(1e4)})}},t)}(5500),dG=!0),dV().then(d0,d0))}).catch(function(e){dN.info("Environment doesn't support IndexedDB: "+e)})}return e.prototype.trace=function(e){return new dJ(e)},Object.defineProperty(e.prototype,"instrumentationEnabled",{get:function(){return dR.getInstance().instrumentationEnabled},set:function(e){dR.getInstance().instrumentationEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataCollectionEnabled",{get:function(){return dR.getInstance().dataCollectionEnabled},set:function(e){dR.getInstance().dataCollectionEnabled=e},enumerable:!1,configurable:!0}),e}();c=M.default,l=function(e,t){if("[DEFAULT]"!==e.name)throw dP.create("FB not default");if("undefined"==typeof window)throw dP.create("no window");return w=window,dR.getInstance().firebaseAppInstance=e,dR.getInstance().installationsService=t,new d2(e)},c.INTERNAL.registerComponent(new hu.Component("performance",function(e){return l(e.getProvider("app").getImmediate(),e.getProvider("installations").getImmediate())},"PUBLIC")),c.registerVersion("@firebase/performance",dw);var d3="https://www.googletagmanager.com/gtag/js";(h=k||(k={})).EVENT="event",h.SET="set",h.CONFIG="config",(f=D||(D={})).ADD_SHIPPING_INFO="add_shipping_info",f.ADD_PAYMENT_INFO="add_payment_info",f.ADD_TO_CART="add_to_cart",f.ADD_TO_WISHLIST="add_to_wishlist",f.BEGIN_CHECKOUT="begin_checkout",f.CHECKOUT_PROGRESS="checkout_progress",f.EXCEPTION="exception",f.GENERATE_LEAD="generate_lead",f.LOGIN="login",f.PAGE_VIEW="page_view",f.PURCHASE="purchase",f.REFUND="refund",f.REMOVE_FROM_CART="remove_from_cart",f.SCREEN_VIEW="screen_view",f.SEARCH="search",f.SELECT_CONTENT="select_content",f.SELECT_ITEM="select_item",f.SELECT_PROMOTION="select_promotion",f.SET_CHECKOUT_OPTION="set_checkout_option",f.SHARE="share",f.SIGN_UP="sign_up",f.TIMING_COMPLETE="timing_complete",f.VIEW_CART="view_cart",f.VIEW_ITEM="view_item",f.VIEW_ITEM_LIST="view_item_list",f.VIEW_PROMOTION="view_promotion",f.VIEW_SEARCH_RESULTS="view_search_results";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var d6=new j.Logger("@firebase/analytics"),d5=((A={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",A["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",A["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",A["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",A["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",A["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",A["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",A["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',A["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',A),d4=new F.ErrorFactory("analytics","Analytics",d5),d8=new(function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t=1e3),this.throttleMetadata=e,this.intervalMillis=t}return e.prototype.getThrottleMetadata=function(e){return this.throttleMetadata[e]},e.prototype.setThrottleMetadata=function(e,t){this.throttleMetadata[e]=t},e.prototype.deleteThrottleMetadata=function(e){delete this.throttleMetadata[e]},e}()),d9=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(e){this.listeners.push(e)},e.prototype.abort=function(){this.listeners.forEach(function(e){return e()})},e}(),d7={},pe=[],pt={},pn="dataLayer",pr="gtag",pi=!1,po="analytics";(d=M.default).INTERNAL.registerComponent(new hu.Component(po,function(e){return function(e,t){!function(){var e=[];if((0,F.isBrowserExtension)()&&e.push("This is a browser extension environment."),(0,F.areCookiesEnabled)()||e.push("Cookies are not available."),e.length>0){var t=e.map(function(e,t){return"("+(t+1)+") "+e}).join(" "),n=d4.create("invalid-analytics-context",{errorInfo:t});d6.warn(n.message)}}();var n=e.options.appId;if(!n)throw d4.create("no-app-id");if(!e.options.apiKey){if(e.options.measurementId)d6.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+e.options.measurementId+' provided in the "measurementId" field in the local Firebase config.');else throw d4.create("no-api-key")}if(null!=d7[n])throw d4.create("already-exists",{id:n});if(!pi){r=pn,i=[],Array.isArray(window[r])?i=window[r]:window[r]=i;var r,i,o,a,s,u,c=(o=pn,a=pr,s=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];window[o].push(arguments)},window[a]&&"function"==typeof window[a]&&(s=window[a]),window[a]=(u=s,function(e,t,n){return(0,L.__awaiter)(this,void 0,void 0,function(){var r;return(0,L.__generator)(this,function(i){switch(i.label){case 0:if(i.trys.push([0,6,,7]),e!==k.EVENT)return[3,2];return[4,function(e,t,n,r,i){return(0,L.__awaiter)(this,void 0,void 0,function(){var o,a,s,u,c,l,h;return(0,L.__generator)(this,function(f){switch(f.label){case 0:if(f.trys.push([0,4,,5]),o=[],!(i&&i.send_to))return[3,2];return Array.isArray(a=i.send_to)||(a=[a]),[4,Promise.all(n)];case 1:for(c=0,s=f.sent(),u=function(e){var n=s.find(function(t){return t.measurementId===e}),r=n&&t[n.appId];if(!r)return o=[],"break";o.push(r)},l=a;c<l.length&&"break"!==u(l[c]);c++);f.label=2;case 2:return 0===o.length&&(o=Object.values(t)),[4,Promise.all(o)];case 3:return f.sent(),e(k.EVENT,r,i||{}),[3,5];case 4:return h=f.sent(),d6.error(h),[3,5];case 5:return[2]}})})}(u,d7,pe,t,n)];case 1:case 3:return i.sent(),[3,5];case 2:if(e!==k.CONFIG)return[3,4];return[4,function(e,t,n,r,i,o){return(0,L.__awaiter)(this,void 0,void 0,function(){var a,s,u;return(0,L.__generator)(this,function(c){switch(c.label){case 0:a=r[i],c.label=1;case 1:if(c.trys.push([1,7,,8]),!a)return[3,3];return[4,t[a]];case 2:return c.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:if(!(s=c.sent().find(function(e){return e.measurementId===i})))return[3,6];return[4,t[s.appId]];case 5:c.sent(),c.label=6;case 6:return[3,8];case 7:return u=c.sent(),d6.error(u),[3,8];case 8:return e(k.CONFIG,i,o),[2]}})})}(u,d7,pe,pt,t,n)];case 4:u(k.SET,t),i.label=5;case 5:return[3,7];case 6:return r=i.sent(),d6.error(r),[3,7];case 7:return[2]}})})}),{gtagCore:s,wrappedGtag:window[a]}),l=c.wrappedGtag,h=c.gtagCore;N=l,P=h,pi=!0}return d7[n]=function(e,t,n,r,i,o){return(0,L.__awaiter)(this,void 0,void 0,function(){var a,s,u,c,l,h;return(0,L.__generator)(this,function(f){switch(f.label){case 0:return(a=function(e,t,n){return void 0===t&&(t=d8),(0,L.__awaiter)(this,void 0,void 0,function(){var r,i,o,a,s,u,c=this;return(0,L.__generator)(this,function(l){if(i=(r=e.options).appId,o=r.apiKey,a=r.measurementId,!i)throw d4.create("no-app-id");if(!o){if(a)return[2,{measurementId:a,appId:i}];throw d4.create("no-api-key")}return s=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new d9,setTimeout(function(){return(0,L.__awaiter)(c,void 0,void 0,function(){return(0,L.__generator)(this,function(e){return u.abort(),[2]})})},void 0!==n?n:6e4),[2,function e(t,n,r,i){var o=n.throttleEndTimeMillis,a=n.backoffCount;return void 0===i&&(i=d8),(0,L.__awaiter)(this,void 0,void 0,function(){var n,s,u,c,l,h,f;return(0,L.__generator)(this,function(d){switch(d.label){case 0:n=t.appId,s=t.measurementId,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,new Promise(function(e,t){var n=setTimeout(e,Math.max(o-Date.now(),0));r.addEventListener(function(){clearTimeout(n),t(d4.create("fetch-throttle",{throttleEndTimeMillis:o}))})})];case 2:return d.sent(),[3,4];case 3:if(u=d.sent(),s)return d6.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+u.message+"]"),[2,{appId:n,measurementId:s}];throw u;case 4:return d.trys.push([4,6,,7]),[4,function(e){var t;return(0,L.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,a,s;return(0,L.__generator)(this,function(u){switch(u.label){case 0:var c;return n=e.appId,r={method:"GET",headers:(c=e.apiKey,new Headers({Accept:"application/json","x-goog-api-key":c}))},i="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(i,r)];case 1:if(!(200!==(o=u.sent()).status&&304!==o.status))return[3,6];a="",u.label=2;case 2:return u.trys.push([2,4,,5]),[4,o.json()];case 3:return(null===(t=(s=u.sent()).error)||void 0===t?void 0:t.message)&&(a=s.error.message),[3,5];case 4:return u.sent(),[3,5];case 5:throw d4.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a});case 6:return[2,o.json()]}})})}(t)];case 5:return c=d.sent(),i.deleteThrottleMetadata(n),[2,c];case 6:if(!function(e){if(!(e instanceof F.FirebaseError)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(l=d.sent())){if(i.deleteThrottleMetadata(n),s)return d6.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+l.message+"]"),[2,{appId:n,measurementId:s}];throw l}return h=503===Number(l.customData.httpStatus)?(0,F.calculateBackoffMillis)(a,i.intervalMillis,30):(0,F.calculateBackoffMillis)(a,i.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:a+1},i.setThrottleMetadata(n,f),d6.debug("Calling attemptFetch again in "+h+" millis"),[2,e(t,f,r,i)];case 7:return[2]}})})}({appId:i,apiKey:o,measurementId:a},s,u,t)]})})}(e)).then(function(t){n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&d6.warn("The measurement ID in the local Firebase config ("+e.options.measurementId+") does not match the measurement ID fetched from the server ("+t.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(e){return d6.error(e)}),t.push(a),[4,Promise.all([a,/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){return(0,L.__awaiter)(this,void 0,void 0,function(){var e;return(0,L.__generator)(this,function(t){switch(t.label){case 0:if((0,F.isIndexedDBAvailable)())return[3,1];return d6.warn(d4.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1];case 1:return t.trys.push([1,3,,4]),[4,(0,F.validateIndexedDBOpenable)()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),d6.warn(d4.create("indexeddb-unavailable",{errorInfo:e}).message),[2,!1];case 4:return[2,!0]}})})})().then(function(e){return e?r.getId():void 0})])];case 1:if(u=(s=f.sent())[0],c=s[1],!function(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(d3))return r}return null}()){var d,p;d=u.measurementId,(p=document.createElement("script")).src=d3+"?l="+o+"&id="+d,p.async=!0,document.head.appendChild(p)}return i("js",new Date),(h={}).origin="firebase",h.update=!0,l=h,null!=c&&(l.firebase_id=c),i(k.CONFIG,u.measurementId,l),[2,u.measurementId]}})})}(e,pe,pt,t,P,pn),{app:e,logEvent:function(e,t,r){/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(e,t,n,r,i){return(0,L.__awaiter)(this,void 0,void 0,function(){var o,a;return(0,L.__generator)(this,function(s){switch(s.label){case 0:if(!(i&&i.global))return[3,1];return e(k.EVENT,n,r),[2];case 1:return[4,t];case 2:o=s.sent(),a=(0,L.__assign)((0,L.__assign)({},r),{send_to:o}),e(k.EVENT,n,a),s.label=3;case 3:return[2]}})})})(N,d7[n],e,t,r).catch(function(e){return d6.error(e)})},setCurrentScreen:function(e,t){(function(e,t,n,r){return(0,L.__awaiter)(this,void 0,void 0,function(){var i;return(0,L.__generator)(this,function(o){switch(o.label){case 0:if(!(r&&r.global))return[3,1];return e(k.SET,{screen_name:n}),[2,Promise.resolve()];case 1:return[4,t];case 2:i=o.sent(),e(k.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}})})})(N,d7[n],e,t).catch(function(e){return d6.error(e)})},setUserId:function(e,t){(function(e,t,n,r){return(0,L.__awaiter)(this,void 0,void 0,function(){var i;return(0,L.__generator)(this,function(o){switch(o.label){case 0:if(!(r&&r.global))return[3,1];return e(k.SET,{user_id:n}),[2,Promise.resolve()];case 1:return[4,t];case 2:i=o.sent(),e(k.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}})})})(N,d7[n],e,t).catch(function(e){return d6.error(e)})},setUserProperties:function(e,t){(function(e,t,n,r){return(0,L.__awaiter)(this,void 0,void 0,function(){var i,o,a,s,u;return(0,L.__generator)(this,function(c){switch(c.label){case 0:if(!(r&&r.global))return[3,1];for(o=0,i={},a=Object.keys(n);o<a.length;o++)i["user_properties."+(s=a[o])]=n[s];return e(k.SET,i),[2,Promise.resolve()];case 1:return[4,t];case 2:u=c.sent(),e(k.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}})})})(N,d7[n],e,t).catch(function(e){return d6.error(e)})},setAnalyticsCollectionEnabled:function(e){(function(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n;return(0,L.__generator)(this,function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),window["ga-disable-"+n]=!t,[2]}})})})(d7[n],e).catch(function(e){return d6.error(e)})},INTERNAL:{delete:function(){return delete d7[n],Promise.resolve()}}}}(e.getProvider("app").getImmediate(),e.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:function(e){if(pi)throw d4.create("already-initialized");e.dataLayerName&&(pn=e.dataLayerName),e.gtagName&&(pr=e.gtagName)},EventName:D,isSupported:function(){return(0,L.__awaiter)(this,void 0,void 0,function(){return(0,L.__generator)(this,function(e){switch(e.label){case 0:if((0,F.isBrowserExtension)()||!(0,F.areCookiesEnabled)()||!(0,F.isIndexedDBAvailable)())return[2,!1];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,(0,F.validateIndexedDBOpenable)()];case 2:return[2,e.sent()];case 3:return e.sent(),[2,!1];case 4:return[2]}})})}})),d.INTERNAL.registerComponent(new hu.Component("analytics-internal",function(e){try{return{logEvent:e.getProvider(po).getImmediate().logEvent}}catch(e){throw d4.create("interop-component-reg-failed",{reason:e})}},"PRIVATE")),d.registerVersion("@firebase/analytics","0.6.18");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pa=function(){function e(e,t,n,r){this.client=e,this.storage=t,this.storageCache=n,this.logger=r}return e.prototype.isCachedDataFresh=function(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-t,r=n<=e;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+e+". Is cache hit: "+r+"."),r},e.prototype.fetch=function(e){return(0,L.__awaiter)(this,void 0,void 0,function(){var t,n,r,i,o;return(0,L.__generator)(this,function(a){switch(a.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:if(n=(t=a.sent())[0],(r=t[1])&&this.isCachedDataFresh(e.cacheMaxAgeMillis,n))return[2,r];return e.eTag=r&&r.eTag,[4,this.client.fetch(e)];case 2:return i=a.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return a.sent(),[2,i]}})})},e}(),ps=((x={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",x["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",x["registration-api-key"]="Undefined API key. Check Firebase app initialization.",x["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",x["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",x["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",x["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",x["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",x["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",x["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',x["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',x["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",x["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",x),pu=new F.ErrorFactory("remoteconfig","Remote Config",ps),pc=function(){function e(e,t,n,r,i,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return e.prototype.fetch=function(e){return(0,L.__awaiter)(this,void 0,void 0,function(){var t,n,r,i,o,a,s,u,c,l,h,f,d,p,g,v;return(0,L.__generator)(this,function(y){switch(y.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:var m;n=(t=y.sent())[0],r=t[1],i=(window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com")+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,o={method:"POST",headers:{"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},body:JSON.stringify({sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:(void 0===m&&(m=navigator),m.languages&&m.languages[0]||m.language)})},a=fetch(i,o),s=new Promise(function(t,n){e.signal.addEventListener(function(){var e=Error("The operation was aborted.");e.name="AbortError",n(e)})}),y.label=2;case 2:return y.trys.push([2,5,,6]),[4,Promise.race([a,s])];case 3:return y.sent(),[4,a];case 4:return u=y.sent(),[3,6];case 5:throw c=y.sent(),l="fetch-client-network","AbortError"===c.name&&(l="fetch-timeout"),pu.create(l,{originalErrorMessage:c.message});case 6:if(h=u.status,f=u.headers.get("ETag")||void 0,200!==u.status)return[3,11];g=void 0,y.label=7;case 7:return y.trys.push([7,9,,10]),[4,u.json()];case 8:return g=y.sent(),[3,10];case 9:throw v=y.sent(),pu.create("fetch-client-parse",{originalErrorMessage:v.message});case 10:d=g.entries,p=g.state,y.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===p?h=500:"NO_CHANGE"===p?h=304:("NO_TEMPLATE"===p||"EMPTY_CONFIG"===p)&&(d={}),304!==h&&200!==h)throw pu.create("fetch-status",{httpStatus:h});return[2,{status:h,eTag:f,config:d}]}})})},e}(),pl=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(e){this.listeners.push(e)},e.prototype.abort=function(){this.listeners.forEach(function(e){return e()})},e}(),ph=["1","true","t","yes","y","on"],pf=function(){function e(e,t){void 0===t&&(t=""),this._source=e,this._value=t}return e.prototype.asString=function(){return this._value},e.prototype.asBoolean=function(){return"static"!==this._source&&ph.indexOf(this._value.toLowerCase())>=0},e.prototype.asNumber=function(){if("static"===this._source)return 0;var e=Number(this._value);return isNaN(e)&&(e=0),e},e.prototype.getSource=function(){return this._source},e}(),pd=function(){function e(e,t,n,r,i){this.app=e,this._client=t,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return e.prototype.setLogLevel=function(e){switch(e){case"debug":this._logger.logLevel=j.LogLevel.DEBUG;break;case"silent":this._logger.logLevel=j.LogLevel.SILENT;break;default:this._logger.logLevel=j.LogLevel.ERROR}},Object.defineProperty(e.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),e.prototype.activate=function(){return(0,L.__awaiter)(this,void 0,void 0,function(){var e,t,n;return(0,L.__generator)(this,function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:if(t=(e=r.sent())[0],n=e[1],!t||!t.config||!t.eTag||t.eTag===n)return[2,!1];return[4,Promise.all([this._storageCache.setActiveConfig(t.config),this._storage.setActiveConfigEtag(t.eTag)])];case 2:return r.sent(),[2,!0]}})})},e.prototype.ensureInitialized=function(){var e=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){e._isInitializationComplete=!0})),this._initializePromise},e.prototype.fetch=function(){return(0,L.__awaiter)(this,void 0,void 0,function(){var e,t,n,r=this;return(0,L.__generator)(this,function(i){switch(i.label){case 0:e=new pl,setTimeout(function(){return(0,L.__awaiter)(r,void 0,void 0,function(){return(0,L.__generator)(this,function(t){return e.abort(),[2]})})},this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:e})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:var o;return n=(o=t=i.sent())instanceof F.FirebaseError&&-1!==o.code.indexOf("fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),t;case 6:return[2]}})})},e.prototype.fetchAndActivate=function(){return(0,L.__awaiter)(this,void 0,void 0,function(){return(0,L.__generator)(this,function(e){switch(e.label){case 0:return[4,this.fetch()];case 1:return e.sent(),[2,this.activate()]}})})},e.prototype.getAll=function(){var e,t,n=this;return(e=this._storageCache.getActiveConfig(),t=this.defaultConfig,void 0===e&&(e={}),void 0===t&&(t={}),Object.keys((0,L.__assign)((0,L.__assign)({},e),t))).reduce(function(e,t){return e[t]=n.getValue(t),e},{})},e.prototype.getBoolean=function(e){return this.getValue(e).asBoolean()},e.prototype.getNumber=function(e){return this.getValue(e).asNumber()},e.prototype.getString=function(e){return this.getValue(e).asString()},e.prototype.getValue=function(e){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+e+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var t=this._storageCache.getActiveConfig();return t&&void 0!==t[e]?new pf("remote",t[e]):this.defaultConfig&&void 0!==this.defaultConfig[e]?new pf("default",String(this.defaultConfig[e])):(this._logger.debug('Returning static value for key "'+e+'". Define a default or remote value if this is unintentional.'),new pf("static"))},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(e,t){var n=e.target.error||void 0;return pu.create(t,{originalErrorMessage:n&&n.message})}var pg="app_namespace_store",pv=function(){function e(e,t,n,r){void 0===r&&(r=new Promise(function(e,t){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(e){t(pp(e,"storage-open"))},n.onsuccess=function(t){e(t.target.result)},n.onupgradeneeded=function(e){var t=e.target.result;0===e.oldVersion&&t.createObjectStore(pg,{keyPath:"compositeKey"})}})),this.appId=e,this.appName=t,this.namespace=n,this.openDbPromise=r}return e.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},e.prototype.setLastFetchStatus=function(e){return this.set("last_fetch_status",e)},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},e.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.set("last_successful_fetch_timestamp_millis",e)},e.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},e.prototype.setLastSuccessfulFetchResponse=function(e){return this.set("last_successful_fetch_response",e)},e.prototype.getActiveConfig=function(){return this.get("active_config")},e.prototype.setActiveConfig=function(e){return this.set("active_config",e)},e.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},e.prototype.setActiveConfigEtag=function(e){return this.set("active_config_etag",e)},e.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},e.prototype.setThrottleMetadata=function(e){return this.set("throttle_metadata",e)},e.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},e.prototype.get=function(e){return(0,L.__awaiter)(this,void 0,void 0,function(){var t,n=this;return(0,L.__generator)(this,function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return t=r.sent(),[2,new Promise(function(r,i){var o=t.transaction([pg],"readonly").objectStore(pg),a=n.createCompositeKey(e);try{var s=o.get(a);s.onerror=function(e){i(pp(e,"storage-get"))},s.onsuccess=function(e){var t=e.target.result;t?r(t.value):r(void 0)}}catch(e){i(pu.create("storage-get",{originalErrorMessage:e&&e.message}))}})]}})})},e.prototype.set=function(e,t){return(0,L.__awaiter)(this,void 0,void 0,function(){var n,r=this;return(0,L.__generator)(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(i,o){var a=n.transaction([pg],"readwrite").objectStore(pg),s=r.createCompositeKey(e);try{var u=a.put({compositeKey:s,value:t});u.onerror=function(e){o(pp(e,"storage-set"))},u.onsuccess=function(){i()}}catch(e){o(pu.create("storage-set",{originalErrorMessage:e&&e.message}))}})]}})})},e.prototype.delete=function(e){return(0,L.__awaiter)(this,void 0,void 0,function(){var t,n=this;return(0,L.__generator)(this,function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return t=r.sent(),[2,new Promise(function(r,i){var o=t.transaction([pg],"readwrite").objectStore(pg),a=n.createCompositeKey(e);try{var s=o.delete(a);s.onerror=function(e){i(pp(e,"storage-delete"))},s.onsuccess=function(){r()}}catch(e){i(pu.create("storage-delete",{originalErrorMessage:e&&e.message}))}})]}})})},e.prototype.createCompositeKey=function(e){return[this.appId,this.appName,this.namespace,e].join()},e}(),py=function(){function e(e){this.storage=e}return e.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},e.prototype.getActiveConfig=function(){return this.activeConfig},e.prototype.loadFromStorage=function(){return(0,L.__awaiter)(this,void 0,void 0,function(){var e,t,n,r,i,o;return(0,L.__generator)(this,function(a){switch(a.label){case 0:return e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,e];case 1:return(r=a.sent())&&(this.lastFetchStatus=r),[4,t];case 2:return(i=a.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=a.sent())&&(this.activeConfig=o),[2]}})})},e.prototype.setLastFetchStatus=function(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)},e.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)},e.prototype.setActiveConfig=function(e){return this.activeConfig=e,this.storage.setActiveConfig(e)},e}(),pm=function(){function e(e,t){this.client=e,this.storage=t}return e.prototype.fetch=function(e){return(0,L.__awaiter)(this,void 0,void 0,function(){var t;return(0,L.__generator)(this,function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return t=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(e,t)]}})})},e.prototype.attemptFetch=function(e,t){var n=t.throttleEndTimeMillis,r=t.backoffCount;return(0,L.__awaiter)(this,void 0,void 0,function(){var t,i,o;return(0,L.__generator)(this,function(a){switch(a.label){case 0:var s;return[4,(s=e.signal,new Promise(function(e,t){var r=setTimeout(e,Math.max(n-Date.now(),0));s.addEventListener(function(){clearTimeout(r),t(pu.create("fetch-throttle",{throttleEndTimeMillis:n}))})}))];case 1:a.sent(),a.label=2;case 2:return a.trys.push([2,5,,7]),[4,this.client.fetch(e)];case 3:return t=a.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return a.sent(),[2,t];case 5:if(!function(e){if(!(e instanceof F.FirebaseError)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(i=a.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+(0,F.calculateBackoffMillis)(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return a.sent(),[2,this.attemptFetch(e,o)];case 7:return[2]}})})},e}(),pb="@firebase/remote-config";(p=M.default).INTERNAL.registerComponent(new hu.Component("remoteConfig",function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("installations").getImmediate();if("undefined"==typeof window)throw pu.create("registration-window");var o=r.options,a=o.projectId,s=o.apiKey,u=o.appId;if(!a)throw pu.create("registration-project-id");if(!s)throw pu.create("registration-api-key");if(!u)throw pu.create("registration-app-id");n=n||"firebase";var c=new pv(u,r.name,n),l=new py(c),h=new j.Logger(pb);h.logLevel=j.LogLevel.ERROR;var f=new pd(r,new pa(new pm(new pc(i,p.SDK_VERSION,n,a,s,u),c),c,l,h),l,c,h);return f.ensureInitialized(),f},"PUBLIC").setMultipleInstances(!0)),p.registerVersion(pb,"0.1.43"),n(1746);var p_="8.10.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */M.default.registerVersion("firebase",p_,"app"),M.default.SDK_VERSION=p_,/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),M.default.registerVersion("firebase","8.10.0");let pw=R.createContext(),pE=e=>{let{children:t}=e,[n,r]=(0,R.useState)({}),[i,o]=(0,R.useState)(""),[a,s]=(0,R.useState)(""),u=()=>{M.default.initializeApp({apiKey:"AIzaSyBNja2fdnV7ElM6RW7eRbz-GfeTJ2uayM0",authDomain:"wallstreetgames-ac20d.firebaseapp.com",projectId:"wallstreetgames-ac20d",storageBucket:"wallstreetgames-ac20d.appspot.com",messagingSenderId:"280021423608",appId:"1:280021423608:web:caf369586e6b7ca86fb20d",measurementId:"G-X77JFM9N5E"}),M.default.auth().setPersistence(M.default.auth.Auth.Persistence.LOCAL).then(()=>{o(M.default.auth())}),s(M.default.firestore())};return(0,R.useEffect)(()=>{(null===M.default||void 0===M.default?void 0:M.default.apps.length)||u()},[M.default]),(0,R.useEffect)(()=>M.default.auth().onAuthStateChanged(e=>{r(e)}),[]),(0,O.jsx)(pw.Provider,{value:{db:a,auth:i,firebase:M.default,currentUser:n},children:t})}},7050:function(e,t,n){"use strict";n.d(t,{B:function(){return a},M:function(){return o}});var r=n(5311),i=n(132);let o=i.createContext(),a=e=>{let{children:t}=e,[n,a]=(0,i.useState)({tokenPrice:0,marketCap:0,totalSupply:0,circulatingSupply:0,pools:{pool_data:null}});function s(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}return(0,i.useEffect)(()=>{let e=async()=>{try{let e=await fetch("https://wsg-api-server-e75f29800660.herokuapp.com/token/info",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}),t=await e.json(),n=await fetch("https://wsg-api-server-e75f29800660.herokuapp.com/pools"),r=await n.json();a({tokenPrice:new Number(t.tokenPrice).toFixed(6),tokenPriceInEth:parseFloat(t.tokenPriceInEth),lpPrice:parseFloat(t.lpPrice),ethPrice:parseFloat(t.ethPrice),marketCap:parseFloat(t.marketCap).toLocaleString(void 0,{maximumFractionDigits:0}),totalSupply:s(Number(t.totalSupply).toFixed(0)),circulatingSupply:s(Number(t.circulatingSupply).toFixed(0)),pools:r[0]})}catch(e){console.error("Error fetching token data:",e)}};e();let t=setInterval(e,6e4);return()=>clearInterval(t)},[]),(0,r.jsx)(o.Provider,{value:n,children:t})}},6594:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ey}});var r,i,o,a,s,u,c,l,h,f,d,p,g,v,y,m,b,_,w,E,I=n(5311),C=n(5900),T=n.n(C),S=JSON.parse('{"locales":["en","cn"],"defaultLocale":"en","pages":{"*":["common"]}}'),k=n(132),D=n(5762),A=n(2380),P=n(6379),N=n(5724),x=function(){return(x=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},O=(0,k.createContext)({ns:{},config:{}});function R(e){var t,n,r=e.lang,i=e.namespaces,o=e.children,a=e.config,s=(0,N.Z)().lang,u=(0,D.useRouter)()||{},c=u.locale,l=u.defaultLocale,h=(0,k.useContext)(O),f=x(x(x({},"undefined"==typeof window?{}:(null===(n=null===(t=window.__NEXT_DATA__)||void 0===t?void 0:t.props)||void 0===n?void 0:n.__namespaces)||{}),h.ns),void 0===i?{}:i),d=r||s||c||l||"",p=x(x({},h.config),void 0===a?{}:a),g=p.localesToIgnore||["default"],v=!d||g.includes(d),y=new Intl.PluralRules(v?void 0:d),m=(0,P.Z)({config:p,allNamespaces:f,pluralRules:y,lang:d});return k.createElement(A.Z.Provider,{value:{lang:d,t:m}},k.createElement(O.Provider,{value:{ns:f,config:p}},o))}var M=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,s)}u((r=r.apply(e,t||[])).next())})},L=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},F=function(e,t,n){if(n||2==arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};function j(e){return e.reduce(function(e,t){return e.concat(t)},[])}var U=n(5409),q=function(){return(q=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},B=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},V=function(){return(V=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},W=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};n(7133);var K=n(7050),G=n(2114),z=n(8367),H=n(388),$=n(9565),Q=n(2962),Y=n(9656),X=n(9200),J=n(5032),Z=n(9854),ee=n(5363),et="eip155",en="requestedChains",er="wallet_addEthereumChain",ei=class extends $.wR{constructor(e){super({...e,options:{isNewChainsStale:!0,...e.options}}),(0,$.Ko)(this,o),(0,$.Ko)(this,s),(0,$.Ko)(this,c),(0,$.Ko)(this,h),(0,$.Ko)(this,d),(0,$.Ko)(this,g),(0,$.Ko)(this,y),(0,$.Ko)(this,b),(0,$.Ko)(this,w),this.id="walletConnect",this.name="WalletConnect",this.ready=!0,(0,$.Ko)(this,r,void 0),(0,$.Ko)(this,i,void 0),this.onAccountsChanged=e=>{0===e.length?this.emit("disconnect"):this.emit("change",{account:(0,Y.K)(e[0])})},this.onChainChanged=e=>{let t=Number(e),n=this.isChainUnsupported(t);this.emit("change",{chain:{id:t,unsupported:n}})},this.onDisconnect=()=>{(0,$.U9)(this,g,v).call(this,[]),this.emit("disconnect")},this.onDisplayUri=e=>{this.emit("message",{type:"display_uri",data:e})},this.onConnect=()=>{this.emit("connect",{})},(0,$.U9)(this,o,a).call(this)}async connect({chainId:e,pairingTopic:t}={}){try{let n=e;if(!n){let e=this.storage?.getItem("store"),t=e?.state?.data?.chain?.id;n=t&&!this.isChainUnsupported(t)?t:this.chains[0]?.id}if(!n)throw Error("No chains found on connector.");let r=await this.getProvider();(0,$.U9)(this,h,f).call(this);let i=(0,$.U9)(this,c,l).call(this);if(r.session&&i&&await r.disconnect(),!r.session||i){let e=this.chains.filter(e=>e.id!==n).map(e=>e.id);this.emit("message",{type:"connecting"}),await r.connect({pairingTopic:t,chains:[n],optionalChains:e.length?e:void 0}),(0,$.U9)(this,g,v).call(this,this.chains.map(({id:e})=>e))}let o=await r.enable(),a=(0,Y.K)(o[0]),s=await this.getChainId(),u=this.isChainUnsupported(s);return{account:a,chain:{id:s,unsupported:u}}}catch(e){if(/user rejected/i.test(e?.message))throw new X.ab(e);throw e}}async disconnect(){let e=await this.getProvider();try{await e.disconnect()}catch(e){if(!/No matching key/i.test(e.message))throw e}finally{(0,$.U9)(this,d,p).call(this),(0,$.U9)(this,g,v).call(this,[])}}async getAccount(){let{accounts:e}=await this.getProvider();return(0,Y.K)(e[0])}async getChainId(){let{chainId:e}=await this.getProvider();return e}async getProvider({chainId:e}={}){return(0,$.ac)(this,r)||await (0,$.U9)(this,o,a).call(this),e&&await this.switchChain(e),(0,$.ac)(this,r)}async getWalletClient({chainId:e}={}){let[t,n]=await Promise.all([this.getProvider({chainId:e}),this.getAccount()]),r=this.chains.find(t=>t.id===e);if(!t)throw Error("provider is required.");return(0,J.K)({account:n,chain:r,transport:(0,Z.P)(t)})}async isAuthorized(){try{let[e,t]=await Promise.all([this.getAccount(),this.getProvider()]),n=(0,$.U9)(this,c,l).call(this);if(!e)return!1;if(n&&t.session){try{await t.disconnect()}catch{}return!1}return!0}catch{return!1}}async switchChain(e){let t=this.chains.find(t=>t.id===e);if(!t)throw new X.x3(Error("chain not found on connector."));try{let n=await this.getProvider(),r=(0,$.U9)(this,b,_).call(this),i=(0,$.U9)(this,w,E).call(this);if(!r.includes(e)&&i.includes(er)){await n.request({method:er,params:[{chainId:(0,ee.eC)(t.id),blockExplorerUrls:[t.blockExplorers?.default?.url],chainName:t.name,nativeCurrency:t.nativeCurrency,rpcUrls:[...t.rpcUrls.default.http]}]});let r=(0,$.U9)(this,y,m).call(this);r.push(e),(0,$.U9)(this,g,v).call(this,r)}return await n.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,ee.eC)(e)}]}),t}catch(t){let e="string"==typeof t?t:t?.message;if(/user rejected request/i.test(e))throw new X.ab(t);throw new X.x3(t)}}};r=new WeakMap,i=new WeakMap,o=new WeakSet,a=async function(){return(0,$.ac)(this,i)||"undefined"==typeof window||(0,$.qx)(this,i,(0,$.U9)(this,s,u).call(this)),(0,$.ac)(this,i)},s=new WeakSet,u=async function(){let{EthereumProvider:e,OPTIONAL_EVENTS:t,OPTIONAL_METHODS:i}=await n.e(280).then(n.bind(n,6280)),[o,...a]=this.chains.map(({id:e})=>e);if(o){let{projectId:n,showQrModal:s=!0,qrModalOptions:u,metadata:c,relayUrl:l}=this.options;(0,$.qx)(this,r,await e.init({showQrModal:s,qrModalOptions:u,projectId:n,optionalMethods:i,optionalEvents:t,chains:[o],optionalChains:a.length?a:void 0,rpcMap:Object.fromEntries(this.chains.map(e=>[e.id,e.rpcUrls.default.http[0]])),metadata:c,relayUrl:l}))}},c=new WeakSet,l=function(){if((0,$.U9)(this,w,E).call(this).includes(er)||!this.options.isNewChainsStale)return!1;let e=(0,$.U9)(this,y,m).call(this),t=this.chains.map(({id:e})=>e),n=(0,$.U9)(this,b,_).call(this);return(!n.length||!!n.some(e=>t.includes(e)))&&!t.every(t=>e.includes(t))},h=new WeakSet,f=function(){(0,$.ac)(this,r)&&((0,$.U9)(this,d,p).call(this),(0,$.ac)(this,r).on("accountsChanged",this.onAccountsChanged),(0,$.ac)(this,r).on("chainChanged",this.onChainChanged),(0,$.ac)(this,r).on("disconnect",this.onDisconnect),(0,$.ac)(this,r).on("session_delete",this.onDisconnect),(0,$.ac)(this,r).on("display_uri",this.onDisplayUri),(0,$.ac)(this,r).on("connect",this.onConnect))},d=new WeakSet,p=function(){(0,$.ac)(this,r)&&((0,$.ac)(this,r).removeListener("accountsChanged",this.onAccountsChanged),(0,$.ac)(this,r).removeListener("chainChanged",this.onChainChanged),(0,$.ac)(this,r).removeListener("disconnect",this.onDisconnect),(0,$.ac)(this,r).removeListener("session_delete",this.onDisconnect),(0,$.ac)(this,r).removeListener("display_uri",this.onDisplayUri),(0,$.ac)(this,r).removeListener("connect",this.onConnect))},g=new WeakSet,v=function(e){this.storage?.setItem(en,e)},y=new WeakSet,m=function(){return this.storage?.getItem(en)??[]},b=new WeakSet,_=function(){if(!(0,$.ac)(this,r))return[];let e=$.ac(this,r).session?.namespaces;if(!e)return[];let t=(0,Q.fK)(e);return t[et]?.chains?.map(e=>parseInt(e.split(":")[1]||""))??[]},w=new WeakSet,E=function(){if(!(0,$.ac)(this,r))return[];let e=$.ac(this,r).session?.namespaces;if(!e)return[];let t=(0,Q.fK)(e);return t[et]?.methods??[]};class eo{constructor(e,t){this.wagmi={},this.chains=[],this.namespace="eip155",this.disconnect=z.zP,this.getAccount=z.D0,this.watchAccount=z.uH,this.fetchBalance=z.EG,this.getNetwork=z.Hy,this.watchNetwork=z.QC,this.switchNetwork=z.If,this.fetchEnsName=z.Lk,this.fetchEnsAvatar=z.w6,this.wagmi=e,this.chains=t}getWalletConnectConnector(){let e=this.wagmi.connectors.find(e=>"walletConnect"===e.id);if(!e)throw Error("WalletConnectConnector is required");return e}async connectWalletConnectProvider(e,t){return await e.getProvider(),new Promise(n=>{e.once("message",e=>{"display_uri"===e.type&&(t(e.data),n())})})}getConnectorById(e){let t=this.wagmi.connectors.find(t=>t.id===e);if(!t)throw Error(`Connector for id ${e} was not found`);return t}getConnectors(){return this.wagmi.connectors.filter(e=>!e.id.includes("walletConnect"))}async connectWalletConnect(e,t){let n=this.getWalletConnectConnector(),r={connector:n};return t&&(r.chainId=t),Promise.all([(0,z.$j)(r),this.connectWalletConnectProvider(n,e)])}async connectConnector(e,t){let n={connector:this.getConnectorById(e)};return t&&(n.chainId=t),await (0,z.$j)(n)}isInjectedProviderInstalled(){return"u">typeof window.ethereum}safeCheckInjectedProvider(e){var t;try{let n=String(e);return!!(null==(t=window.ethereum)?void 0:t[n])}catch(e){return console.error(e),!1}}async getConnectedChainIds(){var e,t,n;let r=null==(t=null==(e=(await this.getWalletConnectConnector().getProvider()).signer)?void 0:e.session)?void 0:t.namespaces,i=null==(n=r?.[this.namespace])?void 0:n.methods;if(null!=i&&i.includes("wallet_addEthereumChain"))return"ALL";if(r){let e=[];return Object.keys(r).forEach(t=>{t.includes(this.namespace)&&e.push(...r[t].accounts)}),e?.map(e=>e.split(":")[1])}return"ALL"}}var ea=n(3198),es=n(208),eu=n(3212);let ec=(0,n(5994).ax)({id:421613,name:"Arbitrum Goerli",network:"arbitrum-goerli",nativeCurrency:{name:"Arbitrum Goerli Ether",symbol:"ETH",decimals:18},rpcUrls:{alchemy:{http:["https://arb-goerli.g.alchemy.com/v2"],webSocket:["wss://arb-goerli.g.alchemy.com/v2"]},infura:{http:["https://arbitrum-goerli.infura.io/v3"],webSocket:["wss://arbitrum-goerli.infura.io/ws/v3"]},default:{http:["https://goerli-rollup.arbitrum.io/rpc"]},public:{http:["https://goerli-rollup.arbitrum.io/rpc"]}},blockExplorers:{etherscan:{name:"Arbiscan",url:"https://goerli.arbiscan.io"},default:{name:"Arbiscan",url:"https://goerli.arbiscan.io"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:88114}},testnet:!0});var el=n(5927),eh=n(3529);let ef=[eu.y,ec],ed="45b52bea4c1f29e3c6c48d5279ceaf2a",{publicClient:ep}=(0,z.QB)(ef,[function(e){return e.rpcUrls.public.http[0]?{chain:e,rpcUrls:e.rpcUrls.public}:null},function({projectId:e}){return function({rpc:e}){return function(t){let n=e(t);return n&&""!==n.http?{chain:{...t,rpcUrls:{...t.rpcUrls,default:{http:[n.http]}}},rpcUrls:{http:[n.http],webSocket:n.webSocket?[n.webSocket]:void 0}}:null}}({rpc:t=>{var n;return[1,3,4,5,10,42,56,69,97,100,137,280,324,420,42161,42220,43114,80001,421611,421613,1313161554,1313161555].includes(t.id)?{http:`https://rpc.walletconnect.com/v1/?chainId=eip155:${t.id}&projectId=${e}`}:{http:t.rpcUrls.default.http[0],webSocket:null==(n=t.rpcUrls.default.webSocket)?void 0:n[0]}}})}({projectId:ed})]),eg=(0,es._g)({autoConnect:!0,connectors:function({chains:e,projectId:t}){return[new ei({chains:e,options:{projectId:t,showQrModal:!1}}),new H._({chains:e,options:{shimDisconnect:!0}})]}({projectId:ed,chains:ef}),publicClient:ep}),ev=new eo(eg,ef);var ey=function(e,t){var r=this;function i(n){var r,i,o=t.defaultLocale;return k.createElement(R,{lang:(null===(r=n.pageProps)||void 0===r?void 0:r.__lang)||n.__lang||o,namespaces:(null===(i=n.pageProps)||void 0===i?void 0:i.__namespaces)||n.__namespaces,config:t},k.createElement(e,V({},n)))}return void 0===t&&(t={}),t.isLoader||!1===t.loader||console.warn('\uD83D\uDEA8 [next-translate] You can remove the "appWithI18n" HoC on the _app.js, unless you set "loader: false" in your i18n config file.'),"function"==typeof t.staticsHoc&&t.staticsHoc(i,e),"undefined"==typeof window?n.g.i18nConfig=t:window.i18nConfig=t,t.skipInitialProps||(i.getInitialProps=function(i){var o,a,s;return o=void 0,a=void 0,s=function(){var r,o,a;return W(this,function(s){switch(s.label){case 0:if(r=V(V({},i.ctx||{}),i||{}),o={pageProps:{}},!e.getInitialProps)return[3,2];return[4,e.getInitialProps(i)];case 1:o=s.sent()||{},s.label=2;case 2:return a=[V({},o)],[4,function(e){var t,r,i,o,a,s;return void 0===e&&(e={}),i=this,o=void 0,a=void 0,s=function(){var i,o,a,s,u,c;return B(this,function(l){switch(l.label){case 0:var h;if(o=(i=q(q({},("undefined"==typeof window?n.g:window).i18nConfig),e)).localesToIgnore||["default"],a=(null===(t=i.req)||void 0===t?void 0:t.locale)||i.locale||(null===(r=i.router)||void 0===r?void 0:r.locale)||i.defaultLocale||"",!i.pathname)return console.warn('\uD83D\uDEA8 [next-translate] You forgot to pass the "pathname" inside "loadNamespaces" configuration'),[2,{__lang:a}];if(o.includes(a))return[2,{__lang:a}];return i.loaderName||!1===i.loader||console.warn('\uD83D\uDEA8 [next-translate] You can remove the "loadNamespaces" helper, unless you set "loader: false" in your i18n config file.'),void 0===(h=i.pathname.replace(/\/index$/,""))&&(h=""),s=(h.length>1&&h.endsWith("/")?h.slice(0,-1):h)||"/",[4,function(e,t,n){var r=e.pages,i=void 0===r?{}:r;return M(this,void 0,void 0,function(){var e,r,o,a,s,u,c,l=this;return L(this,function(h){switch(h.label){case 0:return e="rgx:",r=function(e){return M(l,void 0,void 0,function(){return L(this,function(t){return[2,"function"==typeof e?e(n):e||[]]})})},o=Object.keys(i).reduce(function(n,o){return o.substring(0,e.length)===e&&new RegExp(o.replace(e,"")).test(t)&&n.push(r(i[o])),n},[]),a=[[]],[4,r(i["*"])];case 1:return s=[F.apply(void 0,a.concat([h.sent(),!0]))],[4,r(i[t])];case 2:return u=[F.apply(void 0,s.concat([h.sent(),!0]))],c=j,[4,Promise.all(o)];case 3:return[2,F.apply(void 0,u.concat([c.apply(void 0,[h.sent()]),!0]))]}})})}(i,s,i)];case 1:return[4,Promise.all((u=l.sent()).map(function(e){return"function"==typeof i.loadLocaleFrom?i.loadLocaleFrom(a,e).catch(function(){return{}}):Promise.resolve({})}))];case 2:return c=l.sent()||[],function(e,t){var n=t.page,r=t.lang,i=t.namespaces;if(!1!==e.logBuild&&"undefined"==typeof window){var o=null==U.env.NODE_DISABLE_COLORS&&null==U.env.NO_COLOR&&"dumb"!==U.env.TERM&&"0"!==U.env.FORCE_COLOR,a=function(e){return o?"\x1b[36m".concat(e,"\x1b[0m"):e};console.log(a("next-translate"),"- compiled page:",a(n),"- locale:",a(r),"- namespaces:",a(i.join(", ")),"- used loader:",a(e.loaderName||"-"))}}(i,{page:s,lang:a,namespaces:u}),[2,{__lang:a,__namespaces:u.reduce(function(e,t,n){return e[t]=c[n]||null,e},{})}]}})},new(a||(a=Promise))(function(e,t){function n(e){try{u(s.next(e))}catch(e){t(e)}}function r(e){try{u(s.throw(e))}catch(e){t(e)}}function u(t){var i;t.done?e(t.value):((i=t.value)instanceof a?i:new a(function(e){e(i)})).then(n,r)}u((s=s.apply(i,o||[])).next())})}(V(V(V({},r),t),{loaderName:"getInitialProps"}))];case 3:return[2,V.apply(void 0,a.concat([s.sent()]))]}})},new(a||(a=Promise))(function(e,t){function n(e){try{u(s.next(e))}catch(e){t(e)}}function i(e){try{u(s.throw(e))}catch(e){t(e)}}function u(t){var r;t.done?e(t.value):((r=t.value)instanceof a?r:new a(function(e){e(r)})).then(n,i)}u((s=s.apply(r,o||[])).next())})}),i}(function(e){let{Component:t,pageProps:n}=e,[r,i]=(0,k.useState)(!1);return(0,k.useEffect)(()=>{i(!0)},[]),(0,I.jsx)("div",{className:T().className,children:(0,I.jsx)(K.B,{children:(0,I.jsxs)(G.u,{children:[(0,I.jsxs)(es.eM,{config:eg,children:[(0,I.jsx)(eh.y,{baseColor:"#343440",highlightColor:"#ffb119",width:"50px",inline:!0,children:(0,I.jsx)(t,{...n})}),r&&(0,I.jsx)(el.x7,{toastOptions:{style:{border:"1px solid #343440",padding:"16px",fontSize:"16px",background:"#0c0c1d",color:"#fff",gap:"5px",maxWidth:"600px"}}}),(0,I.jsx)("div",{id:"modal-root"})]}),(0,I.jsx)(ea.Eg,{defaultChain:eu.y,projectId:ed,ethereumClient:ev})]})})})},{...S,isLoader:!0,skipInitialProps:!0,loadLocaleFrom:S&&S.loadLocaleFrom||((e,t)=>n(242)("./".concat(e,"/").concat(t)).then(e=>e.default))})},7133:function(){},5900:function(e){e.exports={style:{fontFamily:"'__Poppins_af3731', '__Poppins_Fallback_af3731'"},className:"__className_af3731"}},5883:function(){},5923:function(e,t,n){"use strict";function r(e){if(!Number.isSafeInteger(e)||e<0)throw Error(`Wrong positive integer: ${e}`)}function i(e,...t){if(!(e instanceof Uint8Array))throw Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function o(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}n.d(t,{fr:function(){return P}});let a=BigInt(4294967296-1),s=BigInt(32),u=(e,t,n)=>e<<n|t>>>32-n,c=(e,t,n)=>t<<n|e>>>32-n,l=(e,t,n)=>t<<n-32|e>>>64-n,h=(e,t,n)=>e<<n-32|t>>>64-n,f=e=>e instanceof Uint8Array,d=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw Error("Non little-endian hardware is not supported");function p(e){if("string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}(e)),!f(e))throw Error(`expected Uint8Array, got ${typeof e}`);return e}class g{clone(){return this._cloneInto()}}let[v,y,m]=[[],[],[]],b=BigInt(0),_=BigInt(1),w=BigInt(2),E=BigInt(7),I=BigInt(256),C=BigInt(113);for(let e=0,t=_,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],v.push(2*(5*r+n)),y.push((e+1)*(e+2)/2%64);let i=b;for(let e=0;e<7;e++)(t=(t<<_^(t>>E)*C)%I)&w&&(i^=_<<(_<<BigInt(e))-_);m.push(i)}let[T,S]=function(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){let{h:o,l:u}=function(e,t=!1){return t?{h:Number(e&a),l:Number(e>>s&a)}:{h:0|Number(e>>s&a),l:0|Number(e&a)}}(e[i],t);[n[i],r[i]]=[o,u]}return[n,r]}(m,!0),k=(e,t,n)=>n>32?l(e,t,n):u(e,t,n),D=(e,t,n)=>n>32?h(e,t,n):c(e,t,n);class A extends g{constructor(e,t,n,i=!1,o=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=i,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,r(n),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=d(this.state)}keccak(){!function(e,t=24){let n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let t=0;t<10;t++)n[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let r=(t+8)%10,i=(t+2)%10,o=n[i],a=n[i+1],s=k(o,a,1)^n[r],u=D(o,a,1)^n[r+1];for(let n=0;n<50;n+=10)e[t+n]^=s,e[t+n+1]^=u}let t=e[2],i=e[3];for(let n=0;n<24;n++){let r=y[n],o=k(t,i,r),a=D(t,i,r),s=v[n];t=e[s],i=e[s+1],e[s]=o,e[s+1]=a}for(let t=0;t<50;t+=10){for(let r=0;r<10;r++)n[r]=e[t+r];for(let r=0;r<10;r++)e[t+r]^=~n[(r+2)%10]&n[(r+4)%10]}e[0]^=T[r],e[1]^=S[r]}n.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){o(this);let{blockLen:t,state:n}=this,r=(e=p(e)).length;for(let i=0;i<r;){let o=Math.min(t-this.pos,r-i);for(let t=0;t<o;t++)n[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:n,blockLen:r}=this;e[n]^=t,(128&t)!=0&&n===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){o(this,!1),i(e),this.finish();let t=this.state,{blockLen:n}=this;for(let r=0,i=e.length;r<i;){this.posOut>=n&&this.keccak();let o=Math.min(n-this.posOut,i-r);e.set(t.subarray(this.posOut,this.posOut+o),r),this.posOut+=o,r+=o}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return r(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(!function(e,t){i(e);let n=t.outputLen;if(e.length<n)throw Error(`digestInto() expects output buffer of length at least ${n}`)}(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:n,outputLen:r,rounds:i,enableXOF:o}=this;return e||(e=new A(t,n,r,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=r,e.enableXOF=o,e.destroyed=this.destroyed,e}}let P=function(e){let t=t=>e().update(p(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}(()=>new A(136,1,32))},388:function(e,t,n){"use strict";n.d(t,{_:function(){return f}});var r,i=n(931);function o(e){return"string"==typeof e?Number.parseInt(e,"0x"===e.trim().substring(0,2)?16:10):"bigint"==typeof e?Number(e):e}var a=n(9565),s=n(9656),u=n(9200),c=n(5032),l=n(9854),h=n(5363),f=class extends a.wR{constructor({chains:e,options:t}={}){let n={shimDisconnect:!0,getProvider(){if("undefined"==typeof window)return;let e=window.ethereum;return e?.providers?e.providers[0]:e},...t};super({chains:e,options:n}),this.id="injected",(0,a.Ko)(this,r,void 0),this.shimDisconnectKey=`${this.id}.shimDisconnect`,this.onAccountsChanged=e=>{0===e.length?this.emit("disconnect"):this.emit("change",{account:(0,s.K)(e[0])})},this.onChainChanged=e=>{let t=o(e),n=this.isChainUnsupported(t);this.emit("change",{chain:{id:t,unsupported:n}})},this.onDisconnect=async e=>{!(1013===e.code&&await this.getProvider()&&await this.getAccount())&&(this.emit("disconnect"),this.options.shimDisconnect&&this.storage?.removeItem(this.shimDisconnectKey))};let i=n.getProvider();if("string"==typeof n.name)this.name=n.name;else if(i){let e=function(e){if(!e)return"Injected";let t=e=>e.isApexWallet?"Apex Wallet":e.isAvalanche?"Core Wallet":e.isBackpack?"Backpack":e.isBifrost?"Bifrost Wallet":e.isBitKeep?"BitKeep":e.isBitski?"Bitski":e.isBlockWallet?"BlockWallet":e.isBraveWallet?"Brave Wallet":e.isCoin98?"Coin98 Wallet":e.isCoinbaseWallet?"Coinbase Wallet":e.isDawn?"Dawn Wallet":e.isDefiant?"Defiant":e.isDesig?"Desig Wallet":e.isEnkrypt?"Enkrypt":e.isExodus?"Exodus":e.isFordefi?"Fordefi":e.isFrame?"Frame":e.isFrontier?"Frontier Wallet":e.isGamestop?"GameStop Wallet":e.isHaqqWallet?"HAQQ Wallet":e.isHyperPay?"HyperPay Wallet":e.isImToken?"ImToken":e.isHaloWallet?"Halo Wallet":e.isKuCoinWallet?"KuCoin Wallet":e.isMathWallet?"MathWallet":e.isNovaWallet?"Nova Wallet":e.isOkxWallet||e.isOKExWallet?"OKX Wallet":e.isOneInchIOSWallet||e.isOneInchAndroidWallet?"1inch Wallet":e.isOpera?"Opera":e.isPhantom?"Phantom":e.isPortal?"Ripio Portal":e.isRabby?"Rabby Wallet":e.isRainbow?"Rainbow":e.isStatus?"Status":e.isSubWallet?"SubWallet":e.isTalisman?"Talisman":e.isTally?"Taho":e.isTokenPocket?"TokenPocket":e.isTokenary?"Tokenary":e.isTrust||e.isTrustWallet?"Trust Wallet":e.isTTWallet?"TTWallet":e.isXDEFI?"XDEFI Wallet":e.isZeal?"Zeal":e.isZerion?"Zerion":e.isMetaMask?"MetaMask":void 0;if(e.providers?.length){let n=new Set,r=1;for(let i of e.providers){let e=t(i);e||(e=`Unknown Wallet #${r}`,r+=1),n.add(e)}let i=[...n];return i.length?i:i[0]??"Injected"}return t(e)??"Injected"}(i);n.name?this.name=n.name(e):"string"==typeof e?this.name=e:this.name=e[0]}else this.name="Injected";this.ready=!!i}async connect({chainId:e}={}){try{let t=await this.getProvider();if(!t)throw new i.N;t.on&&(t.on("accountsChanged",this.onAccountsChanged),t.on("chainChanged",this.onChainChanged),t.on("disconnect",this.onDisconnect)),this.emit("message",{type:"connecting"});let n=await t.request({method:"eth_requestAccounts"}),r=(0,s.K)(n[0]),o=await this.getChainId(),a=this.isChainUnsupported(o);return e&&o!==e&&(o=(await this.switchChain(e)).id,a=this.isChainUnsupported(o)),this.options.shimDisconnect&&this.storage?.setItem(this.shimDisconnectKey,!0),{account:r,chain:{id:o,unsupported:a}}}catch(e){if(this.isUserRejectedRequestError(e))throw new u.ab(e);if(-32002===e.code)throw new u.pT(e);throw e}}async disconnect(){let e=await this.getProvider();e?.removeListener&&(e.removeListener("accountsChanged",this.onAccountsChanged),e.removeListener("chainChanged",this.onChainChanged),e.removeListener("disconnect",this.onDisconnect),this.options.shimDisconnect&&this.storage?.removeItem(this.shimDisconnectKey))}async getAccount(){let e=await this.getProvider();if(!e)throw new i.N;let t=await e.request({method:"eth_accounts"});return(0,s.K)(t[0])}async getChainId(){let e=await this.getProvider();if(!e)throw new i.N;return e.request({method:"eth_chainId"}).then(o)}async getProvider(){let e=this.options.getProvider();return e&&(0,a.qx)(this,r,e),(0,a.ac)(this,r)}async getWalletClient({chainId:e}={}){let[t,n]=await Promise.all([this.getProvider(),this.getAccount()]),r=this.chains.find(t=>t.id===e);if(!t)throw Error("provider is required.");return(0,c.K)({account:n,chain:r,transport:(0,l.P)(t)})}async isAuthorized(){try{if(this.options.shimDisconnect&&!this.storage?.getItem(this.shimDisconnectKey))return!1;if(!await this.getProvider())throw new i.N;return!!await this.getAccount()}catch{return!1}}async switchChain(e){let t=await this.getProvider();if(!t)throw new i.N;let n=(0,h.eC)(e);try{return await Promise.all([t.request({method:"wallet_switchEthereumChain",params:[{chainId:n}]}),new Promise(t=>this.on("change",({chain:n})=>{n?.id===e&&t()}))]),this.chains.find(t=>t.id===e)??{id:e,name:`Chain ${n}`,network:`${n}`,nativeCurrency:{name:"Ether",decimals:18,symbol:"ETH"},rpcUrls:{default:{http:[""]},public:{http:[""]}}}}catch(o){let r=this.chains.find(t=>t.id===e);if(!r)throw new i.B({chainId:e,connectorId:this.id});if(4902===o.code||o?.data?.originalError?.code===4902)try{if(await t.request({method:"wallet_addEthereumChain",params:[{chainId:n,chainName:r.name,nativeCurrency:r.nativeCurrency,rpcUrls:[r.rpcUrls.public?.http[0]??""],blockExplorerUrls:this.getBlockExplorerUrls(r)}]}),await this.getChainId()!==e)throw new u.ab(Error("User rejected switch after adding network."));return r}catch(e){throw new u.ab(e)}if(this.isUserRejectedRequestError(o))throw new u.ab(o);throw new u.x3(o)}}async watchAsset({address:e,decimals:t=18,image:n,symbol:r}){let o=await this.getProvider();if(!o)throw new i.N;return o.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:e,decimals:t,image:n,symbol:r}}})}isUserRejectedRequestError(e){return 4001===e.code}};r=new WeakMap},931:function(e,t,n){"use strict";n.d(t,{B:function(){return r},N:function(){return i}});var r=class extends Error{constructor({chainId:e,connectorId:t}){super(`Chain "${e}" not configured for connector "${t}".`),this.name="ChainNotConfiguredForConnectorError"}},i=class extends Error{constructor(){super(...arguments),this.name="ConnectorNotFoundError",this.message="Connector not found"}}},9565:function(e,t,n){"use strict";n.d(t,{wR:function(){return f},Ko:function(){return c},ac:function(){return u},U9:function(){return h},qx:function(){return l}});var r=n(2903),i=n(5994);let o=(0,i.ax)({id:1,network:"homestead",name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{alchemy:{http:["https://eth-mainnet.g.alchemy.com/v2"],webSocket:["wss://eth-mainnet.g.alchemy.com/v2"]},infura:{http:["https://mainnet.infura.io/v3"],webSocket:["wss://mainnet.infura.io/ws/v3"]},default:{http:["https://cloudflare-eth.com"]},public:{http:["https://cloudflare-eth.com"]}},blockExplorers:{etherscan:{name:"Etherscan",url:"https://etherscan.io"},default:{name:"Etherscan",url:"https://etherscan.io"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xc0497E381f536Be9ce14B0dD3817cBcAe57d2F62",blockCreated:16966585},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}}),a=(0,i.ax)({id:5,network:"goerli",name:"Goerli",nativeCurrency:{name:"Goerli Ether",symbol:"ETH",decimals:18},rpcUrls:{alchemy:{http:["https://eth-goerli.g.alchemy.com/v2"],webSocket:["wss://eth-goerli.g.alchemy.com/v2"]},infura:{http:["https://goerli.infura.io/v3"],webSocket:["wss://goerli.infura.io/ws/v3"]},default:{http:["https://rpc.ankr.com/eth_goerli"]},public:{http:["https://rpc.ankr.com/eth_goerli"]}},blockExplorers:{etherscan:{name:"Etherscan",url:"https://goerli.etherscan.io"},default:{name:"Etherscan",url:"https://goerli.etherscan.io"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0x56522D00C410a43BFfDF00a9A569489297385790",blockCreated:8765204},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:6507670}},testnet:!0});var s=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},u=(e,t,n)=>(s(e,t,"read from private field"),n?n.call(e):t.get(e)),c=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},l=(e,t,n,r)=>(s(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),h=(e,t,n)=>(s(e,t,"access private method"),n),f=class extends r{constructor({chains:e=[o,a],options:t}){super(),this.chains=e,this.options=t}getBlockExplorerUrls(e){let{default:t,...n}=e.blockExplorers??{};if(t)return[t.url,...Object.values(n).map(e=>e.url)]}isChainUnsupported(e){return!this.chains.some(t=>t.id===e)}setStorage(e){this.storage=e}}},8367:function(e,t,n){"use strict";n.d(t,{QB:function(){return tF},$j:function(){return t1},_g:function(){return tZ},o6:function(){return tY},vZ:function(){return function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){let r,i;if(t.constructor!==n.constructor)return!1;if(Array.isArray(t)&&Array.isArray(n)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();let o=Object.keys(t);if((r=o.length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){let r=o[i];if(r&&!e(t[r],n[r]))return!1}return!0}return t!=t&&n!=n}},zP:function(){return t2},em:function(){return t3},EG:function(){return nr},w6:function(){return nc},Lk:function(){return nl},D0:function(){return ni},Hy:function(){return no},wp:function(){return tQ},a4:function(){return t7},If:function(){return na},Mn:function(){return nh},uH:function(){return ns},Y$:function(){return nt},QC:function(){return nu},n9:function(){return nn}});var r,i,o,a,s,u=n(388),c=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},l=(e,t,n)=>(c(e,t,"read from private field"),n?n.call(e):t.get(e)),h=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},f=(e,t,n,r)=>(c(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),d=(e,t,n)=>(c(e,t,"access private method"),n),p=n(6669),g=n(6098),v=n(2794),y=n(2739),m=n(5994),b=n(9836),_=n(5363),w=n(3300),E=n(8627),I=n(2123);function C(e,t){if(!(e instanceof E.G))return!1;let n=e.walk(e=>e instanceof I.Lu);return n instanceof I.Lu&&(!!(n.data?.errorName==="ResolverNotFound"||n.data?.errorName==="ResolverWildcardNotSupported"||n.reason?.includes("Wildcard on non-extended resolvers is not supported"))||"reverse"===t&&n.reason===w.$[50])}var T=n(9933),S=n(9163),k=n(6084),D=n(2754);function A(e){if(66!==e.length||0!==e.indexOf("[")||65!==e.indexOf("]"))return null;let t=`0x${e.slice(1,65)}`;return(0,D.v)(t)?t:null}function P(e){let t=new Uint8Array(32).fill(0);if(!e)return(0,_.ci)(t);let n=e.split(".");for(let e=n.length-1;e>=0;e-=1){let r=A(n[e]),i=r?(0,S.O0)(r):(0,k.w)((0,S.qX)(n[e]),"bytes");t=(0,k.w)((0,T.zo)([t,i]),"bytes")}return(0,_.ci)(t)}function N(e){let t=e.replace(/^\.|\.$/gm,"");if(0===t.length)return new Uint8Array(1);let n=new Uint8Array((0,S.qX)(t).byteLength+2),r=0,i=t.split(".");for(let e=0;e<i.length;e++){let t=(0,S.qX)(i[e]);if(t.byteLength>255){var o;t=(0,S.qX)((o=function(e){let t=new Uint8Array(32).fill(0);return e?A(e)||(0,k.w)((0,S.qX)(e)):(0,_.ci)(t)}(i[e]),`[${o.slice(2)}]`))}n[r]=t.length,n.set(t,r+1),r+=t.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}var x=n(5530),O=n(9200);function R(e,{abi:t,address:n,args:r,docsPath:i,functionName:o,sender:a}){let{code:s,data:u,message:c,shortMessage:l}=e instanceof I.VQ?e:e instanceof E.G?e.walk(e=>"data"in e)||e.walk():{},h=e instanceof x.wb?new I.Dk({functionName:o}):[3,O.XS.code].includes(s)&&(u||c||l)?new I.Lu({abi:t,data:"object"==typeof u?u.data:u,functionName:o,message:l??c}):e;return new I.uq(h,{abi:t,args:r,contractAddress:n,docsPath:i,functionName:o,sender:a})}var M=n(8145);async function L(e,{abi:t,address:n,args:r,functionName:i,...o}){let a=(0,y.R)({abi:t,args:r,functionName:i});try{let{data:s}=await (0,M.R)(e,{data:a,to:n,...o});return(0,v.k)({abi:t,args:r,functionName:i,data:s||"0x"})}catch(e){throw R(e,{abi:t,address:n,args:r,docsPath:"/docs/contract/readContract",functionName:i})}}async function F(e,{blockNumber:t,blockTag:n,coinType:r,name:i,universalResolverAddress:o}){let a=o;if(!a){if(!e.chain)throw Error("client chain not configured. universalResolverAddress is required.");a=(0,m.LI)({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}try{let o=(0,y.R)({abi:g.X$,functionName:"addr",...null!=r?{args:[P(i),BigInt(r)]}:{args:[P(i)]}}),s=await L(e,{address:a,abi:g.k3,functionName:"resolve",args:[(0,_.NC)(N(i)),o],blockNumber:t,blockTag:n});if("0x"===s[0])return null;let u=(0,v.k)({abi:g.X$,args:null!=r?[P(i),BigInt(r)]:void 0,functionName:"addr",data:s[0]});if("0x"===u||"0x00"===(0,b.f)(u))return null;return u}catch(e){if(C(e,"resolve"))return null;throw e}}class j extends E.G{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarInvalidMetadataError"})}}class U extends E.G{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarInvalidNftUriError"})}}class q extends E.G{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarUriResolutionError"})}}class B extends E.G{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarUnsupportedNamespaceError"})}}let V=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,W=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,K=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,G=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function z(e){try{let t=await fetch(e,{method:"HEAD"});if(200===t.status){let e=t.headers.get("content-type");return e?.startsWith("image/")}return!1}catch(t){if("object"==typeof t&&void 0!==t.response||!globalThis.hasOwnProperty("Image"))return!1;return new Promise(t=>{let n=new Image;n.onload=()=>{t(!0)},n.onerror=()=>{t(!1)},n.src=e})}}function H(e,t){return e?e.endsWith("/")?e.slice(0,-1):e:t}function $({uri:e,gatewayUrls:t}){let n=K.test(e);if(n)return{uri:e,isOnChain:!0,isEncoded:n};let r=H(t?.ipfs,"https://ipfs.io"),i=H(t?.arweave,"https://arweave.net"),o=e.match(V),{protocol:a,subpath:s,target:u,subtarget:c=""}=o?.groups||{},l="ipns:/"===a||"ipns/"===s,h="ipfs:/"===a||"ipfs/"===s||W.test(e);if(e.startsWith("http")&&!l&&!h){let n=e;return t?.arweave&&(n=e.replace(/https:\/\/arweave.net/g,t?.arweave)),{uri:n,isOnChain:!1,isEncoded:!1}}if((l||h)&&u)return{uri:`${r}/${l?"ipns":"ipfs"}/${u}${c}`,isOnChain:!1,isEncoded:!1};if("ar:/"===a&&u)return{uri:`${i}/${u}${c||""}`,isOnChain:!1,isEncoded:!1};let f=e.replace(G,"");if(f.startsWith("<svg")&&(f=`data:image/svg+xml;base64,${btoa(f)}`),f.startsWith("data:")||f.startsWith("{"))return{uri:f,isOnChain:!0,isEncoded:!1};throw new q({uri:e})}function Q(e){if("object"!=typeof e||!("image"in e)&&!("image_url"in e)&&!("image_data"in e))throw new j({data:e});return e.image||e.image_url||e.image_data}async function Y({gatewayUrls:e,uri:t}){try{let n=await fetch(t).then(e=>e.json());return await X({gatewayUrls:e,uri:Q(n)})}catch{throw new q({uri:t})}}async function X({gatewayUrls:e,uri:t}){let{uri:n,isOnChain:r}=$({uri:t,gatewayUrls:e});if(r||await z(n))return n;throw new q({uri:t})}async function J(e,{nft:t}){if("erc721"===t.namespace)return L(e,{address:t.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(t.tokenID)]});if("erc1155"===t.namespace)return L(e,{address:t.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(t.tokenID)]});throw new B({namespace:t.namespace})}async function Z(e,{gatewayUrls:t,record:n}){return/eip155:/i.test(n)?ee(e,{gatewayUrls:t,record:n}):X({uri:n,gatewayUrls:t})}async function ee(e,{gatewayUrls:t,record:n}){let r=function(e){let t=e;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));let[n,r,i]=t.split("/"),[o,a]=n.split(":"),[s,u]=r.split(":");if(!o||"eip155"!==o.toLowerCase())throw new U({reason:"Only EIP-155 supported"});if(!a)throw new U({reason:"Chain ID not found"});if(!u)throw new U({reason:"Contract address not found"});if(!i)throw new U({reason:"Token ID not found"});if(!s)throw new U({reason:"ERC namespace not found"});return{chainID:parseInt(a),namespace:s.toLowerCase(),contractAddress:u,tokenID:i}}(n),{uri:i,isOnChain:o,isEncoded:a}=$({uri:await J(e,{nft:r}),gatewayUrls:t});if(o&&(i.includes("data:application/json;base64,")||i.startsWith("{")))return X({uri:Q(JSON.parse(a?atob(i.replace("data:application/json;base64,","")):i)),gatewayUrls:t});let s=r.tokenID;return"erc1155"===r.namespace&&(s=s.replace("0x","").padStart(64,"0")),Y({gatewayUrls:t,uri:i.replace(/(?:0x)?{id}/,s)})}async function et(e,{blockNumber:t,blockTag:n,name:r,key:i,universalResolverAddress:o}){let a=o;if(!a){if(!e.chain)throw Error("client chain not configured. universalResolverAddress is required.");a=(0,m.LI)({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}try{let o=await L(e,{address:a,abi:g.k3,functionName:"resolve",args:[(0,_.NC)(N(r)),(0,y.R)({abi:g.nZ,functionName:"text",args:[P(r),i]})],blockNumber:t,blockTag:n});if("0x"===o[0])return null;let s=(0,v.k)({abi:g.nZ,functionName:"text",data:o[0]});return""===s?null:s}catch(e){if(C(e,"resolve"))return null;throw e}}async function en(e,{blockNumber:t,blockTag:n,gatewayUrls:r,name:i,universalResolverAddress:o}){let a=await et(e,{blockNumber:t,blockTag:n,key:"avatar",name:i,universalResolverAddress:o});if(!a)return null;try{return await Z(e,{record:a,gatewayUrls:r})}catch{return null}}async function er(e,{address:t,blockNumber:n,blockTag:r,universalResolverAddress:i}){let o=i;if(!o){if(!e.chain)throw Error("client chain not configured. universalResolverAddress is required.");o=(0,m.LI)({blockNumber:n,chain:e.chain,contract:"ensUniversalResolver"})}let a=`${t.toLowerCase().substring(2)}.addr.reverse`;try{return(await L(e,{address:o,abi:g.du,functionName:"reverse",args:[(0,_.NC)(N(a))],blockNumber:n,blockTag:r}))[0]}catch(e){if(C(e,"reverse"))return null;throw e}}async function ei(e,{blockNumber:t,blockTag:n,name:r,universalResolverAddress:i}){let o=i;if(!o){if(!e.chain)throw Error("client chain not configured. universalResolverAddress is required.");o=(0,m.LI)({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}let[a]=await L(e,{address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[(0,_.NC)(N(r))],blockNumber:t,blockTag:n});return a}function eo(e,{method:t}){let n={};return"fallback"===e.transport.type&&e.transport.onResponse?.(({method:e,response:r,status:i,transport:o})=>{"success"===i&&t===e&&(n[r]=o.request)}),t=>n[t]||e.request}async function ea(e){let t=eo(e,{method:"eth_newBlockFilter"}),n=await e.request({method:"eth_newBlockFilter"});return{id:n,request:t(n),type:"block"}}class es extends E.G{constructor(e){super(`Filter type "${e}" is not supported.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FilterTypeNotSupportedError"})}}var eu=n(2662),ec=n(4541),el=n(9416),eh=n(5961);function ef({abi:e,eventName:t,args:n}){let r=e[0];if(t&&!(r=(0,eh.m)({abi:e,args:n,name:t})))throw new x.mv(t,{docsPath:"/docs/contract/encodeEventTopics"});if("event"!==r.type)throw new x.mv(void 0,{docsPath:"/docs/contract/encodeEventTopics"});let i=(0,el.t)(r),o=(0,eu.e)(i),a=[];if(n&&"inputs"in r){let e=r.inputs?.filter(e=>"indexed"in e&&e.indexed),t=Array.isArray(n)?n:Object.values(n).length>0?e?.map(e=>n[e.name])??[]:[];t.length>0&&(a=e?.map((e,n)=>Array.isArray(t[n])?t[n].map((r,i)=>ed({param:e,value:t[n][i]})):t[n]?ed({param:e,value:t[n]}):null)??[])}return[o,...a]}function ed({param:e,value:t}){if("string"===e.type||"bytes"===e.type)return(0,k.w)((0,S.O0)(t));if("tuple"===e.type||e.type.match(/^(.*)\[(\d+)?\]$/))throw new es(e.type);return(0,ec.E)([e],[t])}async function ep(e,{address:t,abi:n,args:r,eventName:i,fromBlock:o,strict:a,toBlock:s}){let u=eo(e,{method:"eth_newFilter"}),c=i?ef({abi:n,args:r,eventName:i}):void 0,l=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:"bigint"==typeof o?(0,_.eC)(o):o,toBlock:"bigint"==typeof s?(0,_.eC)(s):s,topics:c}]});return{abi:n,args:r,eventName:i,id:l,request:u(l),strict:a,type:"event"}}async function eg(e,{address:t,args:n,event:r,events:i,fromBlock:o,strict:a,toBlock:s}={}){let u=i??(r?[r]:void 0),c=eo(e,{method:"eth_newFilter"}),l=[];u&&(l=[u.flatMap(e=>ef({abi:[e],eventName:e.name,args:n}))],r&&(l=l[0]));let h=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:"bigint"==typeof o?(0,_.eC)(o):o,toBlock:"bigint"==typeof s?(0,_.eC)(s):s,...l.length?{topics:l}:{}}]});return{abi:u,args:n,eventName:r?r.name:void 0,fromBlock:o,id:h,request:c(h),strict:a,toBlock:s,type:"event"}}async function ev(e){let t=eo(e,{method:"eth_newPendingTransactionFilter"}),n=await e.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:t(n),type:"transaction"}}var ey=n(6297),em=n(8014);async function eb(e,{abi:t,address:n,args:r,functionName:i,...o}){let a=(0,y.R)({abi:t,args:r,functionName:i});try{return await (0,em.Q)(e,{data:a,to:n,...o})}catch(a){let e=o.account?(0,ey.T)(o.account):void 0;throw R(a,{abi:t,address:n,args:r,docsPath:"/docs/contract/estimateContractGas",functionName:i,sender:e?.address})}}var e_=n(1572),ew=n(9578);async function eE(e,{address:t,blockNumber:n,blockTag:r="latest"}){let i=n?(0,_.eC)(n):void 0;return BigInt(await e.request({method:"eth_getBalance",params:[t,i||r]}))}var eI=n(1818);let eC=new Map,eT=new Map;async function eS(e,{cacheKey:t,cacheTime:n=1/0}){let r=function(e){let t=(e,t)=>({clear:()=>t.delete(e),get:()=>t.get(e),set:n=>t.set(e,n)}),n=t(e,eC),r=t(e,eT);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}(t),i=r.response.get();if(i&&n>0&&new Date().getTime()-i.created.getTime()<n)return i.data;let o=r.promise.get();o||(o=e(),r.promise.set(o));try{let e=await o;return r.response.set({created:new Date,data:e}),e}finally{r.promise.clear()}}let ek=e=>`blockNumber.${e}`;async function eD(e,{cacheTime:t=e.cacheTime,maxAge:n}={}){return BigInt(await eS(()=>e.request({method:"eth_blockNumber"}),{cacheKey:ek(e.uid),cacheTime:n??t}))}var eA=n(2436);async function eP(e,{blockHash:t,blockNumber:n,blockTag:r="latest"}={}){let i;let o=void 0!==n?(0,_.eC)(n):void 0;return i=t?await e.request({method:"eth_getBlockTransactionCountByHash",params:[t]}):await e.request({method:"eth_getBlockTransactionCountByNumber",params:[o||r]}),(0,eA.ly)(i)}async function eN(e,{address:t,blockNumber:n,blockTag:r="latest"}){let i=void 0!==n?(0,_.eC)(n):void 0,o=await e.request({method:"eth_getCode",params:[t,i||r]});if("0x"!==o)return o}var ex=n(8546),eO=n(6687);let eR="/docs/contract/decodeEventLog";function eM({abi:e,data:t,strict:n,topics:r}){let i=n??!0,[o,...a]=r;if(!o)throw new x.FM({docsPath:eR});let s=e.find(e=>"event"===e.type&&o===(0,eu.e)((0,el.t)(e)));if(!(s&&"name"in s)||"event"!==s.type)throw new x.lC(o,{docsPath:eR});let{name:u,inputs:c}=s,l=c?.some(e=>!("name"in e&&e.name)),h=l?[]:{},f=c.filter(e=>"indexed"in e&&e.indexed);for(let e=0;e<f.length;e++){let t=f[e],n=a[e];if(!n)throw new x.Gy({abiItem:s,param:t});h[t.name||e]=function({param:e,value:t}){return"string"===e.type||"bytes"===e.type||"tuple"===e.type||e.type.match(/^(.*)\[(\d+)?\]$/)?t:((0,eO.r)([e],t)||[])[0]}({param:t,value:n})}let d=c.filter(e=>!("indexed"in e&&e.indexed));if(d.length>0){if(t&&"0x"!==t)try{let e=(0,eO.r)(d,t);if(e){if(l)h=[...h,...e];else for(let t=0;t<d.length;t++)h[d[t].name]=e[t]}}catch(e){if(i){if(e instanceof x.xB)throw new x.SM({abiItem:s,data:e.data,params:e.params,size:e.size});throw e}}else if(i)throw new x.SM({abiItem:s,data:"0x",params:d,size:0})}return{eventName:u,args:Object.values(h).length>0?h:void 0}}function eL(e,{args:t,eventName:n}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...n?{args:t,eventName:n}:{}}}async function eF(e,{address:t,blockHash:n,fromBlock:r,toBlock:i,event:o,events:a,args:s,strict:u}={}){let c=u??!1,l=a??(o?[o]:void 0),h=[];return l&&(h=[l.flatMap(e=>ef({abi:[e],eventName:e.name,args:s}))],o&&(h=h[0])),(n?await e.request({method:"eth_getLogs",params:[{address:t,topics:h,blockHash:n}]}):await e.request({method:"eth_getLogs",params:[{address:t,topics:h,fromBlock:"bigint"==typeof r?(0,_.eC)(r):r,toBlock:"bigint"==typeof i?(0,_.eC)(i):i}]})).map(e=>{try{let{eventName:t,args:n}=l?eM({abi:l,data:e.data,topics:e.topics,strict:c}):{eventName:void 0,args:void 0};return eL(e,{args:n,eventName:t})}catch(r){let t,n;if(r instanceof x.SM||r instanceof x.Gy){if(c)return;t=r.abiItem.name,n=r.abiItem.inputs?.some(e=>!("name"in e&&e.name))}return eL(e,{args:n?[]:{},eventName:t})}}).filter(Boolean)}async function ej(e,{abi:t,address:n,args:r,blockHash:i,eventName:o,fromBlock:a,toBlock:s,strict:u}){let c=o?(0,eh.m)({abi:t,name:o}):void 0,l=c?void 0:t.filter(e=>"event"===e.type);return eF(e,{address:n,args:r,blockHash:i,event:c,events:l,fromBlock:a,toBlock:s,strict:u})}async function eU(e,{blockCount:t,blockNumber:n,blockTag:r="latest",rewardPercentiles:i}){var o;let a=n?(0,_.eC)(n):void 0;return{baseFeePerGas:(o=await e.request({method:"eth_feeHistory",params:[(0,_.eC)(t),a||r,i]})).baseFeePerGas.map(e=>BigInt(e)),gasUsedRatio:o.gasUsedRatio,oldestBlock:BigInt(o.oldestBlock),reward:o.reward?.map(e=>e.map(e=>BigInt(e)))}}async function eq(e,{filter:t}){let n="strict"in t&&t.strict;return(await t.request({method:"eth_getFilterChanges",params:[t.id]})).map(e=>{if("string"==typeof e)return e;try{let{eventName:r,args:i}="abi"in t&&t.abi?eM({abi:t.abi,data:e.data,topics:e.topics,strict:n}):{eventName:void 0,args:void 0};return eL(e,{args:i,eventName:r})}catch(i){let n,r;if(i instanceof x.SM||i instanceof x.Gy){if("strict"in t&&t.strict)return;n=i.abiItem.name,r=i.abiItem.inputs?.some(e=>!("name"in e&&e.name))}return eL(e,{args:r?[]:{},eventName:n})}}).filter(Boolean)}async function eB(e,{filter:t}){let n=t.strict??!1;return(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map(e=>{try{let{eventName:r,args:i}="abi"in t&&t.abi?eM({abi:t.abi,data:e.data,topics:e.topics,strict:n}):{eventName:void 0,args:void 0};return eL(e,{args:i,eventName:r})}catch(i){let n,r;if(i instanceof x.SM||i instanceof x.Gy){if("strict"in t&&t.strict)return;n=i.abiItem.name,r=i.abiItem.inputs?.some(e=>!("name"in e&&e.name))}return eL(e,{args:r?[]:{},eventName:n})}}).filter(Boolean)}var eV=n(7344);async function eW(e,{address:t,blockNumber:n,blockTag:r,storageKeys:i}){var o;let a=void 0!==n?(0,_.eC)(n):void 0;return{...o=await e.request({method:"eth_getProof",params:[t,i,a||(r??"latest")]}),balance:o.balance?BigInt(o.balance):void 0,nonce:o.nonce?(0,eA.ly)(o.nonce):void 0,storageProof:o.storageProof?o.storageProof.map(e=>({...e,value:BigInt(e.value)})):void 0}}async function eK(e,{address:t,blockNumber:n,blockTag:r="latest",slot:i}){let o=void 0!==n?(0,_.eC)(n):void 0;return await e.request({method:"eth_getStorageAt",params:[t,i,o||r]})}var eG=n(5639),ez=n(7517);async function eH(e,{blockHash:t,blockNumber:n,blockTag:r,hash:i,index:o}){let a=r||"latest",s=void 0!==n?(0,_.eC)(n):void 0,u=null;if(i?u=await e.request({method:"eth_getTransactionByHash",params:[i]}):t?u=await e.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,(0,_.eC)(o)]}):(s||a)&&(u=await e.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[s||a,(0,_.eC)(o)]})),!u)throw new eG.Bh({blockHash:t,blockNumber:n,blockTag:a,hash:i,index:o});return(e.chain?.formatters?.transaction?.format||ez.Tr)(u)}async function e$(e,{hash:t,transactionReceipt:n}){let[r,i]=await Promise.all([eD(e),t?eH(e,{hash:t}):void 0]),o=n?.blockNumber||i?.blockNumber;return o?r-o+1n:0n}var eQ=n(5124);let eY={"0x0":"reverted","0x1":"success"};async function eX(e,{hash:t}){let n=await e.request({method:"eth_getTransactionReceipt",params:[t]});if(!n)throw new eG.Yb({hash:t});return(e.chain?.formatters?.transactionReceipt?.format||function(e){return{...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map(e=>eL(e)):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?(0,eA.ly)(e.transactionIndex):null,status:e.status?eY[e.status]:null,type:e.type?ez.c8[e.type]||e.type:null}})(n)}async function eJ(e,t){let{allowFailure:n=!0,batchSize:r,blockNumber:i,blockTag:o,contracts:a,multicallAddress:s}=t,u=r??("object"==typeof e.batch?.multicall&&e.batch.multicall.batchSize||1024),c=s;if(!c){if(!e.chain)throw Error("client chain not configured. multicallAddress is required.");c=(0,m.LI)({blockNumber:i,chain:e.chain,contract:"multicall3"})}let l=[[]],h=0,f=0;for(let e=0;e<a.length;e++){let{abi:t,address:r,args:i,functionName:o}=a[e];try{let e=(0,y.R)({abi:t,args:i,functionName:o});f+=(e.length-2)/2,u>0&&f>u&&l[h].length>0&&(h++,f=(e.length-2)/2,l[h]=[]),l[h]=[...l[h],{allowFailure:!0,callData:e,target:r}]}catch(a){let e=R(a,{abi:t,address:r,args:i,docsPath:"/docs/contract/multicall",functionName:o});if(!n)throw e;l[h]=[...l[h],{allowFailure:!0,callData:"0x",target:r}]}}let d=await Promise.allSettled(l.map(t=>L(e,{abi:g.F8,address:c,args:[t],blockNumber:i,blockTag:o,functionName:"aggregate3"}))),p=[];for(let e=0;e<d.length;e++){let t=d[e];if("rejected"===t.status){if(!n)throw t.reason;for(let n=0;n<l[e].length;n++)p.push({status:"failure",error:t.reason,result:void 0});continue}let r=t.value;for(let t=0;t<r.length;t++){let{returnData:i,success:o}=r[t],{callData:s}=l[e][t],{abi:u,address:c,functionName:h,args:f}=a[p.length];try{if("0x"===s)throw new x.wb;if(!o)throw new I.VQ({data:i});let e=(0,v.k)({abi:u,args:f,data:i,functionName:h});p.push(n?{result:e,status:"success"}:e)}catch(t){let e=R(t,{abi:u,address:c,args:f,docsPath:"/docs/contract/multicall",functionName:h});if(!n)throw e;p.push({error:e,result:void 0,status:"failure"})}}}if(p.length!==a.length)throw new E.G("multicall results mismatch");return p}async function eZ(e,{abi:t,address:n,args:r,dataSuffix:i,functionName:o,...a}){let s=a.account?(0,ey.T)(a.account):void 0,u=(0,y.R)({abi:t,args:r,functionName:o});try{let{data:s}=await (0,M.R)(e,{batch:!1,data:`${u}${i?i.replace("0x",""):""}`,to:n,...a});return{result:(0,v.k)({abi:t,args:r,functionName:o,data:s||"0x"}),request:{abi:t,address:n,args:r,dataSuffix:i,functionName:o,...a}}}catch(e){throw R(e,{abi:t,address:n,args:r,docsPath:"/docs/contract/simulateContract",functionName:o,sender:s?.address})}}async function e0(e,{filter:t}){return t.request({method:"eth_uninstallFilter",params:[t.id]})}BigInt(0),BigInt(1),BigInt(2);var e1=n(2051);async function e2(e,{address:t,hash:n,signature:r,...i}){let o=(0,D.v)(r)?r:(0,_.NC)(r);try{let{data:r}=await (0,M.R)(e,{data:(0,e1.w)({abi:g.$o,args:[t,n,o],bytecode:"0x60806040523480156200001157600080fd5b50604051620007003803806200070083398101604081905262000034916200056f565b6000620000438484846200004f565b9050806000526001601ff35b600080846001600160a01b0316803b806020016040519081016040528181526000908060200190933c90507f6492649264926492649264926492649264926492649264926492649264926492620000a68462000451565b036200021f57600060608085806020019051810190620000c79190620005ce565b8651929550909350915060000362000192576000836001600160a01b031683604051620000f5919062000643565b6000604051808303816000865af19150503d806000811462000134576040519150601f19603f3d011682016040523d82523d6000602084013e62000139565b606091505b5050905080620001905760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b505b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90620001c4908b90869060040162000661565b602060405180830381865afa158015620001e2573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906200020891906200069d565b6001600160e01b031916149450505050506200044a565b805115620002b157604051630b135d3f60e11b808252906001600160a01b03871690631626ba7e9062000259908890889060040162000661565b602060405180830381865afa15801562000277573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906200029d91906200069d565b6001600160e01b031916149150506200044a565b8251604114620003195760405162461bcd60e51b815260206004820152603a6024820152600080516020620006e083398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e677468000000000000606482015260840162000187565b620003236200046b565b506020830151604080850151855186939260009185919081106200034b576200034b620006c9565b016020015160f81c9050601b81148015906200036b57508060ff16601c14155b15620003cf5760405162461bcd60e51b815260206004820152603b6024820152600080516020620006e083398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c75650000000000606482015260840162000187565b6040805160008152602081018083528a905260ff83169181019190915260608101849052608081018390526001600160a01b038a169060019060a0016020604051602081039080840390855afa1580156200042e573d6000803e3d6000fd5b505050602060405103516001600160a01b031614955050505050505b9392505050565b60006020825110156200046357600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b03811681146200049f57600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b83811015620004d5578181015183820152602001620004bb565b50506000910152565b600082601f830112620004f057600080fd5b81516001600160401b03808211156200050d576200050d620004a2565b604051601f8301601f19908116603f01168101908282118183101715620005385762000538620004a2565b816040528381528660208588010111156200055257600080fd5b62000565846020830160208901620004b8565b9695505050505050565b6000806000606084860312156200058557600080fd5b8351620005928162000489565b6020850151604086015191945092506001600160401b03811115620005b657600080fd5b620005c486828701620004de565b9150509250925092565b600080600060608486031215620005e457600080fd5b8351620005f18162000489565b60208501519093506001600160401b03808211156200060f57600080fd5b6200061d87838801620004de565b935060408601519150808211156200063457600080fd5b50620005c486828701620004de565b6000825162000657818460208701620004b8565b9190910192915050565b828152604060208201526000825180604084015262000688816060850160208701620004b8565b601f01601f1916919091016060019392505050565b600060208284031215620006b057600080fd5b81516001600160e01b0319811681146200044a57600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572"}),...i});return function(e,t){let n=(0,D.v)(e)?(0,S.O0)(e):e;return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(n,(0,D.v)(t)?(0,S.O0)(t):t)}(r??"0x0","0x1")}catch(e){if(e instanceof I.cg)return!1;throw e}}async function e3(e,{address:t,message:n,signature:r,...i}){return e2(e,{address:t,hash:function(e,t){let n="string"==typeof e?(0,S.qX)(e):e.raw instanceof Uint8Array?e.raw:(0,S.O0)(e.raw),r=(0,S.qX)(`\x19Ethereum Signed Message:
${n.length}`);return(0,k.w)((0,T.zo)([r,n]),void 0)}(n),signature:r,...i})}var e6=n(9405);function e5({data:e,primaryType:t,types:n}){let r=function e({data:t,primaryType:n,types:r}){let i=[{type:"bytes32"}],o=[function({primaryType:e,types:t}){let n=(0,_.NC)(function({primaryType:e,types:t}){let n="",r=function e({primaryType:t,types:n},r=new Set){let i=t.match(/^\w*/u),o=i?.[0];if(r.has(o)||void 0===n[o])return r;for(let t of(r.add(o),n[o]))e({primaryType:t.type,types:n},r);return r}({primaryType:e,types:t});for(let i of(r.delete(e),[e,...Array.from(r).sort()]))n+=`${i}(${t[i].map(({name:e,type:t})=>`${t} ${e}`).join(",")})`;return n}({primaryType:e,types:t}));return(0,k.w)(n)}({primaryType:n,types:r})];for(let a of r[n]){let[n,s]=function t({types:n,name:r,type:i,value:o}){if(void 0!==n[i])return[{type:"bytes32"},(0,k.w)(e({data:o,primaryType:i,types:n}))];if("bytes"===i){let e=o.length%2?"0":"";return o=`0x${e+o.slice(2)}`,[{type:"bytes32"},(0,k.w)(o)]}if("string"===i)return[{type:"bytes32"},(0,k.w)((0,_.NC)(o))];if(i.lastIndexOf("]")===i.length-1){let e=i.slice(0,i.lastIndexOf("[")),a=o.map(i=>t({name:r,type:e,types:n,value:i}));return[{type:"bytes32"},(0,k.w)((0,ec.E)(a.map(([e])=>e),a.map(([,e])=>e)))]}return[{type:i},o]}({types:r,name:a.name,type:a.type,value:t[a.name]});i.push(n),o.push(s)}return(0,ec.E)(i,o)}({data:e,primaryType:t,types:n});return(0,k.w)(r)}async function e4(e,{address:t,signature:n,message:r,primaryType:i,types:o,domain:a,...s}){return e2(e,{address:t,hash:function({domain:e,message:t,primaryType:n,types:r}){let i=void 0===e?{}:e,o={EIP712Domain:(0,e6.cj)({domain:i}),...r};(0,e6.iC)({domain:i,message:t,primaryType:n,types:o});let a=["0x1901"];return i&&a.push(function({domain:e,types:t}){return e5({data:e,primaryType:"EIP712Domain",types:t})}({domain:i,types:o})),"EIP712Domain"!==n&&a.push(e5({data:t,primaryType:n,types:o})),(0,k.w)((0,T.zo)(a))}({message:r,primaryType:i,types:o,domain:a}),signature:n,...s})}let e8=new Map,e9=new Map,e7=0;function te(e,t,n){let r=++e7,i=()=>e8.get(e)||[],o=()=>{let t=i();e8.set(e,t.filter(e=>e.id!==r))},a=()=>{let t=e9.get(e);1===i().length&&t&&t(),o()},s=i();if(e8.set(e,[...s,{id:r,fns:t}]),s&&s.length>0)return a;let u={};for(let e in t)u[e]=(...t)=>{let n=i();0!==n.length&&n.forEach(n=>n.fns[e]?.(...t))};let c=n(u);return"function"==typeof c&&e9.set(e,c),a}var tt=n(6485),tn=n(40),tr=n(7609);function ti(e,{emitOnBegin:t,initialWaitTime:n,interval:r}){let i=!0,o=()=>i=!1;return(async()=>{let a;t&&(a=await e({unpoll:o}));let s=await n?.(a)??r;await (0,tr.D)(s);let u=async()=>{i&&(await e({unpoll:o}),await (0,tr.D)(r),u())};u()})(),o}function to(e,{emitOnBegin:t=!1,emitMissed:n=!1,onBlockNumber:r,onError:i,poll:o,pollingInterval:a=e.pollingInterval}){let s,u,c;return(void 0!==o?o:"webSocket"!==e.transport.type)?te((0,tn.P)(["watchBlockNumber",e.uid,t,n,a]),{onBlockNumber:r,onError:i},r=>ti(async()=>{try{let t=await eD(e,{cacheTime:0});if(s){if(t===s)return;if(t-s>1&&n)for(let e=s+1n;e<t;e++)r.onBlockNumber(e,s),s=e}(!s||t>s)&&(r.onBlockNumber(t,s),s=t)}catch(e){r.onError?.(e)}},{emitOnBegin:t,interval:a})):(u=!0,c=()=>u=!1,(async()=>{try{let{unsubscribe:t}=await e.transport.subscribe({params:["newHeads"],onData(e){if(!u)return;let t=(0,eA.y_)(e.result?.number);r(t,s),s=t},onError(e){i?.(e)}});c=t,u||c()}catch(e){i?.(e)}})(),c)}async function ta(e,{confirmations:t=1,hash:n,onReplaced:r,pollingInterval:i=e.pollingInterval,timeout:o}){let a,s,u;let c=(0,tn.P)(["waitForTransactionReceipt",e.uid,n]),l=!1;return new Promise((h,f)=>{o&&setTimeout(()=>f(new eG.mc({hash:n})),o);let d=te(c,{onReplaced:r,resolve:h,reject:f},r=>{let o=to(e,{emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:i,async onBlockNumber(i){if(l)return;let c=i,h=e=>{o(),e(),d()};try{if(u){if(t>1&&(!u.blockNumber||c-u.blockNumber+1n<t))return;h(()=>r.resolve(u));return}if(a||(l=!0,await (0,tt.J)(async()=>{(a=await eH(e,{hash:n})).blockNumber&&(c=a.blockNumber)},{delay:({count:e})=>200*~~(1<<e),retryCount:6}),l=!1),u=await eX(e,{hash:n}),t>1&&(!u.blockNumber||c-u.blockNumber+1n<t))return;h(()=>r.resolve(u))}catch(n){if(a&&(n instanceof eG.Bh||n instanceof eG.Yb))try{s=a;let n=(await (0,eI.Q)(e,{blockNumber:c,includeTransactions:!0})).transactions.find(({from:e,nonce:t})=>e===s.from&&t===s.nonce);if(!n||(u=await eX(e,{hash:n.hash}),t>1&&(!u.blockNumber||c-u.blockNumber+1n<t)))return;let i="replaced";n.to===s.to&&n.value===s.value?i="repriced":n.from===n.to&&0n===n.value&&(i="cancelled"),h(()=>{r.onReplaced?.({reason:i,replacedTransaction:s,transaction:n,transactionReceipt:u}),r.resolve(u)})}catch(e){h(()=>r.reject(e))}else h(()=>r.reject(n))}}})})})}var ts=n(2779),tu=n(8532),tc=n(9367);function tl(e){return{call:t=>(0,M.R)(e,t),createBlockFilter:()=>ea(e),createContractEventFilter:t=>ep(e,t),createEventFilter:t=>eg(e,t),createPendingTransactionFilter:()=>ev(e),estimateContractGas:t=>eb(e,t),estimateGas:t=>(0,em.Q)(e,t),getBalance:t=>eE(e,t),getBlock:t=>(0,eI.Q)(e,t),getBlockNumber:t=>eD(e,t),getBlockTransactionCount:t=>eP(e,t),getBytecode:t=>eN(e,t),getChainId:()=>(0,ex.L)(e),getContractEvents:t=>ej(e,t),getEnsAddress:t=>F(e,t),getEnsAvatar:t=>en(e,t),getEnsName:t=>er(e,t),getEnsResolver:t=>ei(e,t),getEnsText:t=>et(e,t),getFeeHistory:t=>eU(e,t),estimateFeesPerGas:t=>(0,e_.X)(e,t),getFilterChanges:t=>eq(e,t),getFilterLogs:t=>eB(e,t),getGasPrice:()=>(0,eV.o)(e),getLogs:t=>eF(e,t),getProof:t=>eW(e,t),estimateMaxPriorityFeePerGas:t=>(0,ew._)(e,t),getStorageAt:t=>eK(e,t),getTransaction:t=>eH(e,t),getTransactionConfirmations:t=>e$(e,t),getTransactionCount:t=>(0,eQ.K)(e,t),getTransactionReceipt:t=>eX(e,t),multicall:t=>eJ(e,t),prepareTransactionRequest:t=>(0,tu.Z)(e,t),readContract:t=>L(e,t),sendRawTransaction:t=>(0,tc.p)(e,t),simulateContract:t=>eZ(e,t),verifyMessage:t=>e3(e,t),verifyTypedData:t=>e4(e,t),uninstallFilter:t=>e0(e,t),waitForTransactionReceipt:t=>ta(e,t),watchBlocks:t=>(function(e,{blockTag:t="latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:i,onError:o,includeTransactions:a,poll:s,pollingInterval:u=e.pollingInterval}){let c,l,h;let f=void 0!==s?s:"webSocket"!==e.transport.type,d=a??!1;return f?te((0,tn.P)(["watchBlocks",e.uid,n,r,d,u]),{onBlock:i,onError:o},i=>ti(async()=>{try{let r=await (0,eI.Q)(e,{blockTag:t,includeTransactions:d});if(r.number&&c?.number){if(r.number===c.number)return;if(r.number-c.number>1&&n)for(let t=c?.number+1n;t<r.number;t++){let n=await (0,eI.Q)(e,{blockNumber:t,includeTransactions:d});i.onBlock(n,c),c=n}}(!c?.number||"pending"===t&&!r?.number||r.number&&r.number>c.number)&&(i.onBlock(r,c),c=r)}catch(e){i.onError?.(e)}},{emitOnBegin:r,interval:u})):(l=!0,h=()=>l=!1,(async()=>{try{let{unsubscribe:t}=await e.transport.subscribe({params:["newHeads"],onData(t){if(!l)return;let n=(e.chain?.formatters?.block?.format||ts.Z)(t.result);i(n,c),c=n},onError(e){o?.(e)}});h=t,l||h()}catch(e){o?.(e)}})(),h)})(e,t),watchBlockNumber:t=>to(e,t),watchContractEvent:t=>(function(e,{abi:t,address:n,args:r,batch:i=!0,eventName:o,onError:a,onLogs:s,poll:u,pollingInterval:c=e.pollingInterval,strict:l}){let h,f;return(void 0!==u?u:"webSocket"!==e.transport.type)?(()=>{let u=(0,tn.P)(["watchContractEvent",n,r,i,e.uid,o,c]),h=l??!1;return te(u,{onLogs:s,onError:a},a=>{let s,u;let l=!1,f=ti(async()=>{if(!l){try{u=await ep(e,{abi:t,address:n,args:r,eventName:o,strict:h})}catch{}l=!0;return}try{let o;if(u)o=await eq(e,{filter:u});else{let i=await eD(e);o=s&&s!==i?await ej(e,{abi:t,address:n,args:r,fromBlock:s+1n,toBlock:i,strict:h}):[],s=i}if(0===o.length)return;i?a.onLogs(o):o.forEach(e=>a.onLogs([e]))}catch(e){u&&e instanceof O.yR&&(l=!1),a.onError?.(e)}},{emitOnBegin:!0,interval:c});return async()=>{u&&await e0(e,{filter:u}),f()}})})():(h=!0,f=()=>h=!1,(async()=>{try{let i=o?ef({abi:t,eventName:o,args:r}):[],{unsubscribe:u}=await e.transport.subscribe({params:["logs",{address:n,topics:i}],onData(e){if(!h)return;let n=e.result;try{let{eventName:e,args:r}=eM({abi:t,data:n.data,topics:n.topics,strict:l}),i=eL(n,{args:r,eventName:e});s([i])}catch(i){let e,t;if(i instanceof x.SM||i instanceof x.Gy){if(l)return;e=i.abiItem.name,t=i.abiItem.inputs?.some(e=>!("name"in e&&e.name))}let r=eL(n,{args:t?[]:{},eventName:e});s([r])}},onError(e){a?.(e)}});f=u,h||f()}catch(e){a?.(e)}})(),f)})(e,t),watchEvent:t=>(function(e,{address:t,args:n,batch:r=!0,event:i,events:o,onError:a,onLogs:s,poll:u,pollingInterval:c=e.pollingInterval,strict:l}){let h,f;let d=void 0!==u?u:"webSocket"!==e.transport.type,p=l??!1;return d?te((0,tn.P)(["watchEvent",t,n,r,e.uid,i,c]),{onLogs:s,onError:a},a=>{let s,u;let l=!1,h=ti(async()=>{if(!l){try{u=await eg(e,{address:t,args:n,event:i,events:o,strict:p})}catch{}l=!0;return}try{let c;if(u)c=await eq(e,{filter:u});else{let r=await eD(e);c=s&&s!==r?await eF(e,{address:t,args:n,event:i,events:o,fromBlock:s+1n,toBlock:r}):[],s=r}if(0===c.length)return;r?a.onLogs(c):c.forEach(e=>a.onLogs([e]))}catch(e){u&&e instanceof O.yR&&(l=!1),a.onError?.(e)}},{emitOnBegin:!0,interval:c});return async()=>{u&&await e0(e,{filter:u}),h()}}):(h=!0,f=()=>h=!1,(async()=>{try{let r=o??(i?[i]:void 0),u=[];r&&(u=[r.flatMap(e=>ef({abi:[e],eventName:e.name,args:n}))],i&&(u=u[0]));let{unsubscribe:c}=await e.transport.subscribe({params:["logs",{address:t,topics:u}],onData(e){if(!h)return;let t=e.result;try{let{eventName:e,args:n}=eM({abi:r,data:t.data,topics:t.topics,strict:p}),i=eL(t,{args:n,eventName:e});s([i])}catch(i){let e,n;if(i instanceof x.SM||i instanceof x.Gy){if(l)return;e=i.abiItem.name,n=i.abiItem.inputs?.some(e=>!("name"in e&&e.name))}let r=eL(t,{args:n?[]:{},eventName:e});s([r])}},onError(e){a?.(e)}});f=c,h||f()}catch(e){a?.(e)}})(),f)})(e,t),watchPendingTransactions:t=>(function(e,{batch:t=!0,onError:n,onTransactions:r,poll:i,pollingInterval:o=e.pollingInterval}){let a,s;return(void 0!==i?i:"webSocket"!==e.transport.type)?te((0,tn.P)(["watchPendingTransactions",e.uid,t,o]),{onTransactions:r,onError:n},n=>{let r;let i=ti(async()=>{try{if(!r)try{r=await ev(e);return}catch(e){throw i(),e}let o=await eq(e,{filter:r});if(0===o.length)return;t?n.onTransactions(o):o.forEach(e=>n.onTransactions([e]))}catch(e){n.onError?.(e)}},{emitOnBegin:!0,interval:o});return async()=>{r&&await e0(e,{filter:r}),i()}}):(a=!0,s=()=>a=!1,(async()=>{try{let{unsubscribe:t}=await e.transport.subscribe({params:["newPendingTransactions"],onData(e){if(!a)return;let t=e.result;r([t])},onError(e){n?.(e)}});s=t,a||s()}catch(e){n?.(e)}})(),s)})(e,t)}}function th(e){let{key:t="public",name:n="Public Client"}=e;return(0,p.e)({...e,key:t,name:n,type:"publicClient"}).extend(tl)}var tf=n(8803),td=n(5809);function tp(e,t={}){let{key:n="fallback",name:r="Fallback",rank:i=!1,retryCount:o,retryDelay:a}=t;return({chain:t,pollingInterval:s=4e3,timeout:u})=>{let c=e,l=()=>{},h=(0,td.q)({key:n,name:r,async request({method:e,params:n}){let r=async(i=0)=>{let o=c[i]({chain:t,retryCount:0,timeout:u});try{let t=await o.request({method:e,params:n});return l({method:e,params:n,response:t,transport:o,status:"success"}),t}catch(t){if(l({error:t,method:e,params:n,transport:o,status:"error"}),(0,tf.y)(t)||i===c.length-1)throw t;return r(i+1)}};return r()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:e=>l=e,transports:c.map(e=>e({chain:t,retryCount:0}))});if(i){let e="object"==typeof i?i:{};!function({chain:e,interval:t=4e3,onTransports:n,sampleCount:r=10,timeout:i=1e3,transports:o,weights:a={}}){let{stability:s=.7,latency:u=.3}=a,c=[],l=async()=>{let a=await Promise.all(o.map(async t=>{let n,r;let o=t({chain:e,retryCount:0,timeout:i}),a=Date.now();try{await o.request({method:"net_listening"}),r=1}catch{r=0}finally{n=Date.now()}return{latency:n-a,success:r}}));c.push(a),c.length>r&&c.shift();let h=Math.max(...c.map(e=>Math.max(...e.map(({latency:e})=>e))));n(o.map((e,t)=>{let n=c.map(e=>e[t].latency),r=n.reduce((e,t)=>e+t,0)/n.length,i=c.map(e=>e[t].success),o=i.reduce((e,t)=>e+t,0)/i.length;return 0===o?[0,t]:[u*(1-r/h)+s*o,t]}).sort((e,t)=>t[0]-e[0]).map(([,e])=>o[e])),await (0,tr.D)(t),l()};l()}({chain:t,interval:e.interval??s,onTransports:e=>c=e,sampleCount:e.sampleCount,timeout:e.timeout,transports:c,weights:e.weights})}return h}}var tg=n(2109);class tv extends E.G{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro"})}}var ty=n(7951);let tm=function(){if("undefined"!=typeof WebSocket)return WebSocket;if(void 0!==global.WebSocket)return global.WebSocket;if(void 0!==window.WebSocket)return window.WebSocket;if(void 0!==self.WebSocket)return self.WebSocket;throw Error("`WebSocket` is not supported in this environment")}();function tb(e,{errorInstance:t=Error("timed out"),timeout:n,signal:r}){return new Promise((i,o)=>{(async()=>{let a;try{let s=new AbortController;n>0&&(a=setTimeout(()=>{r?s.abort():o(t)},n)),i(await e({signal:s?.signal}))}catch(e){"AbortError"===e.name&&o(t),o(e)}finally{clearTimeout(a)}})()})}let t_=0;async function tw(e,{body:t,fetchOptions:n={},timeout:r=1e4}){let{headers:i,method:o,signal:a}=n;try{let s;let u=await tb(async({signal:s})=>await fetch(e,{...n,body:Array.isArray(t)?(0,tn.P)(t.map(e=>({jsonrpc:"2.0",id:e.id??t_++,...e}))):(0,tn.P)({jsonrpc:"2.0",id:t.id??t_++,...t}),headers:{...i,"Content-Type":"application/json"},method:o||"POST",signal:a||(r>0?s:void 0)}),{errorInstance:new tg.W5({body:t,url:e}),timeout:r,signal:!0});if(s=u.headers.get("Content-Type")?.startsWith("application/json")?await u.json():await u.text(),!u.ok)throw new tg.Gg({body:t,details:(0,tn.P)(s.error)||u.statusText,headers:u.headers,status:u.status,url:e});return s}catch(n){if(n instanceof tg.Gg||n instanceof tg.W5)throw n;throw new tg.Gg({body:t,details:n.message,url:e})}}let tE=new Map;async function tI(e){let t=tE.get(e);if(t)return t;let{schedule:n}=(0,ty.S)({id:e,fn:async()=>{let n=new tm(e),r=new Map,i=new Map,o=({data:e})=>{let t=JSON.parse(e),n="eth_subscription"===t.method,o=n?t.params.subscription:t.id,a=n?i:r,s=a.get(o);s&&s({data:e}),n||a.delete(o)},a=()=>{tE.delete(e),n.removeEventListener("close",a),n.removeEventListener("message",o)};return n.addEventListener("close",a),n.addEventListener("message",o),n.readyState===tm.CONNECTING&&await new Promise((e,t)=>{n&&(n.onopen=e,n.onerror=t)}),t=Object.assign(n,{requests:r,subscriptions:i}),tE.set(e,t),[t]}}),[r,[i]]=await n();return i}let tC={http:tw,webSocket:function(e,{body:t,onResponse:n}){if(e.readyState===e.CLOSED||e.readyState===e.CLOSING)throw new tg.c9({body:t,url:e.url,details:"Socket is closed."});let r=t_++,i=({data:o})=>{let a=JSON.parse(o);("number"!=typeof a.id||r===a.id)&&(n?.(a),"eth_subscribe"===t.method&&"string"==typeof a.result&&e.subscriptions.set(a.result,i),"eth_unsubscribe"===t.method&&e.subscriptions.delete(t.params?.[0]))};return e.requests.set(r,i),e.send(JSON.stringify({jsonrpc:"2.0",...t,id:r})),e},webSocketAsync:async function(e,{body:t,timeout:n=1e4}){return tb(()=>new Promise(n=>tC.webSocket(e,{body:t,onResponse:n})),{errorInstance:new tg.W5({body:t,url:e.url}),timeout:n})}};var tT=n(931),tS=n(2523);let tk=e=>(t,n,r)=>{let i=r.subscribe;return r.subscribe=(e,t,n)=>{let o=e;if(t){let i=(null==n?void 0:n.equalityFn)||Object.is,a=e(r.getState());o=n=>{let r=e(n);if(!i(a,r)){let e=a;t(a=r,e)}},(null==n?void 0:n.fireImmediately)&&t(a,a)}return i(o)},e(t,n,r)},tD=e=>t=>{try{let n=e(t);if(n instanceof Promise)return n;return{then:e=>tD(e)(n),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>tD(t)(e)}}},tA=(e,t)=>(n,r,i)=>{let o,a,s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},u=!1,c=new Set,l=new Set;try{o=s.getStorage()}catch(e){}if(!o)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...e)},r,i);let h=tD(s.serialize),f=()=>{let e;let t=h({state:s.partialize({...r()}),version:s.version}).then(e=>o.setItem(s.name,e)).catch(t=>{e=t});if(e)throw e;return t},d=i.setState;i.setState=(e,t)=>{d(e,t),f()};let p=e((...e)=>{n(...e),f()},r,i),g=()=>{var e;if(!o)return;u=!1,c.forEach(e=>e(r()));let t=(null==(e=s.onRehydrateStorage)?void 0:e.call(s,r()))||void 0;return tD(o.getItem.bind(o))(s.name).then(e=>{if(e)return s.deserialize(e)}).then(e=>{if(e){if("number"!=typeof e.version||e.version===s.version)return e.state;if(s.migrate)return s.migrate(e.state,e.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}}).then(e=>{var t;return n(a=s.merge(e,null!=(t=r())?t:p),!0),f()}).then(()=>{null==t||t(a,void 0),u=!0,l.forEach(e=>e(a))}).catch(e=>{null==t||t(void 0,e)})};return i.persist={setOptions:e=>{s={...s,...e},e.getStorage&&(o=e.getStorage())},clearStorage:()=>{null==o||o.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>g(),hasHydrated:()=>u,onHydrate:e=>(c.add(e),()=>{c.delete(e)}),onFinishHydration:e=>(l.add(e),()=>{l.delete(e)})},g(),a||p},tP=(e,t)=>(n,r,i)=>{let o,a={storage:function(e,t){let n;try{n=e()}catch(e){return}return{getItem:e=>{var r;let i=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),o=null!=(r=n.getItem(e))?r:null;return o instanceof Promise?o.then(i):i(o)},setItem:(e,r)=>n.setItem(e,JSON.stringify(r,null==t?void 0:t.replacer)),removeItem:e=>n.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},s=!1,u=new Set,c=new Set,l=a.storage;if(!l)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...e)},r,i);let h=()=>{let e=a.partialize({...r()});return l.setItem(a.name,{state:e,version:a.version})},f=i.setState;i.setState=(e,t)=>{f(e,t),h()};let d=e((...e)=>{n(...e),h()},r,i);i.getInitialState=()=>d;let p=()=>{var e,t;if(!l)return;s=!1,u.forEach(e=>{var t;return e(null!=(t=r())?t:d)});let i=(null==(t=a.onRehydrateStorage)?void 0:t.call(a,null!=(e=r())?e:d))||void 0;return tD(l.getItem.bind(l))(a.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===a.version)return e.state;if(a.migrate)return a.migrate(e.state,e.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}}).then(e=>{var t;return n(o=a.merge(e,null!=(t=r())?t:d),!0),h()}).then(()=>{null==i||i(o,void 0),o=r(),s=!0,c.forEach(e=>e(o))}).catch(e=>{null==i||i(void 0,e)})};return i.persist={setOptions:e=>{a={...a,...e},e.storage&&(l=e.storage)},clearStorage:()=>{null==l||l.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>p(),hasHydrated:()=>s,onHydrate:e=>(u.add(e),()=>{u.delete(e)}),onFinishHydration:e=>(c.add(e),()=>{c.delete(e)})},a.skipHydration||p(),o||d},tN=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?(console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),tA(e,t)):tP(e,t),tx=e=>{let t;let n=new Set,r=(e,r)=>{let i="function"==typeof e?e(t):e;if(!Object.is(i,t)){let e=t;t=(null!=r?r:"object"!=typeof i||null===i)?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,o={setState:r,getState:i,getInitialState:()=>a,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},a=t=e(r,i,o);return o},tO=e=>e?tx(e):tx;var tR=n(9419);function tM(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(let[n,r]of e)if(!Object.is(r,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}let n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}var tL=n(9656);function tF(e,t,{batch:n={multicall:{wait:32}},pollingInterval:r=4e3,rank:i,retryCount:o,retryDelay:a,stallTimeout:s}={}){if(!e.length)throw Error("must have at least one chain");let u=[],c={},l={};for(let n of e){let e=!1;for(let r of t){let t=r(n);t&&(e=!0,u.some(({id:e})=>e===n.id)||(u=[...u,t.chain]),c[n.id]=[...c[n.id]||[],...t.rpcUrls.http],t.rpcUrls.webSocket&&(l[n.id]=[...l[n.id]||[],...t.rpcUrls.webSocket]))}if(!e)throw Error(`Could not find valid provider configuration for chain "${n.name}".

You may need to add \`jsonRpcProvider\` to \`configureChains\` with the chain's RPC URLs.
Read more: https://wagmi.sh/core/providers/jsonRpc`)}return{chains:u,publicClient:({chainId:t})=>{let l=u.find(e=>e.id===t)??e[0],h=c[l.id];if(!h||!h[0])throw Error(`No providers configured for chain "${l.id}"`);return Object.assign(th({batch:n,chain:l,transport:tp(h.map(e=>(function(e,t={}){let{batch:n,fetchOptions:r,key:i="http",name:o="HTTP JSON-RPC",retryDelay:a}=t;return({chain:s,retryCount:u,timeout:c})=>{let{batchSize:l=1e3,wait:h=0}="object"==typeof n?n:{},f=t.retryCount??u,d=c??t.timeout??1e4,p=e||s?.rpcUrls.default.http[0];if(!p)throw new tv;return(0,td.q)({key:i,name:o,async request({method:t,params:i}){let o={method:t,params:i},{schedule:a}=(0,ty.S)({id:`${e}`,wait:h,shouldSplitBatch:e=>e.length>l,fn:e=>tC.http(p,{body:e,fetchOptions:r,timeout:d})}),s=async e=>n?a(e):[await tC.http(p,{body:e,fetchOptions:r,timeout:d})],[{error:u,result:c}]=await s(o);if(u)throw new tg.bs({body:o,error:u,url:p});return c},retryCount:f,retryDelay:a,timeout:d,type:"http"},{fetchOptions:r,url:e})}})(e,{timeout:s})),{rank:i,retryCount:o,retryDelay:a}),pollingInterval:r}),{chains:u})},webSocketPublicClient:({chainId:t})=>{let c=u.find(e=>e.id===t)??e[0],h=l[c.id];if(h&&h[0])return Object.assign(th({batch:n,chain:c,transport:tp(h.map(e=>(function(e,t={}){let{key:n="webSocket",name:r="WebSocket JSON-RPC",retryDelay:i}=t;return({chain:o,retryCount:a,timeout:s})=>{let u=t.retryCount??a,c=s??t.timeout??1e4,l=e||o?.rpcUrls.default.webSocket?.[0];if(!l)throw new tv;return(0,td.q)({key:n,name:r,async request({method:e,params:t}){let n={method:e,params:t},r=await tI(l),{error:i,result:o}=await tC.webSocketAsync(r,{body:n,timeout:c});if(i)throw new tg.bs({body:n,error:i,url:l});return o},retryCount:u,retryDelay:i,timeout:c,type:"webSocket"},{getSocket:()=>tI(l),async subscribe({params:e,onData:t,onError:n}){let r=await tI(l),{result:i}=await new Promise((i,o)=>tC.webSocket(r,{body:{method:"eth_subscribe",params:e},onResponse(e){if(e.error){o(e.error),n?.(e.error);return}if("number"==typeof e.id){i(e);return}"eth_subscription"===e.method&&t(e.params)}}));return{subscriptionId:i,unsubscribe:async()=>new Promise(e=>tC.webSocket(r,{body:{method:"eth_unsubscribe",params:[i]},onResponse:e}))}}})}})(e,{timeout:s})),{rank:i,retryCount:o,retryDelay:a}),pollingInterval:r}),{chains:u})}}}var tj=class extends Error{constructor({activeChain:e,targetChain:t}){super(`Chain mismatch: Expected "${t}", received "${e}".`),this.name="ChainMismatchError"}},tU=class extends Error{constructor({chainId:e,connectorId:t}){super(`Chain "${e}" not configured${t?` for connector "${t}"`:""}.`),this.name="ChainNotConfigured"}},tq=class extends Error{constructor(){super(...arguments),this.name="ConnectorAlreadyConnectedError",this.message="Connector already connected"}},tB=class extends Error{constructor(){super(...arguments),this.name="ConfigChainsNotFound",this.message="No chains were found on the wagmi config. Some functions that require a chain may not work."}},tV=class extends Error{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),this.name="SwitchChainNotSupportedError"}},tW=(e,{find:t,replace:n})=>e&&t(e)?n(e):"object"!=typeof e?e:Array.isArray(e)?e.map(e=>tW(e,{find:t,replace:n})):e instanceof Object?Object.entries(e).reduce((e,[r,i])=>({...e,[r]:tW(i,{find:t,replace:n})}),{}):e;function tK(e){return tW(JSON.parse(e),{find:e=>"string"==typeof e&&e.startsWith("#bigint."),replace:e=>BigInt(e.replace("#bigint.",""))})}function tG(e){return"number"==typeof e?e:"wei"===e?0:Math.abs(tS.Bd[e])}function tz(e,t){return e.slice(0,t).join(".")||"."}function tH(e,t){let{length:n}=e;for(let r=0;r<n;++r)if(e[r]===t)return r+1;return 0}function t$(e,t,n,r){return JSON.stringify(e,function(e,t){let n="function"==typeof e,r="function"==typeof t,i=[],o=[];return function(a,s){if("object"==typeof s){if(i.length){let e=tH(i,this);0===e?i[i.length]=this:(i.splice(e),o.splice(e)),o[o.length]=a;let n=tH(i,s);if(0!==n)return r?t.call(this,a,s,tz(o,n)):`[ref=${tz(o,n)}]`}else i[0]=s,o[0]=a}return n?e.call(this,a,s):s}}((e,n)=>{let r="bigint"==typeof n?`#bigint.${n.toString()}`:n;return t?.(e,r)||r},r),n??void 0)}var tQ={getItem:e=>"",setItem:(e,t)=>null,removeItem:e=>null};function tY({deserialize:e=tK,key:t="wagmi",serialize:n=t$,storage:r}){return{...r,getItem:(n,i=null)=>{let o=r.getItem(`${t}.${n}`);try{return o?e(o):i}catch(e){return console.warn(e),i}},setItem:(e,i)=>{if(null===i)r.removeItem(`${t}.${e}`);else try{r.setItem(`${t}.${e}`,n(i))}catch(e){console.error(e)}},removeItem:e=>r.removeItem(`${t}.${e}`)}}var tX="store",tJ=class{constructor({autoConnect:e=!1,connectors:t=[new u._],publicClient:n,storage:s=tY({storage:"undefined"!=typeof window?window.localStorage:tQ}),logger:c={warn:console.warn},webSocketPublicClient:l}){let p;h(this,o),this.publicClients=new Map,this.webSocketPublicClients=new Map,h(this,r,void 0),h(this,i,void 0),this.args={autoConnect:e,connectors:t,logger:c,publicClient:n,storage:s,webSocketPublicClient:l};let g="disconnected";if(e)try{let e=s.getItem(tX),t=e?.state?.data;g=t?.account?"reconnecting":"connecting",p=t?.chain?.id}catch(e){}let v="function"==typeof t?t():t;v.forEach(e=>e.setStorage(s)),this.store=tO(tk(tN(()=>({connectors:v,publicClient:this.getPublicClient({chainId:p}),status:g,webSocketPublicClient:this.getWebSocketPublicClient({chainId:p})}),{name:tX,storage:s,partialize:t=>({...e&&{data:{account:t?.data?.account,chain:t?.data?.chain}},chains:t?.chains}),version:2}))),this.storage=s,f(this,i,s?.getItem("wallet")),d(this,o,a).call(this),e&&"undefined"!=typeof window&&setTimeout(async()=>await this.autoConnect(),0)}get chains(){return this.store.getState().chains}get connectors(){return this.store.getState().connectors}get connector(){return this.store.getState().connector}get data(){return this.store.getState().data}get error(){return this.store.getState().error}get lastUsedChainId(){return this.data?.chain?.id}get publicClient(){return this.store.getState().publicClient}get status(){return this.store.getState().status}get subscribe(){return this.store.subscribe}get webSocketPublicClient(){return this.store.getState().webSocketPublicClient}setState(e){let t="function"==typeof e?e(this.store.getState()):e;this.store.setState(t,!0)}clearState(){this.setState(e=>({...e,chains:void 0,connector:void 0,data:void 0,error:void 0,status:"disconnected"}))}async destroy(){this.connector&&await this.connector.disconnect?.(),f(this,r,!1),this.clearState(),this.store.destroy()}async autoConnect(){if(l(this,r))return;f(this,r,!0),this.setState(e=>({...e,status:e.data?.account?"reconnecting":"connecting"}));let e=l(this,i)?[...this.connectors].sort(e=>e.id===l(this,i)?-1:1):this.connectors,t=!1;for(let n of e){if(!n.ready||!n.isAuthorized||!await n.isAuthorized())continue;let e=await n.connect();this.setState(t=>({...t,connector:n,chains:n?.chains,data:e,status:"connected"})),t=!0;break}return t||this.setState(e=>({...e,data:void 0,status:"disconnected"})),f(this,r,!1),this.data}setConnectors(e){this.args={...this.args,connectors:e};let t="function"==typeof e?e():e;t.forEach(e=>e.setStorage(this.args.storage)),this.setState(e=>({...e,connectors:t}))}getPublicClient({chainId:e}={}){let t=this.publicClients.get(-1);if(t&&t?.chain.id===e||(t=this.publicClients.get(e??-1)))return t;let{publicClient:n}=this.args;return t="function"==typeof n?n({chainId:e}):n,this.publicClients.set(e??-1,t),t}setPublicClient(e){let t=this.data?.chain?.id;this.args={...this.args,publicClient:e},this.publicClients.clear(),this.setState(e=>({...e,publicClient:this.getPublicClient({chainId:t})}))}getWebSocketPublicClient({chainId:e}={}){let t=this.webSocketPublicClients.get(-1);if(t&&t?.chain.id===e||(t=this.webSocketPublicClients.get(e??-1)))return t;let{webSocketPublicClient:n}=this.args;return(t="function"==typeof n?n({chainId:e}):n)&&this.webSocketPublicClients.set(e??-1,t),t}setWebSocketPublicClient(e){let t=this.data?.chain?.id;this.args={...this.args,webSocketPublicClient:e},this.webSocketPublicClients.clear(),this.setState(e=>({...e,webSocketPublicClient:this.getWebSocketPublicClient({chainId:t})}))}setLastUsedConnector(e=null){this.storage?.setItem("wallet",e)}};function tZ(e){let t=new tJ(e);return s=t,t}function t0(){if(!s)throw Error("No wagmi config found. Ensure you have set up a config: https://wagmi.sh/react/config");return s}async function t1({chainId:e,connector:t}){let n=t0(),r=n.connector;if(r&&t.id===r.id)throw new tq;try{n.setState(e=>({...e,status:"connecting"}));let r=await t.connect({chainId:e});return n.setLastUsedConnector(t.id),n.setState(e=>({...e,connector:t,chains:t?.chains,data:r,status:"connected"})),n.storage.setItem("connected",!0),{...r,connector:t}}catch(e){throw n.setState(e=>({...e,status:e.connector?"connected":"disconnected"})),e}}async function t2(){let e=t0();e.connector&&await e.connector.disconnect(),e.clearState(),e.storage.removeItem("connected")}r=new WeakMap,i=new WeakMap,o=new WeakSet,a=function(){let e=e=>{this.setState(t=>({...t,data:{...t.data,...e}}))},t=()=>{this.clearState()},n=e=>{this.setState(t=>({...t,error:e}))};this.store.subscribe(({connector:e})=>e,(r,i)=>{i?.off?.("change",e),i?.off?.("disconnect",t),i?.off?.("error",n),r&&(r.on?.("change",e),r.on?.("disconnect",t),r.on?.("error",n))});let{publicClient:r,webSocketPublicClient:i}=this.args;("function"==typeof r||"function"==typeof i)&&this.store.subscribe(({data:e})=>e?.chain?.id,e=>{this.setState(t=>({...t,publicClient:this.getPublicClient({chainId:e}),webSocketPublicClient:this.getWebSocketPublicClient({chainId:e})}))})};var t3=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{name:"",type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{name:"",type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{name:"",type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{name:"",type:"string"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{name:"",type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{name:"",type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],t6=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{name:"",type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{name:"",type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{name:"",type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{name:"",type:"bytes32"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{name:"",type:"bytes32"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{name:"",type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}];function t5({chainId:e}={}){let t=t0();return e&&t.getPublicClient({chainId:e})||t.publicClient}async function t4({chainId:e}={}){let t=t0();return await t.connector?.getWalletClient?.({chainId:e})||null}async function t8({abi:e,address:t,args:n,chainId:r,dataSuffix:i,functionName:o,walletClient:a,...s}){let u=t5({chainId:r}),c=a??await t4({chainId:r});if(!c)throw new tT.N;r&&nf({chainId:r});let{account:l,accessList:h,blockNumber:f,blockTag:d,gas:p,gasPrice:g,maxFeePerGas:v,maxPriorityFeePerGas:y,nonce:m,value:b}={accessList:s.accessList,account:s.account,blockNumber:s.blockNumber,blockTag:s.blockTag,data:s.data,gas:s.gas,gasPrice:s.gasPrice,maxFeePerGas:s.maxFeePerGas,maxPriorityFeePerGas:s.maxPriorityFeePerGas,nonce:s.nonce,to:s.to,value:s.value},{result:_,request:w}=await u.simulateContract({abi:e,address:t,functionName:o,args:n,account:l||c.account,accessList:h,blockNumber:f,blockTag:d,dataSuffix:i,gas:p,gasPrice:g,maxFeePerGas:v,maxPriorityFeePerGas:y,nonce:m,value:b}),E=e.filter(e=>"name"in e&&e.name===o);return{mode:"prepared",request:{...w,abi:E,chainId:r},result:_}}async function t9({chainId:e,contracts:t,blockNumber:n,blockTag:r,...i}){let o=t5({chainId:e});if(!o.chains)throw new tB;if(e&&o.chain.id!==e)throw new tU({chainId:e});return o.multicall({allowFailure:i.allowFailure??!0,blockNumber:n,blockTag:r,contracts:t})}async function t7({address:e,account:t,chainId:n,abi:r,args:i,functionName:o,blockNumber:a,blockTag:s}){return t5({chainId:n}).readContract({abi:r,address:e,account:t,functionName:o,args:i,blockNumber:a,blockTag:s})}async function ne({contracts:e,blockNumber:t,blockTag:n,...r}){let{allowFailure:i=!0}=r;try{let r=t5(),o=e.reduce((e,t,n)=>{let i=t.chainId??r.chain.id;return{...e,[i]:[...e[i]||[],{contract:t,index:n}]}},{}),a=(await Promise.all(Object.entries(o).map(([e,r])=>t9({allowFailure:i,chainId:parseInt(e),contracts:r.map(({contract:e})=>e),blockNumber:t,blockTag:n})))).flat(),s=Object.values(o).flatMap(e=>e.map(({index:e})=>e));return a.reduce((e,t,n)=>(e&&(e[s[n]]=t),e),[])}catch(o){if(o instanceof I.uq)throw o;let r=()=>e.map(e=>t7({...e,blockNumber:t,blockTag:n}));if(i)return(await Promise.allSettled(r())).map(e=>"fulfilled"===e.status?{result:e.value,status:"success"}:{error:e.reason,result:void 0,status:"failure"});return await Promise.all(r())}}function nt({address:e,abi:t,chainId:n,eventName:r},i){let o;let a=async()=>{o&&o(),o=((function({chainId:e}={}){let t=t0();return e&&t.getWebSocketPublicClient({chainId:e})||t.webSocketPublicClient})({chainId:n})||t5({chainId:n})).watchContractEvent({address:e,abi:t,eventName:r,onLogs:i})};a();let s=t0().subscribe(({publicClient:e,webSocketPublicClient:t})=>({publicClient:e,webSocketPublicClient:t}),a,{equalityFn:tM});return()=>{o?.(),s()}}async function nn(e){let t;let n=await t4({chainId:e.chainId});if(!n)throw new tT.N;if(e.chainId&&nf({chainId:e.chainId}),"prepared"===e.mode)t=e.request;else{let{chainId:n,mode:r,...i}=e;t=(await t8(i)).request}return{hash:await n.writeContract({...t,chain:e.chainId?{id:e.chainId}:null})}}async function nr({address:e,chainId:t,formatUnits:n,token:r}){let i=t0(),o=t5({chainId:t});if(r){let i=async({abi:i})=>{let o={abi:i,address:r,chainId:t},[a,s,u]=await ne({allowFailure:!1,contracts:[{...o,functionName:"balanceOf",args:[e]},{...o,functionName:"decimals"},{...o,functionName:"symbol"}]});return{decimals:s,formatted:(0,tR.b)(a??"0",tG(n??s)),symbol:u,value:a}};try{return await i({abi:t3})}catch(e){if(e instanceof I.uq){let{symbol:e,...t}=await i({abi:t6});return{symbol:(0,eA.rR)((0,b.f)(e,{dir:"right"})),...t}}throw e}}let a=[...i.publicClient.chains||[],...i.chains??[]],s=await o.getBalance({address:e}),u=a.find(e=>e.id===o.chain.id);return{decimals:u?.nativeCurrency.decimals??18,formatted:(0,tR.b)(s??"0",tG(n??18)),symbol:u?.nativeCurrency.symbol??"ETH",value:s}}function ni(){let{data:e,connector:t,status:n}=t0();switch(n){case"connected":return{address:e?.account,connector:t,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:n};case"reconnecting":return{address:e?.account,connector:t,isConnected:!!e?.account,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:n};case"connecting":return{address:e?.account,connector:t,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:n};case"disconnected":return{address:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:n}}}function no(){let e=t0(),t=e.data?.chain?.id,n=e.chains??[],r=[...e.publicClient?.chains||[],...n].find(e=>e.id===t)??{id:t,name:`Chain ${t}`,network:`${t}`,nativeCurrency:{name:"Ether",decimals:18,symbol:"ETH"},rpcUrls:{default:{http:[""]},public:{http:[""]}}};return{chain:t?{...r,...e.data?.chain,id:t}:void 0,chains:n}}async function na({chainId:e}){let{connector:t}=t0();if(!t)throw new tT.N;if(!t.switchChain)throw new tV({connector:t});return t.switchChain(e)}function ns(e,{selector:t=e=>e}={}){return t0().subscribe(({data:e,connector:n,status:r})=>t({address:e?.account,connector:n,status:r}),()=>e(ni()),{equalityFn:tM})}function nu(e,{selector:t=e=>e}={}){return t0().subscribe(({data:e,chains:n})=>t({chainId:e?.chain?.id,chains:n}),()=>e(no()),{equalityFn:tM})}async function nc({name:e,chainId:t}){let{normalize:r}=await n.e(458).then(n.bind(n,6458)),i=t5({chainId:t});return await i.getEnsAvatar({name:r(e)})}async function nl({address:e,chainId:t}){return t5({chainId:t}).getEnsName({address:(0,tL.K)(e)})}async function nh({chainId:e,confirmations:t=1,hash:n,onReplaced:r,timeout:i=0}){let o=t5({chainId:e}),a=await o.waitForTransactionReceipt({hash:n,confirmations:t,onReplaced:r,timeout:i});if("reverted"===a.status){let e=await o.getTransaction({hash:a.transactionHash}),t=await o.call({...e,gasPrice:"eip1559"!==e.type?e.gasPrice:void 0,maxFeePerGas:"eip1559"===e.type?e.maxFeePerGas:void 0,maxPriorityFeePerGas:"eip1559"===e.type?e.maxPriorityFeePerGas:void 0});throw Error((0,eA.rR)(`0x${t.substring(138)}`))}return a}function nf({chainId:e}){let{chain:t,chains:n}=no(),r=t?.id;if(r&&e!==r)throw new tj({activeChain:n.find(e=>e.id===r)?.name??`Chain ${r}`,targetChain:n.find(t=>t.id===e)?.name??`Chain ${e}`})}},6718:function(e,t,n){"use strict";let r;n.d(t,{AccountCtrl:function(){return I},Id:function(){return p},ConfigCtrl:function(){return _},zv:function(){return d},uA:function(){return v},ExplorerCtrl:function(){return V},jb:function(){return z},OptionsCtrl:function(){return m},AV:function(){return f},ThemeCtrl:function(){return ee},ToastCtrl:function(){return en},WcConnectionCtrl:function(){return K}});var i=n(9003);let o=e=>"object"==typeof e&&null!==e,a=new WeakMap,s=new WeakSet,[u]=((e=Object.is,t=(e,t)=>new Proxy(e,t),n=e=>o(e)&&!s.has(e)&&(Array.isArray(e)||!(Symbol.iterator in e))&&!(e instanceof WeakMap)&&!(e instanceof WeakSet)&&!(e instanceof Error)&&!(e instanceof Number)&&!(e instanceof Date)&&!(e instanceof String)&&!(e instanceof RegExp)&&!(e instanceof ArrayBuffer),r=e=>e.configurable&&e.enumerable&&e.writable,u=e=>{switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e}},c=new WeakMap,l=(e,t,n=u)=>{let r=c.get(e);if((null==r?void 0:r[0])===t)return r[1];let o=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return(0,i.jc)(o,!0),c.set(e,[t,o]),Reflect.ownKeys(e).forEach(t=>{if(Object.getOwnPropertyDescriptor(o,t))return;let r=Reflect.get(e,t),u={value:r,enumerable:!0,configurable:!0};if(s.has(r))(0,i.jc)(r,!1);else if(r instanceof Promise)delete u.value,u.get=()=>n(r);else if(a.has(r)){let[e,t]=a.get(r);u.value=l(e,t(),n)}Object.defineProperty(o,t,u)}),Object.preventExtensions(o)},h=new WeakMap,f=[1,1],d=u=>{if(!o(u))throw Error("object required");let c=h.get(u);if(c)return c;let p=f[0],g=new Set,v=(e,t=++f[0])=>{p!==t&&(p=t,g.forEach(n=>n(e,t)))},y=f[1],m=(e=++f[1])=>(y===e||g.size||(y=e,_.forEach(([t])=>{let n=t[1](e);n>p&&(p=n)})),p),b=e=>(t,n)=>{let r=[...t];r[1]=[e,...r[1]],v(r,n)},_=new Map,w=(e,t)=>{if(_.has(e))throw Error("prop listener already exists");if(g.size){let n=t[3](b(e));_.set(e,[t,n])}else _.set(e,[t])},E=e=>{var t;let n=_.get(e);n&&(_.delete(e),null==(t=n[1])||t.call(n))},I=e=>{g.add(e),1===g.size&&_.forEach(([e,t],n)=>{if(t)throw Error("remove already exists");let r=e[3](b(n));_.set(n,[e,r])});let t=()=>{g.delete(e),0===g.size&&_.forEach(([e,t],n)=>{t&&(t(),_.set(n,[e]))})};return t},C=Array.isArray(u)?[]:Object.create(Object.getPrototypeOf(u)),T=(t,r,u,c,l)=>{if(t&&(e(r,c)||h.has(c)&&e(r,h.get(c))))return;E(u),o(c)&&(c=(0,i.o5)(c)||c);let f=c;if(c instanceof Promise)c.then(e=>{c.status="fulfilled",c.value=e,v(["resolve",[u],e])}).catch(e=>{c.status="rejected",c.reason=e,v(["reject",[u],e])});else{!a.has(c)&&n(c)&&(f=d(c));let e=!s.has(f)&&a.get(f);e&&w(u,e)}l(f),v(["set",[u],c,r])},S={deleteProperty(e,t){let n=Reflect.get(e,t);E(t);let r=Reflect.deleteProperty(e,t);return r&&v(["delete",[t],n]),r},set(e,t,n,r){let i=Reflect.has(e,t),o=Reflect.get(e,t,r);return T(i,o,t,n,n=>{Reflect.set(e,t,n,r)}),!0},defineProperty(e,t,n){if(r(n)){let i=Reflect.getOwnPropertyDescriptor(e,t);if(!i||r(i))return T(!!i&&"value"in i,null==i?void 0:i.value,t,n.value,r=>{Reflect.defineProperty(e,t,{...n,value:r})}),!0}return Reflect.defineProperty(e,t,n)}},k=t(C,S);h.set(u,k);let D=[C,m,l,I];return a.set(k,D),Reflect.ownKeys(u).forEach(e=>{let t=Object.getOwnPropertyDescriptor(u,e);"value"in t&&(k[e]=u[e],delete t.value,delete t.writable),Object.defineProperty(C,e,t)}),k})=>[d,a,s,e,t,n,r,u,c,l,h,f])();function c(e={}){return u(e)}function l(e,t,n){let r;let i=a.get(e);i||console.warn("Please use proxy object");let o=[],s=i[3],u=!1,c=s(e=>{if(o.push(e),n){t(o.splice(0));return}r||(r=Promise.resolve().then(()=>{r=void 0,u&&t(o.splice(0))}))});return u=!0,()=>{u=!1,c()}}let h=c({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),f={state:h,subscribe:e=>l(h,()=>e(h)),push(e,t){e!==h.view&&(h.view=e,t&&(h.data=t),h.history.push(e))},reset(e){h.view=e,h.history=[e]},replace(e){h.history.length>1&&(h.history[h.history.length-1]=e,h.view=e)},goBack(){if(h.history.length>1){h.history.pop();let[e]=h.history.slice(-1);h.view=e}},setData(e){h.data=e}},d={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",W3M_VERSION:"W3M_VERSION",W3M_PREFER_INJECTED_URL_FLAG:"w3mPreferInjected",RECOMMENDED_WALLET_AMOUNT:9,isMobile:()=>"u">typeof window&&!!(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)),isAndroid:()=>d.isMobile()&&navigator.userAgent.toLowerCase().includes("android"),isIos(){let e=navigator.userAgent.toLowerCase();return d.isMobile()&&(e.includes("iphone")||e.includes("ipad"))},isHttpUrl:e=>e.startsWith("http://")||e.startsWith("https://"),isArray:e=>Array.isArray(e)&&e.length>0,formatNativeUrl(e,t,n){if(d.isHttpUrl(e))return this.formatUniversalUrl(e,t,n);let r=e;r.includes("://")||(r=e.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),this.setWalletConnectDeepLink(r,n);let i=encodeURIComponent(t);return`${r}wc?uri=${i}`},formatUniversalUrl(e,t,n){if(!d.isHttpUrl(e))return this.formatNativeUrl(e,t,n);let r=e;r.endsWith("/")||(r=`${r}/`),this.setWalletConnectDeepLink(r,n);let i=encodeURIComponent(t);return`${r}wc?uri=${i}`},wait:async e=>new Promise(t=>{setTimeout(t,e)}),openHref(e,t){window.open(e,t,"noreferrer noopener")},setWalletConnectDeepLink(e,t){try{localStorage.setItem(d.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(e){try{let[t]=e.split("?");localStorage.setItem(d.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:t,name:"Android"}))}catch{console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem(d.WALLETCONNECT_DEEPLINK_CHOICE)}catch{console.info("Unable to remove WalletConnect deep link")}},setWeb3ModalVersionInStorage(){try{"u">typeof localStorage&&localStorage.setItem(d.W3M_VERSION,"2.7.1")}catch{console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var e;let t=null==(e=f.state.data)?void 0:e.Wallet;if(!t)throw Error('Missing "Wallet" view data');return t},getSwitchNetworkRouterData(){var e;let t=null==(e=f.state.data)?void 0:e.SwitchNetwork;if(!t)throw Error('Missing "SwitchNetwork" view data');return t},isPreferInjectedFlag:()=>"u">typeof location&&new URLSearchParams(location.search).has(d.W3M_PREFER_INJECTED_URL_FLAG)},p={ethereumClient:void 0,setEthereumClient(e){r=e},client(){if(r)return r;throw Error("ClientCtrl has no client set")}},g=c({enabled:"u">typeof location&&(location.hostname.includes("localhost")||location.protocol.includes("https")),userSessionId:"",events:[],connectedWalletId:void 0}),v={state:g,subscribe:e=>l(g.events,()=>e(function(e,t){let n=a.get(e);n||console.warn("Please use proxy object");let[r,i,o]=n;return o(r,i(),void 0)}(g.events[g.events.length-1]))),initialize(){g.enabled&&"u">typeof(null==crypto?void 0:crypto.randomUUID)&&(g.userSessionId=crypto.randomUUID())},setConnectedWalletId(e){g.connectedWalletId=e},click(e){if(g.enabled){let t={type:"CLICK",name:e.name,userSessionId:g.userSessionId,timestamp:Date.now(),data:e};g.events.push(t)}},track(e){if(g.enabled){let t={type:"TRACK",name:e.name,userSessionId:g.userSessionId,timestamp:Date.now(),data:e};g.events.push(t)}},view(e){if(g.enabled){let t={type:"VIEW",name:e.name,userSessionId:g.userSessionId,timestamp:Date.now(),data:e};g.events.push(t)}}},y=c({selectedChain:void 0,chains:void 0,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1,isPreferInjected:!1}),m={state:y,subscribe:e=>l(y,()=>e(y)),setChains(e){y.chains=e},getSelectedChain(){let e=p.client().getNetwork().chain;return e&&(y.selectedChain=e),y.selectedChain},setSelectedChain(e){y.selectedChain=e},setIsCustomDesktop(e){y.isCustomDesktop=e},setIsCustomMobile(e){y.isCustomMobile=e},setIsDataLoaded(e){y.isDataLoaded=e},setIsUiLoaded(e){y.isUiLoaded=e},setIsPreferInjected(e){y.isPreferInjected=e}},b=c({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chainImages:void 0,tokenImages:void 0,tokenContracts:void 0,enableNetworkView:!1,enableAccountView:!0,enableExplorer:!0,defaultChain:void 0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),_={state:b,subscribe:e=>l(b,()=>e(b)),setConfig(e){var t,n;v.initialize(),m.setIsCustomMobile(!!(null==(t=e.mobileWallets)?void 0:t.length)),m.setIsCustomDesktop(!!(null==(n=e.desktopWallets)?void 0:n.length)),m.setChains(p.client().chains),m.setIsPreferInjected(p.client().isInjectedProviderInstalled()&&d.isPreferInjectedFlag()),e.defaultChain&&m.setSelectedChain(e.defaultChain),d.setWeb3ModalVersionInStorage(),Object.assign(b,e)}},w={async getIdentity(e,t){let{projectId:n}=_.state,r=`eip155:${t}`,i=`https://rpc.walletconnect.com/v1/identity/${e}?chainId=${r}&projectId=${n}`;return(await fetch(i)).json()}},E=c({address:void 0,profileName:void 0,profileAvatar:void 0,profileLoading:!1,balanceLoading:!1,balance:void 0,isConnected:!1}),I={state:E,subscribe:e=>l(E,()=>e(E)),getAccount(){let e=p.client().getAccount();E.address=e.address,E.isConnected=e.isConnected},async fetchProfile(e,t){var n;try{E.profileLoading=!0,E.profileName=null,E.profileAvatar=null;let r=t??E.address,i=null==(n=m.state.chains)?void 0:n.find(e=>1===e.id);if(r&&i){try{let e=await w.getIdentity(r,1);E.profileName=e.name,E.profileAvatar=e.avatar}catch{let e=await p.client().fetchEnsName({address:r,chainId:1});if(E.profileName=e,e){let t=await p.client().fetchEnsAvatar({name:e,chainId:1});E.profileAvatar=t}}E.profileAvatar&&await e(E.profileAvatar)}}finally{E.profileLoading=!1}},async fetchBalance(e){try{let t;let{chain:n}=p.client().getNetwork(),{tokenContracts:r}=_.state;n&&r&&(t=r[n.id]),E.balanceLoading=!0;let i=e??E.address;if(i){let e=await p.client().fetchBalance({address:i,token:t});E.balance={amount:e.formatted,symbol:e.symbol}}}finally{E.balanceLoading=!1}},setAddress(e){E.address=e},setIsConnected(e){E.isConnected=e},resetBalance(){E.balance=void 0},resetAccount(){E.address=void 0,E.isConnected=!1,E.profileName=void 0,E.profileAvatar=void 0,E.balance=void 0}};var C=Object.defineProperty,T=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable,D=(e,t,n)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,A=(e,t)=>{for(var n in t||(t={}))S.call(t,n)&&D(e,n,t[n]);if(T)for(var n of T(t))k.call(t,n)&&D(e,n,t[n]);return e};let P="https://explorer-api.walletconnect.com",N="js-2.7.1";async function x(e,t){let n=A({sdkType:"w3m",sdkVersion:N},t),r=new URL(e,P);return r.searchParams.append("projectId",_.state.projectId),Object.entries(n).forEach(([e,t])=>{t&&r.searchParams.append(e,String(t))}),(await fetch(r)).json()}let O={getDesktopListings:async e=>x("/w3m/v1/getDesktopListings",e),getMobileListings:async e=>x("/w3m/v1/getMobileListings",e),getInjectedListings:async e=>x("/w3m/v1/getInjectedListings",e),getAllListings:async e=>x("/w3m/v1/getAllListings",e),getWalletImageUrl:e=>`${P}/w3m/v1/getWalletImage/${e}?projectId=${_.state.projectId}&sdkType=w3m&sdkVersion=${N}`,getAssetImageUrl:e=>`${P}/w3m/v1/getAssetImage/${e}?projectId=${_.state.projectId}&sdkType=w3m&sdkVersion=${N}`};var R=Object.defineProperty,M=Object.getOwnPropertySymbols,L=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable,j=(e,t,n)=>t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,U=(e,t)=>{for(var n in t||(t={}))L.call(t,n)&&j(e,n,t[n]);if(M)for(var n of M(t))F.call(t,n)&&j(e,n,t[n]);return e};let q=d.isMobile(),B=c({wallets:{listings:[],total:0,page:1},injectedWallets:[],search:{listings:[],total:0,page:1},recomendedWallets:[]}),V={state:B,async getRecomendedWallets(){let{explorerRecommendedWalletIds:e,explorerExcludedWalletIds:t}=_.state;if("NONE"===e||"ALL"===t&&!e)return B.recomendedWallets;if(d.isArray(e)){let t={recommendedIds:e.join(",")},{listings:n}=await O.getAllListings(t),r=Object.values(n);r.sort((t,n)=>e.indexOf(t.id)-e.indexOf(n.id)),B.recomendedWallets=r}else{let e=d.isArray(t),n={page:1,entries:d.RECOMMENDED_WALLET_AMOUNT,version:2,excludedIds:e?t.join(","):void 0},{listings:r}=q?await O.getMobileListings(n):await O.getDesktopListings(n);B.recomendedWallets=Object.values(r)}return B.recomendedWallets},async getWallets(e){let t=U({},e),{explorerRecommendedWalletIds:n,explorerExcludedWalletIds:r}=_.state,{recomendedWallets:i}=B;if("ALL"===r)return B.wallets;i.length?t.excludedIds=i.map(e=>e.id).join(","):d.isArray(n)&&(t.excludedIds=n.join(",")),d.isArray(r)&&(t.excludedIds=[t.excludedIds,r].filter(Boolean).join(","));let{page:o,search:a}=e,{listings:s,total:u}=q?await O.getMobileListings(t):await O.getDesktopListings(t),c=Object.values(s),l=a?"search":"wallets";return B[l]={listings:[...B[l].listings,...c],total:u,page:o??1},{listings:c,total:u}},async getInjectedWallets(){let{listings:e}=await O.getInjectedListings({}),t=Object.values(e);return B.injectedWallets=t,B.injectedWallets},getWalletImageUrl:e=>O.getWalletImageUrl(e),getAssetImageUrl:e=>O.getAssetImageUrl(e),resetSearch(){B.search={listings:[],total:0,page:1}}},W=c({pairingEnabled:!1,pairingUri:"",pairingError:!1}),K={state:W,subscribe:e=>l(W,()=>e(W)),setPairingUri(e){W.pairingUri=e},setPairingError(e){W.pairingError=e},setPairingEnabled(e){W.pairingEnabled=e}},G=c({open:!1}),z={state:G,subscribe:e=>l(G,()=>e(G)),open:async e=>new Promise(t=>{let{isUiLoaded:n,isDataLoaded:r,isPreferInjected:i,selectedChain:o}=m.state,{isConnected:a}=I.state,{enableNetworkView:s}=_.state;if(K.setPairingEnabled(!0),a||d.removeWalletConnectDeepLink(),null!=e&&e.route)f.reset(e.route);else if(a)f.reset("Account");else if(s)f.reset("SelectNetwork");else if(i){p.client().connectConnector("injected",o?.id).catch(e=>console.error(e)),t();return}else f.reset("ConnectWallet");let{pairingUri:u}=K.state;if(n&&r&&(u||a))G.open=!0,t();else{let e=setInterval(()=>{let n=m.state,r=K.state;n.isUiLoaded&&n.isDataLoaded&&(r.pairingUri||a)&&(clearInterval(e),G.open=!0,t())},200)}}),close(){G.open=!1}};var H=Object.defineProperty,$=Object.getOwnPropertySymbols,Q=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable,X=(e,t,n)=>t in e?H(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,J=(e,t)=>{for(var n in t||(t={}))Q.call(t,n)&&X(e,n,t[n]);if($)for(var n of $(t))Y.call(t,n)&&X(e,n,t[n]);return e};let Z=c({themeMode:"u">typeof matchMedia&&matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}),ee={state:Z,subscribe:e=>l(Z,()=>e(Z)),setThemeConfig(e){let{themeMode:t,themeVariables:n}=e;t&&(Z.themeMode=t),n&&(Z.themeVariables=J({},n))}},et=c({open:!1,message:"",variant:"success"}),en={state:et,subscribe:e=>l(et,()=>e(et)),openToast(e,t){et.open=!0,et.message=e,et.variant=t},closeToast(){et.open=!1}}},3198:function(e,t,n){"use strict";n.d(t,{Eg:function(){return v},k_:function(){return I}});var r=n(132),i=n(6718);Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var o=Object.defineProperty,a=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,c=(e,t,n)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,l=(e,t)=>{for(var n in t||(t={}))s.call(t,n)&&c(e,n,t[n]);if(a)for(var n of a(t))u.call(t,n)&&c(e,n,t[n]);return e};function h(e){return r.createElement("w3m-modal",l({},e))}var f=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,g=(e,t)=>{var n={};for(var r in e)d.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&f)for(var r of f(e))0>t.indexOf(r)&&p.call(e,r)&&(n[r]=e[r]);return n};let v=(0,r.memo)(function(e){var{ethereumClient:t}=e,o=g(e,["ethereumClient"]);let a=(0,r.useCallback)(async()=>{i.ThemeCtrl.setThemeConfig(o),t&&i.Id.setEthereumClient(t),i.ConfigCtrl.setConfig(o),await Promise.all([n.e(166),n.e(521)]).then(n.bind(n,1521)),i.OptionsCtrl.setIsUiLoaded(!0)},[t,o]);return(0,r.useEffect)(()=>{a()},[a]),r.createElement(h,null)});Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var y=Object.defineProperty,m=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable,w=(e,t,n)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,E=(e,t)=>{for(var n in t||(t={}))b.call(t,n)&&w(e,n,t[n]);if(m)for(var n of m(t))_.call(t,n)&&w(e,n,t[n]);return e};function I(){let[e,t]=(0,r.useState)(i.jb.state);return(0,r.useEffect)(()=>{let e=i.jb.subscribe(e=>t(E({},e)));return()=>{e()}},[]),{isOpen:e.open,open:i.jb.open,close:i.jb.close,setDefaultChain:i.OptionsCtrl.setSelectedChain}}},5927:function(e,t,n){"use strict";let r,i;n.d(t,{x7:function(){return eh},Am:function(){return j}});var o,a=n(132);let s={data:""},u=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||s,c=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,l=/\/\*[^]*?\*\/|  +/g,h=/\n+/g,f=(e,t)=>{let n="",r="",i="";for(let o in e){let a=e[o];"@"==o[0]?"i"==o[1]?n=o+" "+a+";":r+="f"==o[1]?f(a,o):o+"{"+f(a,"k"==o[1]?"":t)+"}":"object"==typeof a?r+=f(a,t?t.replace(/([^,])+/g,e=>o.replace(/(^:.*)|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):o):null!=a&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=f.p?f.p(o,a):o+":"+a+";")}return n+(t&&i?t+"{"+i+"}":i)+r},d={},p=e=>{if("object"==typeof e){let t="";for(let n in e)t+=n+p(e[n]);return t}return e},g=(e,t,n,r,i)=>{var o;let a=p(e),s=d[a]||(d[a]=(e=>{let t=0,n=11;for(;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n})(a));if(!d[s]){let t=a!==e?e:(e=>{let t,n,r=[{}];for(;t=c.exec(e.replace(l,""));)t[4]?r.shift():t[3]?(n=t[3].replace(h," ").trim(),r.unshift(r[0][n]=r[0][n]||{})):r[0][t[1]]=t[2].replace(h," ").trim();return r[0]})(e);d[s]=f(i?{["@keyframes "+s]:t}:t,n?"":"."+s)}let u=n&&d.g?d.g:null;return n&&(d.g=d[s]),o=d[s],u?t.data=t.data.replace(u,o):-1===t.data.indexOf(o)&&(t.data=r?o+t.data:t.data+o),s},v=(e,t,n)=>e.reduce((e,r,i)=>{let o=t[i];if(o&&o.call){let e=o(n),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;o=t?"."+t:e&&"object"==typeof e?e.props?"":f(e,""):!1===e?"":e}return e+r+(null==o?"":o)},"");function y(e){let t=this||{},n=e.call?e(t.p):e;return g(n.unshift?n.raw?v(n,[].slice.call(arguments,1),t.p):n.reduce((e,n)=>Object.assign(e,n&&n.call?n(t.p):n),{}):n,u(t.target),t.g,t.o,t.k)}y.bind({g:1});let m,b,_,w=y.bind({k:1});function E(e,t){let n=this||{};return function(){let r=arguments;function i(o,a){let s=Object.assign({},o),u=s.className||i.className;n.p=Object.assign({theme:b&&b()},s),n.o=/ *go\d+/.test(u),s.className=y.apply(n,r)+(u?" "+u:""),t&&(s.ref=a);let c=e;return e[0]&&(c=s.as||e,delete s.as),_&&c[0]&&_(s),m(c,s)}return t?t(i):i}}var I=e=>"function"==typeof e,C=(e,t)=>I(e)?e(t):e,T=(r=0,()=>(++r).toString()),S=()=>{if(void 0===i&&"u">typeof window){let e=matchMedia("(prefers-reduced-motion: reduce)");i=!e||e.matches}return i},k=new Map,D=e=>{if(k.has(e))return;let t=setTimeout(()=>{k.delete(e),O({type:4,toastId:e})},1e3);k.set(e,t)},A=e=>{let t=k.get(e);t&&clearTimeout(t)},P=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,20)};case 1:return t.toast.id&&A(t.toast.id),{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case 2:let{toast:n}=t;return e.toasts.find(e=>e.id===n.id)?P(e,{type:1,toast:n}):P(e,{type:0,toast:n});case 3:let{toastId:r}=t;return r?D(r):e.toasts.forEach(e=>{D(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,visible:!1}:e)};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(e=>({...e,pauseDuration:e.pauseDuration+i}))}}},N=[],x={toasts:[],pausedAt:void 0},O=e=>{x=P(x,e),N.forEach(e=>{e(x)})},R={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},M=(e={})=>{let[t,n]=(0,a.useState)(x);(0,a.useEffect)(()=>(N.push(n),()=>{let e=N.indexOf(n);e>-1&&N.splice(e,1)}),[t]);let r=t.toasts.map(t=>{var n,r;return{...e,...e[t.type],...t,duration:t.duration||(null==(n=e[t.type])?void 0:n.duration)||(null==e?void 0:e.duration)||R[t.type],style:{...e.style,...null==(r=e[t.type])?void 0:r.style,...t.style}}});return{...t,toasts:r}},L=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(null==n?void 0:n.id)||T()}),F=e=>(t,n)=>{let r=L(t,e,n);return O({type:2,toast:r}),r.id},j=(e,t)=>F("blank")(e,t);j.error=F("error"),j.success=F("success"),j.loading=F("loading"),j.custom=F("custom"),j.dismiss=e=>{O({type:3,toastId:e})},j.remove=e=>O({type:4,toastId:e}),j.promise=(e,t,n)=>{let r=j.loading(t.loading,{...n,...null==n?void 0:n.loading});return e.then(e=>(j.success(C(t.success,e),{id:r,...n,...null==n?void 0:n.success}),e)).catch(e=>{j.error(C(t.error,e),{id:r,...n,...null==n?void 0:n.error})}),e};var U=(e,t)=>{O({type:1,toast:{id:e,height:t}})},q=()=>{O({type:5,time:Date.now()})},B=e=>{let{toasts:t,pausedAt:n}=M(e);(0,a.useEffect)(()=>{if(n)return;let e=Date.now(),r=t.map(t=>{if(t.duration===1/0)return;let n=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(n<0){t.visible&&j.dismiss(t.id);return}return setTimeout(()=>j.dismiss(t.id),n)});return()=>{r.forEach(e=>e&&clearTimeout(e))}},[t,n]);let r=(0,a.useCallback)(()=>{n&&O({type:6,time:Date.now()})},[n]),i=(0,a.useCallback)((e,n)=>{let{reverseOrder:r=!1,gutter:i=8,defaultPosition:o}=n||{},a=t.filter(t=>(t.position||o)===(e.position||o)&&t.height),s=a.findIndex(t=>t.id===e.id),u=a.filter((e,t)=>t<s&&e.visible).length;return a.filter(e=>e.visible).slice(...r?[u+1]:[0,u]).reduce((e,t)=>e+(t.height||0)+i,0)},[t]);return{toasts:t,handlers:{updateHeight:U,startPause:q,endPause:r,calculateOffset:i}}},V=w`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,W=w`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,K=w`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,G=E("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${V} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${W} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${K} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,z=w`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,H=E("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${z} 1s linear infinite;
`,$=w`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Q=w`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Y=E("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${$} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Q} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,X=E("div")`
  position: absolute;
`,J=E("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Z=w`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,ee=E("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Z} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,et=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return void 0!==t?"string"==typeof t?a.createElement(ee,null,t):t:"blank"===n?null:a.createElement(J,null,a.createElement(H,{...r}),"loading"!==n&&a.createElement(X,null,"error"===n?a.createElement(G,{...r}):a.createElement(Y,{...r})))},en=e=>`
0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,er=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}
`,ei=E("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,eo=E("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,ea=(e,t)=>{let n=e.includes("top")?1:-1,[r,i]=S()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[en(n),er(n)];return{animation:t?`${w(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${w(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},es=a.memo(({toast:e,position:t,style:n,children:r})=>{let i=e.height?ea(e.position||t||"top-center",e.visible):{opacity:0},o=a.createElement(et,{toast:e}),s=a.createElement(eo,{...e.ariaProps},C(e.message,e));return a.createElement(ei,{className:e.className,style:{...i,...n,...e.style}},"function"==typeof r?r({icon:o,message:s}):a.createElement(a.Fragment,null,o,s))});o=a.createElement,f.p=void 0,m=o,b=void 0,_=void 0;var eu=({id:e,className:t,style:n,onHeightUpdate:r,children:i})=>{let o=a.useCallback(t=>{if(t){let n=()=>{r(e,t.getBoundingClientRect().height)};n(),new MutationObserver(n).observe(t,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return a.createElement("div",{ref:o,className:t,style:n},i)},ec=(e,t)=>{let n=e.includes("top"),r=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:S()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...n?{top:0}:{bottom:0},...r}},el=y`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,eh=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:i,containerStyle:o,containerClassName:s})=>{let{toasts:u,handlers:c}=B(n);return a.createElement("div",{style:{position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none",...o},className:s,onMouseEnter:c.startPause,onMouseLeave:c.endPause},u.map(n=>{let o=n.position||t,s=ec(o,c.calculateOffset(n,{reverseOrder:e,gutter:r,defaultPosition:t}));return a.createElement(eu,{id:n.id,key:n.id,onHeightUpdate:c.updateHeight,className:n.visible?el:"",style:s},"custom"===n.type?C(n.message,n):i?i(n):a.createElement(es,{toast:n,position:o}))}))}},3529:function(e,t,n){"use strict";n.d(t,{Z:function(){return o},y:function(){return a}});var r=n(132);let i=r.createContext({});function o({count:e=1,wrapper:t,className:n,containerClassName:o,containerTestId:a,circle:s=!1,style:u,...c}){var l,h,f;let d=r.useContext(i),p={...c};for(let[e,t]of Object.entries(c))void 0===t&&delete p[e];let g={...d,...p,circle:s},v={...u,...function({baseColor:e,highlightColor:t,width:n,height:r,borderRadius:i,circle:o,direction:a,duration:s,enableAnimation:u=!0}){let c={};return"rtl"===a&&(c["--animation-direction"]="reverse"),"number"==typeof s&&(c["--animation-duration"]=`${s}s`),u||(c["--pseudo-element-display"]="none"),("string"==typeof n||"number"==typeof n)&&(c.width=n),("string"==typeof r||"number"==typeof r)&&(c.height=r),("string"==typeof i||"number"==typeof i)&&(c.borderRadius=i),o&&(c.borderRadius="50%"),void 0!==e&&(c["--base-color"]=e),void 0!==t&&(c["--highlight-color"]=t),c}(g)},y="react-loading-skeleton";n&&(y+=` ${n}`);let m=null!==(l=g.inline)&&void 0!==l&&l,b=[],_=Math.ceil(e);for(let t=0;t<_;t++){let n=v;if(_>e&&t===_-1){let t=null!==(h=n.width)&&void 0!==h?h:"100%",r=e%1,i="number"==typeof t?t*r:`calc(${t} * ${r})`;n={...n,width:i}}let i=r.createElement("span",{className:y,style:n,key:t},"‌");m?b.push(i):b.push(r.createElement(r.Fragment,{key:t},i,r.createElement("br",null)))}return r.createElement("span",{className:o,"data-testid":a,"aria-live":"polite","aria-busy":null===(f=g.enableAnimation)||void 0===f||f},t?b.map((e,n)=>r.createElement(t,{key:n},e)):b)}function a({children:e,...t}){return r.createElement(i.Provider,{value:t},e)}},1499:function(e,t,n){"use strict";n.r(t),n.d(t,{__addDisposableResource:function(){return R},__assign:function(){return o},__asyncDelegator:function(){return T},__asyncGenerator:function(){return C},__asyncValues:function(){return S},__await:function(){return I},__awaiter:function(){return p},__classPrivateFieldGet:function(){return N},__classPrivateFieldIn:function(){return O},__classPrivateFieldSet:function(){return x},__createBinding:function(){return v},__decorate:function(){return s},__disposeResources:function(){return L},__esDecorate:function(){return c},__exportStar:function(){return y},__extends:function(){return i},__generator:function(){return g},__importDefault:function(){return P},__importStar:function(){return A},__makeTemplateObject:function(){return k},__metadata:function(){return d},__param:function(){return u},__propKey:function(){return h},__read:function(){return b},__rest:function(){return a},__runInitializers:function(){return l},__setFunctionName:function(){return f},__spread:function(){return _},__spreadArray:function(){return E},__spreadArrays:function(){return w},__values:function(){return m}});var r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function u(e,t){return function(n,r){t(n,r,e)}}function c(e,t,n,r,i,o){function a(e){if(void 0!==e&&"function"!=typeof e)throw TypeError("Function expected");return e}for(var s,u=r.kind,c="getter"===u?"get":"setter"===u?"set":"value",l=!t&&e?r.static?e:e.prototype:null,h=t||(l?Object.getOwnPropertyDescriptor(l,r.name):{}),f=!1,d=n.length-1;d>=0;d--){var p={};for(var g in r)p[g]="access"===g?{}:r[g];for(var g in r.access)p.access[g]=r.access[g];p.addInitializer=function(e){if(f)throw TypeError("Cannot add initializers after decoration has completed");o.push(a(e||null))};var v=(0,n[d])("accessor"===u?{get:h.get,set:h.set}:h[c],p);if("accessor"===u){if(void 0===v)continue;if(null===v||"object"!=typeof v)throw TypeError("Object expected");(s=a(v.get))&&(h.get=s),(s=a(v.set))&&(h.set=s),(s=a(v.init))&&i.unshift(s)}else(s=a(v))&&("field"===u?i.unshift(s):h[c]=s)}l&&Object.defineProperty(l,r.name,h),f=!0}function l(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0}function h(e){return"symbol"==typeof e?e:"".concat(e)}function f(e,t,n){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function d(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function p(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,s)}u((r=r.apply(e,t||[])).next())})}function g(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}var v=Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function y(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||v(t,e,n)}function m(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function _(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(b(arguments[t]));return e}function w(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function E(e,t,n){if(n||2==arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function I(e){return this instanceof I?(this.v=e,this):new I(e)}function C(e,t,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise(function(n,r){o.push([e,t,n,r])>1||s(e,t)})})}function s(e,t){try{var n;(n=i[e](t)).value instanceof I?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(e){l(o[0][3],e)}}function u(e){s("next",e)}function c(e){s("throw",e)}function l(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function T(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:I(e[r](t)),done:!1}:i?i(t):t}:i}}function S(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=m(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,i){!function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}(r,i,(t=e[n](t)).done,t.value)})}}}function k(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var D=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function A(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&v(t,e,n);return D(t,e),t}function P(e){return e&&e.__esModule?e:{default:e}}function N(e,t,n,r){if("a"===n&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function x(e,t,n,r,i){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}function O(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function R(e,t,n){if(null!=t){var r;if("object"!=typeof t&&"function"!=typeof t)throw TypeError("Object expected.");if(n){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(void 0===r){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose]}if("function"!=typeof r)throw TypeError("Object not disposable.");e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var M="function"==typeof SuppressedError?SuppressedError:function(e,t,n){var r=Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function L(e){function t(t){e.error=e.hasError?new M(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}return function n(){for(;e.stack.length;){var r=e.stack.pop();try{var i=r.dispose&&r.dispose.call(r.value);if(r.async)return Promise.resolve(i).then(n,function(e){return t(e),n()})}catch(e){t(e)}}if(e.hasError)throw e.error}()}t.default={__extends:i,__assign:o,__rest:a,__decorate:s,__param:u,__metadata:d,__awaiter:p,__generator:g,__createBinding:v,__exportStar:y,__values:m,__read:b,__spread:_,__spreadArrays:w,__spreadArray:E,__await:I,__asyncGenerator:C,__asyncDelegator:T,__asyncValues:S,__makeTemplateObject:k,__importStar:A,__importDefault:P,__classPrivateFieldGet:N,__classPrivateFieldSet:x,__classPrivateFieldIn:O,__addDisposableResource:R,__disposeResources:L}},9555:function(e,t,n){"use strict";n.d(t,{E:function(){return i}});var r=n(2161);function i(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?(0,r.P)(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}},1291:function(e,t,n){"use strict";n.d(t,{z:function(){return o}});var r=n(9555),i=n(2161);function o(e,t){t||(t=e.reduce((e,t)=>e+t.length,0));let n=(0,r.E)(t),o=0;for(let t of e)n.set(t,o),o+=t.length;return(0,i.P)(n)}},5667:function(e,t,n){"use strict";n.d(t,{m:function(){return o}});var r=n(3767),i=n(2161);function o(e,t="utf8"){let n=r.Z[t];if(!n)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?(0,i.P)(globalThis.Buffer.from(e,"utf-8")):n.decoder.decode(`${n.prefix}${e}`)}},7442:function(e,t,n){"use strict";n.d(t,{BB:function(){return o.B},mL:function(){return i.m},zo:function(){return r.z}});var r=n(1291),i=n(5667),o=n(6850)},6850:function(e,t,n){"use strict";n.d(t,{B:function(){return i}});var r=n(3767);function i(e,t="utf8"){let n=r.Z[t];if(!n)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):n.encoder.encode(e).substring(1)}},2161:function(e,t,n){"use strict";function r(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}n.d(t,{P:function(){return r}})},3767:function(e,t,n){"use strict";n.d(t,{Z:function(){return ez}});var r={};n.r(r),n.d(r,{identity:function(){return x}});var i={};n.r(i),n.d(i,{base2:function(){return O}});var o={};n.r(o),n.d(o,{base8:function(){return R}});var a={};n.r(a),n.d(a,{base10:function(){return M}});var s={};n.r(s),n.d(s,{base16:function(){return L},base16upper:function(){return F}});var u={};n.r(u),n.d(u,{base32:function(){return j},base32hex:function(){return V},base32hexpad:function(){return K},base32hexpadupper:function(){return G},base32hexupper:function(){return W},base32pad:function(){return q},base32padupper:function(){return B},base32upper:function(){return U},base32z:function(){return z}});var c={};n.r(c),n.d(c,{base36:function(){return H},base36upper:function(){return $}});var l={};n.r(l),n.d(l,{base58btc:function(){return Q},base58flickr:function(){return Y}});var h={};n.r(h),n.d(h,{base64:function(){return X},base64pad:function(){return J},base64url:function(){return Z},base64urlpad:function(){return ee}});var f={};n.r(f),n.d(f,{base256emoji:function(){return ei}});var d={};n.r(d),n.d(d,{sha256:function(){return ev},sha512:function(){return ey}});var p={};n.r(p),n.d(p,{identity:function(){return em}});var g={};n.r(g),n.d(g,{code:function(){return e_},decode:function(){return eE},encode:function(){return ew},name:function(){return eb}});var v={};n.r(v),n.d(v,{code:function(){return eS},decode:function(){return eD},encode:function(){return ek},name:function(){return eT}});var y=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),a=o.charCodeAt(0);if(255!==n[a])throw TypeError(o+" is ambiguous");n[a]=i}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function h(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var r=0,i=0;e[t]===u;)r++,t++;for(var o=(e.length-t)*c+1>>>0,a=new Uint8Array(o);e[t];){var l=n[e.charCodeAt(t)];if(255===l)return;for(var h=0,f=o-1;(0!==l||h<i)&&-1!==f;f--,h++)l+=s*a[f]>>>0,a[f]=l%256>>>0,l=l/256>>>0;if(0!==l)throw Error("Non-zero carry");i=h,t++}if(" "!==e[t]){for(var d=o-i;d!==o&&0===a[d];)d++;for(var p=new Uint8Array(r+(o-d)),g=r;d!==o;)p[g++]=a[d++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,i=0,o=t.length;i!==o&&0===t[i];)i++,n++;for(var a=(o-i)*l+1>>>0,c=new Uint8Array(a);i!==o;){for(var h=t[i],f=0,d=a-1;(0!==h||f<r)&&-1!==d;d--,f++)h+=256*c[d]>>>0,c[d]=h%s>>>0,h=h/s>>>0;if(0!==h)throw Error("Non-zero carry");r=f,i++}for(var p=a-r;p!==a&&0===c[p];)p++;for(var g=u.repeat(n);p<a;++p)g+=e.charAt(c[p]);return g},decodeUnsafe:h,decode:function(e){var n=h(e);if(n)return n;throw Error(`Non-${t} character`)}}};new Uint8Array(0);let m=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0},b=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")},_=e=>new TextEncoder().encode(e),w=e=>new TextDecoder().decode(e);class E{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class I{constructor(e,t,n){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return T(this,e)}}class C{constructor(e){this.decoders=e}or(e){return T(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}let T=(e,t)=>new C({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class S{constructor(e,t,n,r){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=r,this.encoder=new E(e,t,n),this.decoder=new I(e,t,r)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}let k=({name:e,prefix:t,encode:n,decode:r})=>new S(e,t,n,r),D=({prefix:e,name:t,alphabet:n})=>{let{encode:r,decode:i}=y(n,t);return k({prefix:e,name:t,encode:r,decode:e=>b(i(e))})},A=(e,t,n,r)=>{let i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let o=e.length;for(;"="===e[o-1];)--o;let a=new Uint8Array(o*n/8|0),s=0,u=0,c=0;for(let t=0;t<o;++t){let o=i[e[t]];if(void 0===o)throw SyntaxError(`Non-${r} character`);u=u<<n|o,(s+=n)>=8&&(s-=8,a[c++]=255&u>>s)}if(s>=n||255&u<<8-s)throw SyntaxError("Unexpected end of data");return a},P=(e,t,n)=>{let r="="===t[t.length-1],i=(1<<n)-1,o="",a=0,s=0;for(let r=0;r<e.length;++r)for(s=s<<8|e[r],a+=8;a>n;)a-=n,o+=t[i&s>>a];if(a&&(o+=t[i&s<<n-a]),r)for(;o.length*n&7;)o+="=";return o},N=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>k({prefix:t,name:e,encode:e=>P(e,r,n),decode:t=>A(t,r,n,e)}),x=k({prefix:"\x00",name:"identity",encode:e=>w(e),decode:e=>_(e)}),O=N({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),R=N({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),M=D({prefix:"9",name:"base10",alphabet:"0123456789"}),L=N({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),F=N({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),j=N({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),U=N({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),q=N({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),B=N({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),V=N({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),W=N({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),K=N({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),G=N({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),z=N({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),H=D({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),$=D({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Q=D({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Y=D({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),X=N({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),J=N({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Z=N({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ee=N({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),et=Array.from("\uD83D\uDE80\uD83E\uDE90☄\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09☀\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02❤\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09☺\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E✌✨\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D❣\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33✋\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13⭐✅\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6✔\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90☹\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20☝\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B⚽\uD83E\uDD19☕\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81⚡\uD83C\uDF1E\uD83C\uDF88❌✊\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C✈\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74▶➡❓\uD83D\uDC8E\uD83D\uDCB8⬇\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A⚠\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37☎\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51❄\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),en=et.reduce((e,t,n)=>(e[n]=t,e),[]),er=et.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]),ei=k({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+=en[t],"")},decode:function(e){let t=[];for(let n of e){let e=er[n.codePointAt(0)];if(void 0===e)throw Error(`Non-base256emoji character: ${n}`);t.push(e)}return new Uint8Array(t)}});var eo={encode:function e(t,n,r){n=n||[];for(var i=r=r||0;t>=2147483648;)n[r++]=255&t|128,t/=128;for(;-128&t;)n[r++]=255&t|128,t>>>=7;return n[r]=0|t,e.bytes=r-i+1,n},decode:function e(t,n){var r,i=0,n=n||0,o=0,a=n,s=t.length;do{if(a>=s)throw e.bytes=0,RangeError("Could not decode varint");r=t[a++],i+=o<28?(127&r)<<o:(127&r)*Math.pow(2,o),o+=7}while(r>=128);return e.bytes=a-n,i},encodingLength:function(e){return e<128?1:e<16384?2:e<2097152?3:e<268435456?4:e<34359738368?5:e<4398046511104?6:e<562949953421312?7:e<72057594037927940?8:e<0x7fffffffffffffff?9:10}};let ea=(e,t=0)=>[eo.decode(e,t),eo.decode.bytes],es=(e,t,n=0)=>(eo.encode(e,t,n),t),eu=e=>eo.encodingLength(e),ec=(e,t)=>{let n=t.byteLength,r=eu(e),i=r+eu(n),o=new Uint8Array(i+n);return es(e,o,0),es(n,o,r),o.set(t,i),new ef(e,n,t,o)},el=e=>{let t=b(e),[n,r]=ea(t),[i,o]=ea(t.subarray(r)),a=t.subarray(r+o);if(a.byteLength!==i)throw Error("Incorrect length");return new ef(n,i,a,t)},eh=(e,t)=>e===t||e.code===t.code&&e.size===t.size&&m(e.bytes,t.bytes);class ef{constructor(e,t,n,r){this.code=e,this.size=t,this.digest=n,this.bytes=r}}let ed=({name:e,code:t,encode:n})=>new ep(e,t,n);class ep{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?ec(this.code,t):t.then(e=>ec(this.code,e))}throw Error("Unknown type, must be binary type")}}let eg=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),ev=ed({name:"sha2-256",code:18,encode:eg("SHA-256")}),ey=ed({name:"sha2-512",code:19,encode:eg("SHA-512")}),em={code:0,name:"identity",encode:b,digest:e=>ec(0,b(e))},eb="raw",e_=85,ew=e=>b(e),eE=e=>b(e),eI=new TextEncoder,eC=new TextDecoder,eT="json",eS=512,ek=e=>eI.encode(JSON.stringify(e)),eD=e=>JSON.parse(eC.decode(e));class eA{constructor(e,t,n,r){this.code=t,this.version=e,this.multihash=n,this.bytes=r,this.byteOffset=r.byteOffset,this.byteLength=r.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:ej,byteLength:ej,code:eF,version:eF,multihash:eF,bytes:eF,_baseCache:ej,asCID:ej})}toV0(){if(0===this.version)return this;{let{code:e,multihash:t}=this;if(e!==eO)throw Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==eR)throw Error("Cannot convert non sha2-256 multihash CID to CIDv0");return eA.createV0(t)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,n=ec(e,t);return eA.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&eh(this.multihash,e.multihash)}toString(e){let{bytes:t,version:n,_baseCache:r}=this;return 0===n?eN(t,r,e||Q.encoder):ex(t,r,e||j.encoder)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return eU(/^0\.0/,eq),!!(e&&(e[eL]||e.asCID===e))}get toBaseEncodedString(){throw Error("Deprecated, use .toString()")}get codec(){throw Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw Error('"multibaseName" property is deprecated')}get prefix(){throw Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof eA)return e;if(null!=e&&e.asCID===e){let{version:t,code:n,multihash:r,bytes:i}=e;return new eA(t,n,r,i||eM(t,n,r.bytes))}if(null==e||!0!==e[eL])return null;{let{version:t,multihash:n,code:r}=e,i=el(n);return eA.create(t,r,i)}}static create(e,t,n){if("number"!=typeof t)throw Error("String codecs are no longer supported");switch(e){case 0:if(t===eO)return new eA(e,t,n,n.bytes);throw Error(`Version 0 CID must use dag-pb (code: ${eO}) block encoding`);case 1:{let r=eM(e,t,n.bytes);return new eA(e,t,n,r)}default:throw Error("Invalid version")}}static createV0(e){return eA.create(0,eO,e)}static createV1(e,t){return eA.create(1,e,t)}static decode(e){let[t,n]=eA.decodeFirst(e);if(n.length)throw Error("Incorrect length");return t}static decodeFirst(e){let t=eA.inspectBytes(e),n=t.size-t.multihashSize,r=b(e.subarray(n,n+t.multihashSize));if(r.byteLength!==t.multihashSize)throw Error("Incorrect length");let i=r.subarray(t.multihashSize-t.digestSize),o=new ef(t.multihashCode,t.digestSize,i,r);return[0===t.version?eA.createV0(o):eA.createV1(t.codec,o),e.subarray(t.size)]}static inspectBytes(e){let t=0,n=()=>{let[n,r]=ea(e.subarray(t));return t+=r,n},r=n(),i=eO;if(18===r?(r=0,t=0):1===r&&(i=n()),0!==r&&1!==r)throw RangeError(`Invalid CID version ${r}`);let o=t,a=n(),s=n(),u=t+s;return{version:r,codec:i,multihashCode:a,digestSize:s,multihashSize:u-o,size:u}}static parse(e,t){let[n,r]=eP(e,t),i=eA.decode(r);return i._baseCache.set(n,e),i}}let eP=(e,t)=>{switch(e[0]){case"Q":return[Q.prefix,(t||Q).decode(`${Q.prefix}${e}`)];case Q.prefix:return[Q.prefix,(t||Q).decode(e)];case j.prefix:return[j.prefix,(t||j).decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},eN=(e,t,n)=>{let{prefix:r}=n;if(r!==Q.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);let i=t.get(r);if(null!=i)return i;{let i=n.encode(e).slice(1);return t.set(r,i),i}},ex=(e,t,n)=>{let{prefix:r}=n,i=t.get(r);if(null!=i)return i;{let i=n.encode(e);return t.set(r,i),i}},eO=112,eR=18,eM=(e,t,n)=>{let r=eu(e),i=r+eu(t),o=new Uint8Array(i+n.byteLength);return es(e,o,0),es(t,o,r),o.set(n,i),o},eL=Symbol.for("@ipld/js-cid/CID"),eF={writable:!1,configurable:!1,enumerable:!0},ej={writable:!1,enumerable:!1,configurable:!1},eU=(e,t)=>{if(e.test("0.0.0-dev"))console.warn(t);else throw Error(t)},eq=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,eB={...r,...i,...o,...a,...s,...u,...c,...l,...h,...f};({...d,...p});var eV=n(9555);function eW(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}let eK=eW("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),eG=eW("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);let t=(0,eV.E)(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t});var ez={utf8:eK,"utf-8":eK,hex:eB.base16,latin1:eG,ascii:eG,binary:eG,...eB}},6297:function(e,t,n){"use strict";function r(e){return"string"==typeof e?{address:e,type:"json-rpc"}:e}n.d(t,{T:function(){return r}})},8145:function(e,t,n){"use strict";n.d(t,{R:function(){return m}});var r=n(6297),i=n(6098),o=n(8627),a=n(4870),s=n(2123),u=n(2794),c=n(2739),l=n(5994),h=n(5363),f=n(8263),d=n(8558),p=n(2830),g=n(2950),v=n(7951),y=n(8147);async function m(e,t){let{account:i=e.account,batch:u=!!e.batch?.multicall,blockNumber:c,blockTag:l="latest",accessList:v,data:m,gas:_,gasPrice:w,maxFeePerGas:E,maxPriorityFeePerGas:I,nonce:C,to:T,value:S,...k}=t,D=i?(0,r.T)(i):void 0;try{(0,y.F)(t);let n=(c?(0,h.eC)(c):void 0)||l,r=e.chain?.formatters?.transactionRequest?.format||g.tG,i=r({...(0,p.K)(k,{format:r}),from:D?.address,accessList:v,data:m,gas:_,gasPrice:w,maxFeePerGas:E,maxPriorityFeePerGas:I,nonce:C,to:T,value:S});if(u&&function({request:e}){let{data:t,to:n,...r}=e;return!(!t||t.startsWith("0x82ad56cb"))&&!!n&&!(Object.values(r).filter(e=>void 0!==e).length>0)}({request:i}))try{return await b(e,{...i,blockNumber:c,blockTag:l})}catch(e){if(!(e instanceof a.pZ)&&!(e instanceof a.mm))throw e}let o=await e.request({method:"eth_call",params:n?[i,n]:[i]});if("0x"===o)return{data:void 0};return{data:o}}catch(u){let r=function(e){if(!(e instanceof o.G))return;let t=e.walk();return"object"==typeof t.data?t.data.data:t.data}(u),{offchainLookup:i,offchainLookupSignature:a}=await n.e(711).then(n.bind(n,711));if(r?.slice(0,10)===a&&T)return{data:await i(e,{data:r,to:T})};throw function(e,{docsPath:t,...n}){let r=(()=>{let t=(0,d.k)(e,n);return t instanceof f.cj?e:t})();return new s.cg(r,{docsPath:t,...n})}(u,{...t,account:D,chain:e.chain})}}async function b(e,t){let{batchSize:n=1024,wait:r=0}="object"==typeof e.batch?.multicall?e.batch.multicall:{},{blockNumber:o,blockTag:f="latest",data:d,multicallAddress:p,to:g}=t,y=p;if(!y){if(!e.chain)throw new a.pZ;y=(0,l.LI)({blockNumber:o,chain:e.chain,contract:"multicall3"})}let m=(o?(0,h.eC)(o):void 0)||f,{schedule:b}=(0,v.S)({id:`${e.uid}.${m}`,wait:r,shouldSplitBatch:e=>e.reduce((e,{data:t})=>e+(t.length-2),0)>2*n,fn:async t=>{let n=t.map(e=>({allowFailure:!0,callData:e.data,target:e.to})),r=(0,c.R)({abi:i.F8,args:[n],functionName:"aggregate3"}),o=await e.request({method:"eth_call",params:[{data:r,to:y},m]});return(0,u.k)({abi:i.F8,args:[n],functionName:"aggregate3",data:o||"0x"})}}),[{returnData:_,success:w}]=await b({data:d,to:g});if(!w)throw new s.VQ({data:_});return"0x"===_?{data:void 0}:{data:_}}},1572:function(e,t,n){"use strict";n.d(t,{C:function(){return u},X:function(){return s}});var r=n(7138),i=n(9578),o=n(1818),a=n(7344);async function s(e,t){return u(e,t)}async function u(e,t){let{block:n,chain:s=e.chain,request:u,type:c="eip1559"}=t||{},l=await (async()=>"function"==typeof s?.fees?.baseFeeMultiplier?s.fees.baseFeeMultiplier({block:n,client:e,request:u}):s?.fees?.baseFeeMultiplier??1.2)();if(l<1)throw new r.Fz;let h=10**(l.toString().split(".")[1]?.length??0),f=e=>e*BigInt(Math.ceil(l*h))/BigInt(h),d=n||await (0,o.Q)(e);if("function"==typeof s?.fees?.estimateFeesPerGas)return s.fees.estimateFeesPerGas({block:n,client:e,multiply:f,request:u,type:c});if("eip1559"===c){if("bigint"!=typeof d.baseFeePerGas)throw new r.e5;let t=u?.maxPriorityFeePerGas?u.maxPriorityFeePerGas:await (0,i.h)(e,{block:d,chain:s,request:u}),n=f(d.baseFeePerGas);return{maxFeePerGas:u?.maxFeePerGas??n+t,maxPriorityFeePerGas:t}}return{gasPrice:u?.gasPrice??f(await (0,a.o)(e))}}},8014:function(e,t,n){"use strict";n.d(t,{Q:function(){return y}});var r=n(6297),i=n(2492),o=n(5363),a=n(5117),s=n(8174),u=n(8627),c=n(5639);class l extends u.G{constructor(e,{account:t,docsPath:n,chain:r,data:i,gas:o,gasPrice:u,maxFeePerGas:l,maxPriorityFeePerGas:h,nonce:f,to:d,value:p}){super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",(0,c.xr)({from:t?.address,to:d,value:void 0!==p&&`${(0,a.d)(p)} ${r?.nativeCurrency.symbol||"ETH"}`,data:i,gas:o,gasPrice:void 0!==u&&`${(0,s.o)(u)} gwei`,maxFeePerGas:void 0!==l&&`${(0,s.o)(l)} gwei`,maxPriorityFeePerGas:void 0!==h&&`${(0,s.o)(h)} gwei`,nonce:f})].filter(Boolean)}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EstimateGasExecutionError"}),this.cause=e}}var h=n(8263),f=n(8558),d=n(2830),p=n(2950),g=n(8147),v=n(8532);async function y(e,t){let n=t.account??e.account;if(!n)throw new i.o({docsPath:"/docs/actions/public/estimateGas"});let a=(0,r.T)(n);try{let{accessList:n,blockNumber:r,blockTag:i,data:s,gas:u,gasPrice:c,maxFeePerGas:l,maxPriorityFeePerGas:h,nonce:f,to:y,value:m,...b}="local"===a.type?await (0,v.Z)(e,t):t,_=(r?(0,o.eC)(r):void 0)||i;(0,g.F)(t);let w=e.chain?.formatters?.transactionRequest?.format||p.tG,E=w({...(0,d.K)(b,{format:w}),from:a.address,accessList:n,data:s,gas:u,gasPrice:c,maxFeePerGas:l,maxPriorityFeePerGas:h,nonce:f,to:y,value:m}),I=await e.request({method:"eth_estimateGas",params:_?[E,_]:[E]});return BigInt(I)}catch(n){throw function(e,{docsPath:t,...n}){return new l((()=>{let t=(0,f.k)(e,n);return t instanceof h.cj?e:t})(),{docsPath:t,...n})}(n,{...t,account:a,chain:e.chain})}}},9578:function(e,t,n){"use strict";n.d(t,{_:function(){return s},h:function(){return u}});var r=n(7138),i=n(2436),o=n(1818),a=n(7344);async function s(e,t){return u(e,t)}async function u(e,t){let{block:n,chain:s=e.chain,request:u}=t||{};if("function"==typeof s?.fees?.defaultPriorityFee){let t=n||await (0,o.Q)(e);return s.fees.defaultPriorityFee({block:t,client:e,request:u})}if(void 0!==s?.fees?.defaultPriorityFee)return s?.fees?.defaultPriorityFee;try{let t=await e.request({method:"eth_maxPriorityFeePerGas"});return(0,i.y_)(t)}catch{let[t,i]=await Promise.all([n?Promise.resolve(n):(0,o.Q)(e),(0,a.o)(e)]);if("bigint"!=typeof t.baseFeePerGas)throw new r.e5;let s=i-t.baseFeePerGas;if(s<0n)return 0n;return s}}},1818:function(e,t,n){"use strict";n.d(t,{Q:function(){return s}});var r=n(8627);class i extends r.G{constructor({blockHash:e,blockNumber:t}){let n="Block";e&&(n=`Block at hash "${e}"`),t&&(n=`Block at number "${t}"`),super(`${n} could not be found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BlockNotFoundError"})}}var o=n(5363),a=n(2779);async function s(e,{blockHash:t,blockNumber:n,blockTag:r,includeTransactions:s}={}){let u=s??!1,c=void 0!==n?(0,o.eC)(n):void 0,l=null;if(!(l=t?await e.request({method:"eth_getBlockByHash",params:[t,u]}):await e.request({method:"eth_getBlockByNumber",params:[c||(r??"latest"),u]})))throw new i({blockHash:t,blockNumber:n});return(e.chain?.formatters?.block?.format||a.Z)(l)}},8546:function(e,t,n){"use strict";n.d(t,{L:function(){return i}});var r=n(2436);async function i(e){let t=await e.request({method:"eth_chainId"});return(0,r.ly)(t)}},7344:function(e,t,n){"use strict";async function r(e){return BigInt(await e.request({method:"eth_gasPrice"}))}n.d(t,{o:function(){return r}})},5124:function(e,t,n){"use strict";n.d(t,{K:function(){return o}});var r=n(2436),i=n(5363);async function o(e,{address:t,blockTag:n="latest",blockNumber:o}){let a=await e.request({method:"eth_getTransactionCount",params:[t,o?(0,i.eC)(o):n]});return(0,r.ly)(a)}},8532:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(6297),i=n(1572),o=n(8014),a=n(1818),s=n(5124),u=n(2492),c=n(7138),l=n(8147),h=n(5639);async function f(e,t){let{account:n=e.account,chain:f,gas:d,nonce:p,type:g}=t;if(!n)throw new u.o;let v=(0,r.T)(n),y=await (0,a.Q)(e,{blockTag:"latest"}),m={...t,from:v.address};if(void 0===p&&(m.nonce=await (0,s.K)(e,{address:v.address,blockTag:"pending"})),void 0===g)try{m.type=function(e){if(e.type)return e.type;if(void 0!==e.maxFeePerGas||void 0!==e.maxPriorityFeePerGas)return"eip1559";if(void 0!==e.gasPrice)return void 0!==e.accessList?"eip2930":"legacy";throw new h.j3({transaction:e})}(m)}catch{m.type="bigint"==typeof y.baseFeePerGas?"eip1559":"legacy"}if("eip1559"===m.type){let{maxFeePerGas:n,maxPriorityFeePerGas:r}=await (0,i.C)(e,{block:y,chain:f,request:m});if(void 0===t.maxPriorityFeePerGas&&t.maxFeePerGas&&t.maxFeePerGas<r)throw new c.ld({maxPriorityFeePerGas:r});m.maxPriorityFeePerGas=r,m.maxFeePerGas=n}else{if(void 0!==t.maxFeePerGas||void 0!==t.maxPriorityFeePerGas)throw new c.e5;let{gasPrice:n}=await (0,i.C)(e,{block:y,chain:f,request:m,type:"legacy"});m.gasPrice=n}return void 0===d&&(m.gas=await (0,o.Q)(e,{...m,account:{address:v.address,type:"json-rpc"}})),(0,l.F)(m),m}},9367:function(e,t,n){"use strict";async function r(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]})}n.d(t,{p:function(){return r}})},3212:function(e,t,n){"use strict";n.d(t,{y:function(){return r}});let r=(0,n(5994).ax)({id:42161,name:"Arbitrum One",network:"arbitrum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{alchemy:{http:["https://arb-mainnet.g.alchemy.com/v2"],webSocket:["wss://arb-mainnet.g.alchemy.com/v2"]},infura:{http:["https://arbitrum-mainnet.infura.io/v3"],webSocket:["wss://arbitrum-mainnet.infura.io/ws/v3"]},default:{http:["https://arb1.arbitrum.io/rpc"]},public:{http:["https://arb1.arbitrum.io/rpc"]}},blockExplorers:{etherscan:{name:"Arbiscan",url:"https://arbiscan.io"},default:{name:"Arbiscan",url:"https://arbiscan.io"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:7654707}}})},6669:function(e,t,n){"use strict";let r;n.d(t,{e:function(){return a}});var i=n(6297);let o=256;function a(e){let{batch:t,cacheTime:n=e.pollingInterval??4e3,key:a="base",name:s="Base Client",pollingInterval:u=4e3,type:c="base"}=e,l=e.chain,h=e.account?(0,i.T)(e.account):void 0,{config:f,request:d,value:p}=e.transport({chain:l,pollingInterval:u}),g={account:h,batch:t,cacheTime:n,chain:l,key:a,name:s,pollingInterval:u,request:d,transport:{...f,...p},type:c,uid:function(e=11){if(!r||o+e>512){r="",o=0;for(let e=0;e<256;e++)r+=(256+256*Math.random()|0).toString(16).substring(1)}return r.substring(o,o+++e)}()};return Object.assign(g,{extend:function e(t){return n=>{let r=n(t);for(let e in g)delete r[e];let i={...t,...r};return Object.assign(i,{extend:e(i)})}}(g)})}},5032:function(e,t,n){"use strict";n.d(t,{K:function(){return L}});var r=n(6669),i=n(8546),o=n(5363);async function a(e,{chain:t}){let{id:n,name:r,nativeCurrency:i,rpcUrls:a,blockExplorers:s}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:(0,o.eC)(n),chainName:r,nativeCurrency:i,rpcUrls:a.default.http,blockExplorerUrls:s?Object.values(s).map(({url:e})=>e):void 0}]})}var s=n(2051),u=n(6297),c=n(2492),l=n(5994),h=n(8263),f=n(5639),d=n(8558),p=n(2830),g=n(2950),v=n(8147),y=n(8532),m=n(9367);async function b(e,t){let{account:n=e.account,chain:r=e.chain,accessList:o,data:a,gas:s,gasPrice:b,maxFeePerGas:_,maxPriorityFeePerGas:w,nonce:E,to:I,value:C,...T}=t;if(!n)throw new c.o({docsPath:"/docs/actions/wallet/sendTransaction"});let S=(0,u.T)(n);try{let n;if((0,v.F)(t),null!==r&&(n=await (0,i.L)(e),(0,l.qg)({currentChainId:n,chain:r})),"local"===S.type){let t=await (0,y.Z)(e,{account:S,accessList:o,chain:r,data:a,gas:s,gasPrice:b,maxFeePerGas:_,maxPriorityFeePerGas:w,nonce:E,to:I,value:C,...T});n||(n=await (0,i.L)(e));let u=r?.serializers?.transaction,c=await S.signTransaction({...t,chainId:n},{serializer:u});return await (0,m.p)(e,{serializedTransaction:c})}let u=r?.formatters?.transactionRequest?.format||g.tG,c=u({...(0,p.K)(T,{format:u}),accessList:o,data:a,from:S.address,gas:s,gasPrice:b,maxFeePerGas:_,maxPriorityFeePerGas:w,nonce:E,to:I,value:C});return await e.request({method:"eth_sendTransaction",params:[c]})}catch(e){throw function(e,{docsPath:t,...n}){let r=(()=>{let t=(0,d.k)(e,n);return t instanceof h.cj?e:t})();return new f.mk(r,{docsPath:t,...n})}(e,{...t,account:S,chain:t.chain||void 0})}}var _=n(9656);async function w(e){return e.account?.type==="local"?[e.account.address]:(await e.request({method:"eth_accounts"})).map(e=>(0,_.x)(e))}async function E(e){return await e.request({method:"wallet_getPermissions"})}async function I(e){return(await e.request({method:"eth_requestAccounts"})).map(e=>(0,_.K)(e))}async function C(e,t){return e.request({method:"wallet_requestPermissions",params:[t]})}async function T(e,{account:t=e.account,message:n}){if(!t)throw new c.o({docsPath:"/docs/actions/wallet/signMessage"});let r=(0,u.T)(t);if("local"===r.type)return r.signMessage({message:n});let i="string"==typeof n?(0,o.$G)(n):n.raw instanceof Uint8Array?(0,o.NC)(n.raw):n.raw;return e.request({method:"personal_sign",params:[i,r.address]})}async function S(e,t){let{account:n=e.account,chain:r=e.chain,...a}=t;if(!n)throw new c.o({docsPath:"/docs/actions/wallet/signTransaction"});let s=(0,u.T)(n);(0,v.F)({account:s,...t});let h=await (0,i.L)(e);null!==r&&(0,l.qg)({currentChainId:h,chain:r});let f=r?.formatters||e.chain?.formatters,d=f?.transactionRequest?.format||g.tG;return"local"===s.type?s.signTransaction({...a,chainId:h},{serializer:e.chain?.serializers?.transaction}):await e.request({method:"eth_signTransaction",params:[{...d(a),chainId:(0,o.eC)(h),from:s.address}]})}var k=n(2754),D=n(40),A=n(9405);async function P(e,{account:t=e.account,domain:n,message:r,primaryType:i,types:o}){if(!t)throw new c.o({docsPath:"/docs/actions/wallet/signTypedData"});let a=(0,u.T)(t),s={EIP712Domain:(0,A.cj)({domain:n}),...o};if((0,A.iC)({domain:n,message:r,primaryType:i,types:s}),"local"===a.type)return a.signTypedData({domain:n,primaryType:i,types:s,message:r});let l=(0,D.P)({domain:n??{},primaryType:i,types:s,message:r},(e,t)=>(0,k.v)(t)?t.toLowerCase():t);return e.request({method:"eth_signTypedData_v4",params:[a.address,l]})}async function N(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,o.eC)(t)}]})}async function x(e,t){return await e.request({method:"wallet_watchAsset",params:t})}var O=n(2739);async function R(e,{abi:t,address:n,args:r,dataSuffix:i,functionName:o,...a}){let s=(0,O.R)({abi:t,args:r,functionName:o});return await b(e,{data:`${s}${i?i.replace("0x",""):""}`,to:n,...a})}function M(e){return{addChain:t=>a(e,t),deployContract:t=>(function(e,{abi:t,args:n,bytecode:r,...i}){let o=(0,s.w)({abi:t,args:n,bytecode:r});return b(e,{...i,data:o})})(e,t),getAddresses:()=>w(e),getChainId:()=>(0,i.L)(e),getPermissions:()=>E(e),prepareTransactionRequest:t=>(0,y.Z)(e,t),requestAddresses:()=>I(e),requestPermissions:t=>C(e,t),sendRawTransaction:t=>(0,m.p)(e,t),sendTransaction:t=>b(e,t),signMessage:t=>T(e,t),signTransaction:t=>S(e,t),signTypedData:t=>P(e,t),switchChain:t=>N(e,t),watchAsset:t=>x(e,t),writeContract:t=>R(e,t)}}function L(e){let{key:t="wallet",name:n="Wallet Client",transport:i}=e;return(0,r.e)({...e,key:t,name:n,transport:e=>i({...e,retryCount:0}),type:"walletClient"}).extend(M)}},5809:function(e,t,n){"use strict";n.d(t,{q:function(){return i}});var r=n(8803);function i({key:e,name:t,request:n,retryCount:i=3,retryDelay:o=150,timeout:a,type:s},u){return{config:{key:e,name:t,request:n,retryCount:i,retryDelay:o,timeout:a,type:s},request:(0,r.n)(n,{retryCount:i,retryDelay:o}),value:u}}},9854:function(e,t,n){"use strict";n.d(t,{P:function(){return i}});var r=n(5809);function i(e,t={}){let{key:n="custom",name:i="Custom Provider",retryDelay:o}=t;return({retryCount:a})=>(0,r.q)({key:n,name:i,request:e.request.bind(e),retryCount:t.retryCount??a,retryDelay:o,type:"custom"})}},6098:function(e,t,n){"use strict";n.d(t,{$o:function(){return c},F8:function(){return r},X$:function(){return u},du:function(){return a},k3:function(){return o},nZ:function(){return s}});let r=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],i=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"}],o=[...i,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],a=[...i,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],s=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],u=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],c=[{inputs:[{internalType:"address",name:"_signer",type:"address"},{internalType:"bytes32",name:"_hash",type:"bytes32"},{internalType:"bytes",name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"}]},3300:function(e,t,n){"use strict";n.d(t,{$:function(){return r},Up:function(){return i},hZ:function(){return o}});let r={1:"An `assert` condition failed.",17:"Arithmic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},i={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},o={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"}},2523:function(e,t,n){"use strict";n.d(t,{Bd:function(){return o},Zn:function(){return i},ez:function(){return r}});let r={gwei:9,wei:18},i={ether:-9,wei:9},o={ether:-18,gwei:-9}},5530:function(e,t,n){"use strict";n.d(t,{CI:function(){return I},FM:function(){return p},Gy:function(){return w},KY:function(){return b},M4:function(){return h},MX:function(){return m},SM:function(){return _},cO:function(){return s},dh:function(){return E},fM:function(){return a},fs:function(){return f},gr:function(){return l},hn:function(){return C},lC:function(){return g},mv:function(){return v},wM:function(){return T},wb:function(){return c},xB:function(){return u},xL:function(){return y},yP:function(){return d}});var r=n(9416),i=n(9682),o=n(8627);class a extends o.G{constructor({docsPath:e}){super("A constructor was not found on the ABI.\nMake sure you are using the correct ABI and that the constructor exists on it.",{docsPath:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiConstructorNotFoundError"})}}class s extends o.G{constructor({docsPath:e}){super("Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.\nMake sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists.",{docsPath:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiConstructorParamsNotFoundError"})}}class u extends o.G{constructor({data:e,params:t,size:n}){super(`Data size of ${n} bytes is too small for given parameters.`,{metaMessages:[`Params: (${(0,r.h)(t,{includeName:!0})})`,`Data:   ${e} (${n} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=t,this.size=n}}class c extends o.G{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiDecodingZeroDataError"})}}class l extends o.G{constructor({expectedLength:e,givenLength:t,type:n}){super(`ABI encoding array length mismatch for type ${n}.
Expected length: ${e}
Given length: ${t}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingArrayLengthMismatchError"})}}class h extends o.G{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${(0,i.d)(t)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingBytesSizeMismatchError"})}}class f extends o.G{constructor({expectedLength:e,givenLength:t}){super(`ABI encoding params/values length mismatch.
Expected length (params): ${e}
Given length (values): ${t}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingLengthMismatchError"})}}class d extends o.G{constructor(e,{docsPath:t}){super(`Encoded error signature "${e}" not found on ABI.
Make sure you are using the correct ABI and that the error exists on it.
You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`,{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class p extends o.G{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEventSignatureEmptyTopicsError"})}}class g extends o.G{constructor(e,{docsPath:t}){super(`Encoded event signature "${e}" not found on ABI.
Make sure you are using the correct ABI and that the event exists on it.
You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`,{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEventSignatureNotFoundError"})}}class v extends o.G{constructor(e,{docsPath:t}={}){super(`Event ${e?`"${e}" `:""}not found on ABI.
Make sure you are using the correct ABI and that the event exists on it.`,{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEventNotFoundError"})}}class y extends o.G{constructor(e,{docsPath:t}={}){super(`Function ${e?`"${e}" `:""}not found on ABI.
Make sure you are using the correct ABI and that the function exists on it.`,{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiFunctionNotFoundError"})}}class m extends o.G{constructor(e,{docsPath:t}){super(`Function "${e}" does not contain any \`outputs\` on ABI.
Cannot decode function result without knowing what the parameter types are.
Make sure you are using the correct ABI and that the function exists on it.`,{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiFunctionOutputsNotFoundError"})}}class b extends o.G{constructor({expectedSize:e,givenSize:t}){super(`Expected bytes${e}, got bytes${t}.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BytesSizeMismatchError"})}}class _ extends o.G{constructor({abiItem:e,data:t,params:n,size:i}){super(`Data size of ${i} bytes is too small for non-indexed event parameters.`,{metaMessages:[`Params: (${(0,r.h)(n,{includeName:!0})})`,`Data:   ${t} (${i} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=t,this.params=n,this.size=i}}class w extends o.G{constructor({abiItem:e,param:t}){super(`Expected a topic for indexed event parameter${t.name?` "${t.name}"`:""} on event "${(0,r.t)(e,{includeName:!0})}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class E extends o.G{constructor(e,{docsPath:t}){super(`Type "${e}" is not a valid encoding type.
Please provide a valid ABI type.`,{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiEncodingType"})}}class I extends o.G{constructor(e,{docsPath:t}){super(`Type "${e}" is not a valid decoding type.
Please provide a valid ABI type.`,{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiDecodingType"})}}class C extends o.G{constructor(e){super(`Value "${e}" is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidArrayError"})}}class T extends o.G{constructor(e){super(`"${e}" is not a valid definition type.
Valid types: "function", "event", "error"`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidDefinitionTypeError"})}}},2492:function(e,t,n){"use strict";n.d(t,{o:function(){return i}});var r=n(8627);class i extends r.G{constructor({docsPath:e}={}){super("Could not find an Account to execute with this Action.\nPlease provide an Account with the `account` argument on the Action, or by supplying an `account` to the WalletClient.",{docsPath:e,docsSlug:"account"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AccountNotFoundError"})}}},4382:function(e,t,n){"use strict";n.d(t,{b:function(){return i}});var r=n(8627);class i extends r.G{constructor({address:e}){super(`Address "${e}" is invalid.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAddressError"})}}},8627:function(e,t,n){"use strict";n.d(t,{G:function(){return i}});var r=n(7204);class i extends Error{constructor(e,t={}){super(),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ViemError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:(0,r.bo)()});let n=t.cause instanceof i?t.cause.details:t.cause?.message?t.cause.message:t.details,o=t.cause instanceof i&&t.cause.docsPath||t.docsPath;this.message=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...o?[`Docs: https://viem.sh${o}.html${t.docsSlug?`#${t.docsSlug}`:""}`]:[],...n?[`Details: ${n}`]:[],`Version: ${this.version}`].join("\n"),t.cause&&(this.cause=t.cause),this.details=n,this.docsPath=o,this.metaMessages=t.metaMessages,this.shortMessage=e}walk(e){return function e(t,n){return n?.(t)?t:t&&"object"==typeof t&&"cause"in t?e(t.cause,n):n?null:t}(this,e)}}},4870:function(e,t,n){"use strict";n.d(t,{Bk:function(){return a},Yl:function(){return o},mm:function(){return i},pZ:function(){return s}});var r=n(8627);class i extends r.G{constructor({blockNumber:e,chain:t,contract:n}){super(`Chain "${t.name}" does not support contract "${n.name}".`,{metaMessages:["This could be due to any of the following:",...e&&n.blockCreated&&n.blockCreated>e?[`- The contract "${n.name}" was not deployed until block ${n.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${n.name}" configured.`]]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainDoesNotSupportContract"})}}class o extends r.G{constructor({chain:e,currentChainId:t}){super(`The current chain of the wallet (id: ${t}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${t}`,`Expected Chain ID: ${e.id} – ${e.name}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainMismatchError"})}}class a extends r.G{constructor(){super("No chain was provided to the request.\nPlease provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotFoundError"})}}class s extends r.G{constructor(){super("No chain was provided to the Client."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ClientChainNotConfiguredError"})}}},2123:function(e,t,n){"use strict";n.d(t,{cg:function(){return v},uq:function(){return y},Lu:function(){return m},Dk:function(){return b},VQ:function(){return _}});var r=n(6297),i=n(3300),o=n(358),a=n(9416),s=n(40);function u({abiItem:e,args:t,includeFunctionName:n=!0,includeName:r=!1}){if("name"in e&&"inputs"in e&&e.inputs)return`${n?e.name:""}(${e.inputs.map((e,n)=>`${r&&e.name?`${e.name}: `:""}${"object"==typeof t[n]?(0,s.P)(t[n]):t[n]}`).join(", ")})`}var c=n(5961),l=n(5117),h=n(8174),f=n(5530),d=n(8627),p=n(5639),g=n(7204);class v extends d.G{constructor(e,{account:t,docsPath:n,chain:i,data:o,gas:a,gasPrice:s,maxFeePerGas:u,maxPriorityFeePerGas:c,nonce:f,to:d,value:g}){super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",(0,p.xr)({from:(t?(0,r.T)(t):void 0)?.address,to:d,value:void 0!==g&&`${(0,l.d)(g)} ${i?.nativeCurrency.symbol||"ETH"}`,data:o,gas:a,gasPrice:void 0!==s&&`${(0,h.o)(s)} gwei`,maxFeePerGas:void 0!==u&&`${(0,h.o)(u)} gwei`,maxPriorityFeePerGas:void 0!==c&&`${(0,h.o)(c)} gwei`,nonce:f})].filter(Boolean)}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CallExecutionError"}),this.cause=e}}class y extends d.G{constructor(e,{abi:t,args:n,contractAddress:r,docsPath:i,functionName:o,sender:s}){let l=(0,c.m)({abi:t,args:n,name:o}),h=l?u({abiItem:l,args:n,includeFunctionName:!1,includeName:!1}):void 0;super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Contract Call:",(0,p.xr)({address:r&&(0,g.CR)(r),function:l?(0,a.t)(l,{includeName:!0}):void 0,args:h&&"()"!==h&&`${[...Array(o?.length??0).keys()].map(()=>" ").join("")}${h}`,sender:s})].filter(Boolean)}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ContractFunctionExecutionError"}),this.abi=t,this.args=n,this.cause=e,this.contractAddress=r,this.functionName=o,this.sender=s}}class m extends d.G{constructor({abi:e,data:t,functionName:n,message:r}){let s,c,l,h,d;if(t&&"0x"!==t)try{let{abiItem:n,errorName:r,args:s}=d=(0,o.p)({abi:e,data:t});if("Error"===r)l=s[0];else if("Panic"===r){let[e]=s;l=i.$[e]}else{let e=n?(0,a.t)(n,{includeName:!0}):void 0,t=n&&s?u({abiItem:n,args:s,includeFunctionName:!1,includeName:!1}):void 0;c=[e?`Error: ${e}`:"",t&&"()"!==t?`       ${[...Array(r?.length??0).keys()].map(()=>" ").join("")}${t}`:""]}}catch(e){s=e}else r&&(l=r);s instanceof f.yP&&(h=s.signature,c=[`Unable to decode signature "${h}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${h}.`]),super(l&&"execution reverted"!==l||h?[`The contract function "${n}" reverted with the following ${h?"signature":"reason"}:`,l||h].join("\n"):`The contract function "${n}" reverted.`,{cause:s,metaMessages:c}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=d,this.reason=l,this.signature=h}}class b extends d.G{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ContractFunctionZeroDataError"})}}class _ extends d.G{constructor({data:e,message:t}){super(t||""),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RawContractError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}},7053:function(e,t,n){"use strict";n.d(t,{$:function(){return o},m:function(){return i}});var r=n(8627);class i extends r.G{constructor({offset:e,position:t,size:n}){super(`Slice ${"start"===t?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${n}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SliceOffsetOutOfBoundsError"})}}class o extends r.G{constructor({size:e,targetSize:t,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeExceedsPaddingSizeError"})}}},3106:function(e,t,n){"use strict";n.d(t,{Cd:function(){return o},J5:function(){return i},M6:function(){return a}});var r=n(8627);class i extends r.G{constructor({max:e,min:t,signed:n,size:r,value:i}){super(`Number "${i}" is not in safe ${r?`${8*r}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntegerOutOfRangeError"})}}class o extends r.G{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidHexBooleanError"})}}class a extends r.G{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeOverflowError"})}}},7138:function(e,t,n){"use strict";n.d(t,{Fz:function(){return o},e5:function(){return a},ld:function(){return s}});var r=n(8174),i=n(8627);class o extends i.G{constructor(){super("`baseFeeMultiplier` must be greater than 1."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseFeeScalarError"})}}class a extends i.G{constructor(){super("Chain does not support EIP-1559 fees."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Eip1559FeesNotSupportedError"})}}class s extends i.G{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${(0,r.o)(e)} gwei).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"MaxFeePerGasTooLowError"})}}},8263:function(e,t,n){"use strict";n.d(t,{C_:function(){return h},G$:function(){return s},Hh:function(){return a},M_:function(){return o},WF:function(){return f},ZI:function(){return u},cj:function(){return v},cs:function(){return g},dR:function(){return d},pZ:function(){return p},se:function(){return l},vU:function(){return c}});var r=n(8174),i=n(8627);class o extends i.G{constructor({cause:e,message:t}={}){let n=t?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${n?`with reason: ${n}`:"for an unknown reason"}.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ExecutionRevertedError"})}}Object.defineProperty(o,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(o,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class a extends i.G{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${(0,r.o)(t)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeCapTooHigh"})}}Object.defineProperty(a,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class s extends i.G{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${(0,r.o)(t)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeCapTooLow"})}}Object.defineProperty(s,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class u extends i.G{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}is higher than the next one expected.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NonceTooHighError"})}}Object.defineProperty(u,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class c extends i.G{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}is lower than the current nonce of the account.
Try increasing the nonce or find the latest nonce with \`getTransactionCount\`.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NonceTooLowError"})}}Object.defineProperty(c,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class l extends i.G{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}exceeds the maximum allowed nonce.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NonceMaxValueError"})}}Object.defineProperty(l,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class h extends i.G{constructor({cause:e}={}){super("The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account.",{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InsufficientFundsError"})}}Object.defineProperty(h,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds/});class f extends i.G{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntrinsicGasTooHighError"})}}Object.defineProperty(f,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class d extends i.G{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction is too low.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntrinsicGasTooLowError"})}}Object.defineProperty(d,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class p extends i.G{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionTypeNotSupportedError"})}}Object.defineProperty(p,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class g extends i.G{constructor({cause:e,maxPriorityFeePerGas:t,maxFeePerGas:n}={}){super(`The provided tip (\`maxPriorityFeePerGas\`${t?` = ${(0,r.o)(t)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${n?` = ${(0,r.o)(n)} gwei`:""}).`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TipAboveFeeCapError"})}}Object.defineProperty(g,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class v extends i.G{constructor({cause:e}){super(`An error occurred while executing: ${e?.shortMessage}`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownNodeError"})}}},2109:function(e,t,n){"use strict";n.d(t,{Gg:function(){return a},W5:function(){return c},bs:function(){return u},c9:function(){return s}});var r=n(40),i=n(8627),o=n(7204);class a extends i.G{constructor({body:e,details:t,headers:n,status:i,url:a}){super("HTTP request failed.",{details:t,metaMessages:[i&&`Status: ${i}`,`URL: ${(0,o.Gr)(a)}`,e&&`Request body: ${(0,r.P)(e)}`].filter(Boolean)}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=n,this.status=i,this.url=a}}class s extends i.G{constructor({body:e,details:t,url:n}){super("WebSocket request failed.",{details:t,metaMessages:[`URL: ${(0,o.Gr)(n)}`,`Request body: ${(0,r.P)(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WebSocketRequestError"})}}class u extends i.G{constructor({body:e,error:t,url:n}){super("RPC Request failed.",{cause:t,details:t.message,metaMessages:[`URL: ${(0,o.Gr)(n)}`,`Request body: ${(0,r.P)(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t.code}}class c extends i.G{constructor({body:e,url:t}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${(0,o.Gr)(t)}`,`Request body: ${(0,r.P)(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TimeoutError"})}}},9200:function(e,t,n){"use strict";n.d(t,{B:function(){return u},GD:function(){return m},I0:function(){return I},KB:function(){return g},LX:function(){return c},Og:function(){return d},PE:function(){return _},Pv:function(){return y},Ts:function(){return w},XS:function(){return h},ab:function(){return b},gS:function(){return v},ir:function(){return T},nY:function(){return l},pT:function(){return p},s7:function(){return s},u5:function(){return E},x3:function(){return C},yR:function(){return f}});var r=n(8627),i=n(2109);class o extends r.G{constructor(e,{code:t,docsPath:n,metaMessages:r,shortMessage:o}){super(o,{cause:e,docsPath:n,metaMessages:r||e?.metaMessages}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.code=e instanceof i.bs?e.code:t??-1}}class a extends o{constructor(e,t){super(e,t),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderRpcError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t.data}}class s extends o{constructor(e){super(e,{code:s.code,shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ParseRpcError"})}}Object.defineProperty(s,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class u extends o{constructor(e){super(e,{code:u.code,shortMessage:"JSON is not a valid request object."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidRequestRpcError"})}}Object.defineProperty(u,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class c extends o{constructor(e){super(e,{code:c.code,shortMessage:"The method does not exist / is not available."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"MethodNotFoundRpcError"})}}Object.defineProperty(c,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class l extends o{constructor(e){super(e,{code:l.code,shortMessage:"Invalid parameters were provided to the RPC method.\nDouble check you have provided the correct parameters."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParamsRpcError"})}}Object.defineProperty(l,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class h extends o{constructor(e){super(e,{code:h.code,shortMessage:"An internal error was received."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InternalRpcError"})}}Object.defineProperty(h,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class f extends o{constructor(e){super(e,{code:f.code,shortMessage:"Missing or invalid parameters.\nDouble check you have provided the correct parameters."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidInputRpcError"})}}Object.defineProperty(f,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class d extends o{constructor(e){super(e,{code:d.code,shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(d,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class p extends o{constructor(e){super(e,{code:p.code,shortMessage:"Requested resource not available."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceUnavailableRpcError"})}}Object.defineProperty(p,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class g extends o{constructor(e){super(e,{code:g.code,shortMessage:"Transaction creation failed."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionRejectedRpcError"})}}Object.defineProperty(g,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class v extends o{constructor(e){super(e,{code:v.code,shortMessage:"Method is not implemented."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"MethodNotSupportedRpcError"})}}Object.defineProperty(v,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class y extends o{constructor(e){super(e,{code:y.code,shortMessage:"Request exceeds defined limit."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"LimitExceededRpcError"})}}Object.defineProperty(y,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class m extends o{constructor(e){super(e,{code:m.code,shortMessage:"Version of JSON-RPC protocol is not supported."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"JsonRpcVersionUnsupportedError"})}}Object.defineProperty(m,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class b extends a{constructor(e){super(e,{code:b.code,shortMessage:"User rejected the request."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UserRejectedRequestError"})}}Object.defineProperty(b,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class _ extends a{constructor(e){super(e,{code:_.code,shortMessage:"The requested method and/or account has not been authorized by the user."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnauthorizedProviderError"})}}Object.defineProperty(_,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class w extends a{constructor(e){super(e,{code:w.code,shortMessage:"The Provider does not support the requested method."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnsupportedProviderMethodError"})}}Object.defineProperty(w,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class E extends a{constructor(e){super(e,{code:E.code,shortMessage:"The Provider is disconnected from all chains."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderDisconnectedError"})}}Object.defineProperty(E,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class I extends a{constructor(e){super(e,{code:I.code,shortMessage:"The Provider is not connected to the requested chain."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainDisconnectedError"})}}Object.defineProperty(I,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class C extends a{constructor(e){super(e,{code:C.code,shortMessage:"An error occurred when attempting to switch chain."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainError"})}}Object.defineProperty(C,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class T extends o{constructor(e){super(e,{shortMessage:"An unknown RPC error occurred."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownRpcError"})}}},5639:function(e,t,n){"use strict";n.d(t,{Bh:function(){return l},Yb:function(){return h},j3:function(){return u},mc:function(){return f},mk:function(){return c},xY:function(){return s},xr:function(){return a}});var r=n(5117),i=n(8174),o=n(8627);function a(e){let t=Object.entries(e).map(([e,t])=>void 0===t||!1===t?null:[e,t]).filter(Boolean),n=t.reduce((e,[t])=>Math.max(e,t.length),0);return t.map(([e,t])=>`  ${`${e}:`.padEnd(n+1)}  ${t}`).join("\n")}class s extends o.G{constructor(){super("Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.\nUse `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeConflictError"})}}class u extends o.G{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",a(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- a Legacy Transaction with `gasPrice`"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSerializableTransactionError"})}}class c extends o.G{constructor(e,{account:t,docsPath:n,chain:o,data:s,gas:u,gasPrice:c,maxFeePerGas:l,maxPriorityFeePerGas:h,nonce:f,to:d,value:p}){super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",a({chain:o&&`${o?.name} (id: ${o?.id})`,from:t?.address,to:d,value:void 0!==p&&`${(0,r.d)(p)} ${o?.nativeCurrency.symbol||"ETH"}`,data:s,gas:u,gasPrice:void 0!==c&&`${(0,i.o)(c)} gwei`,maxFeePerGas:void 0!==l&&`${(0,i.o)(l)} gwei`,maxPriorityFeePerGas:void 0!==h&&`${(0,i.o)(h)} gwei`,nonce:f})].filter(Boolean)}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionExecutionError"}),this.cause=e}}class l extends o.G{constructor({blockHash:e,blockNumber:t,blockTag:n,hash:r,index:i}){let o="Transaction";n&&void 0!==i&&(o=`Transaction at block time "${n}" at index "${i}"`),e&&void 0!==i&&(o=`Transaction at block hash "${e}" at index "${i}"`),t&&void 0!==i&&(o=`Transaction at block number "${t}" at index "${i}"`),r&&(o=`Transaction with hash "${r}"`),super(`${o} could not be found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionNotFoundError"})}}class h extends o.G{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionReceiptNotFoundError"})}}class f extends o.G{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WaitForTransactionReceiptTimeoutError"})}}},7204:function(e,t,n){"use strict";n.d(t,{CR:function(){return r},Gr:function(){return i},bo:function(){return o}});let r=e=>e,i=e=>e,o=()=>"viem@1.16.5"},6687:function(e,t,n){"use strict";n.d(t,{r:function(){return l}});var r=n(5530),i=n(9656),o=n(9682),a=n(7408),s=n(9836),u=n(2436),c=n(4541);function l(e,t){if("0x"===t&&e.length>0)throw new r.wb;if((0,o.d)(t)&&32>(0,o.d)(t))throw new r.xB({data:t,params:e,size:(0,o.d)(t)});return function({data:e,params:t}){let n=[],l=0;for(let f=0;f<t.length;f++){if(l>=(0,o.d)(e))throw new r.xB({data:e,params:t,size:(0,o.d)(e)});let{consumed:d,value:p}=function e({data:t,param:n,position:o}){let l=(0,c.S)(n.type);if(l){let[r,i]=l;return function(t,{param:n,length:r,position:i}){if(!r){let r=(0,u.ly)((0,a.tP)(t,i,i+32,{strict:!0})),o=(0,u.ly)((0,a.tP)(t,r,r+32,{strict:!0})),s=0,c=[];for(let i=0;i<o;++i){let i=e({data:(0,a.tP)(t,r+32),param:n,position:s});s+=i.consumed,c.push(i.value)}return{value:c,consumed:32}}if(h(n)){let o=(0,c.S)(n.type),s=!o?.[0],l=0,h=[];for(let o=0;o<r;++o){let r=(0,u.ly)((0,a.tP)(t,i,i+32,{strict:!0})),c=e({data:(0,a.tP)(t,r),param:n,position:s?l:32*o});l+=c.consumed,h.push(c.value)}return{value:h,consumed:32}}let o=0,s=[];for(let a=0;a<r;++a){let r=e({data:t,param:n,position:i+o});o+=r.consumed,s.push(r.value)}return{value:s,consumed:o}}(t,{length:r,param:{...n,type:i},position:o})}if("tuple"===n.type)return function(t,{param:n,position:r}){let i=0===n.components.length||n.components.some(({name:e})=>!e),o=i?[]:{},s=0;if(h(n)){let c=(0,u.ly)((0,a.tP)(t,r,r+32,{strict:!0}));for(let r=0;r<n.components.length;++r){let u=n.components[r],l=e({data:(0,a.tP)(t,c),param:u,position:s});s+=l.consumed,o[i?r:u?.name]=l.value}return{consumed:32,value:o}}for(let a=0;a<n.components.length;++a){let u=n.components[a],c=e({data:t,param:u,position:r+s});s+=c.consumed,o[i?a:u?.name]=c.value}return{consumed:s,value:o}}(t,{param:n,position:o});if("string"===n.type)return function(e,{position:t}){let n=(0,u.ly)((0,a.tP)(e,t,t+32,{strict:!0})),r=(0,u.ly)((0,a.tP)(e,n,n+32,{strict:!0}));return 0===r?{consumed:32,value:""}:{consumed:32,value:(0,u.rR)((0,s.f)((0,a.tP)(e,n+32,n+32+r,{strict:!0})))}}(t,{position:o});if(n.type.startsWith("bytes"))return function(e,{param:t,position:n}){let[r,i]=t.type.split("bytes");if(!i){let t=(0,u.ly)((0,a.tP)(e,n,n+32,{strict:!0})),r=(0,u.ly)((0,a.tP)(e,t,t+32,{strict:!0}));return 0===r?{consumed:32,value:"0x"}:{consumed:32,value:(0,a.tP)(e,t+32,t+32+r,{strict:!0})}}return{consumed:32,value:(0,a.tP)(e,n,n+parseInt(i),{strict:!0})}}(t,{param:n,position:o});let f=(0,a.tP)(t,o,o+32,{strict:!0});if(n.type.startsWith("uint")||n.type.startsWith("int"))return function(e,{param:t}){let n=t.type.startsWith("int");return{consumed:32,value:parseInt(t.type.split("int")[1]||"256")>48?(0,u.y_)(e,{signed:n}):(0,u.ly)(e,{signed:n})}}(f,{param:n});if("address"===n.type)return{consumed:32,value:(0,i.x)((0,a.tP)(f,-20))};if("bool"===n.type)return{consumed:32,value:(0,u.XA)(f)};throw new r.CI(n.type,{docsPath:"/docs/contract/decodeAbiParameters"})}({data:e,param:t[f],position:l});n.push(p),l+=d}return n}({data:t,params:e})}function h(e){let{type:t}=e;if("string"===t||"bytes"===t||t.endsWith("[]"))return!0;if("tuple"===t)return e.components?.some(h);let n=(0,c.S)(e.type);return!!(n&&h({...e,type:n[1]}))}},358:function(e,t,n){"use strict";n.d(t,{p:function(){return c}});var r=n(3300),i=n(5530),o=n(7408),a=n(5554),s=n(6687),u=n(9416);function c({abi:e,data:t}){let n=(0,o.tP)(t,0,4);if("0x"===n)throw new i.wb;let c=[...e||[],r.Up,r.hZ].find(e=>"error"===e.type&&n===(0,a.o)((0,u.t)(e)));if(!c)throw new i.yP(n,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:c,args:"inputs"in c&&c.inputs&&c.inputs.length>0?(0,s.r)(c.inputs,(0,o.tP)(t,4)):void 0,errorName:c.name}}},2794:function(e,t,n){"use strict";n.d(t,{k:function(){return s}});var r=n(5530),i=n(6687),o=n(5961);let a="/docs/contract/decodeFunctionResult";function s({abi:e,args:t,functionName:n,data:s}){let u=e[0];if(n&&!(u=(0,o.m)({abi:e,args:t,name:n})))throw new r.xL(n,{docsPath:a});if("function"!==u.type)throw new r.xL(void 0,{docsPath:a});if(!u.outputs)throw new r.MX(u.name,{docsPath:a});let c=(0,i.r)(u.outputs,s);return c&&c.length>1?c:c&&1===c.length?c[0]:void 0}},4541:function(e,t,n){"use strict";n.d(t,{E:function(){return h},S:function(){return d}});var r=n(5530),i=n(4382),o=n(4190),a=n(9933),s=n(1057),u=n(9682),c=n(7408),l=n(5363);function h(e,t){if(e.length!==t.length)throw new r.fs({expectedLength:e.length,givenLength:t.length});let n=f(function({params:e,values:t}){let n=[];for(let h=0;h<e.length;h++)n.push(function e({param:t,value:n}){let h=d(t.type);if(h){let[i,o]=h;return function(t,{length:n,param:i}){let o=null===n;if(!Array.isArray(t))throw new r.hn(t);if(!o&&t.length!==n)throw new r.gr({expectedLength:n,givenLength:t.length,type:`${i.type}[${n}]`});let s=!1,u=[];for(let n=0;n<t.length;n++){let r=e({param:i,value:t[n]});r.dynamic&&(s=!0),u.push(r)}if(o||s){let e=f(u);if(o){let t=(0,l.eC)(u.length,{size:32});return{dynamic:!0,encoded:u.length>0?(0,a.zo)([t,e]):t}}if(s)return{dynamic:!0,encoded:e}}return{dynamic:!1,encoded:(0,a.zo)(u.map(({encoded:e})=>e))}}(n,{length:i,param:{...t,type:o}})}if("tuple"===t.type)return function(t,{param:n}){let r=!1,i=[];for(let o=0;o<n.components.length;o++){let a=n.components[o],s=Array.isArray(t)?o:a.name,u=e({param:a,value:t[s]});i.push(u),u.dynamic&&(r=!0)}return{dynamic:r,encoded:r?f(i):(0,a.zo)(i.map(({encoded:e})=>e))}}(n,{param:t});if("address"===t.type)return function(e){if(!(0,o.U)(e))throw new i.b({address:e});return{dynamic:!1,encoded:(0,s.gc)(e.toLowerCase())}}(n);if("bool"===t.type)return{dynamic:!1,encoded:(0,s.gc)((0,l.C4)(n))};if(t.type.startsWith("uint")||t.type.startsWith("int"))return function(e,{signed:t}){return{dynamic:!1,encoded:(0,l.eC)(e,{size:32,signed:t})}}(n,{signed:t.type.startsWith("int")});if(t.type.startsWith("bytes"))return function(e,{param:t}){let[,n]=t.type.split("bytes"),i=(0,u.d)(e);if(!n){let t=e;return i%32!=0&&(t=(0,s.gc)(t,{dir:"right",size:32*Math.ceil((e.length-2)/2/32)})),{dynamic:!0,encoded:(0,a.zo)([(0,s.gc)((0,l.eC)(i,{size:32})),t])}}if(i!==parseInt(n))throw new r.M4({expectedSize:parseInt(n),value:e});return{dynamic:!1,encoded:(0,s.gc)(e,{dir:"right"})}}(n,{param:t});if("string"===t.type)return function(e){let t=(0,l.$G)(e),n=Math.ceil((0,u.d)(t)/32),r=[];for(let e=0;e<n;e++)r.push((0,s.gc)((0,c.tP)(t,32*e,(e+1)*32),{dir:"right"}));return{dynamic:!0,encoded:(0,a.zo)([(0,s.gc)((0,l.eC)((0,u.d)(t),{size:32})),...r])}}(n);throw new r.dh(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}({param:e[h],value:t[h]}));return n}({params:e,values:t}));return 0===n.length?"0x":n}function f(e){let t=0;for(let n=0;n<e.length;n++){let{dynamic:r,encoded:i}=e[n];r?t+=32:t+=(0,u.d)(i)}let n=[],r=[],i=0;for(let o=0;o<e.length;o++){let{dynamic:a,encoded:s}=e[o];a?(n.push((0,l.eC)(t+i,{size:32})),r.push(s),i+=(0,u.d)(s)):n.push(s)}return(0,a.zo)([...n,...r])}function d(e){let t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}},2051:function(e,t,n){"use strict";n.d(t,{w:function(){return s}});var r=n(5530),i=n(9933),o=n(4541);let a="/docs/contract/encodeDeployData";function s({abi:e,args:t,bytecode:n}){if(!t||0===t.length)return n;let s=e.find(e=>"type"in e&&"constructor"===e.type);if(!s)throw new r.fM({docsPath:a});if(!("inputs"in s)||!s.inputs||0===s.inputs.length)throw new r.cO({docsPath:a});let u=(0,o.E)(s.inputs,t);return(0,i.SM)([n,u])}},2739:function(e,t,n){"use strict";n.d(t,{R:function(){return c}});var r=n(5530),i=n(9933),o=n(5554),a=n(4541),s=n(9416),u=n(5961);function c({abi:e,args:t,functionName:n}){let c=e[0];if(n&&!(c=(0,u.m)({abi:e,args:t,name:n})))throw new r.xL(n,{docsPath:"/docs/contract/encodeFunctionData"});if("function"!==c.type)throw new r.xL(void 0,{docsPath:"/docs/contract/encodeFunctionData"});let l=(0,s.t)(c),h=(0,o.o)(l),f="inputs"in c&&c.inputs?(0,a.E)(c.inputs,t??[]):void 0;return(0,i.SM)([h,f??"0x"])}},9416:function(e,t,n){"use strict";n.d(t,{h:function(){return o},t:function(){return i}});var r=n(5530);function i(e,{includeName:t=!1}={}){if("function"!==e.type&&"event"!==e.type&&"error"!==e.type)throw new r.wM(e.type);return`${e.name}(${o(e.inputs,{includeName:t})})`}function o(e,{includeName:t=!1}={}){return e?e.map(e=>(function(e,{includeName:t}){return e.type.startsWith("tuple")?`(${o(e.components,{includeName:t})})${e.type.slice(5)}`:e.type+(t&&e.name?` ${e.name}`:"")})(e,{includeName:t})).join(t?", ":","):""}},5961:function(e,t,n){"use strict";n.d(t,{m:function(){return s}});var r=n(2754),i=n(2662),o=n(5554),a=n(4190);function s({abi:e,args:t=[],name:n}){let s=(0,r.v)(n,{strict:!1}),u=e.filter(e=>s?"function"===e.type?(0,o.o)(e)===n:"event"===e.type&&(0,i.e)(e)===n:"name"in e&&e.name===n);if(0!==u.length){if(1===u.length)return u[0];for(let e of u)if("inputs"in e){if(!t||0===t.length){if(!e.inputs||0===e.inputs.length)return e;continue}if(e.inputs&&0!==e.inputs.length&&e.inputs.length===t.length&&t.every((t,n)=>{let r="inputs"in e&&e.inputs[n];return!!r&&function e(t,n){let r=typeof t,i=n.type;switch(i){case"address":return(0,a.U)(t);case"bool":return"boolean"===r;case"function":case"string":return"string"===r;default:if("tuple"===i&&"components"in n)return Object.values(n.components).every((n,r)=>e(Object.values(t)[r],n));if(/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(i))return"number"===r||"bigint"===r;if(/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(i))return"string"===r||t instanceof Uint8Array;if(/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(i))return Array.isArray(t)&&t.every(t=>e(t,{...n,type:i.replace(/(\[[0-9]{0,}\])$/,"")}));return!1}}(t,r)}))return e}return u[0]}}},9656:function(e,t,n){"use strict";n.d(t,{K:function(){return u},x:function(){return s}});var r=n(4382),i=n(9163),o=n(6084),a=n(4190);function s(e,t){let n=t?`${t}${e.toLowerCase()}`:e.substring(2).toLowerCase(),r=(0,o.w)((0,i.qX)(n),"bytes"),a=(t?n.substring(`${t}0x`.length):n).split("");for(let e=0;e<40;e+=2)r[e>>1]>>4>=8&&a[e]&&(a[e]=a[e].toUpperCase()),(15&r[e>>1])>=8&&a[e+1]&&(a[e+1]=a[e+1].toUpperCase());return`0x${a.join("")}`}function u(e,t){if(!(0,a.U)(e))throw new r.b({address:e});return s(e,t)}},4190:function(e,t,n){"use strict";n.d(t,{U:function(){return i}});let r=/^0x[a-fA-F0-9]{40}$/;function i(e){return r.test(e)}},8803:function(e,t,n){"use strict";n.d(t,{n:function(){return u},y:function(){return s}});var r=n(8627),i=n(2109),o=n(9200),a=n(6485);let s=e=>"code"in e?-1!==e.code&&-32004!==e.code&&-32005!==e.code&&-32042!==e.code&&-32603!==e.code:e instanceof i.Gg&&!!e.status&&403!==e.status&&408!==e.status&&413!==e.status&&429!==e.status&&500!==e.status&&502!==e.status&&503!==e.status&&504!==e.status;function u(e,{retryDelay:t=150,retryCount:n=3}={}){return async u=>(0,a.J)(async()=>{try{return await e(u)}catch(e){switch(e.code){case o.s7.code:throw new o.s7(e);case o.B.code:throw new o.B(e);case o.LX.code:throw new o.LX(e);case o.nY.code:throw new o.nY(e);case o.XS.code:throw new o.XS(e);case o.yR.code:throw new o.yR(e);case o.Og.code:throw new o.Og(e);case o.pT.code:throw new o.pT(e);case o.KB.code:throw new o.KB(e);case o.gS.code:throw new o.gS(e);case o.Pv.code:throw new o.Pv(e);case o.GD.code:throw new o.GD(e);case o.ab.code:throw new o.ab(e);case o.PE.code:throw new o.PE(e);case o.Ts.code:throw new o.Ts(e);case o.u5.code:throw new o.u5(e);case o.I0.code:throw new o.I0(e);case o.x3.code:throw new o.x3(e);case 5e3:throw new o.ab(e);default:if(e instanceof r.G)throw e;throw new o.ir(e)}}},{delay:({count:e,error:n})=>{if(n&&n instanceof i.Gg){let e=n?.headers?.get("Retry-After");if(e?.match(/\d/))return 1e3*parseInt(e)}return~~(1<<e)*t},retryCount:n,shouldRetry:({error:e})=>!s(e)})}},5994:function(e,t,n){"use strict";n.d(t,{LI:function(){return a},ax:function(){return o},qg:function(){return i}});var r=n(4870);function i({chain:e,currentChainId:t}){if(!e)throw new r.Bk;if(t!==e.id)throw new r.Yl({chain:e,currentChainId:t})}function o(e,t={}){let{fees:n=e.fees,formatters:r=e.formatters,serializers:i=e.serializers}=t;return{...e,fees:n,formatters:r,serializers:i}}function a({blockNumber:e,chain:t,contract:n}){let i=t?.contracts?.[n];if(!i)throw new r.mm({chain:t,contract:{name:n}});if(e&&i.blockCreated&&i.blockCreated>e)throw new r.mm({blockNumber:e,chain:t,contract:{name:n,blockCreated:i.blockCreated}});return i.address}},9933:function(e,t,n){"use strict";function r(e){return"string"==typeof e[0]?i(e):function(e){let t=0;for(let n of e)t+=n.length;let n=new Uint8Array(t),r=0;for(let t of e)n.set(t,r),r+=t.length;return n}(e)}function i(e){return`0x${e.reduce((e,t)=>e+t.replace("0x",""),"")}`}n.d(t,{SM:function(){return i},zo:function(){return r}})},2754:function(e,t,n){"use strict";function r(e,{strict:t=!0}={}){return!!e&&"string"==typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x"))}n.d(t,{v:function(){return r}})},1057:function(e,t,n){"use strict";n.d(t,{gc:function(){return o},vk:function(){return i}});var r=n(7053);function i(e,{dir:t,size:n=32}={}){return"string"==typeof e?o(e,{dir:t,size:n}):function(e,{dir:t,size:n=32}={}){if(null===n)return e;if(e.length>n)throw new r.$({size:e.length,targetSize:n,type:"bytes"});let i=new Uint8Array(n);for(let r=0;r<n;r++){let o="right"===t;i[o?r:n-r-1]=e[o?r:e.length-r-1]}return i}(e,{dir:t,size:n})}function o(e,{dir:t,size:n=32}={}){if(null===n)return e;let i=e.replace("0x","");if(i.length>2*n)throw new r.$({size:Math.ceil(i.length/2),targetSize:n,type:"hex"});return`0x${i["right"===t?"padEnd":"padStart"](2*n,"0")}`}},9682:function(e,t,n){"use strict";n.d(t,{d:function(){return i}});var r=n(2754);function i(e){return(0,r.v)(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}},7408:function(e,t,n){"use strict";n.d(t,{tP:function(){return a}});var r=n(7053),i=n(2754),o=n(9682);function a(e,t,n,{strict:r}={}){return(0,i.v)(e,{strict:!1})?function(e,t,n,{strict:r}={}){s(e,t);let i=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return r&&u(i,t,n),i}(e,t,n,{strict:r}):function(e,t,n,{strict:r}={}){s(e,t);let i=e.slice(t,n);return r&&u(i,t,n),i}(e,t,n,{strict:r})}function s(e,t){if("number"==typeof t&&t>0&&t>(0,o.d)(e)-1)throw new r.m({offset:t,position:"start",size:(0,o.d)(e)})}function u(e,t,n){if("number"==typeof t&&"number"==typeof n&&(0,o.d)(e)!==n-t)throw new r.m({offset:n,position:"end",size:(0,o.d)(e)})}},9836:function(e,t,n){"use strict";function r(e,{dir:t="left"}={}){let n="string"==typeof e?e.replace("0x",""):e,r=0;for(let e=0;e<n.length-1&&"0"===n["left"===t?e:n.length-e-1].toString();e++)r++;return(n="left"===t?n.slice(r):n.slice(0,n.length-r),"string"==typeof e)?(1===n.length&&"right"===t&&(n=`${n}0`),`0x${n.length%2==1?`0${n}`:n}`):n}n.d(t,{f:function(){return r}})},2436:function(e,t,n){"use strict";n.d(t,{XA:function(){return c},Yf:function(){return s},ly:function(){return l},rR:function(){return h},y_:function(){return u}});var r=n(3106),i=n(9682),o=n(9836),a=n(9163);function s(e,{size:t}){if((0,i.d)(e)>t)throw new r.M6({givenSize:(0,i.d)(e),maxSize:t})}function u(e,t={}){let{signed:n}=t;t.size&&s(e,{size:t.size});let r=BigInt(e);if(!n)return r;let i=(e.length-2)/2;return r<=(1n<<8n*BigInt(i)-1n)-1n?r:r-BigInt(`0x${"f".padStart(2*i,"f")}`)-1n}function c(e,t={}){let n=e;if(t.size&&(s(n,{size:t.size}),n=(0,o.f)(n)),"0x00"===(0,o.f)(n))return!1;if("0x01"===(0,o.f)(n))return!0;throw new r.Cd(n)}function l(e,t={}){return Number(u(e,t))}function h(e,t={}){let n=(0,a.nr)(e);return t.size&&(s(n,{size:t.size}),n=(0,o.f)(n,{dir:"right"})),new TextDecoder().decode(n)}},9163:function(e,t,n){"use strict";n.d(t,{O0:function(){return c},nr:function(){return f},qX:function(){return d}});var r=n(8627),i=n(2754),o=n(1057),a=n(2436),s=n(5363);let u=new TextEncoder;function c(e,t={}){return"number"==typeof e||"bigint"==typeof e?f((0,s.eC)(e,t)):"boolean"==typeof e?function(e,t={}){let n=new Uint8Array(1);return(n[0]=Number(e),"number"==typeof t.size)?((0,a.Yf)(n,{size:t.size}),(0,o.vk)(n,{size:t.size})):n}(e,t):(0,i.v)(e)?f(e,t):d(e,t)}let l={zero:48,nine:57,A:65,F:70,a:97,f:102};function h(e){return e>=l.zero&&e<=l.nine?e-l.zero:e>=l.A&&e<=l.F?e-(l.A-10):e>=l.a&&e<=l.f?e-(l.a-10):void 0}function f(e,t={}){let n=e;t.size&&((0,a.Yf)(n,{size:t.size}),n=(0,o.vk)(n,{dir:"right",size:t.size}));let i=n.slice(2);i.length%2&&(i=`0${i}`);let s=i.length/2,u=new Uint8Array(s);for(let e=0,t=0;e<s;e++){let n=h(i.charCodeAt(t++)),o=h(i.charCodeAt(t++));if(void 0===n||void 0===o)throw new r.G(`Invalid byte sequence ("${i[t-2]}${i[t-1]}" in "${i}").`);u[e]=16*n+o}return u}function d(e,t={}){let n=u.encode(e);return"number"==typeof t.size?((0,a.Yf)(n,{size:t.size}),(0,o.vk)(n,{dir:"right",size:t.size})):n}},5363:function(e,t,n){"use strict";n.d(t,{$G:function(){return f},C4:function(){return u},NC:function(){return s},ci:function(){return c},eC:function(){return l}});var r=n(3106),i=n(1057),o=n(2436);let a=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function s(e,t={}){return"number"==typeof e||"bigint"==typeof e?l(e,t):"string"==typeof e?f(e,t):"boolean"==typeof e?u(e,t):c(e,t)}function u(e,t={}){let n=`0x${Number(e)}`;return"number"==typeof t.size?((0,o.Yf)(n,{size:t.size}),(0,i.vk)(n,{size:t.size})):n}function c(e,t={}){let n="";for(let t=0;t<e.length;t++)n+=a[e[t]];let r=`0x${n}`;return"number"==typeof t.size?((0,o.Yf)(r,{size:t.size}),(0,i.vk)(r,{dir:"right",size:t.size})):r}function l(e,t={}){let n;let{signed:o,size:a}=t,s=BigInt(e);a?n=o?(1n<<8n*BigInt(a)-1n)-1n:2n**(8n*BigInt(a))-1n:"number"==typeof e&&(n=BigInt(Number.MAX_SAFE_INTEGER));let u="bigint"==typeof n&&o?-n-1n:0;if(n&&s>n||s<u){let t="bigint"==typeof e?"n":"";throw new r.J5({max:n?`${n}${t}`:void 0,min:`${u}${t}`,signed:o,size:a,value:`${e}${t}`})}let c=`0x${(o&&s<0?(1n<<BigInt(8*a))+BigInt(s):s).toString(16)}`;return a?(0,i.vk)(c,{size:a}):c}let h=new TextEncoder;function f(e,t={}){return c(h.encode(e),t)}},8558:function(e,t,n){"use strict";n.d(t,{k:function(){return o}});var r=n(8627),i=n(8263);function o(e,t){let n=(e.details||"").toLowerCase(),o=e.walk(e=>e.code===i.M_.code);if(o instanceof r.G)return new i.M_({cause:e,message:o.details});if(i.M_.nodeMessage.test(n))return new i.M_({cause:e,message:e.details});if(i.Hh.nodeMessage.test(n))return new i.Hh({cause:e,maxFeePerGas:t?.maxFeePerGas});if(i.G$.nodeMessage.test(n))return new i.G$({cause:e,maxFeePerGas:t?.maxFeePerGas});if(i.ZI.nodeMessage.test(n))return new i.ZI({cause:e,nonce:t?.nonce});if(i.vU.nodeMessage.test(n))return new i.vU({cause:e,nonce:t?.nonce});if(i.se.nodeMessage.test(n))return new i.se({cause:e,nonce:t?.nonce});else if(i.C_.nodeMessage.test(n))return new i.C_({cause:e});else if(i.WF.nodeMessage.test(n))return new i.WF({cause:e,gas:t?.gas});else if(i.dR.nodeMessage.test(n))return new i.dR({cause:e,gas:t?.gas});else if(i.pZ.nodeMessage.test(n))return new i.pZ({cause:e});else if(i.cs.nodeMessage.test(n))return new i.cs({cause:e,maxFeePerGas:t?.maxFeePerGas,maxPriorityFeePerGas:t?.maxPriorityFeePerGas});return new i.cj({cause:e})}},2779:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(7517);function i(e){let t=e.transactions?.map(e=>"string"==typeof e?e:r.Tr(e));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,difficulty:e.difficulty?BigInt(e.difficulty):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:t,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}},2830:function(e,t,n){"use strict";function r(e,{format:t}){return t?Object.keys(t({})).reduce((t,n)=>(e?.hasOwnProperty(n)&&(t[n]=e[n]),t),{}):{}}n.d(t,{K:function(){return r}})},7517:function(e,t,n){"use strict";n.d(t,{Tr:function(){return o},c8:function(){return i}});var r=n(2436);let i={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559"};function o(e){let t={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?(0,r.ly)(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?(0,r.ly)(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?i[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return"legacy"===t.type&&(delete t.accessList,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),"eip2930"===t.type&&(delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),t}},2950:function(e,t,n){"use strict";n.d(t,{tG:function(){return o}});var r=n(5363);let i={legacy:"0x0",eip2930:"0x1",eip1559:"0x2"};function o(e){return{...e,gas:void 0!==e.gas?(0,r.eC)(e.gas):void 0,gasPrice:void 0!==e.gasPrice?(0,r.eC)(e.gasPrice):void 0,maxFeePerGas:void 0!==e.maxFeePerGas?(0,r.eC)(e.maxFeePerGas):void 0,maxPriorityFeePerGas:void 0!==e.maxPriorityFeePerGas?(0,r.eC)(e.maxPriorityFeePerGas):void 0,nonce:void 0!==e.nonce?(0,r.eC)(e.nonce):void 0,type:void 0!==e.type?i[e.type]:void 0,value:void 0!==e.value?(0,r.eC)(e.value):void 0}}},2662:function(e,t,n){"use strict";n.d(t,{e:function(){return u}});var r=n(9163),i=n(4941);let o=e=>(0,i.r)(e);var a=n(6084);let s=e=>(0,a.w)((0,r.O0)(e)),u=e=>s(o(e))},5554:function(e,t,n){"use strict";n.d(t,{o:function(){return u}});var r=n(7408),i=n(9163),o=n(4941),a=n(6084);let s=e=>(0,a.w)((0,i.O0)(e)),u=e=>(0,r.tP)(s((0,o.r)(e)),0,4)},4941:function(e,t,n){"use strict";n.d(t,{r:function(){return a}});var r=n(9416);let i=/((function|event)\s)?(.*)(\((.*)\))/;function o(e){let t=e.match(i);return{type:t?.[2]||void 0,name:t?.[3],params:t?.[5]||void 0}}let a=e=>{if("string"==typeof e){let t=o(e).name,n=function(e){let t=o(e).params,n=t?.split(",").map(e=>e.trim().split(" "));return n?.map(e=>({type:e[0],name:"indexed"===e[1]?e[2]:e[1],..."indexed"===e[1]?{indexed:!0}:{}}))}(e)||[];return`${t}(${n.map(({type:e})=>e).join(",")})`}return(0,r.t)(e)}},6084:function(e,t,n){"use strict";n.d(t,{w:function(){return s}});var r=n(5923),i=n(2754),o=n(9163),a=n(5363);function s(e,t){let n=(0,r.fr)((0,i.v)(e,{strict:!1})?(0,o.O0)(e):e);return"bytes"===(t||"hex")?n:(0,a.NC)(n)}},7951:function(e,t,n){"use strict";n.d(t,{S:function(){return i}});let r=new Map;function i({fn:e,id:t,shouldSplitBatch:n,wait:i=0}){let o=async()=>{let t=u();a();let n=t.map(({args:e})=>e);0!==n.length&&e(n).then(e=>{t.forEach(({pendingPromise:t},n)=>t.resolve?.([e[n],e]))}).catch(e=>{t.forEach(({pendingPromise:t})=>t.reject?.(e))})},a=()=>r.delete(t),s=()=>u().map(({args:e})=>e),u=()=>r.get(t)||[],c=e=>r.set(t,[...u(),e]);return{flush:a,async schedule(e){let t={},r=new Promise((e,n)=>{t.resolve=e,t.reject=n});return(n?.([...s(),e])&&o(),u().length>0)?c({args:e,pendingPromise:t}):(c({args:e,pendingPromise:t}),setTimeout(o,i)),r}}}},6485:function(e,t,n){"use strict";n.d(t,{J:function(){return i}});var r=n(7609);function i(e,{delay:t=100,retryCount:n=2,shouldRetry:i=()=>!0}={}){return new Promise((o,a)=>{let s=async({count:u=0}={})=>{let c=async({error:e})=>{let n="function"==typeof t?t({count:u,error:e}):t;n&&await (0,r.D)(n),s({count:u+1})};try{let t=await e();o(t)}catch(e){if(u<n&&await i({count:u,error:e}))return c({error:e});a(e)}};s()})}},40:function(e,t,n){"use strict";n.d(t,{P:function(){return r}});let r=(e,t,n)=>JSON.stringify(e,(e,n)=>{let r="bigint"==typeof n?n.toString():n;return"function"==typeof t?t(e,r):r},n)},8147:function(e,t,n){"use strict";n.d(t,{F:function(){return u}});var r=n(6297),i=n(4382),o=n(8263),a=n(5639),s=n(4190);function u(e){let{account:t,gasPrice:n,maxFeePerGas:u,maxPriorityFeePerGas:c,to:l}=e,h=t?(0,r.T)(t):void 0;if(h&&!(0,s.U)(h.address))throw new i.b({address:h.address});if(l&&!(0,s.U)(l))throw new i.b({address:l});if(void 0!==n&&(void 0!==u||void 0!==c))throw new a.xY;if(u&&u>2n**256n-1n)throw new o.Hh({maxFeePerGas:u});if(c&&u&&c>u)throw new o.cs({maxFeePerGas:u,maxPriorityFeePerGas:c})}},9405:function(e,t,n){"use strict";n.d(t,{cj:function(){return h},iC:function(){return l}});var r=n(5530),i=n(4382),o=n(4190),a=n(9682),s=n(5363);let u=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,c=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function l({domain:e,message:t,primaryType:n,types:l}){let h=(e,t)=>{for(let n of e){let{name:e,type:f}=n,d=t[e],p=f.match(c);if(p&&("number"==typeof d||"bigint"==typeof d)){let[e,t,n]=p;(0,s.eC)(d,{signed:"int"===t,size:parseInt(n)/8})}if("address"===f&&"string"==typeof d&&!(0,o.U)(d))throw new i.b({address:d});let g=f.match(u);if(g){let[e,t]=g;if(t&&(0,a.d)(d)!==parseInt(t))throw new r.KY({expectedSize:parseInt(t),givenSize:(0,a.d)(d)})}let v=l[f];v&&h(v,d)}};l.EIP712Domain&&e&&h(l.EIP712Domain,e),"EIP712Domain"!==n&&h(l[n],t)}function h({domain:e}){return["string"==typeof e?.name&&{name:"name",type:"string"},e?.version&&{name:"version",type:"string"},"number"==typeof e?.chainId&&{name:"chainId",type:"uint256"},e?.verifyingContract&&{name:"verifyingContract",type:"address"},e?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}},5117:function(e,t,n){"use strict";n.d(t,{d:function(){return o}});var r=n(2523),i=n(9419);function o(e,t="wei"){return(0,i.b)(e,r.ez[t])}},8174:function(e,t,n){"use strict";n.d(t,{o:function(){return o}});var r=n(2523),i=n(9419);function o(e,t="wei"){return(0,i.b)(e,r.Zn[t])}},9419:function(e,t,n){"use strict";function r(e,t){let n=e.toString(),r=n.startsWith("-");r&&(n=n.slice(1));let[i,o]=[(n=n.padStart(t,"0")).slice(0,n.length-t),n.slice(n.length-t)];return o=o.replace(/(0+)$/,""),`${r?"-":""}${i||"0"}${o?`.${o}`:""}`}n.d(t,{b:function(){return r}})},7609:function(e,t,n){"use strict";async function r(e){return new Promise(t=>setTimeout(t,e))}n.d(t,{D:function(){return r}})},208:function(e,t,n){"use strict";function r(){}n.d(t,{eM:function(){return eu},_g:function(){return eo},mA:function(){return ef},LN:function(){return ed},g0:function(){return ev}});let i="undefined"==typeof window||"Deno"in window;function o(){}function a(e,t,n){return y(e)?"function"==typeof t?{...n,queryKey:e,queryFn:t}:{...t,queryKey:e}:e}function s(e,t,n){return y(e)?"function"==typeof t?{...n,mutationKey:e,mutationFn:t}:{...t,mutationKey:e}:"function"==typeof e?{...t,mutationFn:e}:{...e}}function u(e,t,n){return y(e)?[{...t,queryKey:e},n]:[e||{},t]}function c(e,t){let{type:n="all",exact:r,fetchStatus:i,predicate:o,queryKey:a,stale:s}=e;if(y(a)){if(r){if(t.queryHash!==h(a,t.options))return!1}else{if(!d(t.queryKey,a))return!1}}if("all"!==n){let e=t.isActive();if("active"===n&&!e||"inactive"===n&&e)return!1}return("boolean"!=typeof s||t.isStale()===s)&&(void 0===i||i===t.state.fetchStatus)&&(!o||!!o(t))}function l(e,t){let{exact:n,fetching:r,predicate:i,mutationKey:o}=e;if(y(o)){if(!t.options.mutationKey)return!1;if(n){if(f(t.options.mutationKey)!==f(o))return!1}else{if(!d(t.options.mutationKey,o))return!1}}return("boolean"!=typeof r||"loading"===t.state.status===r)&&(!i||!!i(t))}function h(e,t){return((null==t?void 0:t.queryKeyHashFn)||f)(e)}function f(e){return JSON.stringify(e,(e,t)=>g(t)?Object.keys(t).sort().reduce((e,n)=>(e[n]=t[n],e),{}):t)}function d(e,t){return e===t||typeof e==typeof t&&!!e&&!!t&&"object"==typeof e&&"object"==typeof t&&!Object.keys(t).some(n=>!d(e[n],t[n]))}function p(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function g(e){if(!v(e))return!1;let t=e.constructor;if(void 0===t)return!0;let n=t.prototype;return!!(v(n)&&n.hasOwnProperty("isPrototypeOf"))}function v(e){return"[object Object]"===Object.prototype.toString.call(e)}function y(e){return Array.isArray(e)}function m(e){return new Promise(t=>{setTimeout(t,e)})}function b(e){m(0).then(e)}let _=console,w=function(){let e=[],t=0,n=e=>{e()},r=e=>{e()},i=r=>{t?e.push(r):b(()=>{n(r)})},o=()=>{let t=e;e=[],t.length&&b(()=>{r(()=>{t.forEach(e=>{n(e)})})})};return{batch:e=>{let n;t++;try{n=e()}finally{--t||o()}return n},batchCalls:e=>(...t)=>{i(()=>{e(...t)})},schedule:i,setNotifyFunction:e=>{n=e},setBatchNotifyFunction:e=>{r=e}}}();class E{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){let t={listener:e};return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}class I extends E{constructor(){super(),this.setup=e=>{if(!i&&window.addEventListener){let t=()=>e();return window.addEventListener("visibilitychange",t,!1),window.addEventListener("focus",t,!1),()=>{window.removeEventListener("visibilitychange",t),window.removeEventListener("focus",t)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;null==(e=this.cleanup)||e.call(this),this.cleanup=void 0}}setEventListener(e){var t;this.setup=e,null==(t=this.cleanup)||t.call(this),this.cleanup=e(e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()})}setFocused(e){this.focused!==e&&(this.focused=e,this.onFocus())}onFocus(){this.listeners.forEach(({listener:e})=>{e()})}isFocused(){return"boolean"==typeof this.focused?this.focused:"undefined"==typeof document||[void 0,"visible","prerender"].includes(document.visibilityState)}}let C=new I,T=["online","offline"];class S extends E{constructor(){super(),this.setup=e=>{if(!i&&window.addEventListener){let t=()=>e();return T.forEach(e=>{window.addEventListener(e,t,!1)}),()=>{T.forEach(e=>{window.removeEventListener(e,t)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;null==(e=this.cleanup)||e.call(this),this.cleanup=void 0}}setEventListener(e){var t;this.setup=e,null==(t=this.cleanup)||t.call(this),this.cleanup=e(e=>{"boolean"==typeof e?this.setOnline(e):this.onOnline()})}setOnline(e){this.online!==e&&(this.online=e,this.onOnline())}onOnline(){this.listeners.forEach(({listener:e})=>{e()})}isOnline(){return"boolean"==typeof this.online?this.online:"undefined"==typeof navigator||void 0===navigator.onLine||navigator.onLine}}let k=new S;function D(e){return Math.min(1e3*2**e,3e4)}function A(e){return(null!=e?e:"online")!=="online"||k.isOnline()}class P{constructor(e){this.revert=null==e?void 0:e.revert,this.silent=null==e?void 0:e.silent}}function N(e){return e instanceof P}function x(e){let t,n,r,i=!1,o=0,a=!1,s=new Promise((e,t)=>{n=e,r=t}),u=()=>!C.isFocused()||"always"!==e.networkMode&&!k.isOnline(),c=r=>{a||(a=!0,null==e.onSuccess||e.onSuccess(r),null==t||t(),n(r))},l=n=>{a||(a=!0,null==e.onError||e.onError(n),null==t||t(),r(n))},h=()=>new Promise(n=>{t=e=>{let t=a||!u();return t&&n(e),t},null==e.onPause||e.onPause()}).then(()=>{t=void 0,a||null==e.onContinue||e.onContinue()}),f=()=>{let t;if(!a){try{t=e.fn()}catch(e){t=Promise.reject(e)}Promise.resolve(t).then(c).catch(t=>{var n,r;if(a)return;let s=null!=(n=e.retry)?n:3,c=null!=(r=e.retryDelay)?r:D,d="function"==typeof c?c(o,t):c,p=!0===s||"number"==typeof s&&o<s||"function"==typeof s&&s(o,t);if(i||!p){l(t);return}o++,null==e.onFail||e.onFail(o,t),m(d).then(()=>{if(u())return h()}).then(()=>{i?l(t):f()})})}};return A(e.networkMode)?f():h().then(f),{promise:s,cancel:t=>{a||(l(new P(t)),null==e.abort||e.abort())},continue:()=>(null==t?void 0:t())?s:Promise.resolve(),cancelRetry:()=>{i=!0},continueRetry:()=>{i=!1}}}class O{destroy(){this.clearGcTimeout()}scheduleGc(){var e;this.clearGcTimeout(),"number"==typeof(e=this.cacheTime)&&e>=0&&e!==1/0&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(e){this.cacheTime=Math.max(this.cacheTime||0,null!=e?e:i?1/0:3e5)}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class R extends O{constructor(e){super(),this.abortSignalConsumed=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.logger=e.logger||_,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||function(e){let t="function"==typeof e.initialData?e.initialData():e.initialData,n=void 0!==t,r=n?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?null!=r?r:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"loading",fetchStatus:"idle"}}(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.cache.remove(this)}setData(e,t){var n,r;let i=(n=this.state.data,null!=(r=this.options).isDataEqual&&r.isDataEqual(n,e)?n:"function"==typeof r.structuralSharing?r.structuralSharing(n,e):!1!==r.structuralSharing?function e(t,n){if(t===n)return t;let r=p(t)&&p(n);if(r||g(t)&&g(n)){let i=r?t.length:Object.keys(t).length,o=r?n:Object.keys(n),a=o.length,s=r?[]:{},u=0;for(let i=0;i<a;i++){let a=r?i:o[i];s[a]=e(t[a],n[a]),s[a]===t[a]&&u++}return i===a&&u===i?t:s}return n}(n,e):e);return this.dispatch({data:i,type:"success",dataUpdatedAt:null==t?void 0:t.updatedAt,manual:null==t?void 0:t.manual}),i}setState(e,t){this.dispatch({type:"setState",state:e,setStateOptions:t})}cancel(e){var t;let n=this.promise;return null==(t=this.retryer)||t.cancel(e),n?n.then(o).catch(o):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(e=>!1!==e.options.enabled)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!Math.max(this.state.dataUpdatedAt+(e||0)-Date.now(),0)}onFocus(){var e;let t=this.observers.find(e=>e.shouldFetchOnWindowFocus());t&&t.refetch({cancelRefetch:!1}),null==(e=this.retryer)||e.continue()}onOnline(){var e;let t=this.observers.find(e=>e.shouldFetchOnReconnect());t&&t.refetch({cancelRefetch:!1}),null==(e=this.retryer)||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(e,t){var n,r,i,o;if("idle"!==this.state.fetchStatus){if(this.state.dataUpdatedAt&&null!=t&&t.cancelRefetch)this.cancel({silent:!0});else if(this.promise)return null==(i=this.retryer)||i.continueRetry(),this.promise}if(e&&this.setOptions(e),!this.options.queryFn){let e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}let a=function(){if("function"==typeof AbortController)return new AbortController}(),s={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},u=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>{if(a)return this.abortSignalConsumed=!0,a.signal}})};u(s);let c={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(s)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'")};u(c),null==(n=this.options.behavior)||n.onFetch(c),this.revertState=this.state,("idle"===this.state.fetchStatus||this.state.fetchMeta!==(null==(r=c.fetchOptions)?void 0:r.meta))&&this.dispatch({type:"fetch",meta:null==(o=c.fetchOptions)?void 0:o.meta});let l=e=>{if(N(e)&&e.silent||this.dispatch({type:"error",error:e}),!N(e)){var t,n,r,i;null==(t=(n=this.cache.config).onError)||t.call(n,e,this),null==(r=(i=this.cache.config).onSettled)||r.call(i,this.state.data,e,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=x({fn:c.fetchFn,abort:null==a?void 0:a.abort.bind(a),onSuccess:e=>{var t,n,r,i;if(void 0===e){l(Error(this.queryHash+" data is undefined"));return}this.setData(e),null==(t=(n=this.cache.config).onSuccess)||t.call(n,e,this),null==(r=(i=this.cache.config).onSettled)||r.call(i,e,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:l,onFail:(e,t)=>{this.dispatch({type:"failed",failureCount:e,error:t})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(e){this.state=(t=>{var n,r;switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null!=(n=e.meta)?n:null,fetchStatus:A(this.options.networkMode)?"fetching":"paused",...!t.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:null!=(r=e.dataUpdatedAt)?r:Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":let i=e.error;if(N(i)&&i.revert&&this.revertState)return{...this.revertState,fetchStatus:"idle"};return{...t,error:i,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),w.batch(()=>{this.observers.forEach(t=>{t.onQueryUpdate(e)}),this.cache.notify({query:this,type:"updated",action:e})})}}class M extends E{constructor(e){super(),this.config=e||{},this.queries=[],this.queriesMap={}}build(e,t,n){var r;let i=t.queryKey,o=null!=(r=t.queryHash)?r:h(i,t),a=this.get(o);return a||(a=new R({cache:this,logger:e.getLogger(),queryKey:i,queryHash:o,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(a)),a}add(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"added",query:e}))}remove(e){let t=this.queriesMap[e.queryHash];t&&(e.destroy(),this.queries=this.queries.filter(t=>t!==e),t===e&&delete this.queriesMap[e.queryHash],this.notify({type:"removed",query:e}))}clear(){w.batch(()=>{this.queries.forEach(e=>{this.remove(e)})})}get(e){return this.queriesMap[e]}getAll(){return this.queries}find(e,t){let[n]=u(e,t);return void 0===n.exact&&(n.exact=!0),this.queries.find(e=>c(n,e))}findAll(e,t){let[n]=u(e,t);return Object.keys(n).length>0?this.queries.filter(e=>c(n,e)):this.queries}notify(e){w.batch(()=>{this.listeners.forEach(({listener:t})=>{t(e)})})}onFocus(){w.batch(()=>{this.queries.forEach(e=>{e.onFocus()})})}onOnline(){w.batch(()=>{this.queries.forEach(e=>{e.onOnline()})})}}class L extends O{constructor(e){super(),this.defaultOptions=e.defaultOptions,this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.logger=e.logger||_,this.observers=[],this.state=e.state||F(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(e){this.dispatch({type:"setState",state:e})}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.observers=this.observers.filter(t=>t!==e),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.observers.length||("loading"===this.state.status?this.scheduleGc():this.mutationCache.remove(this))}continue(){var e,t;return null!=(e=null==(t=this.retryer)?void 0:t.continue())?e:this.execute()}async execute(){var e,t,n,r,i,o,a,s,u,c,l,h,f,d,p,g,v,y,m,b;let _="loading"===this.state.status;try{if(!_){this.dispatch({type:"loading",variables:this.options.variables}),await (null==(u=(c=this.mutationCache.config).onMutate)?void 0:u.call(c,this.state.variables,this));let e=await (null==(l=(h=this.options).onMutate)?void 0:l.call(h,this.state.variables));e!==this.state.context&&this.dispatch({type:"loading",context:e,variables:this.state.variables})}let f=await (()=>{var e;return this.retryer=x({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(e,t)=>{this.dispatch({type:"failed",failureCount:e,error:t})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:null!=(e=this.options.retry)?e:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise})();return await (null==(e=(t=this.mutationCache.config).onSuccess)?void 0:e.call(t,f,this.state.variables,this.state.context,this)),await (null==(n=(r=this.options).onSuccess)?void 0:n.call(r,f,this.state.variables,this.state.context)),await (null==(i=(o=this.mutationCache.config).onSettled)?void 0:i.call(o,f,null,this.state.variables,this.state.context,this)),await (null==(a=(s=this.options).onSettled)?void 0:a.call(s,f,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:f}),f}catch(e){try{throw await (null==(f=(d=this.mutationCache.config).onError)?void 0:f.call(d,e,this.state.variables,this.state.context,this)),await (null==(p=(g=this.options).onError)?void 0:p.call(g,e,this.state.variables,this.state.context)),await (null==(v=(y=this.mutationCache.config).onSettled)?void 0:v.call(y,void 0,e,this.state.variables,this.state.context,this)),await (null==(m=(b=this.options).onSettled)?void 0:m.call(b,void 0,e,this.state.variables,this.state.context)),e}finally{this.dispatch({type:"error",error:e})}}}dispatch(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"loading":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!A(this.options.networkMode),status:"loading",variables:e.variables};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"};case"setState":return{...t,...e.state}}})(this.state),w.batch(()=>{this.observers.forEach(t=>{t.onMutationUpdate(e)}),this.mutationCache.notify({mutation:this,type:"updated",action:e})})}}function F(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class j extends E{constructor(e){super(),this.config=e||{},this.mutations=[],this.mutationId=0}build(e,t,n){let r=new L({mutationCache:this,logger:e.getLogger(),mutationId:++this.mutationId,options:e.defaultMutationOptions(t),state:n,defaultOptions:t.mutationKey?e.getMutationDefaults(t.mutationKey):void 0});return this.add(r),r}add(e){this.mutations.push(e),this.notify({type:"added",mutation:e})}remove(e){this.mutations=this.mutations.filter(t=>t!==e),this.notify({type:"removed",mutation:e})}clear(){w.batch(()=>{this.mutations.forEach(e=>{this.remove(e)})})}getAll(){return this.mutations}find(e){return void 0===e.exact&&(e.exact=!0),this.mutations.find(t=>l(e,t))}findAll(e){return this.mutations.filter(t=>l(e,t))}notify(e){w.batch(()=>{this.listeners.forEach(({listener:t})=>{t(e)})})}resumePausedMutations(){var e;return this.resuming=(null!=(e=this.resuming)?e:Promise.resolve()).then(()=>{let e=this.mutations.filter(e=>e.state.isPaused);return w.batch(()=>e.reduce((e,t)=>e.then(()=>t.continue().catch(o)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function U(e,t){return null==e.getNextPageParam?void 0:e.getNextPageParam(t[t.length-1],t)}class q{constructor(e={}){this.queryCache=e.queryCache||new M,this.mutationCache=e.mutationCache||new j,this.logger=e.logger||_,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,1===this.mountCount&&(this.unsubscribeFocus=C.subscribe(()=>{C.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=k.subscribe(()=>{k.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var e,t;this.mountCount--,0===this.mountCount&&(null==(e=this.unsubscribeFocus)||e.call(this),this.unsubscribeFocus=void 0,null==(t=this.unsubscribeOnline)||t.call(this),this.unsubscribeOnline=void 0)}isFetching(e,t){let[n]=u(e,t);return n.fetchStatus="fetching",this.queryCache.findAll(n).length}isMutating(e){return this.mutationCache.findAll({...e,fetching:!0}).length}getQueryData(e,t){var n;return null==(n=this.queryCache.find(e,t))?void 0:n.state.data}ensureQueryData(e,t,n){let r=a(e,t,n),i=this.getQueryData(r.queryKey);return i?Promise.resolve(i):this.fetchQuery(r)}getQueriesData(e){return this.getQueryCache().findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,n){let r=this.queryCache.find(e),i=null==r?void 0:r.state.data,o="function"==typeof t?t(i):t;if(void 0===o)return;let s=a(e),u=this.defaultQueryOptions(s);return this.queryCache.build(this,u).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return w.batch(()=>this.getQueryCache().findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,n)]))}getQueryState(e,t){var n;return null==(n=this.queryCache.find(e,t))?void 0:n.state}removeQueries(e,t){let[n]=u(e,t),r=this.queryCache;w.batch(()=>{r.findAll(n).forEach(e=>{r.remove(e)})})}resetQueries(e,t,n){let[r,i]=u(e,t,n),o=this.queryCache,a={type:"active",...r};return w.batch(()=>(o.findAll(r).forEach(e=>{e.reset()}),this.refetchQueries(a,i)))}cancelQueries(e,t,n){let[r,i={}]=u(e,t,n);return void 0===i.revert&&(i.revert=!0),Promise.all(w.batch(()=>this.queryCache.findAll(r).map(e=>e.cancel(i)))).then(o).catch(o)}invalidateQueries(e,t,n){let[r,i]=u(e,t,n);return w.batch(()=>{var e,t;if(this.queryCache.findAll(r).forEach(e=>{e.invalidate()}),"none"===r.refetchType)return Promise.resolve();let n={...r,type:null!=(e=null!=(t=r.refetchType)?t:r.type)?e:"active"};return this.refetchQueries(n,i)})}refetchQueries(e,t,n){let[r,i]=u(e,t,n),a=Promise.all(w.batch(()=>this.queryCache.findAll(r).filter(e=>!e.isDisabled()).map(e=>{var t;return e.fetch(void 0,{...i,cancelRefetch:null==(t=null==i?void 0:i.cancelRefetch)||t,meta:{refetchPage:r.refetchPage}})}))).then(o);return null!=i&&i.throwOnError||(a=a.catch(o)),a}fetchQuery(e,t,n){let r=a(e,t,n),i=this.defaultQueryOptions(r);void 0===i.retry&&(i.retry=!1);let o=this.queryCache.build(this,i);return o.isStaleByTime(i.staleTime)?o.fetch(i):Promise.resolve(o.state.data)}prefetchQuery(e,t,n){return this.fetchQuery(e,t,n).then(o).catch(o)}fetchInfiniteQuery(e,t,n){let r=a(e,t,n);return r.behavior={onFetch:e=>{e.fetchFn=()=>{var t,n,r,i,o,a,s;let u;let c=null==(t=e.fetchOptions)?void 0:null==(n=t.meta)?void 0:n.refetchPage,l=null==(r=e.fetchOptions)?void 0:null==(i=r.meta)?void 0:i.fetchMore,h=null==l?void 0:l.pageParam,f=(null==l?void 0:l.direction)==="forward",d=(null==l?void 0:l.direction)==="backward",p=(null==(o=e.state.data)?void 0:o.pages)||[],g=(null==(a=e.state.data)?void 0:a.pageParams)||[],v=g,y=!1,m=t=>{Object.defineProperty(t,"signal",{enumerable:!0,get:()=>{var t,n;return null!=(t=e.signal)&&t.aborted?y=!0:null==(n=e.signal)||n.addEventListener("abort",()=>{y=!0}),e.signal}})},b=e.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+e.options.queryHash+"'")),_=(e,t,n,r)=>(v=r?[t,...v]:[...v,t],r?[n,...e]:[...e,n]),w=(t,n,r,i)=>{if(y)return Promise.reject("Cancelled");if(void 0===r&&!n&&t.length)return Promise.resolve(t);let o={queryKey:e.queryKey,pageParam:r,meta:e.options.meta};return m(o),Promise.resolve(b(o)).then(e=>_(t,r,e,i))};if(p.length){if(f){let t=void 0!==h,n=t?h:U(e.options,p);u=w(p,t,n)}else if(d){let t=void 0!==h,n=t?h:null==(s=e.options).getPreviousPageParam?void 0:s.getPreviousPageParam(p[0],p);u=w(p,t,n,!0)}else{v=[];let t=void 0===e.options.getNextPageParam;u=!c||!p[0]||c(p[0],0,p)?w([],t,g[0]):Promise.resolve(_([],g[0],p[0]));for(let n=1;n<p.length;n++)u=u.then(r=>{if(!c||!p[n]||c(p[n],n,p)){let i=t?g[n]:U(e.options,r);return w(r,t,i)}return Promise.resolve(_(r,g[n],p[n]))})}}else u=w([]);return u.then(e=>({pages:e,pageParams:v}))}}},this.fetchQuery(r)}prefetchInfiniteQuery(e,t,n){return this.fetchInfiniteQuery(e,t,n).then(o).catch(o)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(e){this.defaultOptions=e}setQueryDefaults(e,t){let n=this.queryDefaults.find(t=>f(e)===f(t.queryKey));n?n.defaultOptions=t:this.queryDefaults.push({queryKey:e,defaultOptions:t})}getQueryDefaults(e){if(!e)return;let t=this.queryDefaults.find(t=>d(e,t.queryKey));return null==t?void 0:t.defaultOptions}setMutationDefaults(e,t){let n=this.mutationDefaults.find(t=>f(e)===f(t.mutationKey));n?n.defaultOptions=t:this.mutationDefaults.push({mutationKey:e,defaultOptions:t})}getMutationDefaults(e){if(!e)return;let t=this.mutationDefaults.find(t=>d(e,t.mutationKey));return null==t?void 0:t.defaultOptions}defaultQueryOptions(e){if(null!=e&&e._defaulted)return e;let t={...this.defaultOptions.queries,...this.getQueryDefaults(null==e?void 0:e.queryKey),...e,_defaulted:!0};return!t.queryHash&&t.queryKey&&(t.queryHash=h(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.useErrorBoundary&&(t.useErrorBoundary=!!t.suspense),t}defaultMutationOptions(e){return null!=e&&e._defaulted?e:{...this.defaultOptions.mutations,...this.getMutationDefaults(null==e?void 0:e.mutationKey),...e,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}function B(e){return e.state.isPaused}function V(e){return"success"===e.state.status}let W=["added","removed","updated"];function K(e){return W.includes(e)}async function G({queryClient:e,persister:t,maxAge:n=864e5,buster:r="",hydrateOptions:i}){try{let o=await t.restoreClient();if(o){if(o.timestamp){let a=Date.now()-o.timestamp>n,s=o.buster!==r;a||s?t.removeClient():function(e,t,n){if("object"!=typeof t||null===t)return;let r=e.getMutationCache(),i=e.getQueryCache(),o=t.mutations||[],a=t.queries||[];o.forEach(t=>{var i;r.build(e,{...null==n?void 0:null==(i=n.defaultOptions)?void 0:i.mutations,mutationKey:t.mutationKey},t.state)}),a.forEach(({queryKey:t,state:r,queryHash:o})=>{var a;let s=i.get(o);if(s){if(s.state.dataUpdatedAt<r.dataUpdatedAt){let{fetchStatus:e,...t}=r;s.setState(t)}return}i.build(e,{...null==n?void 0:null==(a=n.defaultOptions)?void 0:a.queries,queryKey:t,queryHash:o},{...r,fetchStatus:"idle"})})}(e,o.clientState,i)}else t.removeClient()}}catch(e){t.removeClient()}}async function z({queryClient:e,persister:t,buster:n="",dehydrateOptions:r}){let i={buster:n,timestamp:Date.now(),clientState:function(e,t={}){let n=[],r=[];if(!1!==t.dehydrateMutations){let r=t.shouldDehydrateMutation||B;e.getMutationCache().getAll().forEach(e=>{r(e)&&n.push({mutationKey:e.options.mutationKey,state:e.state})})}if(!1!==t.dehydrateQueries){let n=t.shouldDehydrateQuery||V;e.getQueryCache().getAll().forEach(e=>{n(e)&&r.push({state:e.state,queryKey:e.queryKey,queryHash:e.queryHash})})}return{mutations:n,queries:r}}(e,r)};await t.persistClient(i)}var H=n(8367),$=n(132);let Q=$.createContext(void 0),Y=$.createContext(!1);function X(e,t){return e||(t&&"undefined"!=typeof window?(window.ReactQueryClientContext||(window.ReactQueryClientContext=Q),window.ReactQueryClientContext):Q)}let J=({context:e}={})=>{let t=$.useContext(X(e,$.useContext(Y)));if(!t)throw Error("No QueryClient set, use QueryClientProvider to set one");return t},Z=({client:e,children:t,context:n,contextSharing:r=!1})=>{$.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]);let i=X(n,r);return $.createElement(Y.Provider,{value:!n&&r},$.createElement(i.Provider,{value:e},t))};var ee=n(6996);class et extends E{constructor(e,t){super(),this.client=e,this.setOptions(t),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;let n=this.options;this.options=this.client.defaultMutationOptions(e),!function(e,t){if(e&&!t||t&&!e)return!1;for(let n in e)if(e[n]!==t[n])return!1;return!0}(n,this.options)&&this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),null==(t=this.currentMutation)||t.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var e;null==(e=this.currentMutation)||e.removeObserver(this)}}onMutationUpdate(e){this.updateResult();let t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:void 0!==e?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){let e=this.currentMutation?this.currentMutation.state:F(),t={...e,isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset};this.currentResult=t}notify(e){w.batch(()=>{if(this.mutateOptions&&this.hasListeners()){var t,n,r,i,o,a,s,u;e.onSuccess?(null==(t=(n=this.mutateOptions).onSuccess)||t.call(n,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(r=(i=this.mutateOptions).onSettled)||r.call(i,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)):e.onError&&(null==(o=(a=this.mutateOptions).onError)||o.call(a,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(s=(u=this.mutateOptions).onSettled)||s.call(u,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context))}e.listeners&&this.listeners.forEach(({listener:e})=>{e(this.currentResult)})})}}let en=ee.useSyncExternalStore;function er(){}var ei=n(5485);function eo({queryClient:e=new q({defaultOptions:{queries:{cacheTime:864e5,networkMode:"offlineFirst",refetchOnWindowFocus:!1,retry:0},mutations:{networkMode:"offlineFirst"}}}),storage:t=(0,H.o6)({storage:"undefined"!=typeof window&&window.localStorage?window.localStorage:H.wp}),persister:n="undefined"!=typeof window?function({storage:e,key:t="REACT_QUERY_OFFLINE_CACHE",throttleTime:n=1e3,serialize:i=JSON.stringify,deserialize:o=JSON.parse,retry:a}){if(e){let r=n=>{try{e.setItem(t,i(n));return}catch(e){return e}};return{persistClient:function(e,t=100){let n,r=null;return function(...i){n=i,null===r&&(r=setTimeout(()=>{e(...n),r=null},t))}}(e=>{let t=e,n=r(t),i=0;for(;n&&t;)i++,(t=null==a?void 0:a({persistedClient:t,error:n,errorCount:i}))&&(n=r(t))},n),restoreClient:()=>{let n=e.getItem(t);if(n)return o(n)},removeClient:()=>{e.removeItem(t)}}}return{persistClient:r,restoreClient:()=>void 0,removeClient:r}}({key:"cache",storage:t,serialize:e=>e,deserialize:e=>e}):void 0,...i}){let o=(0,H._g)({...i,storage:t});if(n){var a;let t,r;r=!1,G(a={queryClient:e,persister:n,dehydrateOptions:{shouldDehydrateQuery:e=>0!==e.cacheTime&&!1!==e.queryKey[0].persist}}).then(()=>{r||(t=function(e){let t=e.queryClient.getQueryCache().subscribe(t=>{K(t.type)&&z(e)}),n=e.queryClient.getMutationCache().subscribe(t=>{K(t.type)&&z(e)});return()=>{t(),n()}}(a))})}return Object.assign(o,{queryClient:e})}var ea=$.createContext(void 0),es=$.createContext(void 0);function eu({children:e,config:t}){return $.createElement(ea.Provider,{children:$.createElement(Z,{children:e,client:t.queryClient,context:es}),value:t})}function ec(){let e=$.useContext(ea);if(!e)throw Error("`useConfig` must be used within `WagmiConfig`.\n\nRead more: https://wagmi.sh/react/WagmiConfig");return e}ee.useSyncExternalStore;var el=e=>"object"==typeof e&&!Array.isArray(e);function eh(e,t,n=t,r=H.vZ){let i=$.useRef([]),o=(0,ei.useSyncExternalStoreWithSelector)(e,t,n,e=>e,(e,t)=>{if(el(e)&&el(t)&&i.current.length){for(let n of i.current)if(!r(e[n],t[n]))return!1;return!0}return r(e,t)});if(el(o)){let e={...o};return Object.defineProperties(e,Object.entries(e).reduce((e,[t,n])=>({...e,[t]:{configurable:!1,enumerable:!0,get:()=>(i.current.includes(t)||i.current.push(t),n)}}),{})),e}return o}function ef({onConnect:e,onDisconnect:t}={}){let n=ec(),r=eh($.useCallback(e=>(0,H.uH)(e),[n]),H.D0),i=$.useRef(),o=i.current;return $.useEffect(()=>{o?.status!=="connected"&&"connected"===r.status&&e?.({address:r.address,connector:r.connector,isReconnected:o?.status==="reconnecting"||o?.status===void 0}),o?.status==="connected"&&"disconnected"===r.status&&t?.(),i.current=r},[e,t,o,r]),r}function ed(){let e=ec();return eh((0,$.useCallback)(e=>(0,H.QC)(e),[e]),H.Hy)}var ep=e=>[{entity:"switchNetwork",...e}],eg=e=>{let{chainId:t}=e;if(!t)throw Error("chainId is required");return(0,H.If)({chainId:t})};function ev({chainId:e,throwForSwitchChainNotSupported:t,onError:n,onMutate:r,onSettled:i,onSuccess:o}={}){let a,u;let c=ec(),l=function(){let[,e]=$.useReducer(e=>e+1,0);return e}(),{data:h,error:f,isError:d,isIdle:p,isLoading:g,isSuccess:v,mutate:y,mutateAsync:m,reset:b,status:_,variables:E}=function(e,t,n){var r,i;let o=s(e,void 0,void 0),a=J({context:o.context}),[u]=$.useState(()=>new et(a,o));$.useEffect(()=>{u.setOptions(o)},[u,o]);let c=en($.useCallback(e=>u.subscribe(w.batchCalls(e)),[u]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),l=$.useCallback((e,t)=>{u.mutate(e,t).catch(er)},[u]);if(c.error&&(r=u.options.useErrorBoundary,i=[c.error],"function"==typeof r?r(...i):!!r))throw c.error;return{...c,mutate:l,mutateAsync:c.mutate}}({context:es,...s(ep({chainId:e}),eg,{onError:n,onMutate:r,onSettled:i,onSuccess:o})}),I=$.useCallback(t=>y({chainId:t??e}),[e,y]),C=$.useCallback(t=>m({chainId:t??e}),[e,m]);$.useEffect(()=>c.subscribe(({chains:e,connector:t})=>({chains:e,connector:t}),l),[c,l]);let T=!!c.connector?.switchChain;return(t||T)&&(a=I,u=C),{chains:c.chains??[],data:h,error:f,isError:d,isIdle:p,isLoading:g,isSuccess:v,pendingChainId:E?.chainId,reset:b,status:_,switchNetwork:a,switchNetworkAsync:u,variables:E}}}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[774,179],function(){return t(1118),t(6767)}),_N_E=e.O()}]);